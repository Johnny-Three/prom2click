commit ecc24b554ddfb6134b6a4267fd36dc3ef037ef44
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Dec 24 12:13:48 2017 +0000

    Hide block duration flags. (#3618)
    
    Users are starting to use these mistakenly thinking they'll help
    with issues, and thus causing some confusion.
    Thus hide them and make it clear that they're only there for testing
    reasons.

commit fba80da6356513f8658ef7cc7f8f425060d88438
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Dec 23 17:21:38 2017 +0000

    Fix default of read_recent to be false. (#3617)
    
    This is what is documented in the migration guide, and the default settings
    should make sense for a true long term storage.
    
    Document the setting.

commit b418063d1ad1b58a6dc482c645a24604adee8373
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Dec 23 14:06:37 2017 +0000

    Add tests for negative selectors. (#3616)
    
    https://github.com/prometheus/prometheus/issues/3575

commit d76d5de66fa486ecece0777fd53dcfe61e23a09b
Author: Callum Styan <callumstyan@gmail.com>
Date:   Thu Nov 30 23:54:40 2017 -0800

    refactor to make timestamp collector work for multiple file_sd's

commit a00fc883c377f50816f48b089fcb2f789263f3fc
Author: KalivarapuReshma <cs14btech11042@iith.ac.in>
Date:   Sat Aug 12 22:01:31 2017 +0530

    Add metric for timestamp of the files file_sd is using.

commit 384903af2e1e39fe49173069e7cdf9715d32cbad
Merge: a8ff643 ee9ae28
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Sat Dec 23 08:30:10 2017 +0530

    Merge pull request #3613 from Gouthamve/update-tsdb
    
    vendor: update tsdb

commit ee9ae2807a23fb0d34b420e29d57848266f63243
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Dec 22 22:52:59 2017 +0530

    vendor: update tsdb
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit a8ff643464ee5f3cf97f1c55c0aab44796f09167
Author: Lovisa Svallingson <applegrain@users.noreply.github.com>
Date:   Thu Dec 21 10:58:05 2017 -0700

    Implement browsing of previous query expressions (#3486)

commit 78625f85a70dce5033a5cf13a9658cbd92444dd2
Author: pasquier-s <spasquie@redhat.com>
Date:   Thu Dec 21 11:07:43 2017 +0100

    Fix race condition on file SD (#3468)
    
    The file discovery should only stop the watcher if it has been created
    otherwise it may trigger a segmentation fault.

commit 2881d73ed801bc66b9454ac0cebe9fbd45ecc3cf
Merge: c3f9238 587dec9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Dec 19 12:56:34 2017 +0100

    Merge pull request #3362 from krasi-georgiev/discovery-refactoring
    
    Decouple the discovery and refactor the retrieval package

commit c3f9238756d1ac8ba3521bedb6986db89e61e5cc
Author: James Turnbull <james@lovedthanlost.net>
Date:   Tue Dec 19 03:04:06 2017 -0500

    Updated alert templating docs (#3596)
    
    The docs suggest that alert templating only works in the summary and
    description annotation fields. Some testing and a review of the code
    suggests this is no longer true and that you can template any
    annotation field.

commit 9c9f96b2c05fe930f5fec06293af4d9b84380e6d
Merge: a8cce41 7406626
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Dec 18 22:12:13 2017 -0600

    Merge pull request #3529 from krasi-georgiev/main-integration-test
    
    main.go integration test for Startup interrupting.

commit 587dec9eb970531cddc7f1803d258e72129b5aa0
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Mon Dec 18 19:41:31 2017 +0000

    rebased and resolved conflicts with the new Discovery GUI page
    
    Signed-off-by: Krasi Georgiev <krasi.root@gmail.com>

commit 60ef2016d508545f0e8b575a954899cae37a96e2
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Sun Dec 3 17:14:08 2017 +0000

    add a cancel func to the scrape pool as it is needed in the scrape loop select block

commit 80182a5d82d0f29fe8ec483f2ec1ae6d10f9f1de
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Sun Dec 3 13:56:28 2017 +0000

    use poolKey as the pool map key to avoid multi dimensional maps

commit 1ec76d1950862c1cd5263065616212a97670449d
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Fri Dec 1 12:59:24 2017 +0000

    rearange the contexts variables and logic
    split the groupsMerge function to set and get
    other small nits

commit 6ff1d5c51e3cb0e0df58aa90a473317e25c6d4ac
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Nov 29 23:56:57 2017 +0000

    add the scrape manager config reloader
    handle errors with invalid scrape config

commit b0d4f6ee08632e09d0b0cc8ec0b2a0cbf61b5861
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Nov 29 23:16:36 2017 +0000

    resolved merge confilc in main.go

commit f2df712166ef4e16e69d8aace76202619483c0f8
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Nov 29 22:56:08 2017 +0000

    updated README

commit aca8f85699211c2453f0121a4015975c605fc2dd
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Nov 29 22:52:38 2017 +0000

    fixed the tests

commit fe6c544532360a09c3cbdc6d235d6798b366263d
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Nov 29 22:38:52 2017 +0000

    some renaming and comments fixes.
    remove some select state that is most likely obsoleete and hoepfully doesn't braje anything :)
    merge targets will sort by Discoverer name so we can have consistent tests for the maps.

commit f5c2c5ff8fc8e21f9bfaa23d0f81c8245ba8632e
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Mon Nov 27 01:59:34 2017 +0000

    brake the start provider func so that can run unit tests against it.

commit c5cb0d2910692cfd77b36d7d270677f58f55d3f9
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Sun Nov 26 22:18:05 2017 +0000

    simplify naming and API.

commit 9c61f0e8a0c1d4f83d06e003af610a7d671287b2
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Sun Nov 26 15:15:15 2017 +0000

    scrape pool doesn't rely on context as Stop() needs to be blocking to prevent Scrape loops trying to write to a closed TSDB storage.

commit e405e2f1ea2156f76a7e70f5471b88a590a8e24a
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Sat Nov 25 13:13:54 2017 +0000

    refactored discovery

commit a8cce41882e5d94f876d93c1b7c29d37a32f58eb
Author: Bryan Boreham <bjboreham@gmail.com>
Date:   Sun Dec 17 15:15:04 2017 +0000

    Set MaxIdleConnsPerHost alongside MaxIdleConns (#3592)
    
    Otherwise it defaults to 2, and Go will close extra connections as
    soon as a request is finished.
    See https://github.com/golang/go/issues/13801

commit 9083d41d3a788f750d520a3975dced39644471a9
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Dec 14 12:54:32 2017 +0000

    Add 2.0 stability guarantees (#3484)
    
    As discussed generally consider SDs as unstable, as realistically they
    are never going to be. Drop the words "experimental/beta" from most
    places in the docs, as users are getting the wrong impression from this.

commit aa25dff1ea8c77f5e9ba69d7e1f35f94729959d9
Author: Simon Pasquier <spasquie@redhat.com>
Date:   Fri Dec 8 16:00:03 2017 +0100

    Update the openstack_sd_config section
    
    openstack_sd_config requires a 'role' parameter which wasn't documented.

commit 08ee713c82507b1a0d6a69a81031fc29c53281fe
Author: Krasi Georgiev <krasi-georgiev@users.noreply.github.com>
Date:   Fri Dec 8 13:43:23 2017 +0000

    example to show the difference between "sum by" and "sum without" (#3558)

commit b4bd91958a7436abbf067867a51ccf5ac58f557b
Author: vthriller <unixway.drive+github@gmail.com>
Date:   Tue Nov 14 19:22:25 2017 +0400

    [minor] docs: recording_rules: fix missing key

commit 28205f5ca98518903d42106a6d25e67a668a203e
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Nov 14 17:16:59 2017 +0100

    Remove wrong statement about alertmanager URL configuration

commit 4648f4c1560a0fc804e105e8208325aafb051a3e
Author: Mike Rostermund <mike@kollegienet.dk>
Date:   Thu Nov 9 01:44:05 2017 +0100

    New server uses read protocol, to eh, read. (#3444)

commit e0711c2e9bdd5e76fd50d50909ceecb4b3563e9c
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Nov 8 16:36:08 2017 +0000

    Document consul sd tls_config (#3440)
    
    Fixes https://github.com/prometheus/docs/issues/681

commit d2f6803d14eb3e17e3b63173675621e2e57a0aeb
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Nov 8 11:11:28 2017 +0000

    'Prometheus lifecycle' should be a subsection of 'Miscellaneous'

commit 6e8d192ba050fa088bbdd366049441d9c2bd34d3
Author: Or Elimelech <vic3lord@users.noreply.github.com>
Date:   Wed Nov 8 12:38:39 2017 +0200

    Wrong URL for remote.proto (#3431)
    
    Change wrong URL for remote.proto

commit 013dc30dee7c7835b6e36bdea6c75ab7e30d7f42
Author: phyber <phyber@users.noreply.github.com>
Date:   Wed Nov 8 10:38:03 2017 +0000

    Fix markdown in recording rules. (#3432)
    
    Resolves an issue where rendered markdown was incorrect.

commit 87f5fe357657268caa2b498ec401be7fc4dc03e0
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Nov 8 10:04:00 2017 +0100

    Fix migration documentation title in docs menu

commit 5dff97639f265dd3708f290f3352ab3bd735c031
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Nov 8 08:38:28 2017 +0000

    Tweak migration doc (#3430)

commit b3b6538348792e1a1a90cc0d951cc3eebde2b264
Author: Jose Donizetti <jdbjunior@gmail.com>
Date:   Wed Nov 8 06:01:19 2017 -0200

    Small changes to migration guide

commit b5c30090b9d2ae80e0bc7b40e8c980627e304276
Merge: 9532c2c 8b6f3a1
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Wed Dec 13 17:33:55 2017 +0000

    Merge pull request #3544 from Conorbro/relabel
    
    Added service discovery view showing labels before and after relabelling

commit 8b6f3a1bd3925bb26224f3ba9de69263f25e825e
Author: conorbroderick <cjayjayb@gmail.com>
Date:   Mon Dec 4 15:12:28 2017 +0000

    Added service discovery view showing labels before and after relabelling

commit 9532c2c70048c12201b29e86c0d20ee2ac2c84fe
Author: Luke Overend <luke@cloudflare.com>
Date:   Tue Dec 12 13:40:00 2017 +0000

    Pass ams to go routine when sending alerts (#3284)
    
    Currently when sending alerts via the go routine within `sendAll`, the value
    of `ams` is not passed to the routine, causing it to use the updated value of `ams`.
    
    Example config:
    
    ```
    alerting:
      alertmanagers:
        - basic_auth:
            username: 'prometheus'
            password: 'test123'
          static_configs:
          - targets:
            - localhost:9094
        - static_configs:
          - targets:
            - localhost:9095
    ```
    
    In this example alerts sent to `localhost:9094` fail with:
    
    ```
    level=error ts=2017-10-12T10:03:53.456819948Z caller=notifier.go:445
    component=notifier alertmanager=http://localhost:9094/api/v1/alerts
    count=1 msg="Error sending alert" err="bad response status 401
    Unauthorized"
    ```
    
    If you change the order to be:
    
    ```
    alerting:
      alertmanagers:
        - static_configs:
          - targets:
            - localhost:9095
        - basic_auth:
            username: 'prometheus'
            password: 'test123'
          static_configs:
          - targets:
            - localhost:9094
    ```
    
    It works as expected.
    
    This commit changes the behavour so `ams` is passed to the go routine so
    `n.sendOne` uses the appropriate `http.Client` details.

commit 2d73d2b892853e95dbf157561e9df56ac220875e
Merge: 81db471 bee6864
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Dec 11 19:04:10 2017 -0800

    Merge pull request #3570 from Gouthamve/colon-snapshot
    
    Make the date returned by snapshot script friendly

commit 81db4716c1a95db540a1dd874f8e66e57a1f9dc1
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Dec 11 15:38:23 2017 +0000

    Mention SD moratorium in README (#3573)

commit 73fa721dd20436e952811f45ab507d45133dc6b6
Merge: b3eccdd bb724f1
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Mon Dec 11 09:37:15 2017 -0600

    Merge pull request #3569 from EdSchouten/faster-federation
    
    Deprecate DeduplicateSeriesSet() in favor of NewMergeSeriesSet().

commit b3eccdd828b9cf15151d4707131d477aa2b6d53e
Author: pasquier-s <pasquier.simon@gmail.com>
Date:   Mon Dec 11 14:39:58 2017 +0100

    Fix 'addrConn.resetTransport' error (#3004) (#3517)
    
    net.Listener converts 0.0.0.0 to :: which fails for hosts where IPv6 is
    disabled. This change uses the original listen address parameter instead
    of grpcl.Addr().String().

commit 24406969613f4119a98e4e54dd1e302345825b55
Author: pasquier-s <pasquier.simon@gmail.com>
Date:   Mon Dec 11 14:01:53 2017 +0100

    Log file descriptor limits at startup (#3567)
    
    Fixes #3564

commit bee6864c14459d2597e1f2e4003318898d90c001
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Sun Dec 10 13:19:34 2017 -0600

    Make the date returned by snapshot script friendly
    
    Fixes #3568
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit bb724f1bef6ab980aefb2036dec646b34677a318
Author: Ed Schouten <ed@nuxi.nl>
Date:   Sun Dec 10 12:00:23 2017 +0100

    Deprecate DeduplicateSeriesSet() in favor of NewMergeSeriesSet().
    
    Federation makes use of dedupedSeriesSet to merge SeriesSets for every
    query into one output stream. If many match[] arguments are provided,
    many dedupedSeriesSet objects will get chained. This has the downside of
    causing a potential O(n*k) running time, where n is the number of series
    and k the number of match[] arguments.
    
    In the mean time, the storage package provides a mergeSeriesSet that
    accomplishes the same with an O(n*log(k)) running time by making use of
    a binary heap. Let's just get rid of dedupedSeriesSet and change all
    existing callers to use mergeSeriesSet.

commit 838fc5a4d15b35cc1c8713092108ca30577b9e1f
Merge: 8f6a9f7 29da2fb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 8 22:33:18 2017 +0100

    Merge pull request #3300 from alcortesm/update-testing-utils-to-go1.9
    
    testutil: simplify code

commit 29da2fb9cda05a3c777e549224aa13fe0b63d10d
Author: Alberto Cortés <alcortesm@gmail.com>
Date:   Mon Oct 16 17:27:52 2017 +0200

    testutil: update to go1.9 testing.Helper

commit 8f6a9f7833970ad6659f49c09c93f075a909d498
Author: Alberto Cortés <alcortesm@gmail.com>
Date:   Fri Dec 8 17:52:25 2017 +0100

    config: simplify tests by using testutil.NotOk (#3289)
    
    Also include filename in all LoadFile errors
    
    Also add mesage to testuitl.NotOk so we can identify failing tests when
    using table driven tests.

commit e0d917e2f51ba08c2a98da84336de5a2273136c1
Merge: 08a4e06 f0599d4
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Dec 7 14:39:24 2017 -0600

    Merge pull request #3523 from Gouthamve/clean-tomb
    
    Add endpoint to cleanup tombstones

commit 08a4e0693ba52cadb1092244bd45f369b616d9cb
Merge: 35c1926 ab11a45
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Thu Dec 7 15:54:47 2017 +0000

    Merge pull request #3556 from prometheus/remove-obsolete-todo
    
    Remove obsolete TODO in API code

commit 35c1926d143bb4d1e7ff58d07f33279d2431f7b6
Author: Shubheksha Jalan <shubheksha@users.noreply.github.com>
Date:   Thu Dec 7 21:22:50 2017 +0530

    use httptest.NewRequest, remove http.ReadRequest (#3557)

commit f0599d4dbf6b0ca1e376e64386e426eb869f6820
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Tue Dec 5 10:26:06 2017 -0600

    Incorporate review-feedback
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit ab11a457e8d7154c340236f156f16eba6f02e0c8
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Dec 7 23:01:13 2017 +0800

    Remove obsolete TODO in API code
    
    In https://github.com/prometheus/prometheus/pull/3230/files, contexts were
    added to the Querier() method instead, and Cortex is fine with that.

commit 330735aca6c7ea2cd98986699ee76e3a0f659b47
Author: James Turnbull <james@lovedthanlost.net>
Date:   Thu Dec 7 03:31:15 2017 -0500

    Added another full link to the configuration docs (#3553)

commit 607a6756172618ef199bf63f5413e68587f458da
Author: Amy Holt <amy.elizabeth.holt@gmail.com>
Date:   Wed Dec 6 14:16:53 2017 -0700

    Add prefix to relative 3 URLs (#3551)

commit 7417c600713feaa0b540f8afe2cbc0f0c9602e53
Merge: 59d4c53 6a80fc2
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Wed Dec 6 17:25:21 2017 +0000

    Merge pull request #3548 from whoward/fix-marathon-1-5
    
    Parse the normalized container.PortMappings presented by the Marathon 1.5.x API

commit 6a80fc24cf4e16eb6e0f8b0494348b1e0698969d
Author: Will Howard <will@influitive.com>
Date:   Tue Dec 5 14:10:40 2017 -0500

    Parse the normalized container.PortMappings presented by the Marathon 1.5.x API
    Fixes #3465

commit 59d4c539d1fddbc8cfa94c7b1e67359b5230c788
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Wed Dec 6 15:39:06 2017 +0000

    Added rule name to rule error for easier debugging (#3549)

commit 740662644e270ded30e16c3a49303f8166310643
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Dec 6 10:45:58 2017 +0000

    write to temp dir and remove it at the end.
    
    Signed-off-by: Krasi Georgiev <krasi.root@gmail.com>

commit 311edc5a385c62ad603bdf9df82ede20d7bef3f1
Merge: d8515b2 d7b3df5
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Dec 4 00:16:10 2017 +0530

    Merge branch 'master' into clean-tomb
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 30b4439bbd795fee4703b8f5015da6bf13fee0ac
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Nov 30 14:40:14 2017 +0000

    Remove rule_type label from rule metrics.
    
    This is not really needed now that we have rule groups
    to distinguish rules.

commit b97f4cf48c27cc085218b999a663fc8127276ff5
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Nov 30 14:36:34 2017 +0000

    Add metrics for rule group interval and last duration.

commit 0a42a9fc8f3da272964a6d14f1cb24fc82f65140
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Nov 30 13:49:15 2017 +0000

    Copy over rule group duration on reload.
    
    This is currently getting lost, this will soon be in a metric and we
    don't want it dropping to 0 on every reload.

commit aa370fa56889b6d56c8f746d05b400ee9386a9b8
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Nov 30 13:48:35 2017 +0000

    Clarify metric names around rule groups.
    
    Make it clear they're about overall rule groups.

commit d8515b2580a22a355c116fe22af52fa3447e70b7
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Sun Dec 3 10:37:05 2017 +0530

    Move Admin APIs to v1
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit d7b3df5ae18fce41451cc0bf85e71e1bf26358e6
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Dec 2 13:52:43 2017 +0000

    Fix staticcheck errors

commit 41b8f1f8fe565638642e6f553889b4c0aa06a222
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Nov 30 21:46:04 2017 +0530

    Add admin API docs
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 29506e0bca5491aa7d0c28e6a020822c4de8bfe9
Author: Krasi Georgiev <krasi-georgiev@users.noreply.github.com>
Date:   Fri Dec 1 17:32:27 2017 +0000

    one meaningless write to the config file to trigger anothe fsnotify (#3492)

commit cae4538b3e9cab8f9e5fd972f6c35eb4b002014d
Author: Matthias Rampke <mr@soundcloud.com>
Date:   Fri Dec 1 18:26:06 2017 +0100

    Docs: state that all regular expressions are RE2. (#3518)
    
    We already mentioned that regular expressions are RE2 for
    [relabeling][0], but left open what the regular expression syntax
    anywhere else is.
    
    In the querying examples and reference, make it explicit that _all_
    regular expressions are RE2.
    
    [0]: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config

commit 2c2a962da3e602121381261e7c216540e7140282
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Thu Nov 30 23:28:52 2017 +0000

    main.go integration test for Startup interrupting.

commit 9146760aab9b4958409e77558a1535bfc3352e64
Author: Vickenty Fesunov <vickenty@users.noreply.github.com>
Date:   Thu Nov 30 18:14:27 2017 +0100

    Bump required golang version in the README (#3528)
    
    10b2e8c6375c pulled new TSDB, which uses `math/bits` package introduced in Go 1.9

commit 3de10e3b445dc05858e1b37326956d8246416786
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Nov 30 16:05:29 2017 +0530

    Add CleanTombstones API endpoint
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 36190239f6d965f5e009da2fae8b502c09399df5
Merge: 52c0121 823b7f9
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Nov 30 19:04:51 2017 +0530

    Merge pull request #3524 from Gouthamve/rule-glob
    
    Use the files globbed files and not the files in cfg

commit 823b7f90b32afef79196f74c77a5cce0e48a63d9
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Nov 30 17:08:34 2017 +0530

    Use the files globbed files and not the files in cfg
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 9f92a71053e5c80b63fb89907caeb43fd987fd50
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Nov 30 16:04:53 2017 +0530

    vendor: update TSDB
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit a1be5db99f1a3964db469abd5954756ac386fdc9
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Nov 30 15:49:08 2017 +0530

    vendor: Update grpc gateway deps
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 52c012189002fb7f4953b032686daee39e7a3a84
Author: Julien Pivotto <roidelapluie@gmail.com>
Date:   Thu Nov 30 11:04:02 2017 +0100

    Correctly handle empty data set in the console view (#3521)
    
    When there is an empty result set, the Prometheus server replies with
    
    {"status":"success","data":{"resultType":"vector","result":null}}
    
    That "null" reply was not handled correctly by the graphing library.
    This commit handles that case and shows "no data" in the UI console view
    instead of throwing an error in the browser javascript console.
    
    Fixes #3515
    
    Signed-off-by: Julien Pivotto <roidelapluie@inuits.eu>

commit b3ff5f6b0ee4cef9923d3ec534abfa862486a579
Merge: 47311bf 6246137
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 28 08:55:23 2017 +0100

    Merge pull request #3507 from prometheus/rulepromql
    
    Make PromQL metrics un-global, remove rules dep on promql.Engine

commit 62461379b75bba14a8fda503aa6de823c23e9c23
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 24 08:59:05 2017 +0100

    rules: decouple notifier packages
    
    The dependency on the notifier packages caused a transitive dependency
    on discovery and with that all client libraries our service discovery
    uses.

commit 47311bf005eea54e9e70b94d2c37393af8b28d18
Author: James Turnbull <james@lovedthanlost.net>
Date:   Mon Nov 27 09:52:32 2017 -0500

    Update configuration.md (#3513)
    
    1. Removed https://prometheus.io prefix
    2. Fixed broken file discovery link.

commit 2c2702e22bebdb86061d005853cf22bcdf425ddb
Author: Lovisa Svallingson <applegrain@users.noreply.github.com>
Date:   Sat Nov 25 21:49:24 2017 -0700

    Align columns in Targets view (#3445)
    
    - rebase and resolve merge conflicts

commit 9d4e33213777b744ba55d4effe57dae6d2806e9e
Merge: 2ec5965 7d4f7c4
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Fri Nov 24 15:37:57 2017 +0000

    Merge pull request #3495 from tomwilkie/pod-uid-discovery-master
    
    Include Pod UID in the discovery metadata.

commit 7d4f7c4b710b833419535bd135ef51f9cdaaf4c7
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Fri Nov 24 15:02:53 2017 +0000

    Update docs for __meta_kubernetes_pod_uid

commit 099c50ce9394264d244db00009ee1faf872e947f
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Fri Nov 24 15:02:42 2017 +0000

    Avoid empty pod UID in test.

commit 9811e90d65123477a33807625e18f65209f1d9aa
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Fri Nov 24 12:24:13 2017 +0000

    Fix tests.

commit 4d964a0a0de828470f95681bd8a3e0313d6c6728
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 24 08:22:57 2017 +0100

    rules: make glob expansion a concern of main

commit bd9f7460eb6fac35a103036d8fc5cd63c42ddd63
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 23 15:48:14 2017 +0100

    rules: remove config package dependency

commit 2d0e3746ac9e541f72a3c23702ec54817be58c33
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 23 13:04:54 2017 +0100

    rules: remove dependency on promql.Engine

commit f8fccc73d8705c727cb85adef8d5147b1455388c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 23 13:04:37 2017 +0100

    promql: remove global metrics

commit 2ec5965b7566cd6391eeffb8586a1e925fb791a5
Merge: ca1cb01 83cd270
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 23 19:11:54 2017 +0100

    Merge pull request #3508 from prometheus/uptsdb
    
    update TSDB

commit ca1cb01177a48ff72163349dd18bc2190e48513a
Merge: 84eca7d a880c86
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 23 19:10:52 2017 +0100

    Merge pull request #3509 from Gouthamve/rule-eval-times
    
    Fix unexported method on exported interface.

commit 83cd270ea4702349642e7861582853cd6afc4d37
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 23 13:50:06 2017 +0100

    *: adapt to storage interface changes

commit 10b2e8c6375c66efa7b39fd82c2abb5fe158c918
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 23 13:49:56 2017 +0100

    vendor: update prometheus/tsdb

commit a880c86375ce67ae6e80af92f9c0eb446922a1cc
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Nov 23 18:22:15 2017 +0530

    Fix unexported method on exported interface.
    
    Also move to model.Duration
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 84eca7dfb29a3c734c60779698345fc8dd777e73
Merge: 40f33f4 55aaece
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Wed Nov 22 16:37:16 2017 +0000

    Merge pull request #3491 from Conorbro/eval-rules
    
    Add rule evaluation time

commit 55aaece11640b272cf72d060ea4c9dd83baa8090
Author: conorbroderick <cjayjayb@gmail.com>
Date:   Fri Nov 17 15:18:34 2017 +0000

    Add rule evaluation time

commit 40f33f45cb8fe9cc5badde7306142d9e706496f8
Author: Ben Kochie <superq@gmail.com>
Date:   Wed Nov 22 13:11:21 2017 +0100

    Fix docs that use regexp anchors (#3504)
    
    Remove/fix docs that use anchors in label regexp matches.

commit 0deb74626f7db7a3b6c0965effb5bd6615c184c3
Merge: 303efee 80e5867
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Tue Nov 21 12:04:11 2017 +0100

    Merge pull request #3498 from discostur/update-rbac-example
    
    Fixed RBAC Example, added ingress privileges; @brian-brazil

commit 80e5867a8745fd82798af21fee97f174c2f84212
Author: root <root@mgmt.intern.customer-virt.eu>
Date:   Tue Nov 21 11:04:07 2017 +0100

    Fixed RBAC Example, added ingress privileges; @brian-brazil

commit 06dc1e8797c876c983dde1cee22b4473b2e7d016
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Nov 7 16:24:23 2017 +0000

    Include Pod UID in the discovery metadata.

commit 303efee1a9a295ff6ea0d8c87214effc190441a4
Merge: a51c500 8e01e7e
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Nov 20 23:17:47 2017 +0530

    Merge pull request #2408 from davkal/api-stats
    
    Adds execution timer stats to the range query

commit 8e01e7e3881ad7632fcfae7ba5740b1381401acb
Author: David Kaltschmidt <david.kaltschmidt@gmail.com>
Date:   Sun Nov 19 21:15:24 2017 +0100

    Handle runtime errors as fatal test results

commit 3c5d207a531bbe8305d5099f4128aae0e571b997
Author: David Kaltschmidt <david.kaltschmidt@gmail.com>
Date:   Sun Nov 19 21:06:35 2017 +0100

    Changed test failure handler to Fatalf(), added comment

commit 79caf5342e9e983abbbada5093480b6f93981fc5
Author: David Kaltschmidt <david.kaltschmidt@gmail.com>
Date:   Fri Nov 17 22:33:24 2017 +0100

    Comment styles

commit 0a3faee526202b50940c1fec0fa7facfedc90a88
Author: David Kaltschmidt <david.kaltschmidt@gmail.com>
Date:   Fri Nov 17 22:30:59 2017 +0100

    Pushed query timings into timings field, added tests

commit 87c46ea6c3368a3d5fc94f4cdff88030dcff8225
Author: David Kaltschmidt <david.kaltschmidt@gmail.com>
Date:   Fri Nov 17 17:46:51 2017 +0100

    Renamed TotalEvalTime to EvalTotalTime
    
    * TotalFoo suggested a comprehensive timing, but TotalEvalTime was part
    of the Exec timings, together with Queue timings
    * The other option was to rename ExecTotalTime to TotalExecTime, but
     there was already ExecQueueTime, suggesting Exec to be some sort of
    group

commit af75ce02c1f9ec6a241d48b69c85906bccccf82e
Author: David Kaltschmidt <david.kaltschmidt@gmail.com>
Date:   Thu Nov 16 16:30:48 2017 +0100

    Review feedback
    
    * renamed MakeQueryStats
    * added stats to query() as well
    * gofmt

commit c93e54d240db26595c230150cc082d086feebdb2
Author: David Kaltschmidt <david.kaltschmidt@gmail.com>
Date:   Wed Feb 8 12:58:40 2017 +0100

    Adds execution timer stats to the range query
    
    API consumers should be able to get insight into the query run times.
    The UI currently measures total roundtrip times. This PR allows for more
    fine grained metrics to be exposed.
    
    * adds new timer for total execution time (queue + eval)
    
    * expose new timer, queue timer, and eval timer in stats field of the
     range query response:
    ```json
    {
      "status": "success",
      "data": {
        "resultType": "matrix",
        "result": [],
        "stats": {
          "execQueueTimeNs": 4683,
          "execTotalTimeNs": 2086587,
          "totalEvalTimeNs": 2077851
        }
      }
    }
    ```
    
    * stats field is optional, only set when query parameter `stats` is not
    empty
    
    Try it via
    ```sh
    curl 'http://localhost:9090/api/v1/query_range?query=up&start=1486480279&end=1486483879&step=14000&stats=true'
    ```
    
    Review feedback
    
    * moved query stats json generation to query_stats.go
    * use seconds for all query timers
    * expose all timers available
    * Changed ExecTotalTime string representation from Exec queue total time to Exec total time

commit a51c500e30e96df4026282c8a4f743cf6a8827f1
Merge: deb64bf 7098c56
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Nov 14 13:56:26 2017 +0100

    Merge pull request #3453 from prometheus/grobie/remote-read-filter
    
    Add remote read filter option

commit deb64bf79a8d80c9f36934a338d3fe18ef2a906c
Merge: 91be55e e111771
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Nov 14 13:08:35 2017 +0100

    Merge pull request #3471 from Gouthamve/remove-skipped-evals
    
    rules: remove skipped iterations because no throttling anymore

commit e1117715feaeed3d0bfbe576202e7769c96c16b6
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Tue Nov 14 17:02:26 2017 +0530

    rules: remove skipped iterations cuz no throttling
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 7098c5647447a4510b76efd5c3334fe806d7789c
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sun Nov 12 02:23:20 2017 +0100

    Add remote read filter option
    
    For special remote read endpoints which have only data for specific
    queries, it is desired to limit the number of queries sent to the
    configured remote read endpoint to reduce latency and performance
    overhead.

commit 434f0374f72d8ba77a75429f985c51f0cc650c16
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sun Nov 12 02:15:27 2017 +0100

    Refactor remote storage querier handling
    
    * Decouple remote client from ReadRecent feature.
    * Separate remote read filter into a small, testable function.
    * Use storage.Queryable interface to compose independent
      functionalities.

commit 9b0091d487cfadc7f6b967178a31193006cc1dbb
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sun Nov 12 01:27:45 2017 +0100

    Add storage.Queryable and storage.QueryableFunc
    
    In order to compose different querier implementations more easily, this
    change introduces a separate storage.Queryable interface grouping the
    query (Querier) function of the storage.
    
    Furthermore, it adds a QueryableFunc type to ease writing very simple
    queryable implementations.

commit 91be55ebf0073a9e4e3d1a226a0fabb8fd01624c
Merge: 6671277 493fd6b
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Mon Nov 13 17:57:21 2017 +0100

    Merge pull request #3458 from grandbora/test-race
    
    Fix race in test

commit 493fd6bd1f396333a41b642fa8693ac7fe363399
Author: Bora Tunca <bora@soundcloud.com>
Date:   Sun Nov 12 11:47:30 2017 -0500

    Fix race in test

commit 6671277b126115ece19bfa4c094069dee77b8fe3
Merge: 5766b36 1005ef0
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Mon Nov 13 17:00:37 2017 +0100

    Merge pull request #3464 from krasi-georgiev/flaky-file-discovery-tests-2
    
    Fix flaky file discovery tests - sync the channel draining goroutine

commit 1005ef0a709e35e1680cc3afa2e0576ff94cbbe0
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Mon Nov 13 11:38:46 2017 +0000

    Fix flaky file discovery tests - sync the channel draining goroutine

commit 5766b36be2e1b378354972ce00f704fe5f2ef501
Merge: 3cc01a3 4fff98f
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Mon Nov 13 12:03:18 2017 +0100

    Merge pull request #3271 from dlespiau/remove-go-vendor-experiment
    
    Remove mentions of GO15VENDOREXPERIMENT

commit 4fff98fd7f2a71a94f5a6027130da7c3af4f9532
Author: Damien Lespiau <damien@weave.works>
Date:   Tue Oct 10 16:02:50 2017 +0100

    Remove last mention of GO15VENDOREXPERIMENT
    
    Since #2750[1] prometheus depends on go 1.8. go 1.7 enabled vendoring by
    default and removes the corresponding variable[2], simplifying things a bit.
    
    [1] https://github.com/prometheus/prometheus/pull/2750
    [2] https://blog.golang.org/go1.7

commit 3cc01a3088a32cea2e1adedeb17d85fc07ec7d37
Author: Bora Tunca <grandbora@users.noreply.github.com>
Date:   Sat Nov 11 21:39:08 2017 -0500

    Add more discovery tests for updating target groups (#3426)
    
    * Adds a test covering the case where a target providers sends updated versions of the same target groups and the system should reconcile to the latest version of each of the target groups
    * Refactors how input data is represented in the tests. It used to be literal declarations of necessary structs, now it is parsing yaml. Yaml declarations are half as long as the former. And these can be put in a fixture file
    * Adds a tiny bit of refactoring on test timeouts

commit 9f10c63cffdc33ecdac9fd33a3801fb6caf82017
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Nov 12 00:47:47 2017 +0100

    Fix remote read labelset corruption (#3456)
    
    The labelsets returned from remote read are mutated in higher levels
    (like seriesFilter.Labels()) and since the concreteSeriesSet didn't
    return a copy, the external mutation affected the labelset in the
    concreteSeries itself. This resulted in bizarre bugs where local and
    remote series would show with identical label sets in the UI, but not be
    deduplicated, since internally, a series might come to look like:
    
    {__name__="node_load5", instance="192.168.1.202:12090", job="node_exporter", node="odroid", node="odroid"}
    
    (note the repetition of the last label)

commit c8a735ceb65fa070311e910911fdc3018043c816
Author: Krasi Georgiev <krasi-georgiev@users.noreply.github.com>
Date:   Sat Nov 11 16:20:39 2017 +0000

    Fix flaky file discovery tests (#3438)
    
    * flaky test caused by invalid fsnotify updates before the test files are written to disk causing the fd service to send empty `group[]` struct
    
    * `close(filesReady)` needs to be before the file closing so that fsnotify triggers a new loop of the discovery service.
    
    * nits
    
    * use filepath.Join for the path url to be cross platform
    
    * stupid mistake revert

commit 83bb1becab732729fb60a1715ebdf4cbc16ec028
Merge: 6cd0f63 e2f4850
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sat Nov 11 17:19:06 2017 +0100

    Merge pull request #3251 from krasi-georgiev/implement-go-kit-run-groups
    
    Refactor main.go with  oklog/pkg/group actors pattern

commit e2f4850fea78d9c902dc8faec20f71eff5701b1d
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Sat Nov 11 12:06:13 2017 +0000

    Refactor main.go with oklog/pkg/group actors pattern

commit 6cd0f63eb12d45c59e7da501c3d4bef5282d5456
Author: Jorge Hernández <3452489+jhernandezb@users.noreply.github.com>
Date:   Sat Nov 11 04:29:47 2017 -0600

    Use testutil in rules subpackage (#3278)
    
    * Use testutil in rules subpackage
    
    * Fix manager test
    
    * Use testutil in rules subpackage
    
    * Fix manager test
    
    * Fix rebase
    
    * Change to testutil for applyConfig tests

commit 8c681f4a6cddc18d076664b7a36277c9595365d2
Author: Alexey Miroshkin <hashmap@gmail.com>
Date:   Sat Nov 11 01:53:48 2017 +0100

    Provide POST endpoint for query+query_range (#3322)
    
    This PR fixes #3072 by providing POST endpoints for `query` and `query_range`.
    POST request must be made with `Content-Type: application/x-www-form-urlencoded` header.

commit 8022fc1aa3b61b10fa81ed062f70d52cd3493b40
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Nov 8 15:30:19 2017 +0100

    Fix display of raw target labels (again) (#3437)
    
    I already fixed this once in 7be94d664305fc5cf42a40c5d985f1ee6c77e6f7,
    but it seems it got broken again when merging other fixes from 1.x into
    2.0.

commit 6806b5fa2f1851668567eea08e2910a42f806905
Merge: 617e7d0 0a74f98
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Nov 8 08:16:44 2017 +0100

    Merge branch 'release-2.0'

commit 617e7d02031c708aa5b7635cba653d24da121739
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Wed Nov 8 07:14:33 2017 +0000

    Add migration docs for 2.0 (#3374)
    
    * Initial draft of migration.md
    
    * Edits.
    
    * Review feedback.
    
    * Review feedback.
    
    * Staleness link to video; add docker root example; remote config file section.
    
    * s/NB/NOTE/, remove external labels link.
    
    * More typos.
    
    * Add more details link for removed PromQL features.
    
    * s/you/your/
    
    * Expand on prom1.8/2.0 side by side setup.
    
    * More feedback.
    
    * update links.
    
    * --query.lookback-delta flag.

commit 0a74f98628a0463dddc90528220c94de5032d1a0
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Nov 7 20:33:40 2017 +0000

    Release 2.0.0

commit 02ca988bbd0cd0504d42fe6528de4b8cd7cb2ce2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Nov 7 23:37:03 2017 +0100

    Remove /api/v1/delete_series docs for 2.0 (#3425)
    
    This endpoint has moved to /api/v2 (with somewhat different properties)
    in Prometheus 2.0 and should now be part of a separate admin API page.

commit a117f051daa6e84d0a48221b828c3fd644f071fb
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Nov 7 22:28:04 2017 +0100

    Remove outdated information about next-release doc branch

commit ef08df0e6f6021fb83fe335355d19bf097966efe
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Nov 7 22:00:38 2017 +0100

    Add 2.0 storage docs (#3423)
    
    * Add 2.0 storage docs
    
    * Review fixups
    
    * More review fixups

commit e6dcc72f9a1f4faa038d40a2f6ff3e22019c0ca8
Author: Matthew Pound <mwp@signalfx.com>
Date:   Tue Nov 7 12:02:43 2017 -0800

    Fix instructions on updating prometheus.yml for Remote Write Adapter Example (#3422)

commit 08a012ccd71faa61b4a719cb101809c7326170f9
Author: Krasi Georgiev <krasi-georgiev@users.noreply.github.com>
Date:   Tue Nov 7 15:56:00 2017 +0000

    Fix for #3312 sigpanic in TargetManager (#3420)

commit f689476b332a1fb957b0d59b8721ba9bee9958f1
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Nov 7 13:23:45 2017 +0000

    Update consoles for new metric names. (#3327)

commit e63219ae6a13163b65f0aef99f8071afaef418b1
Author: Bora Tunca <grandbora@users.noreply.github.com>
Date:   Mon Nov 6 12:33:52 2017 -0500

    Add discovery test (#3417)

commit 09be10a553e8f63f86938c682533013ed8f899dd
Author: Bora Tunca <grandbora@users.noreply.github.com>
Date:   Mon Nov 6 11:14:15 2017 -0500

    Add test to prove redundant calls to identical target providers (#3404)

commit 4db6592d012ffe673a7d0c338a54e24b2d1ef852
Author: James Turnbull <james@lovedthanlost.net>
Date:   Mon Nov 6 11:11:04 2017 -0500

    Removing external_labels from example conf file (#3409)
    
    It's unclear why this is in the example configuration file. Probably best to keep that super simple, c.f. https://github.com/prometheus/docs/pull/895#discussion_r148924390

commit db5b1aa5f6b31a9d571e02e592888e23f435d265
Author: Sylvain Rabot <sylvain@abstraction.fr>
Date:   Mon Nov 6 15:55:43 2017 +0100

    Makefile: Allow $(GO) to be set with environmental variable (#2919)
    
    * promu: Use same go invocation as prometheus' for building
    
    If you override $(GO) var in prometheus Makefile in order to use
    a custom go binary you might encounter errors while building promu
    as promu's Makefile $(GO) var is also defined to look for go in the
    $PATH and you might end up using different go binaries for building
    prometheus and promu.
    
    This patch makes prometheus Makefile pass its $(GO) var to promu's makefile
    as environmental variable.
    
    Signed-off-by: Sylvain Rabot <s.rabot@lectra.com>
    
    * Makefile: Allow $(GO) to be set with environmental variable
    
    Signed-off-by: Sylvain Rabot <s.rabot@lectra.com>
    
    * Makefile: Fix hardcoded call to gofmt
    
    Signed-off-by: Sylvain Rabot <s.rabot@lectra.com>

commit e3b926c03b420cd95f13488d978c7e495bd743ef
Author: David <david.kaltschmidt@gmail.com>
Date:   Mon Nov 6 10:46:09 2017 +0100

    Fix typo in AM config field static_configs (#3415)
    
    * typo in prometheus.yml field causes prometheus to throw an error
    
    Fixes #3414

commit 8a9b32d0eb5be05a8066492e8a75c18b90e2d6ff
Merge: 348ea48 36a6ed4
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sat Nov 4 21:26:05 2017 +0100

    Merge pull request #3410 from prometheus/beorn7/release
    
    Cut 2.0.0-rc.3

commit 36a6ed4fe1487f8540014cc9def6741fdc0974d9
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Nov 4 17:30:58 2017 +0100

    Cut v2.0.0-rc.3

commit 463faf5816d4ab1445ba2f2ecee08983b55ce640
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Nov 4 17:40:11 2017 +0100

    Ignore staticcheck's SA1019 in discovery/kubernetes/kubernetes.go, too
    
    This showed up all of a sudden, even if checking out older commits.

commit 139929a363092f6d24202eaf55d726f711ca9097
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Nov 4 17:26:17 2017 +0100

    Update vendoring of prometheus/tsdb and prometheus/common

commit 348ea482eadb59bcd5d89c08ea59f3a3a5cc8087
Merge: 1829681 d7e9cca
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Nov 4 12:32:49 2017 +0100

    Merge branch 'beorn7/release'

commit d7e9cca287966a80cb070a6a0975b57275a1dba2
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Nov 4 11:49:35 2017 +0100

    Cut 1.8.2

commit bf8e002fcecce326edce70ccbe7b2141ea04183c
Merge: 7435a3f a731a43
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Nov 3 17:20:40 2017 +0100

    Merge pull request #3405 from dominikschulz/fix/issue-3001
    
    Guard against tags being nil in EC2 discovery

commit a731a43302a0525affd3bd1253d901ad99786453
Author: Dominik Schulz <dominik.schulz@gauner.org>
Date:   Fri Nov 3 12:59:04 2017 +0100

    Guard against tags being nil in EC2 discovery
    
    Fixes #3001

commit 1829681e8433c1d8f76e0178fee70f03cc11be00
Merge: c686f40 8093122
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Nov 3 13:09:19 2017 +0100

    Merge pull request #3400 from prometheus/beorn7/release
    
    Update vendoring for tsdb and clean it up in general

commit c686f40adfe5e023f8af81fd17023714c13f2f80
Merge: 2121b46 d8c58d1
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Nov 3 12:56:16 2017 +0100

    Merge pull request #3396 from prometheus/beorn7/doc
    
    Remove @beorn7 from MAINTAINERS.md, promote @fabxc to storage maintainer

commit d8c58d17e0b4dd820a366c68fe8cd0bd44f1a870
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Nov 3 12:52:24 2017 +0100

    Remove _local storage_ from fabxc's responsibilities again
    
    This is just for now, as fabxc doesn't seem to be available to agree
    to his new role. Just revert this commit once he has.

commit 8093122782db35681a40f5b45283d29bed0893c9
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 2 17:15:40 2017 +0100

    Clean up vendoring
    
    This doesn't perform any actual updates. (While that is something that
    we should consider eventually, it leads down a rabbit hole and would
    be too risky just before the 2.0.0 release.)
    
    This is really just a clean-up. In particular:
    
    - The following packages are not really used and thus removed:
      - github.com/blang/semver
      - github.com/coreos/go-oidc/http
      - github.com/coreos/go-oidc/jose
      - github.com/coreos/go-oidc/key
      - github.com/coreos/go-oidc/oauth2
      - github.com/coreos/go-oidc/oidc
      - github.com/coreos/pkg/health
      - github.com/coreos/pkg/httputil
      - github.com/coreos/pkg/timeutil
      - github.com/gophercloud/gophercloud/openstack/compute/v2/extensions
      - github.com/pborman/uuid
    
    - For unclear reasons, the checksum for the following packages were
      wrong. The only change in this commit is to adjust the checksum in
      vendor.json. No changes of source code involved.
      - github.com/cespare/xxhash
      - github.com/dgryski/go-bits
      - github.com/golang/snappy
    
    - Various packages from the github.com/gogo/protobuf repository are
      used throughout the code. They are vendored from various sources
      (different sub-vendoring of cockroachdb/cockroach and
      k8s.io/client-go) and revisions. I made them all consistently
      referring to the current version of the github.com/gogo/protobuf
      repository. This _is_ a change of code, but a necessary one to clean
      up the inconsistencies.
    
    - For the github.com/influxdata/influxdb/... packages, the license
      files were missing. Also, the revision time was wrong, again for
      unknown reason.
    
    This tries to avoid any real updates (as that would lead down a rabbit
    hole, although I think we should check what dependencies need an
    update one day) but at least tries to remove unused packages.

commit e4167a5ca885d06cdb6d06bbbd54ba46f3946441
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 2 17:12:26 2017 +0100

    Update vendoring of prometheus/tsdb

commit 2121b4628baa7d9d9406aa468712a6a332e77aff
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 2 15:28:47 2017 +0100

    Update NOTICE for gogo/protobuf

commit 7ff9ea9ae32e2f473e5f458e9fe6488f499645c1
Merge: fe3cde2 5d8f93a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Nov 2 15:26:27 2017 +0100

    Merge pull request #3394 from krasi-georgiev/gogo-vs-golang-protobuf
    
    replace golang/protobuf with  gogo/protobuf

commit fe3cde2d50da2510a5f6fdda19384baf993a2349
Merge: 35507d9 bc3ed97
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Nov 2 15:25:14 2017 +0100

    Merge pull request #3392 from krasi-georgiev/updated-gitignore
    
    updated-gitignore

commit 35507d9e9a3a1c80181fda963c70d22f29ce5981
Merge: 646e332 a5b7955
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Nov 2 15:17:59 2017 +0100

    Merge pull request #3398 from prometheus/marathon-docs
    
    Tweak marathon wording around clustering.

commit a5b7955acec33d6a14caa3679058afcd1934589e
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Nov 2 13:03:19 2017 +0000

    Tweak marathon wording around clustering.

commit 5d8f93a22a36a93a8009a39e99a7bc2c9b9befaa
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Nov 1 22:03:46 2017 +0000

    now using  only github.com/gogo/protobuf
    bumped all grpc-gateway packages to v1.2.2
    updated and run  the denproto.sh script

commit f306b9100cb750c8f02717f30867c1599113f80b
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 2 12:17:43 2017 +0100

    Remove @beorn7 from MAINTAINERS.md, promote @fabxc to storage maintainer
    
    With the merge of dev-2.0 into master, the local storage code I used
    to own has disappeared. @fabxc is the obvious most qualified person
    for the new storage code.
    
    Leaving me in just for “general code-level issues” would suggest I'm
    in some overarching code custodian role, which doesn't really match
    reality.
    
    Open for other suggestions.

commit bc3ed971664462b17fd1eb670a6e80ee92a59dae
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Nov 1 21:49:59 2017 +0000

    updated-gitignore

commit 646e33242e2de9045346cd507b16026e12f98463
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Nov 1 21:05:50 2017 +0530

    docs: Fix minor issues with the docs. (#3389)
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit b6494960d1b845976a9509082f3cfb572fcd9a14
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Nov 1 12:58:32 2017 +0000

    docs: Document new recording rule format (#3378)

commit 7187771f208037a64131f933707f546c5783df31
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Nov 1 12:40:47 2017 +0000

    Document new staleness (#3380)
    
    Remove "interpolation" for this heading, that hasn't
    been in these docs for a long time.

commit e86d82ad2d95fbdd2f3c3b6b052cb82038fba95f
Author: Krasi Georgiev <krasi-georgiev@users.noreply.github.com>
Date:   Wed Nov 1 11:58:00 2017 +0000

    Fix regression of alert rules state loss on config reload. (#3382)
    
    * incorrect map name for the group prevented copying state from existing alert rules on config reload
    
    * applyConfig test
    
    * few nits
    
    * nits 2

commit 3382f39046513d93742c02f39d9122f511d575ab
Author: Julien Pivotto <roidelapluie@gmail.com>
Date:   Tue Oct 31 23:02:08 2017 +0100

    Explicitely add alertmanager to example config (#3383)
    
    As alertmanager needs to be configured in the config file in Prometheus 2, I think it is useful to have it in the example config.
    
    Also renamed the rules in the example config so they are explicitely yml files.

commit 3701a827cf5da595bd2366dad6e1b3c979a1009c
Author: James Turnbull <james@lovedthanlost.net>
Date:   Tue Oct 31 15:19:17 2017 -0400

    Updates to alerting rules docs (#3381)
    
    1. Added a further explanation of the for clause.
    2. Added further clarification of non identifying labels.

commit 8cf279efb18ba35e7ed5de0ef62d755f94932563
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Oct 31 14:05:58 2017 +0000

    Document new alerting rule format.

commit efaa8f9ce87f43b75c94ed1d09c44695e859a6cc
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Oct 31 13:29:41 2017 +0000

    Update getting started with new rules format

commit eef46ae8e5eecb365b12315540255fd4e9d8a17c
Merge: d93273c 30e777d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Oct 31 12:22:56 2017 +0100

    Merge pull request #3372 from prometheus/maxblockdur
    
    tsdb: default too small max block duration

commit 30e777d10d8d974ac561de4f9f17a514e1cdc4f9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 30 12:09:56 2017 +0100

    tsdb: default too small max block duration

commit d93273c4dcfbbeb5b0c137a7ac19911e7a47a7e3
Merge: 94d9a20 7776527
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Oct 29 10:34:31 2017 +0100

    Merge pull request #3368 from cstyan/callum-3353
    
    bump consul HTTP client timeout by 5s

commit 77765273905b5a03f23be61ca999ef2e8b7d7674
Author: Callum Styan <callumstyan@gmail.com>
Date:   Sat Oct 28 16:42:42 2017 -0700

    bump consul HTTP client timeout by 5s so it doesn't match up exactly with the consul SD watch timeout

commit 94d9a200aade950a1b427b3f022d0de04179ae76
Merge: faf4bb0 a32e4cb
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sat Oct 28 13:22:46 2017 +0200

    Merge pull request #3367 from prometheus/docs
    
    A few 2.0 doc adjustments

commit a32e4cbdd8f43ec930031d922c4fda7103a075e5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 28 12:11:35 2017 +0200

    docs: remove 1.x storage docs
    
    The only section that still aplies was the one on the default storage
    directory so those docs seem obsolete.
    We'll probably have a similar page on the new storage but we'll only
    find out what caveats etc. we'll have to point out as we get people
    reporting problems or notable behavior.

commit 8cc78b36a2812e30c32ef8d889c9d816c8dd2ca1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 28 12:09:03 2017 +0200

    docs: remove obsolete info in getting started
    
    Go automatically configures the number of used threads appropriately
    and tweaking it is no longer relevant for a basic setup of Prometheus.
    The baseline consumption tied to the storage layer no longer applies.

commit 8a2b5a39366ed8ba8453f8c86caaea1a5235fbf2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 28 12:08:33 2017 +0200

    docs: update flags to new double-dash syntax

commit faf4bb03ee55a77f4ff4c1d550a0eb56fc4d9050
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Oct 27 15:44:57 2017 +0100

    Docs: timestamp() function.

commit aeb524ad14e5254b1414aa89e904f0e32a75e458
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Oct 27 15:42:44 2017 +0100

    Docs: remove keep_common, count_scalar, drop_common_labels

commit c4a68f29bf6983cdbc58a9d2944e77c0f84deb5c
Merge: 43bc484 7435a3f
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri Oct 27 16:38:54 2017 +0200

    Merge branch 'release-1.8'

commit 7435a3f57489c3ddae988ce4fd77ff3fc598fb56
Merge: 3a7c51a f49ae04
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri Oct 27 16:10:20 2017 +0200

    Merge pull request #3273 from prometheus/docs
    
    Import documentation

commit f49ae044d7857b8ae2ba1afe1c101684ad9b2db3
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri Oct 27 16:08:38 2017 +0200

    Import template reference and examples

commit 43bc484b6b8130e4836f3c267270454f9c2a1cad
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 27 14:37:00 2017 +0200

    Remove code climate badges (#3361)

commit 48a7a00a3812b1aedb3723f58ecc31ff5d9542cf
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Fri Oct 27 12:29:05 2017 +0100

    Fast path the merge querier  (#3358)
    
    * Fast path the merge querier such that it is completely removed from query path when there is no remote storage.
    
    * Add NoopQuerier
    
    * Add copyright notice.
    
    * Avoid global, use a function.

commit f432b8176d0e69027ab46ad7ac434764da743a11
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri Oct 27 09:47:38 2017 +0200

    Consolidate configuration and rules docs in docs/configuration/

commit 4d30a11ab61e1f61f8eceb0b7104536db22ac90a
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Oct 26 22:33:45 2017 +0200

    Import storage and federation documentation from docs

commit e6cdc2d35570a0890efe026b2cad2c0d99a335cc
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Oct 26 15:53:27 2017 +0200

    Import querying documentation from prometheus/docs

commit 323556b0251b0ab9665ea2b411af1067cc147097
Merge: 7aa2930 0e57268
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Oct 26 16:15:50 2017 +0100

    Merge pull request #3357 from prometheus/revert-3339-3065-remote-read-bypass
    
    Revert "Bypass the fanout storage merging if no remote storage is configured."

commit 0e572686db7d7a46ecf184f87fec4f0a13c98547
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Oct 26 16:09:39 2017 +0100

    Revert "Bypass the fanout storage merging if no remote storage is configured."

commit 299802dfd03a9a2b28275cb9029c3b1b762e1179
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Oct 26 15:42:07 2017 +0200

    Integrate changes from prometheus/docs

commit 41281aff8133e2e6338c1903e1437e7fbb0ee265
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Oct 10 19:55:29 2017 +0200

    Include 1.8 changes in configuration docs

commit 53a5f522244ead65eefc2abadd1f07555f281d1c
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Oct 10 14:58:52 2017 +0200

    Import first batch of Prometheus documentation
    
    In order to provide documentation for each individual version, this
    commit starts moving Prometheus server specific documentation into the
    repository itself.

commit 7aa2930ac592f7ac94b7dc76669bf33b217fce4c
Merge: e53040e 1af3ef4
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Oct 26 13:55:51 2017 +0100

    Merge pull request #3336 from tomwilkie/remote-api-update
    
    Update remote storage APIs from 1.8 branch

commit 1af3ef431da322cef79985b827cd40d8793563ad
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Oct 26 13:50:39 2017 +0100

    s/TestRemoveLabels/TestSeriesSetFilter/

commit 9c3c98e8de5bd1ef5e9e3aa76d4510a767f02a25
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Oct 26 13:43:48 2017 +0100

    Revert "Port 'Don't disable HTTP keep-alives for remote storage connections.' to 2.0 (see #3173)"
    
    This reverts commit 0997191b182bc40a1e050856084fe9b8dc46f523.

commit 746752b946b43c4e3f2a94822619afccbb5cbab6
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Oct 26 11:44:49 2017 +0100

    Merge external labels in order.

commit 6e4d4ea402b84190f82618bec30275b7f7fb9229
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Oct 24 15:20:05 2017 +0100

    Initialise some counters in remote storage API.

commit b22485bef033c3ed6dc4ad011b41d8ac45eb6453
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 21:59:32 2017 +0100

    Remove spurious test import.

commit 2ae04d0e79226e51893ae96af36d7aff4a0934f9
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 21:39:40 2017 +0100

    Add license header.

commit e8c264e47a14dd002ac37c0a6c5680473a1b4c00
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 21:28:57 2017 +0100

    Add comment.

commit ee011d906d683278518fa3d8439d08b0871e93ff
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 21:28:17 2017 +0100

    Port remote read server to 2.0.

commit 0997191b182bc40a1e050856084fe9b8dc46f523
Author: Bryan Boreham <bjboreham@gmail.com>
Date:   Thu Oct 5 12:32:24 2017 +0100

    Port 'Don't disable HTTP keep-alives for remote storage connections.' to 2.0 (see #3173)
    
    Removes configurability introduced in #3160 in favour of hard-coding,
    per advice from @brian-brazil.

commit 56820726fa6f2621280f4390d91b6a7cc1d47467
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 16:56:47 2017 +0100

    Move a couple of the encoding/decoding functions into codec.go

commit 08b73286694d701c43089267a52b6eea748786a7
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Mon Jul 24 13:49:20 2017 +0100

    Port Metric name validation to 2.0 (see #2975)

commit 8fe0212ff7b5300be2b6d1075c7cd0d2d0d495e6
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 14:57:44 2017 +0100

    Port 'Make queue manager configurable.' to 2.0, see #2991

commit 3760f56c0c7341cccb6bd8c80f94822a05be4066
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 14:53:43 2017 +0100

    remote: Expose ClientConfig type (see #3165)

commit 16f71a7723b612dae7cabd4ef7f0f5048a540b92
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 14:44:57 2017 +0100

    Port codec.go over form 1.8 branch.

commit e53040e2acc009f362a7b074615e694029a531e1
Merge: bf6db1b 4bbef0e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 26 09:14:26 2017 +0200

    Merge pull request #3339 from tomwilkie/3065-remote-read-bypass
    
    Bypass the fanout storage merging if no remote storage is configured.

commit bf6db1bc3b6715a61f0485bcb973ecd76e6b0ce8
Merge: 3055b55 bf56ad4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 26 09:08:48 2017 +0200

    Merge pull request #3344 from criteo-forks/master
    
    Tsdb StartTime : Use a simplier way to compute StartTime

commit bf56ad42332463d6722c815fd1b207a22e723f4c
Merge: fc44062 3055b55
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 26 09:06:12 2017 +0200

    Merge branch 'master' into master

commit 3055b55830864496475460fd88da66df6ad4ff2a
Merge: 5800c25 c4c3205
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 26 09:04:54 2017 +0200

    Merge pull request #3354 from pgier/tsdb-block-duration-check
    
    storage/tsdb: check that max block duration is larger than min

commit 5800c257afc45bb3b4a0aaf2e6b7999b60e7eedb
Merge: ce63a5a 554ccf5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 26 09:03:11 2017 +0200

    Merge pull request #3355 from prometheus/remove-codeclimate
    
    Remove .codeclimate.yml

commit 554ccf551c8dff172ae695cbc0a8828b6b42e83b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Oct 26 04:51:11 2017 +0000

    Remove .codeclimate.yml
    
    See https://github.com/prometheus/prometheus/pull/3333#issuecomment-339209982

commit c4c3205d765deadc4dc9c0410306360038dee51e
Author: Paul Gier <pgier@redhat.com>
Date:   Wed Oct 25 19:24:49 2017 -0500

    storage/tsdb: check that max block duration is larger than min
    
    If the user accidentally sets the max block duration smaller than the min,
    the current error is not informative.  This change just performs the check
    earlier and improves the error message.

commit ce63a5a8557bb33e2030a7756c58fd773736b592
Merge: 808f79f 013f368
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Oct 25 20:39:39 2017 +0200

    Merge pull request #3352 from prometheus/rc2
    
    Cut v2.0.0-rc.2

commit fc4406201e2c89390a51a036d208082d0dcebebe
Author: Thibault Chataigner <t.chataigner@criteo.com>
Date:   Tue Oct 24 16:30:39 2017 +0200

    Tsdb StartTime : Use a simplier way to compute StartTime

commit 013f368449f9dad48e8fd1f9eb9c7bdcbfc9a531
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Oct 25 17:02:59 2017 +0200

    *: cut v2.0.0-rc.2

commit b5d1ec53dad1b6f19e2044d46f87fc4b1bd63944
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 23 22:00:05 2017 +0200

    vendor: update prometheus/tsdb

commit 808f79f00aab29cd6464c71b120105765533c4c7
Author: Jason Anderson <diurnalist@gmail.com>
Date:   Wed Oct 25 15:15:39 2017 +0200

    Feature: Allow getting credentials via EC2 role (#3343)
    
    * Allow getting credentials via EC2 role
    
    This is subtly different than the existing `role_arn` solution, which
    allows Prometheus to assume an IAM role given some set of credentials
    already in-scope. With EC2 roles, one specifies the role at instance
    launch time (via an instance profile.) The instance then exposes
    temporary credentials via its metadata. The AWS Go SDK exposes a
    credential provider that polls the [instance metadata endpoint][1]
    already, so we can simply use that and it will take care of renewing the
    credentials when they expire.
    
    Without this, if this is being used inside EC2, it is difficult to
    cleanly allow the use of STS credentials. One has to set up a proxy role
    that can assume the role you really want, and launch the EC2 instance
    with the proxy role. This isn't very clean, and also doesn't seem to be
    [supported very well][2].
    
    [1]:
    http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html
    [2]: https://github.com/aws/aws-cli/issues/1390
    
    * Automatically try to detect EC2 role credentials
    
    The `Available()` function exposed on ec2metadata returns a simple
    true/false if the ec2 metadata is available. This is the best way to
    know if we're actually running in EC2 (which is the only valid use-case
    for this credential provider.)
    
    This allows this to "just work" if you are using EC2 instance roles.

commit 099df0c5f00c45c007a9779a2e4ab51cf4d076bf
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Oct 24 21:21:42 2017 -0700

    Migrate "golang.org/x/net/context" -> "context" (#3333)
    
    In some places, where ctxhttp or gRPC are concerned, we still need to use the
    old contexts.

commit bd52950ce838e519e1a16fff9300e0d5aefb9daf
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   Tue Oct 24 17:48:58 2017 +0900

    Fix invalid syntax in graph.css (#3309)

commit 4bbef0ec3008ea611bec71a3ba25bab7f6d29ad4
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Oct 23 21:34:53 2017 +0100

    Bypass the fanout storage merging if no remote storage is configured.

commit a57ea796603a48e68a63946f9bef35f3dbb7deba
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 23 21:59:18 2017 +0200

    Close index reader properly

commit 3a7c51ab70fc7615cd318204d3aa7c078b7c5b20
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 23 15:12:22 2017 +0100

    Remote read endpoint should handle matchers for external labels. (#3325)
    
    If the other Prometheus has an external label that matches that of
    the Prometheus being read from, then we need to remove that matcher
    from the request as it's not actually stored in the database - it's
    only added for alerts, federation and on the output of the remote read
    endpoint.
    Instead we check for that label being empty, in case there is a time
    series with a different label value for that external label.

commit c3d6abc8e6444c33c0071aaddbef402aa553ff68
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 23 06:57:30 2017 -0700

    Fix some lint errors (#3334)
    
    I left the promql ones and some others untouched as I remember that @fabxc
    prefers them that way.

commit 2846d62573ca272c73bea0ed3c8aec997e93e64f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 23 03:51:48 2017 -0700

    Fix staticcheck issue in test (#3331)
    
    staticcheck fails with:
    storage/remote/read_test.go:199:27: do not pass a nil Context, even if a function permits it; pass context.TODO if you are unsure about which Context to use (SA1012)

commit 9d43176ab340bc6b621a0d57e6ca2fa336b17579
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 23 00:50:13 2017 -0700

    Remove unused printVersion variable (#3335)
    
    Kingpin now automatically does this via --version.

commit 82c5b984965bde6f6e589badf9da1f4a4dd0a1aa
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 23 00:49:28 2017 -0700

    Capitalize Prometheus in startup message (#3332)
    
    Hey, branding :)

commit 4a50f547c8c7f1a26fb78d8a7b4b265f4cc9c7e1
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Oct 21 08:29:03 2017 +0100

    removeLabels needs a pointer to work. (#3326)

commit 45f9f3c539846aadde7582f2dfc4814cd72a2884
Author: Callum Styan <callumstyan@gmail.com>
Date:   Fri Oct 20 08:56:30 2017 -0700

    use a timeout in the HTTP client used for consul sd (#3303)

commit 55a1311f6a08f6fc3a71330baf4bfa319351ef1f
Author: Krasi Georgiev <krasi-georgiev@users.noreply.github.com>
Date:   Fri Oct 20 16:59:53 2017 +0300

    fix golint nits (#3291)

commit f6df3b7d5757fb358dd10194caefc0e2ecaa2c96
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Oct 19 16:45:27 2017 +0100

    Bump version for 1.8.1

commit ced935e2d2bcb253f11e233862fde40c1b0f64a1
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Oct 19 15:05:25 2017 +0100

    Release 1.8.1 (#3318)

commit be5422a166c4484d6c3d9c3fefbd370068a4f786
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Oct 19 14:59:00 2017 +0200

    Update command line flags in issue template (#3317)

commit 2c163f32a520b74261f2509a838fbb806b7f3079
Author: Alexander Kazarin <boiler@xdot.ru>
Date:   Wed Oct 18 19:02:20 2017 +0300

    fix for issue 2976  (#3313)
    
    fix for null pointer exception in ZookeeperLogger

commit bf4a279a91a668b1e26d6efc351562fa17ff6563
Author: Thibault Chataigner <thibault.chataigner@gmail.com>
Date:   Wed Oct 18 13:08:14 2017 +0200

    Remote storage reads based on oldest timestamp in primary storage (#3129)
    
    Currently all read queries are simply pushed to remote read clients.
    This is fine, except for remote storage for wich it unefficient and
    make query slower even if remote read is unnecessary.
    So we need instead to compare the oldest timestamp in primary/local
    storage with the query range lower boundary. If the oldest timestamp
    is older than the mint parameter, then there is no need for remote read.
    This is an optionnal behavior per remote read client.
    
    Signed-off-by: Thibault Chataigner <t.chataigner@criteo.com>

commit 5ab8834befbd92241a88976c790ace7543edcd59
Merge: 3697075 469629e
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Tue Oct 17 14:24:42 2017 +0200

    Merge pull request #3306 from Gouthamve/rc.1
    
    *: release v2.0.0-rc.1

commit 469629ef0834355484937493f4ab497212fde1ae
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Tue Oct 17 12:28:54 2017 +0200

    *: release v2.0.0-rc.1
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 3697075b8f08bbd838f8db56d6568c8119d61c69
Author: Krasi Georgiev <krasi-georgiev@users.noreply.github.com>
Date:   Tue Oct 17 12:22:59 2017 +0300

    validates that the recording name to  include only allowed characters. (#3305)

commit 9ef8518b375c044199702860b3a368ec2d6ee961
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 16 18:26:38 2017 -0700

    Remove "package remote" garbage from license headers (#3304)

commit 5f715f5733c2fc844db979806e5ae07843657cf6
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 16 15:00:05 2017 -0700

    Fix typo in flag description (#3302)

commit b5851a49e56278096babb207afb78720ad6309c2
Merge: 88e4815 721050c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 16 21:43:55 2017 +0200

    Merge pull request #3297 from prometheus/grobie/update-tsdb
    
    Update prometheus/tsdb dependency

commit 88e4815bb7f5118cb52f86bd9e5fdd680b2088da
Author: pasquier-s <pasquier.simon@gmail.com>
Date:   Mon Oct 16 19:01:50 2017 +0200

    Get OpenStack variables from env as fallback (#3293)
    
    This change enables the OpenStack service discovery to read the
    authentication parameters from the OS_* environment variables when the
    identity endpoint URL is not defined in the Prometheus configuration
    file.

commit 721050c6cbbcb7061cb57c0783886e78b78710f3
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Mon Oct 16 15:27:09 2017 +0200

    Update prometheus/tsdb dependency

commit c25f7c600b7bae4fee845e0574eb2b2eed5cf597
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 16 14:35:47 2017 +0100

    Apply external labels to remote read endpoint (#3263)
    
    Fixes #3261

commit e948721a0b269707a6e89e0c513eb434a7b66c8a
Merge: b276ef1 5da0fd9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 13 07:45:55 2017 +0200

    Merge pull request #3274 from prometheus/matcher-anchoring
    
    Don't add anchoring to exported `Value` matcher field

commit b276ef1c9109ebdc4983a500d3b12c251b6bc818
Author: Bjørn Erik Pedersen <bjorn.erik.pedersen@gmail.com>
Date:   Fri Oct 13 00:15:29 2017 +0200

    Fix "go get" in README (#3288)
    
    You start by saying that you need >= Go 1.8, then you say you need the Go 1.5 flag `GO15VENDOREXPERIMENT`, which was made default in Go 1.6.

commit 3589f2f1d4da8dffb0c0ad65683752a2dcd6e49e
Merge: 7515a6d d7b4fa8
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri Oct 13 00:12:39 2017 +0200

    Merge pull request #3285 from jlevesy/use-testutils-in-cmd-subpackage
    
    Use testutil assertion helpers in cmd package

commit 7515a6de03588868c6fb0265cf995d6d495238e0
Merge: 53875da 6c67296
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri Oct 13 00:11:07 2017 +0200

    Merge pull request #3269 from alcortesm/issue-3242-config
    
    Fix issue 3242 for package config

commit 6c6729642376c04f175dffba7c1cbd9f63918071
Author: Alberto Cortés <alcortesm@gmail.com>
Date:   Tue Oct 10 12:34:03 2017 +0200

    config: fix error message for unexpected result of yaml marshal

commit 0f3d8ea0752871b10ca3e91ca7123041bbf0683e
Author: Alberto Cortés <alcortesm@gmail.com>
Date:   Tue Oct 10 12:29:15 2017 +0200

    config: use testutil package

commit 53875da7fb7d4fce45223e4627e3fe38c86a1db0
Merge: a91d3bc 269b5cf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 12 16:19:10 2017 +0200

    Merge pull request #3286 from prometheus/dev-2.0
    
    Dev 2.0

commit d7b4fa8d784088d2f5972fef7a9d25cb8e1af847
Author: Julien Levesy <jlevesy@tea-ebook.com>
Date:   Thu Oct 12 13:16:54 2017 +0200

    use testutil assertions in the cmd/prometheus package

commit 8c1b9e45cf59ef269e4960fb4c6d803943f27e3f
Author: Julien Levesy <jlevesy@tea-ebook.com>
Date:   Thu Oct 12 13:14:58 2017 +0200

    add a NotOk helper method in the testing package

commit a91d3bcb83a915795372b80ae46a284c423b4699
Author: BasPH <BasPH@users.noreply.github.com>
Date:   Wed Oct 11 15:11:04 2017 +0200

    Add UI warning for time drift >30 seconds (#3276)
    
    * Add UI warning for time drift >30 seconds
    
    * Yellow time drift warning & better warning message
    
    * Set warning threshold to 30 sec
    
    * Include changed assets

commit 5da0fd91dbec3146948084e354f8c90cbeaaff25
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Oct 10 17:13:55 2017 -0700

    Add label matcher tests

commit 33c1171b9c50296ce61b86c0c4b2dfc19aea6545
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Oct 10 10:10:21 2017 -0700

    Don't add anchoring to exported `Value` matcher field
    
    Instead, just make the anchoring part of the internal regex. This helps because
    some users will want to read back the `Value` field and expect it to be the
    same as the input value (e.g. some tests in Cortex), or use the value in
    another context which is already expected to add its own anchoring, leading to
    superfluous double anchoring (such as when we translate matchers into remote
    read request matchers).

commit 269b5cf936e84624e3e8087db6754488075e0e6e
Merge: abf7c97 26a067b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Oct 10 10:58:27 2017 +0200

    Merge pull request #3245 from jlevesy/use-require-web
    
    Imports benbjohnson/testing and use it in web package

commit ea879df6aa2a38329fa70701d6cee001d357e9e1
Merge: 73dc96e 38afa50
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Oct 10 10:53:30 2017 +0200

    Merge pull request #3265 from mathieui/better-cmdline-errors
    
    Provide better errors messages in commandline

commit 73dc96e7f543d55c1600098617390eaba31dd938
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 9 17:36:20 2017 +0100

    Fix leak of ticker in remote storage queue manager.

commit 5ee07b3b3a59b95cbdd007a66a6ca30df9002c86
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 9 17:34:48 2017 +0100

    Update staticcheck ignores
    
    Remove things that now longer apply, ignore new things
    that are acceptable.

commit cc5499fcad53121ea7502a7bac4ecfe9da7c00aa
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 9 17:03:33 2017 +0100

    Only close after checking for err.

commit 7158675aa83a7686ff17cf598fcf4024335e879a
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 9 16:59:52 2017 +0100

    Add back continue.
    
    Accidentally removed in
    https://github.com/prometheus/prometheus/commit/15a931dbdb728160a40a5ad73b0ae258a05e7ff3

commit 1545842704dc00ce8e03ce64a0f85b4d03129cd7
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 9 16:57:05 2017 +0100

    TrimPrefix removes a prefix, TrimLeft removes chars

commit ee88f0d222f73e310fc760a2f7f61b22bc0c5825
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 9 16:53:24 2017 +0100

    Ensure all values are used or _

commit 8740fcc65741645d37b08d67b7c685430154705b
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 9 16:47:31 2017 +0100

    Use panic in goroutine in test, not t.Fatalf

commit 38afa507bb81b23de697be16d53048b191821a45
Author: Mathieu Pasquet <mathieu.pasquet@alterway.fr>
Date:   Mon Oct 9 16:25:50 2017 +0200

    Provide better errors messages in commandline
    
    Instead or only printing the help message, which is not always helpful.
    For example, when upgrading from prometheus v1, the retention time value
    format has changed and now only accepts one unit (e.g. "15d") where it
    previously allowed more complex strings (e.g. "360h0m0s").
    
    This commit provides the error message as an explanation for the parsing
    failure.

commit 37ec2d528382841d5a577d3cc901255e1538856f
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 9 13:37:58 2017 +0100

    Fix off by one error in concreteSeriesSet (#3262)

commit abf7c975c9ac1606bf22da14097ece00bd08f577
Merge: 6a633ee 3569eef
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 7 13:37:21 2017 +0200

    Merge branch 'master' into dev-2.0

commit 3569eef8b1bc062bb5df43181b938277818f365b
Merge: 6bfc8f0 5829e48
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sat Oct 7 00:08:01 2017 +0200

    Merge pull request #3260 from prometheus/beorn7/release
    
    Cut v1.8.0

commit 5829e4880d54451c41fda072f0a659f1037ad6a8
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 6 16:30:09 2017 +0200

    Cut v1.8.0

commit 6bfc8f094ceb817c3563d51e7181a4a663a4b384
Merge: 5fad671 f20e6a0
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Oct 6 18:41:11 2017 +0200

    Merge pull request #3259 from prometheus/beorn7/web
    
    Only respond to API requests once the server is ready

commit f20e6a0ae4ed63db328aea16c20c49f8dd8a5750
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 6 17:20:20 2017 +0200

    Only respond to API requests once the server is ready

commit 5fad671af9a1ca7ddf5c3768880d9934e6700800
Merge: a5412cf 2fad91d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Oct 6 14:55:16 2017 +0200

    Merge pull request #3257 from prometheus/beorn7/storage2
    
    Avoid blocking in the logThrottling loop

commit 2fad91d25a957d4329140889ed501957c72c3651
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 6 14:19:30 2017 +0200

    Avoid blocking in the logThrottling loop
    
    The timer semantics is really hard. The simple pattern as given in the
    godoc for the time package assumes we are not elsewhere consuming from
    the timer's channel. However, exactly that can happen here with the
    right sequence of events. Thus, we have to drain the channel only if
    it has something to drain.

commit a5412cfc598d5094798085c6348b27d7302ef8f9
Merge: 128b31d 7e814ad
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Oct 6 13:31:07 2017 +0200

    Merge pull request #3252 from LK4D4/proper_reset
    
    [storage/local] fix timer.Reset usage

commit 128b31d058cefe4907f28de462393fbeffc5440c
Author: Jack Neely <jjneely@gmail.com>
Date:   Fri Oct 6 06:22:55 2017 -0400

    Log failure to send NaN values to remote store as Debug (#3235)
    
    This was a warning and can be a frequent occurrence.  Let's not fill up
    logs unless we are asked to.

commit 6a633eece19a782cfeddac435b60c1a7abc2488a
Author: Marc Sluiter <marc@slintes.net>
Date:   Fri Oct 6 12:22:19 2017 +0200

    Added go-conntrack for monitoring http connections (#3241)
    
    Added metrics for in- and outgoing traffic with go-conntrack.

commit 7e814ada72dd2d60d44e1b72741ac9e4ba944683
Author: Alexander Morozov <lk4d4math@gmail.com>
Date:   Thu Oct 5 14:56:52 2017 -0700

    [storage/local] fix timer.Reset usage
    
    According to https://golang.org/pkg/time/#Timer.Reset you must not rely
    on a returned value from Reset.
    
    Signed-off-by: Alexander Morozov <lk4d4math@gmail.com>

commit 26a067b23d3f8b4831d7634c8cb9e53784765ac2
Author: Julien Levesy <jlevesy@tea-ebook.com>
Date:   Thu Oct 5 22:40:10 2017 +0200

    use testutil assertion helpers in web package testsuite

commit 332910d02d26cf54042e5e49f000170369b1b48c
Author: Julien Levesy <jlevesy@tea-ebook.com>
Date:   Thu Oct 5 13:52:42 2017 +0200

    import assertion helpers in testutil

commit 012e52e3f9a0c1741b160498615a29bd5d723028
Merge: 748d392 7779d34
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Oct 5 20:07:14 2017 +0530

    Merge pull request #3248 from Gouthamve/release-rc1
    
    *: release v2.0.0-rc.0

commit 7779d3487747a0f1fa6e371ae9ada01a80216283
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Oct 5 19:28:40 2017 +0530

    *: release v2.0.0-rc.0
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 748d392a7aa01a96d7c96dd1ad95010a2662a870
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 5 15:08:24 2017 +0200

    vendor: remove unused dependencies

commit f52248269ee597cbf3bddb2aa6c159d2322f0dff
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 5 14:38:39 2017 +0200

    vendor: update prometheus/tsdb

commit 7a3261aa99f0316f56ffc7ab4d30932ba14abd45
Merge: 46dc7e3 35aaa20
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 5 14:33:12 2017 +0200

    Merge pull request #3240 from Gouthamve/fix-admin-api
    
    web/api: Fix typo which broke the 2.0 admin APIs.

commit 46dc7e356a8e095d9c36d5743184d9b4eb8d73ba
Merge: 99905f8 2d0b8e8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 5 14:32:52 2017 +0200

    Merge pull request #3243 from prometheus/mergemaster
    
    Merge master into dev-2.0

commit 99905f82a6896810631c17d07cb53bcd6bef5b53
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Oct 5 13:19:52 2017 +0100

    Remove keep_common modifier.
    
    See #3060

commit b2ac3d2d86d7190675fc716d434f2ad6f8bf6125
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Oct 5 13:05:11 2017 +0100

    Remove count_scalar and drop_common_labels.
    
    For #3060

commit 67274f0794fd8ac1d7e731c40db40885eca9360a
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Oct 5 12:55:14 2017 +0100

    Remove 4 interval staleness heuristic. (#3244)
    
    This means that if there is no stale marker, only the usual staleness
    delta (5m) applies.
    
    It has occured to me that there is an oddity in the heurestic. It works
    fine as long as you have 2 points within the last 5m, but breaks down
    when the time window advances to the point where you have just 1 point.
    
    Consider you had points at t=0 and t=10. With the heurestic it goes stale
    at t=51, up until t=300. However from t=301 until t=310 we only
    see the t=10 point and the series comes back to life. That is not
    desirable.
    
    I don't see a way to keep this form of heurestic working given this
    issue, so thus I'm removing it.

commit a03193232a9b0123508628c57b6a10ebb16a56af
Author: Bryan Boreham <bjboreham@gmail.com>
Date:   Thu Oct 5 12:32:24 2017 +0100

    Don't disable HTTP keep-alives for remote storage connections. (#3173)
    
    Removes configurability introduced in #3160 in favour of hard-coding,
    per advice from @brian-brazil.

commit 2d0b8e8b94fd9ead7ae3eb54f4764fecb0c3a2eb
Merge: f7e8348 9c475b9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 5 12:16:15 2017 +0200

    Merge branch 'master' into dev-2.0

commit 35aaa2002d24d13c4ff797cd97691904aaedb9c8
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Oct 5 11:08:07 2017 +0530

    web/api: Add tests for v2 admin API
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit f7e8348a88f4b27218e2dc28f7c92ee9b25632cc
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Oct 4 21:04:15 2017 +0200

    Re-add contexts to storage.Storage.Querier() (#3230)
    
    * Re-add contexts to storage.Storage.Querier()
    
    These are needed when replacing the storage by a multi-tenant
    implementation where the tenant is stored in the context.
    
    The 1.x query interfaces already had contexts, but they got lost in 2.x.
    
    * Convert promql.Engine to use native contexts

commit 9c475b95dbdaf1690cf87a958b901e348ba574ec
Merge: 639d5c6 08af129
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Oct 4 18:37:44 2017 +0200

    Merge pull request #3199 from pgier/remove-go-validator
    
    cmd/prometheus: remove govalidator for url validation

commit 08af129b4da1bf61efd8051b0e6490c92b769b91
Author: Paul Gier <pgier@redhat.com>
Date:   Wed Oct 4 10:01:04 2017 -0500

    cmd/prometheus: don't allow quotes at beginning or end of url
    
    This prevents accidental copy/paste error where a the web.external-url
    or alertmanager.url params could have an extra set of quotes.
    See also: https://github.com/prometheus/prometheus/issues/1229

commit f79b55d057bc52b00fe59a6f038373dac6e41b60
Author: Paul Gier <pgier@redhat.com>
Date:   Wed Sep 20 16:04:57 2017 -0500

    cmd/prometheus: remove govalidator for url validation
    
    The usage of govalidator is redundant with the call to url.Parse for
    url validation. Removing it has the following benefits:
    
     - The explicit error message is displayed instead of just a generic
       valid/invalid message
     - Slightly smaller code with one fewer external dependency
     - Speed improvement by removing duplicate call to url.Parse (inside
       govalidator.IsURL()
     - Resolves issue #2717
    
    The only potential drawback of removing govalidator is that certain
    URLs will be considered valid which were previously invalid. For example:
    
     - URLs with hostnames that start and/or end with an underscore (http://_example.com_)
     - URLs with hostnames that contain some special characters (http://foo&*bar.org)
    
    These are valid URIs according to RFC 3986 and valid domain names per RFC 2181,
    however they are not valid hostnames per RFC 952.

commit d70f850a180b1c0e25ef99b9a546d3170facd26b
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Oct 4 17:02:32 2017 +0530

    web/api: Fix typo which broke the 2.0 admin APIs.
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit c4270fdbf4092121fd9a1318c0cf4368df32c373
Merge: 52ea748 3c17e51
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 2 16:57:04 2017 +0200

    Merge pull request #3229 from krasi-georgiev/update-go-stack
    
    vendor: update go-stack to fix sigpanic when debugging with delve

commit 3c17e5139117b6461fb0eec92320377321ed9d8a
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Fri Sep 29 15:04:58 2017 +0300

    vendor: update go-stack to fix sigpanic when debugging with delve
    
    Signed-off-by: Krasi Georgiev <krasi.root@gmail.com>

commit 639d5c6f98a6bf9790dbcc8d29d2ebcc14e40995
Merge: f1d4558 758d64f
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Sep 28 17:19:37 2017 +0100

    Merge pull request #3023 from tomwilkie/2945-remote-read-server
    
    Implement remote read server in Prometheus.

commit f1d4558469514e69e1476cc43fdee1e8d9d6bd08
Merge: bea12d4 2e8092a
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 28 16:46:33 2017 +0200

    Merge branch 'release-1.7'

commit 2e8092aec9b691676647cab0298410f5b0151f57
Merge: 22eadbe 7622c2b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Sep 28 16:25:11 2017 +0200

    Merge pull request #3177 from prometheus/beorn7/release2
    
    Move to Go1.9

commit bea12d4be1ecd24ecafab2a16f6d9dcc0b0cbc27
Merge: e8ce37a 22eadbe
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Sep 26 17:46:56 2017 +0200

    Merge branch 'release-1.7'

commit 22eadbe635528fa17b99a7635fed6b6018103042
Merge: dd38135 f51c97c
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Sep 26 17:41:38 2017 +0200

    Merge pull request #3222 from prometheus/beorn7/release
    
    Cut v1.7.2

commit e8ce37ad0de945f4aa4429b9c0806d74a8644048
Merge: f104a5d 2c97391
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Sep 26 17:39:53 2017 +0200

    Merge pull request #3223 from alcortesm/dead-code-at-stats
    
    util/stats: remove dead code

commit f104a5dfc6cb09b42ef5224e3dce3ec56a35d51d
Merge: 398fa4f bb3dad9
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Sep 26 17:18:41 2017 +0200

    Merge pull request #3224 from alcortesm/config-simplify-returns
    
    config: simplify some returns

commit bb3dad9cba4fb34845b51ddd9b4ca0116ca5e8d6
Author: Alberto Cortés <alcortesm@gmail.com>
Date:   Tue Sep 26 16:57:56 2017 +0200

    config: simplify some returns

commit 2c9739162e207713d374b1a2f9869f5e3539eb37
Author: Alberto Cortés <alcortesm@gmail.com>
Date:   Tue Sep 26 16:32:45 2017 +0200

    utils/stats: remove dead code

commit f51c97c7d42ce223fb3cf42b41b2203c06edbcfa
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Sep 26 15:27:13 2017 +0200

    Cut v1.7.2

commit 52ea748248b7db940953a572d08b31f7d5a5cc9b
Merge: 64c7932 40c278e
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Mon Sep 25 15:18:31 2017 +0200

    Merge pull request #3215 from prometheus/grobie/http-accept
    
    Send a HTTP Accept header when scraping

commit 40c278ee2d2882898b18951ed70da325bcf84f9b
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri Sep 22 18:06:43 2017 +0200

    Send a HTTP Accept header when scraping

commit 398fa4fd028372fe9c280e4719e9cabbab094f45
Merge: 16c95ae c2e9a15
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Sep 21 19:53:48 2017 +0200

    Merge pull request #3205 from prometheus/beorn7/ui
    
    Make all rule links link to the "Console" tab rather than "Graph"

commit c2e9a151abe8ed0ab27b447b858b1d09a4c8373b
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 21 17:56:02 2017 +0200

    Make all rule links link to the "Console" tab rather than "Graph"
    
    Clicking on a rule, either the name or the expression, opens the rule
    result (or the corresponding expression, repsectively) in the
    expression browser. This should by default happen in the console tab,
    as, more often than not, displaying it in the graph tab runs into a
    timeout.

commit 16c95ae8e790b581ba6eeff0a5f5677f5a95894d
Merge: fae3bd1 dd38135
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 21 18:27:12 2017 +0200

    Merge branch 'release-1.7'

commit 64c7932e851f3276391fc3e216cd30f447d4924e
Merge: 249d69b c2166d4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 21 18:20:29 2017 +0200

    Merge pull request #3202 from prometheus/beta5
    
    *: release v2.0.0-beta.5

commit c2166d48bb78c0115ea32b03284e7f1c513bec6f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 21 15:32:24 2017 +0200

    *: cut v2.0.0-beta.5

commit 34f0af30cff30c7319d474f8b034c685931e8b51
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 21 15:27:21 2017 +0200

    vendor: update prometheus/tsdb

commit 254ec433ee98dc3e40ded0239344f0141988b746
Merge: 701152d 249d69b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 21 09:55:17 2017 +0200

    Merge branch 'dev-2.0' of github.com:prometheus/prometheus into dev-2.0

commit 249d69b51349576d197d1ae81fd16a8d4c8eeeb5
Merge: 18078e3 7b02bfe
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 21 09:53:03 2017 +0200

    Merge pull request #3186 from prometheus/startweb
    
    web: start web handler while TSDB is starting up

commit 701152d574e674b4c0a118c09a7c28a6ec728947
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 20 15:15:42 2017 +0200

    vendor: update tsdb revisions to master

commit 7b02bfee0ac7d93a182bc66dae476f16289955a0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 18 12:32:17 2017 +0200

    web: start web handler while TSDB is starting up

commit 18078e3fcc4a0ea77266a8d7757e44e775b13c5d
Merge: d6fbfb4 437f51a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 20 15:00:27 2017 +0200

    Merge pull request #3192 from prometheus/scrapecache
    
    Fix cache maintenance on changing metric representations

commit dd381356a50cd1f95c7ca65e6c4d36c0bfac2f41
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Sep 19 18:53:00 2017 +0200

    Tweak floating point number rendering

commit eaff0dcfc35389add05536378f68457fec562469
Merge: f6367af 61b6311
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Sep 19 18:30:45 2017 +0200

    Merge branch 'yamatoya-fix_ui_graph_decimal_axis' into release-1.7

commit 61b631150443d9ca79be2fdaadff823de38f1afc
Merge: f6367af b1151bd
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Sep 19 18:30:18 2017 +0200

    Merge branch 'fix_ui_graph_decimal_axis' of git://github.com/yamatoya/prometheus into yamatoya-fix_ui_graph_decimal_axis

commit 437f51a85f0199501b6dea8fbac1a9b573958721
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 15 11:08:51 2017 +0200

    Fix cache maintenance on changing metric representations
    
    We were not properly maintaining the scrape cache when the same metric
    was exposed with a different string representation.
    This overall reduces the scraping cache's complexity, which fixes the
    issue and saves about 10% of memory in a scraping-only Prometheus
    instance.

commit a04be0bc1c85eb2d6774198c37418020115c60d4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 19 14:24:26 2017 +0200

    vendor: update prometheus/tsdb

commit b1151bdabce3d50cf2e9ea3ac9431b89cffe4ee1
Author: Takahito Yamatoya <info@poop.jp>
Date:   Tue Sep 19 11:11:39 2017 +0900

    ui changed, limit the number of digits for the larger units is 5

commit d6fbfb49eb98afe57861748f220dfeaf363a3349
Merge: 6c00709 b4b0999
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 18 18:10:50 2017 +0200

    Merge pull request #3137 from krasi-georgiev/3083-api-ignores-prefix-option
    
    fixes #3083 - api ignores prefix option - when binary started with custom web.external-url

commit b4b0999e7f82bf9d064a7f5eae9c2a6406910f35
Author: Krasi Georgiev <krasi.root@gmail.com>
Date:   Wed Sep 6 15:41:07 2017 +0300

    add prefix to the api when prometheus started with custom web.external-url
    
    Signed-off-by: Krasi Georgiev <krasi.root@gmail.com>

commit 1eac566d094f16cb3e8d8af2c0a7d0ad1e60e218
Author: Takahito Yamatoya <info@poop.jp>
Date:   Mon Sep 18 22:55:22 2017 +0900

    add ;  , and change from B to G, and  change from K to k, and add all the prefixes

commit fae3bd17b950f4574a0827d975e4e7df80d5abfb
Merge: e7aab27 bbc9671
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Mon Sep 18 14:24:08 2017 +0100

    Merge pull request #3132 from tomwilkie/fix-debug-handlers
    
    Get pprof handlers working again

commit bbc9671d50eed2223a05bb2af204ac2dacbf38e2
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Fri Sep 1 12:12:51 2017 +0100

    Get profile handlers working again after #3054 and #3146.
    
    Ensures the pprod endpoints deal with path-prefixes correctly; adds a test so we don't break it again.

commit 6c0070986dd36d0192d985c5f038c06bb7725468
Merge: 1b80f63 3f0267c
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Sep 18 16:35:44 2017 +0530

    Merge pull request #3152 from Gouthamve/go-kit/log
    
    Move logging to go-kit logger

commit e7aab2791a8cbc36a16bf9e9b279b17b6fff08af
Merge: 84211bd f6367af
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Sep 18 12:14:37 2017 +0200

    Forward-merge bug fixes frem branch 'release-1.7'

commit f6367afca458b30f99227143e747180996ce4fe5
Merge: 5d707d3 7a8e340
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Sep 18 12:08:14 2017 +0200

    Merge branch 'yamatoya-fix_web_ui_utc' into release-1.7

commit 7a8e340c1add6dfc5013088cac739acd5e9f339e
Merge: 5d707d3 738a51b
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Sep 18 12:07:52 2017 +0200

    Merge branch 'fix_web_ui_utc' of git://github.com/yamatoya/prometheus into yamatoya-fix_web_ui_utc

commit 5d707d3aa3a3bd7333d530b24e69f54288e8e47a
Author: Takahito Yamatoya <info@poop.jp>
Date:   Mon Sep 18 18:45:57 2017 +0900

    #2439 library version update JQuery / JQuery.Selection / JQuery.hotkey (#3183)

commit ff038a4a39247a650553d75a6df7c92d7d6bedb7
Author: Takahito Yamatoya <info@poop.jp>
Date:   Sun Sep 17 00:20:39 2017 +0900

    bug fix

commit 7a3c348f83cd9e69ce29f8e50bfa86393d41ac9e
Author: Takahito Yamatoya <info@poop.jp>
Date:   Sun Sep 17 00:16:40 2017 +0900

    fix decimal y-axis

commit 758d64ffd903e8e4cc33cbdbff15a10dd695cabd
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Sat Sep 16 11:15:03 2017 +0200

    s/EncodReadResponse/EncodeReadResponse/

commit febed48703b6f82b54b4e1927c53ab6c46257c2f
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Aug 3 21:03:19 2017 +0100

    Implement remote read server in Prometheus.

commit 738a51bea6b7584d75c6bda25687168356b9ba1a
Author: Takahito Yamatoya <info@poop.jp>
Date:   Sat Sep 16 11:38:29 2017 +0900

    #2371 fix to display utc date at datetime picker

commit 3f0267c54885d6319cf0500a7ed2f1513a17228f
Merge: f5aed81 1b80f63
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Sep 15 23:15:27 2017 +0530

    Merge branch 'dev-2.0' into go-kit/log
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 84211bd2dfc2ad1a47cd599c89469ffbb5517928
Merge: 8ebeed0 3369422
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Sep 15 13:44:05 2017 +0200

    Foward-merge bug fixes and cherry-picks from 'release-1.7'

commit 33694223274edbae29fafcf9e0d3fd5aea0c6da9
Author: Matt Palmer <mpalmer@hezmatt.org>
Date:   Fri Sep 15 20:26:10 2017 +1000

    Improve DNS response handling to prevent "stuck" records [Fixes #2799] (#3138)
    
    The problem reported in #2799 was that in the event that all records for a
    name were removed, the target group was never updated to be the "empty" set.
    Essentially, whatever Prometheus last saw as a non-empty list of targets
    would stay that way forever (or at least until Prometheus restarted...).  This
    came about because of a fairly naive interpretation of what a valid-looking
    DNS response actually looked like -- essentially, the only valid DNS responses
    were ones that had a non-empty record list.  That's fine as long as your
    config always lists only target names which have non-empty record sets; if
    your environment happens to legitimately have empty record sets sometimes,
    all hell breaks loose (otherwise-cleanly shutdown systems trigger up==0 alerts,
    for instance).
    
    This patch is a refactoring of the DNS lookup behaviour that maintains
    existing behaviour with regard to search paths, but correctly handles empty
    and non-existent record sets.
    
    RFC1034 s4.3.1 says there's three ways a recursive DNS server can respond:
    
    1.  Here is your answer (possibly an empty answer, because of the way DNS
       considers all records for a name, regardless of type, when deciding
       whether the name exists).
    
    2. There is no spoon (the name you asked for definitely does not exist).
    
    3. I am a teapot (something has gone terribly wrong).
    
    Situations 1 and 2 are fine and dandy; whatever the answer is (empty or
    otherwise) is the list of targets.  If something has gone wrong, then we
    shouldn't go updating the target list because we don't really *know* what
    the target list should be.
    
    Multiple DNS servers to query is a straightforward augmentation; if you get
    an error, then try the next server in the list, until you get an answer or
    run out servers to ask.  Only if *all* the servers return errors should you
    return an error to the calling code.
    
    Where things get complicated is the search path.  In order to be able to
    confidently say, "this name does not exist anywhere, you can remove all the
    targets for this name because it's definitely GORN", at least one server for
    *all* the possible names need to return either successful-but-empty
    responses, or NXDOMAIN.  If any name errors out, then -- since that one
    might have been the one where the records came from -- you need to say
    "maintain the status quo until we get a known-good response".
    
    It is possible, though unlikely, that a poorly-configured DNS setup (say,
    one which had a domain in its search path for which all configured recursive
    resolvers respond with REFUSED) could result in the same "stuck" records
    problem we're solving here, but the DNS configuration should be fixed in
    that case, and there's nothing we can do in Prometheus itself to fix the
    problem.
    
    I've tested this patch on a local scratch instance in all the various ways I
    can think of:
    
    1. Adding records (targets get scraped)
    
    2. Adding records of a different type
    
    3. Remove records of the requested type, leaving other type records intact
       (targets don't get scraped)
    
    4. Remove all records for the name (targets don't get scraped)
    
    5. Shutdown the resolver (targets still get scraped)
    
    There's no automated test suite additions, because there isn't a test suite
    for DNS discovery, and I was stretching my Go skills to the limit to make
    this happen; mock objects are beyond me.

commit f5aed810f9b618980f8d6c8c49e1f04b9f3196e3
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Sep 8 22:04:20 2017 +0530

    logging: Port to common/promlog
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 4b8666b739a6fc52c319852bf82024ac4c0cd5c9
Merge: df4bc3e a3fd7dd
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Sep 14 19:07:52 2017 +0200

    Merge pull request #3176 from prometheus/beorn7/release
    
    Backport the templating fix from master

commit 7622c2bc5fe92c3f33fc74898292247f91b4b987
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 14 18:26:57 2017 +0200

    Move to Go1.9

commit a3fd7dd335ec199ef0dbcf1ffd84fcc43950d576
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 14 18:12:00 2017 +0200

    Backport the templating fix from master
    
    The original fix is in commit 5f5d77848e54a7995b13e8a463b9f1fd3fc6123e

commit 8ebeed0b44280705d4eb4a2431e8546fd2978b76
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Sep 14 15:25:09 2017 +0200

    remote: Expose ClientConfig type (#3165)
    
    The Client type is already exposed, but can't be used without the config for it
    also being exposed. Using the remote.Client from other programs is useful to do
    full end-to-end tests of Prometheus's remote protocol against adapter
    implementations.

commit df4bc3e407bbd11b1f03fa97a5180ace60c1e0f3
Merge: 4d8e7ca 4f8efdb
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Sep 14 13:29:34 2017 +0200

    Merge pull request #3170 from tomwilkie/1.7-2969-negative-shards
    
    Prevent number of remote write shards from going negative.

commit 1b80f631a88a01473c1356d50da12eb49b462050
Merge: 1121b9f a31e652
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 14 13:20:26 2017 +0200

    Merge pull request #3172 from prometheus/cutbeta4
    
    *: cut 2.0.0-beta.4

commit a31e6522e447ccff9ea51cc7e5a27e7814590353
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 14 12:46:49 2017 +0200

    *: cut 2.0.0-beta.4

commit f66f882d083b3204b040782f76e6445e80f570be
Merge: 1ab0bbb 9d6b945
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Sep 14 08:23:43 2017 +0100

    Merge pull request #3160 from bboreham/remote-keepalive
    
    Re-enable http keepalive on remote storage

commit 4f8efdbd5966b8c407d735d0e0a94305906884f5
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 19 16:27:19 2017 +0100

    Prevent number of remote write shards from going negative.
    
    This can happen in the situation where the system scales up the number of shards massively (to deal with some backlog), then scales it down again as the number of samples sent during the time period is less than the number received.

commit 1121b9f7d4cac8aa6ee617b1ea1ef55022f0435a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 8 14:34:45 2017 +0200

    retrieval: cache dropped series, mutate labels in place

commit 1ab0bbb2c219e295cd37b9d03ad6599034fe6612
Merge: 8bee283 59aca41
Author: Ben Kochie <superq@gmail.com>
Date:   Wed Sep 13 14:42:29 2017 -0700

    Merge pull request #3125 from prometheus/bjk/staticcheck
    
    Enable statitcheck at build time.

commit 4d8e7ca1853d68f0d14e81099c9fe3f14cdb707e
Merge: a5ddcf5 e758260
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Sep 12 18:53:40 2017 +0200

    Merge pull request #3159 from mattbostock/1.7_marathon_sd_cherrypick
    
    Marathon SD: Set port index label

commit 13f59329ab7c47e8af10abe540dae37bd26c1144
Merge: 2b2e214 7f300f2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 12 12:13:16 2017 +0200

    Merge pull request #3162 from prometheus/cutbeta3
    
    *: cut 2.0.0-beta.3

commit 7f300f27cbbfcebda64931d15a0d37074cfdb06c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 12 12:07:51 2017 +0200

    *: cut 2.0.0-beta.3

commit 2b2e214857239b07d125ff4d1da73417f88db181
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 12 12:01:54 2017 +0200

    vendor: update prometheus/tsdb

commit 63c246f9246cf6c61b76e82ba2070b03f77930e4
Merge: e746282 e6d8199
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 12 12:01:09 2017 +0200

    Merge branch 'dev-2.0' of github.com:prometheus/prometheus into dev-2.0

commit e7582609865a18c55c067433294c2692107dc48c
Author: Matt Bostock <mbostock@cloudflare.com>
Date:   Tue Jun 20 15:43:36 2017 +0100

    Marathon SD: Set port index label
    
    The changes [1][] to Marathon service discovery to support multiple
    ports mean that Prometheus now attempts to scrape all ports belonging to
    a Marathon service.
    
    You can use port definition or port mapping labels to filter out which
    ports to scrape but that requires service owners to update their
    Marathon configuration.
    
    To allow for a smoother migration path, add a
    `__meta_marathon_port_index` label, whose value is set to the port's
    sequential index integer. For example, PORT0 has the value `0`, PORT1
    has the value `1`, and so on.
    
    This allows you to support scraping both the first available port (the
    previous behaviour) in addition to ports with a `metrics` label.
    
    For example, here's the relabel configuration we might use with
    this patch:
    
        - action: keep
          source_labels: ['__meta_marathon_port_definition_label_metrics', '__meta_marathon_port_mapping_label_metrics', '__meta_marathon_port_index']
          # Keep if port mapping or definition has a 'metrics' label with any
          # non-empty value, or if no 'metrics' port label exists but this is the
          # service's first available port
          regex: ([^;]+;;[^;]+|;[^;]+;[^;]+|;;0)
    
    This assumes that the Marathon API returns the ports in sorted order
    (matching PORT0, PORT1, etc), which it appears that it does.
    
    [1]: https://github.com/prometheus/prometheus/pull/2506

commit 9d6b945e415b52c04eba9790da42f072a8cbc0f0
Author: Bryan Boreham <bjboreham@gmail.com>
Date:   Mon Sep 11 09:08:26 2017 +0000

    Default HTTP keep-alive ON for remote read/write

commit e0a4d183013977b5836ae8b06182f747330a243e
Author: Bryan Boreham <bjboreham@gmail.com>
Date:   Mon Sep 11 09:07:14 2017 +0000

    Allow http keep-alive setting to be overridden in config

commit e746282772e525fd4c46ccb90321822dd6549c52
Merge: a8887f4 8bee283
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 11 10:55:19 2017 +0200

    Merge branch 'master' into dev-2.0

commit e6d819952ba1e41e7807fa4bf7564e03f94b4a64
Merge: a8887f4 5bed8af
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 11 10:23:19 2017 +0200

    Merge pull request #3145 from prometheus/mempool
    
    Use memory pools for scrape buffer

commit 8bee283f8aac7c03bbdba3488d0d56fe22d3f778
Merge: 9b4c3d4 7a135e0
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sat Sep 9 19:20:47 2017 +0200

    Merge pull request #2895 from jamiemoore/ec2_discovery_rolearn
    
    Add the ability to assume a role for ec2 discovery

commit 7a135e0a1b91053f892d7579ed5b734971cfcee0
Author: Jamie Moore <jbgmoore@gmail.com>
Date:   Tue Jul 4 16:40:55 2017 +1000

    Add the ability to assume a role for ec2 discovery

commit d21f149745a7d81f5475ba6d495b9644a0bcf5d2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 11 20:45:52 2017 +0200

    *: migrate to go-kit/log

commit 9b4c3d4254c92306c5e0404ab919836c861512a7
Merge: 64c7c56 27bdddb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 8 14:19:46 2017 +0200

    Merge pull request #3146 from prometheus/fixprofpath
    
    web: fix profile paths

commit 64c7c56df8e424105447d34bed1ab07a0f9e7f88
Merge: 6ab652e bb853ab
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 8 09:36:14 2017 +0200

    Merge pull request #3147 from dvrkps/patch-1
    
    travis: add 1.x to go versions

commit bb853abf24982af4f27b12f5dc69236ed7a569d1
Author: Davor Kapsa <dvrkps@users.noreply.github.com>
Date:   Thu Sep 7 17:24:02 2017 +0200

    travis: add 1.x to go versions

commit 27bdddbf512af92394711fd106247b699f43b114
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 7 16:24:12 2017 +0200

    web: fix profile paths

commit 5bed8af4cb6e74d1b9885d8de26959e9e25de861
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 7 14:43:21 2017 +0200

    retrieval: pool scrape buffers
    
    This adds a bucketed buffer pool to the scrapers so we don't have to
    allocate a new buffer on each scrape or hold it fixed to the scrape
    loop.
    
    The latter can consume significant amounts of unused memory, e.g. 4GB
    when scraping 2MB /metrics from 2000 targets.

commit d6f6ad67b389ed135d8946fa923b0a5f7bcba4d0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 25 12:36:43 2017 +0200

    pkg/pool: create bucketed memory pool package.

commit a8887f46dcc4dc27b15b9d917ec729b5732d589c
Merge: 0efecea 153cb0c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 7 14:15:12 2017 +0200

    Merge branch 'dev-2.0' of github.com:prometheus/prometheus into dev-2.0

commit 0efecea6d4d70172d1f9e5fc9f0fde6cd6eea6d6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 7 14:14:41 2017 +0200

    Adapt storage APIs to uint64 references

commit a007eb2e1eeb3e42d504adb9bcd1e5cca804d524
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 7 14:14:33 2017 +0200

    vendor: update prometheus/tsdb to single head mode

commit 6ab652e3dc29b9e78fc2a924723494581878dfff
Merge: a0280cc 7e6c602
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 7 13:51:47 2017 +0200

    Merge pull request #3144 from wgliang/master
    
    should use time.Since instead of time.Now().Sub

commit a0280cc4890b7250549311d280edbfc82d108739
Merge: 70f3d1e 75aec7d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 7 13:51:20 2017 +0200

    Merge pull request #3142 from prometheus/fish/fix-k8s-ingress-type
    
    k8s: Use versioned struct for ingress discovery

commit 7e6c6020ffc593f1c4c907cb23f6c57886e6187a
Author: wangguoliang <liangcszzu@163.com>
Date:   Thu Sep 7 18:00:45 2017 +0800

    should use time.Since instead of time.Now().Sub
    
    Signed-off-by: wgliang <liangcszzu@163.com>

commit 75aec7d9708d40243089fd26863298a6db09e212
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Sep 6 12:47:03 2017 +0200

    k8s: Use versioned struct for ingress discovery

commit 153cb0cbe3c3c5ed16ed72207463bd66e7d21b4d
Author: Krasi Georgiev <krasi-georgiev@users.noreply.github.com>
Date:   Tue Sep 5 13:55:14 2017 +0300

    scraping errors will show in the log when debug mode is enabled (#3135)
    
    Signed-off-by: Krasi Georgiev <krasi.root@gmail.com>

commit 87918f3097cdca3a42c6c01eaf060920ef2604ce
Merge: c70379e 29fff1e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 4 14:09:21 2017 +0200

    Merge branch 'master' into dev-2.0

commit c70379e1c734cb5d5347619ec8e11dfcd545eb4d
Merge: fffe51f 64973f5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 4 13:10:50 2017 +0200

    Merge branch 'dev-2.0' of github.com:prometheus/prometheus into dev-2.0

commit 70f3d1e9f95ad6611be2e76fad44f07b0a2579ca
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Sep 4 13:10:44 2017 +0200

    k8s: Support discovery of ingresses (#3111)
    
    * k8s: Support discovery of ingresses
    
    * Move additional labels below allocation
    
    This makes it more obvious why the additional elements are allocated.
    Also fix allocation for node where we only set a single label.
    
    * k8s: Remove port from ingress discovery
    
    * k8s: Add comment to ingress discovery example

commit fffe51fb03ac332867882d7968d00c1bf88f450c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 4 13:10:32 2017 +0200

    Add mutex and block profiling via envvar

commit 29fff1eca43fa759c26fd3f86e17aaebb4818d77
Merge: d0a0270 aba41c7
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sat Sep 2 18:43:25 2017 +0200

    Merge pull request #2966 from alkalinecoffee/consul-node-metadata
    
    Add support for consul's node metadata

commit d0a02703a2dad1b678359f83b663f1e4a1c38311
Merge: aa5cdcb b1c18bf
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Aug 31 14:08:16 2017 +0200

    Merge pull request #3105 from sak0/dev
    
    discovery openstack: support discovery hypervisors, add rule option.

commit b1c18bf29bb8cde9d5e9551a0b5616681b3c8098
Author: CuiHaozhi <cuihz@wise2c.com>
Date:   Tue Aug 22 04:16:01 2017 -0400

    discovery openstack: support discovery hosts, add rule option.
    
    Signed-off-by: CuiHaozhi <cuihz@wise2c.com>

commit aa5cdcb11e7fd987587045bec62194cc31a7a707
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Aug 29 15:24:00 2017 +0200

    Remove extra space in log output

commit 35c952e344139a9fbe1863c57255ba60b397f4ca
Author: gdmello <gdmello@users.noreply.github.com>
Date:   Tue Aug 29 09:22:56 2017 -0400

    Added logging for remote storage adapter (#3106)
    
    * Added logging for remote storage adapter on startup and on any error condition during /read or /write.
    
    * CR feedback.

commit 1bf25dc1b2f1f7aca81aedb422f524ad077f8808
Author: Lynn Lin <lynn_xin_lin@163.com>
Date:   Tue Aug 29 16:00:11 2017 +0800

    fix issues reported by gofmt and spelling typo (#3127)

commit 59aca4138bb43715856c5772df96f6eefdd4d94d
Author: Ben Kochie <superq@gmail.com>
Date:   Mon Aug 28 14:35:51 2017 +0200

    Fix staticcheck issues.

commit 0fcfe3209ff010a23eb55d5fe31b6369bff05c82
Author: Ben Kochie <superq@gmail.com>
Date:   Mon Aug 28 13:52:58 2017 +0200

    Add staticcheck to build.

commit 64973f5c654609ce6e04899be1a28fc1526702e7
Author: Matt Bostock <matt@mattbostock.com>
Date:   Mon Aug 28 11:03:25 2017 +0100

    cmd/prometheus: Fix capitalisation in log line (#3123)
    
    Change 'Ready' to 'ready'.

commit d31c068ae47af2450b46c9e25c07e1ded8e16c4e
Author: Matt Bostock <matt@mattbostock.com>
Date:   Mon Aug 28 11:03:07 2017 +0100

    api.go: Fix typo in comment (#3122)

commit 78205b76e9a6ea3b2e1a8ff1ca21eeb5a7e28b88
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Aug 26 21:46:12 2017 +0100

    Update Prometheus console template example for 2.0 (#3100)

commit 923be6a418c0f678693b0d45e36c25c540ac2854
Merge: d6a0f46 aa3fb1e
Author: Richard Hartmann <RichiH@users.noreply.github.com>
Date:   Sat Aug 26 20:18:13 2017 +0200

    Merge pull request #3113 from prometheus/RichiH-patch-1
    
    Point help to docs, not main Prometheus website

commit aa3fb1e7c4d4c6b803619a5310fa1617fc5e4a64
Author: Richard Hartmann <RichiH@users.noreply.github.com>
Date:   Fri Aug 25 10:53:36 2017 +0200

    Point help to docs, not main Prometheus website
    
    No matter how we refactor docs, `/docs/` will stay the prefix, so there's not long-term risk in changing this.
    
    One we version docs, we should probably try and keep link & version in sync.

commit 3a4ee617e09549a37184740a848e0713ed729d91
Merge: 0c81d5f 8912f81
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Aug 24 13:35:07 2017 +0200

    Merge pull request #3062 from cstyan/callum-1553
    
    check if file_sd files exists in checkConfig

commit d6a0f46baf111714116021991d0299024b4d2ec7
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Aug 24 13:32:20 2017 +0200

    Fix formatting of GitHub issue template
    
    There is actually an easier way to format comments, which doesn't
    require a hack and also fixes the dispay in non-monospace fonts.

commit 0c81d5f719d5593a9f50e0cc93e4c965cd0a3306
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 24 12:36:07 2017 +0200

    storage: instantiate correct block ranges

commit 57a9de4a9a7fbb9aa23972ce35c2a5bdb00d16bb
Merge: 77c816b 2b49df2
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Aug 24 01:00:44 2017 +0200

    Merge pull request #3076 from Colstuwjx/fix/nil-target-group
    
    Fix target group foreach nil bug.

commit 77c816b30917fd86c95bb68f9384ce624021b01a
Author: Mark Adams <mark@markadams.me>
Date:   Tue Aug 22 18:00:56 2017 -0500

    Fix pprof endpoints when -web.route-prefix or -web.external-url is used (#3054)
    
    Whenever a route prefix is applied, the router prepends the prefix to
    the URL path on the request. For most handlers, this is not an issue
    because the request's path is only used for routing and is not actually
    needed by the handler itself. However, Prometheus delegates the handling
    of the /debug/* endpoints to the http.DefaultServeMux which has it's own
    routing logic that depends on the url.Path. As a result, whenever a
    prefix is applied, the prefixed URL is passed to the DefaultServeMux
    which has no awareness of the prefix and returns a 404.
    
    This change fixes the issue by creating a new serveDebug handler which
    routes requests /debug/* requests to appropriate net/http/pprof handler
    and removing the net/http/pprof import in cmd/prometheus since it is no
    longer necessary.
    
    Fixes #2183.

commit 8912f81ffe2b2d4219c00e0f7e2319a06c0af309
Author: Callum Styan <callumstyan@gmail.com>
Date:   Tue Aug 22 15:25:30 2017 -0700

    check if file_sd files exist in checkConfig

commit 2b49df2c61874c9c8f360cbefe0026c196ad7171
Author: Colstuwjx <Colstuwjx@gmail.com>
Date:   Tue Aug 15 11:10:19 2017 +0800

    Fix target group foreach nil bug, directly return err.

commit 32a951ec89b2c90566a77213ed04a761f754dbb9
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Aug 22 01:46:49 2017 +0200

    Add a big notice header to the github issue template header (#3103)
    
    Trying to prevent usage questions in Github issue, this change adds a
    multi-line notice header directing people to the mailing list.

commit 2354c2544bb5aab2a86f3a0395c4dba718e2a355
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 21 17:15:25 2017 +0100

    Set timestamp for date functions (#3070)

commit 7ebd74b84b3e99e71e38cfe110348c291c549c7a
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 21 16:35:20 2017 +0100

    Cut down console template examples to just node and prometheus (#3099)
    
    These haven't seen much love, and grafana.com dashboard sharing
    has become more promiment. Keep 2 for the sake of demos.

commit 41884f02839d15d3d192f9a2017da5e977dadb8b
Author: maximecharron <charron.maxime97@gmail.com>
Date:   Sat Aug 19 14:44:15 2017 -0400

    Fix double redirect if there is a route-prefix (#3091)

commit a52f082939a566d5269671e98be06fc6bdf61d09
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 18 10:12:25 2017 +0200

    *: cut v2.0.0-beta.2

commit 86e5c90061555bcd5f8de7c26babaa49c0481d2c
Merge: 4dcb465 24b246a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 18 10:11:30 2017 +0200

    Merge pull request #3087 from prometheus/cut-beta2
    
    vendor: update prometheus/tsdb

commit 24b246ac28cc854e09d34690c130528946191f83
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 18 10:08:59 2017 +0200

    vendor: update prometheus/tsdb

commit 3101606756c53221ed58ba94ecba6b26adf89dcc
Merge: 7d8cd4e 1c96fbb
Author: Max Inden <IndenML@gmail.com>
Date:   Mon Aug 14 19:01:13 2017 +0200

    Merge pull request #2711 from mxinden/api-config
    
    Expose current Prometheus config via /status/config

commit 7d8cd4e6bfa81bf3a6a7a61c0506473b9f6fed91
Merge: 5f5d778 31b6f8b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 14 14:46:51 2017 +0200

    Merge pull request #3057 from sak0/dev
    
    discovery openstack: handle instances without ip

commit 1c96fbb9928fcac94b01b08373dc3567fae8b154
Author: Max Leonard Inden <IndenML@gmail.com>
Date:   Thu May 11 17:09:24 2017 +0200

    Expose current Prometheus config via /status/config
    
    This PR adds the `/status/config` endpoint which exposes the currently
    loaded Prometheus config. This is the same config that is displayed on
    `/config` in the UI in YAML format. The response payload looks like
    such:
    ```
    {
      "status": "success",
      "data": {
        "yaml": <CONFIG>
      }
    }
    ```

commit 5f5d77848e54a7995b13e8a463b9f1fd3fc6123e
Author: Karsten Weiss <knweiss@gmail.com>
Date:   Fri Aug 11 19:31:46 2017 +0200

    Fix 'predefined escaper "html" disallowed in template' in `/targets` (#3046) (#3050)
    
    Issue #3046 is triggered by html/template changes in go1.9.
    
    See https://tip.golang.org/pkg/html/template. Quote:
    
    //   To ease migration to Go 1.9 and beyond, "html" and "urlquery" will
    //   continue to be allowed as the last command in a pipeline. However, if the
    //   pipeline occurs in an unquoted attribute value context, "html" is
    //   disallowed. Avoid using "html" and "urlquery" entirely in new templates.
    
    The commit also includes a trivial whitespace fix.

commit 31b6f8b04c0924153510edbf11ae4fd01ffede8a
Author: CuiHaozhi <cuihz@wise2c.com>
Date:   Thu Aug 10 23:05:13 2017 -0400

    discovery openstack: handle instances without ip
    
    Signed-off-by: CuiHaozhi <cuihz@wise2c.com>

commit 4dcb465029f39a2a3030333a81753f8a40ec90ce
Merge: 752d8ba 2797fb4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 11 14:09:11 2017 +0200

    Merge pull request #3058 from prometheus/cut-beta1
    
    *: cut 2.0.0-beta.1

commit 2797fb4e73a29bddda60d860a90ad451b4c537bf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 11 12:27:20 2017 +0200

    *: cut 2.0.0-beta.1

commit 146191a913cdd98557bceeb256cda38c833d3c0c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 11 12:43:08 2017 +0200

    vendor: update prometheus/tsdb

commit 752d8bad1532a758a13ab42f1f50fc3c82bb9f9d
Merge: 814ecf2 921c6eb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 11 12:12:59 2017 +0200

    Merge pull request #3056 from prometheus/mergemaster
    
    Merge master into dev-2.0

commit 921c6ebb3bfa6b10b316647665a67d0076de5f58
Merge: 25f3e1c 814ecf2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 10 17:08:17 2017 +0200

    Merge branch 'dev-2.0' into mergemaster

commit f1067f4cf9eca5a5f66915b961da2b1b1e6d298b
Merge: 245b8a0 6cf62fe
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Aug 10 17:16:51 2017 +0200

    Merge pull request #3051 from prometheus/beorn7/web
    
    Update web/ui/bindata.go

commit 25f3e1c4245b51bc06f76f1a4bfdc3af0243dc3a
Merge: 3bee362 245b8a0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 10 16:28:49 2017 +0200

    Merge branch 'master' into mergemaster

commit 814ecf224fb4d7134b0676ccaab73bb3ce2e11b9
Merge: 3519dea 2037778
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 10 15:05:19 2017 +0200

    Merge pull request #3053 from prometheus/tsdbvendor
    
    Vendor TSDB performance optimizations and fixes

commit 3519deae062f64fe18484086ec662844e2bf0085
Merge: 3bee362 0af4369
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 10 15:03:24 2017 +0200

    Merge pull request #3052 from prometheus/connleak
    
    Kill idle connections after 5 minutes

commit 2037778d14f809f158caecfd186ed9f2e4114ba6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 10 14:51:02 2017 +0200

    vendor: update TSDB

commit 0af43695de3e430f0ac4ca893ab1b29c8935a6df
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 10 14:48:31 2017 +0200

    web: log error missages on serving

commit 9516d044723d60a1513502bb297b970f2c661ff9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 9 16:30:49 2017 +0200

    util: Add idle timeout for scrape connections

commit 6cf62fe8baf07b30af1ba9b318198515a317cce4
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Aug 10 14:40:19 2017 +0200

    Update web/ui/bindata.go

commit 245b8a0b379e7c25a34e37315b06c81c755814a0
Author: Roman Khavronenko <hagen1778@gmail.com>
Date:   Wed Aug 9 18:10:30 2017 +0300

    Allow to collapse jobs at `/targets` page (#2628)

commit c79a4db8123b5652ea2c40e66caadef18665c789
Author: Pablo Andres Fuente <pablo.andres.fuente@gmail.com>
Date:   Wed Aug 9 09:23:57 2017 -0300

    Adding tests for util/httputil/client (#3002)
    
    Adding tests for util/httputil/client with a 100% coverage.
    Removing the NewDeadlineRoundTripper from util/httputil/client because
    is not used.
    Adding a new test util to check http.Request in http.RoundTrip interface
    implementors.

commit 3bee362727af248f52c5822aa9d7d7ec5eade58a
Merge: 4d3d8ee 686050d
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Aug 9 08:03:43 2017 +0530

    Merge pull request #3037 from KalivarapuReshma/single-dash-error
    
    Change -config.file to --config.file in Readme and error message

commit 686050d8161a04c1267ff5771b47c07b90552c0e
Author: KalivarapuReshma <cs14btech11042@iith.ac.in>
Date:   Tue Aug 8 12:49:35 2017 +0530

    Change -config.file to --config.file in Readme and error message

commit 1ea9ab601e936de5bb164edb9de2a3988a199fb7
Merge: 4c8173a ff54c5c
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Mon Aug 7 23:35:07 2017 +0200

    Merge pull request #2997 from emluque/2831-Healthy_Ready_Endpoints
    
    Add `/-/healthy` and `/-/ready` endpoints #2831

commit ff54c5c11a1a99d44e2f39ec67a75f237d53426d
Author: emluque <emilianomartinezluque@yahoo.com.ar>
Date:   Tue Jul 25 21:47:45 2017 -0300

    2831 Add Healthy and Ready endpoints

commit 4c8173acac15579feb3b180d972bac84745467e9
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 7 17:15:38 2017 +0100

    Use timestamp of a sample in deriv() to avoid FP issues (#2958)
    
    With the squaring of the timestamp, we run into the
    limitations of the 53bit mantissa for a 64bit float.
    
    By subtracting away a timestamp of one of the samples (which is how the
    intercept is used) we avoid this issue in practice as it's unlikely
    that it is used over a very long time range.
    
    Fixes #2674

commit 1bf3b91ae01270e37ff90b1f792f791714931ed9
Author: Yuki Ito <yuki@gnnk.net>
Date:   Mon Aug 7 00:49:45 2017 -0700

    Make sure that url for remote_read/write is not nil (#3024)

commit 62047e5c97d64586b3af96d242a2587cd8c6b76f
Merge: e1c77cd d733769
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 3 15:45:14 2017 +0200

    Merge pull request #2980 from Gouthamve/contrib.md
    
    Add section for new contributors

commit 4d3d8ee229cbd7e600405b56267a9e833446c24c
Merge: c490725 b11bc8a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 3 13:39:09 2017 +0200

    Merge pull request #2850 from tomwilkie/dev-2.0-remote
    
    Remote APIs for v2

commit e1c77cdfd4da7aa3269cbd1026ec10fc2875f175
Merge: ac511ec 5169f99
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Aug 3 10:26:29 2017 +0100

    Merge pull request #2991 from tomwilkie/2990-remote-config
    
    Make queue manager configurable.

commit c490725ac932aa34d0263bcfb458b819a5ae1ac9
Author: Edward Marshall <ruckafella@gmail.com>
Date:   Wed Aug 2 13:10:18 2017 +0100

    Additional targetScrapeSample metrics (#3018)

commit ac511ecf3068b1ea3fc86935a8ad02985fe5d92a
Merge: bc2e945 ab96e79
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 1 22:44:28 2017 +0200

    Merge pull request #2970 from Gouthamve/docs/sd-interface
    
    Add docs about SD interface

commit 5169f990f9d8e2c09219d1d1d5b1ba28e5d30451
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Aug 1 11:00:40 2017 +0100

    Review feedback: add yaml struct tags, don't embed queue config.
    
    Also, rename QueueManageConfig to QueueConfig, for consistency with tags.

commit b11bc8ae247c2ce6f4d60b532ffdb86da34b5c22
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Aug 1 11:19:35 2017 +0100

    Fix some comments.

commit 4c5c22dcf1bfa4f5dcdfb85e48ae2ba0c7b64660
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Aug 1 11:12:34 2017 +0100

    Rename proto package from remote -> prometheus.

commit ab96e79bc8614abd2595bfe19945e36e16454c8a
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jul 19 19:29:40 2017 +0530

    Add docs about SD interface
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit bc2e9459d817afb763199929e615ac9ea5928cb1
Merge: 40db026 1d94eb8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 28 13:02:33 2017 +0200

    Merge pull request #2973 from tomwilkie/2969-negative-shards
    
    Prevent number of remote write shards from going negative.

commit 40db0263810d201752f664a648aaeb0cdbc157ad
Merge: 4b86811 84be97b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 28 08:51:50 2017 +0200

    Merge pull request #2957 from prometheus/sd-doc
    
    Tweaks to SD README from review

commit 2ed3a9bd628cfca0b864f1aadaf1891604e17157
Merge: 11ee713 4194d2a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 28 08:51:19 2017 +0200

    Merge pull request #2946 from Gouthamve/fix-at-after-false
    
    Call At() only if Next() is true

commit 11ee713ced2b0f6048106ed1ad828c981c6856c4
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Jul 27 18:45:41 2017 +0530

    Handle common escape characters properly. (#2995)
    
    Fixes #2974
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit f9bf4c86aec3372da3ef24991d6c79a5ed0df567
Merge: cc50aa2 4acb1d2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 27 13:48:13 2017 +0200

    Merge pull request #2998 from prometheus/vendorkinpin
    
    vendor: update kingpin

commit d7337697222ca488c69aa9ffd7424af7432cb63e
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Sun Jul 23 18:28:01 2017 +0530

    Add section for new contributors
    
    Inspiration from this blog post: https://manishearth.github.io/blog/2016/01/03/making-your-open-source-project-newcomer-friendly/
    
    Some parts are lifted from: https://github.com/servo/servo/blob/master/CONTRIBUTING.md
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 4acb1d2b21b148996de89c7d13b01ca28b031512
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 27 13:08:20 2017 +0200

    vendor: update kingpin

commit 454b6611458d01398678baca372a57973df4215f
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Jul 25 13:47:34 2017 +0100

    Make queue manager configurable.

commit 4b868113bbcaeea0df2325dd591a8576d6e19fad
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Mon Jul 24 13:49:20 2017 +0100

    Metric name validation (#2975)

commit 3bb0667607f55aa10735c6142c7933d2bb606e42
Merge: f30b102 a5ddcf5
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Jul 21 19:40:30 2017 +0200

    Merge branch 'release-1.7'

commit a5ddcf5fb243e8367f9f08dd06ab36d3e7c9ae59
Merge: b6f89a1 ea5e7ea
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Jul 21 19:38:23 2017 +0200

    Merge pull request #2979 from prometheus/beorn7/storage2
    
    Fix iterator issue in varbit chunk

commit ea5e7eafde8e65c3a394801e1b15378b1ef1f58e
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Jul 21 16:35:15 2017 +0200

    Fix #2965
    
    We would overscan when hitting a value directly, interspersed with
    samples in between timestamps. Apparently, that happens rarely enough
    that it was only noticed recently.

commit c06292af2f965d386e6639e7603489e83f452f0d
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Jul 21 16:25:24 2017 +0200

    Add test to expose #2965

commit f30b10223a02aa7345f1ff194a3a3730d6001375
Author: Felicity <ft@le-fay.org>
Date:   Fri Jul 21 13:10:02 2017 +0100

    documentation: update Kubernetes example for 1.7 (#2918)
    
    Kubernetes 1.7+ no longer exposes cAdvisor metrics on the Kubelet
    metrics endpoint.  Update the example configuration to scrape cAdvisor
    in addition to Kubelet.  The provided configuration works for 1.7.3+
    and commented notes are given for 1.7.2 and earlier versions.
    
    Also remove the comment about node (Kubelet) CA not matching the master
    CA.  Since the example no longer connects directly to the nodes, it
    doesn't matter what CA they're using.
    
    References:
    
    - https://github.com/kubernetes/kubernetes/issues/48483
    - https://github.com/kubernetes/kubernetes/pull/49079

commit cc50aa2c6b6290fd55dd151ab15b9bfc481ab7d8
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jul 20 23:48:35 2017 +0200

    main: Consistently end flag descriptions with periods. (#2977)

commit cf105f9d575940558c581573c758e8039ac10b5a
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 19 16:39:02 2017 +0100

    Update example remote adapters for change in proto location.

commit ec999ff397ee136534a1f171508a0aae7e298fb9
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 19 16:27:19 2017 +0100

    Prevent number of remote write shards from going negative.
    
    This can happen in the situation where the system scales up the number of shards massively (to deal with some backlog), then scales it down again as the number of samples sent during the time period is less than the number received.

commit 1d94eb8d958ba228f3d19c8a4838f10dc46f7a86
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 19 16:27:19 2017 +0100

    Prevent number of remote write shards from going negative.
    
    This can happen in the situation where the system scales up the number of shards massively (to deal with some backlog), then scales it down again as the number of samples sent during the time period is less than the number received.

commit aba41c7d0f49a5c951783ca220932eecf1ffe6ec
Author: Joe Martin <jwmartin83@gmail.com>
Date:   Tue Jul 18 16:46:16 2017 -0400

    add support for consul's node metadata

commit 7f2402085a9fd8d58b131baa5e136f8ea928c287
Author: Joe Martin <jwmartin83@gmail.com>
Date:   Tue Jul 18 16:46:08 2017 -0400

    update consul api dependency

commit 76c9a0d931ba2d912a88e3b69749ec7b415ba47c
Author: Alexey Palazhchenko <alexey.palazhchenko@gmail.com>
Date:   Tue Jul 18 18:11:10 2017 +0300

    Fix typo (#2963)

commit 695ec0b9811ca31cbd76d3d75b4bcb668e97e5f7
Author: Alexey Palazhchenko <alexey.palazhchenko@gmail.com>
Date:   Tue Jul 18 15:58:00 2017 +0300

    Fix few typos. (#2962)

commit 1f3b59ccf566f9aad4b5fe6cea52ef69f3e32bc7
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Jul 18 11:42:29 2017 +0100

    s/met/lset/

commit c6f41ce391b0f8f570dd8a46b253ab7b25a07b77
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jul 18 12:35:41 2017 +0200

    Allow metric and label names to begin with underscores (#2961)
    
    While this is not recommended, it is allowed in our data model
    (https://prometheus.io/docs/concepts/data_model/).
    
    Fixes https://github.com/prometheus/prometheus/issues/2959

commit 5a19ffb31521abd87461a36ddeb7bedaa0273193
Author: J. Taylor O'Connor <jtomusic@gmail.com>
Date:   Mon Jul 17 16:13:50 2017 -0500

    A few spelling corrections. (#2960)

commit 84be97bd98e4801c48b96c3e1baba9e8c7e891c1
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Jul 17 14:20:54 2017 +0100

    Tweaks to SD README from review

commit 2a9ca394dd92dec53efe3cb3add75e346f201cc7
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Jul 14 15:22:09 2017 +0100

    Document how/when to write service discovery (#2943)

commit a09acdcc5bfc5f073e2e8ae34a7c386fd1432380
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Jul 13 18:33:08 2017 +0100

    Make concreteSeriersIterator behave.

commit 4194d2ac7988a43c7324d69831c3e630360e35bc
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Jul 13 18:42:45 2017 +0200

    Call At() only if Next() is true
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 994a7f27d6e5e4065841802bfd3ae54dcd6a51b9
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Jul 13 15:02:01 2017 +0100

    Propagate errors through mergeSeriesSet correctly.

commit 2e0d8487e331c272fe26abd48feaffde4de9b430
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Jul 13 14:40:29 2017 +0100

    Return zeros if At() is called after Next() returns false.

commit 931f2705f2be8941fc2250fea8a44a924d9c3886
Merge: 2b5d915 377a549
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 13 12:53:56 2017 +0200

    Merge pull request #2942 from prometheus/fabxc-patch-1
    
    Fix command line flags in Dockerfile

commit 014bd31a86847d71f7d7a22b120b551563bc8546
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Jul 13 11:16:35 2017 +0100

    Remove unnecessary whitespace changes, add comment.

commit 377a549fe6e262286bea5b9ce933d5cae6504031
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 13 12:14:49 2017 +0200

    Fix command line flags in Dockerfile

commit 98ac07f86ab093e741f842167a0ab356aa732ea8
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Jul 13 11:05:38 2017 +0100

    Add unit test for the merging on the read path.

commit 2ac1809a5b63a70fc8de1c5a81f9a2cfd6307d2e
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 12 22:09:16 2017 +0100

    Get label set from cache in addReportSample.

commit b568ace7ce6583c19c581aea09ac6a0a468a4bd8
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 12 22:06:35 2017 +0100

    Move protos to ./prompb

commit 240feb313b5fcffe83c5b04a7cb6d3fa29d28d9e
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 12 15:54:38 2017 +0100

    Don't regenerate label set for cached values.

commit 96e25adc8dd76466ce94559f57507013638b2ab9
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 12 15:50:26 2017 +0100

    Introduce 'primary' storage in fanout, and have Add return the ref from the primary.
    
    Also, ensure all append batches are rolled back when a commit or rollback fails.

commit db8128ceebc916ca4e2a3250b98832cf90529b4c
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed Jul 12 12:41:27 2017 +0100

    Add label set as first parameter to AddFast, ingored by TSDB adapter.

commit 2b5d9159537cbd123219296121e05244e26c0940
Merge: 16464c3 724505e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 12 14:18:41 2017 +0200

    Merge pull request #2937 from prometheus/cutbeta
    
    Cut 2.0.0-beta.0

commit 724505e53e839d5408bec06f97275db577f37c49
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 12 13:26:21 2017 +0200

    *: cut v2.0.0-beta.0

commit 6aee36ac3ba0383e0125b1f24bef96dfd82c6f80
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 12 14:01:45 2017 +0200

    vendor: update prometheus/tsdb

commit 6861b3d03d57d112a778c0449ae5b680caa22eb8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 12 13:49:23 2017 +0200

    Delete remote file

commit 2dda5775e318cdbd325dc63cd8596b7451c20dcc
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed May 10 10:44:13 2017 +0100

    Initial port of remote storage to v2.

commit bb13a23d29771a35fcbef379f4c38f80fa49aa63
Merge: f0f2ec7 64cfe2e
Author: Martín Ferrari <tincho@tincho.org>
Date:   Tue Jul 11 20:31:22 2017 +0100

    Merge pull request #2934 from TheTincho/fix-migrated-url-redirect
    
    Add PATH_PREFIX to redirectToMigratedURL

commit 64cfe2e7f5ecd8652b83fff87a8c47304d05ef7a
Author: Martín Ferrari <tincho@debian.org>
Date:   Tue Jul 11 17:36:17 2017 +0000

    Add PATH_PREFIX to redirectToMigratedURL
    
    Old grafana versions use this format, and it breaks with prometheus instances
    not mounted in the root directory.

commit dba7586671c3847522a3ff03f0f0003fa835d531
Merge: 16464c3 f0f2ec7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 11 17:22:14 2017 +0200

    Merge branch 'master' into dev-2.0

commit 16464c3a332aeb50216fd17017f17fb5ba663cf6
Merge: 2067d4c 32226e3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 11 17:15:49 2017 +0200

    Merge pull request #2910 from prometheus/adminapi
    
    Admin API

commit 32226e30f54eae0122bb195b7fc7c84938071c36
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 10 15:44:29 2017 +0200

    Guard reload and quit endpoints by flag

commit b6f89a198284a222f23bd58b59fa93b71ed44bac
Author: Alexey Palazhchenko <alexey.palazhchenko@gmail.com>
Date:   Mon Jul 10 22:05:40 2017 +0300

    Parse custom step parameter correctly. (#2928)
    
    Backport of 6a767b736be5cd4ddf72a8bc6024ac8115713e7d.
    Refs #2827, #2861.

commit f0f2ec7854e2c6b5a850907d6e255781254e7da0
Merge: bff55bf 9eb8c6e
Author: Matthias Rampke <mr@soundcloud.com>
Date:   Mon Jul 10 16:11:00 2017 +0000

    Merge pull request #2927 from pafuent/fix-test-short-for-windows
    
    Fixing tests for Windows

commit 9eb8c6e1d2f0c52e4f9b3a6a5362970a043c08d3
Author: Fuente, Pablo Andres <PabloAndres_Fuente@McAfee.com>
Date:   Mon Jul 10 11:08:16 2017 -0300

    Renaming the config_notwin test to config_default

commit 2067d4cfe28f0b8b047e2716ef3590590c6c15ae
Merge: e1fc9dc 13006fe
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 10 15:32:54 2017 +0200

    Merge pull request #2925 from prometheus/fix-alert-labels
    
    Fix alert label display in /alerts UI

commit bff55bfa729e366e9b4efa926957fb62ac8e7fd9
Merge: be990c0 835eb8c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 10 12:00:58 2017 +0200

    Merge pull request #2921 from tomwilkie/2920-test
    
    Add _test.go suffix to promql/bench.go, split test.go in to two.

commit 45ac06466927ec2ed0daed4c1f1c285a8729a257
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 10 09:29:41 2017 +0200

    web: disable Amin APIs by default

commit ccf9e6297206ab26d6051daf81f84d09b6bcd3b9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 6 14:38:40 2017 +0200

    *: add admin grpc API

commit fe73de94525d70ea3a044f82123381e775910e54
Author: Fuente, Pablo Andres <PabloAndres_Fuente@McAfee.com>
Date:   Mon Jul 10 00:02:08 2017 -0300

    Renaming config test file to fix build tags
    
    Renaming the name of a file of the config tests, in order to properly
    use the Go build tags feature.

commit 193dc472309c0c7a50222db46590d7288c27380e
Author: Fuente, Pablo Andres <PabloAndres_Fuente@McAfee.com>
Date:   Sun Jul 9 02:43:33 2017 -0300

    Fixing code style to adhere gofmt

commit 902fafb8e7216d0f5064667452b49dbc0d267e99
Author: Fuente, Pablo Andres <PabloAndres_Fuente@McAfee.com>
Date:   Sun Jul 9 01:34:50 2017 -0300

    Fixing tests for Windows
    
    Fixing the config/config_test, the discovery/file/file_test and the
    promql/promql_test tests for Windows. For most of the tests, the fix involved
    correct handling of path separators. In the case of the promql tests, the
    issue was related to the removal of the temporal directories used by the
    storage. The issue is that the RemoveAll() call returns an error when it
    tries to remove a directory which is not empty, which seems to be true due to
    some kind of process that is still running after closing the storage. To fix
    it I added some retries to the remove of the temporal directories.
    Adding tags file from Universal Ctags to .gitignore

commit 13006feb1e4faa15ad9891c3bead6d7a5c6bdecf
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Jul 8 11:42:13 2017 +0200

    Fix alert label display in /alerts UI

commit e1fc9dc78db4804999c0052ba6db953bac2215c0
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Sat Jul 8 11:38:02 2017 +0200

    Move /rules to new format (#2901)
    
    Fixes #2891
    
    Signed-off-by: Goutham Veeramachaneni <goutham@boomerangcommerce.com>

commit 835eb8c653fb642473b41c2c0296f3c0a944a812
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Fri Jul 7 15:37:16 2017 +0100

    Add _test.go suffix to promql/{bench.go, test.go} to prevent importing the testing package in a normal binary.

commit b420412135f4c38bde026419a6a7bcf85f696718
Merge: 9c8be75 b7eddbc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 7 13:15:55 2017 +0200

    Merge pull request #2915 from Gouthamve/parse-fuz
    
    textparse: Add fuzzing and fix bug caught

commit b7eddbcd98d5c4fcc9222d9b825b0fe2ceb6dfcf
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jul 7 10:29:38 2017 +0200

    textparse: Add fuzzing and fix bug caught
    
    See https://github.com/cznic/golex/issues/11 for info on the bug
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 9c8be7575ce7fc21814fb2a7d07a23729d48fde3
Merge: 24e9dea 243419c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 6 17:26:26 2017 +0200

    Merge pull request #2906 from Gouthamve/error-ptr-match
    
    Convert tsdb.ErrOutOfBounds to a storage error

commit dc15a6f6ea32d399a21cb0564b7575f6914ec4ca
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 6 14:38:20 2017 +0200

    vendor: add and update proto/grpc vendoring

commit 243419c0074972b144e4b1cf9ac035f9a2772eac
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Jul 6 14:18:31 2017 +0200

    Return tsdb.ErrOutOfBounds as storage.ErrOutOfBounds
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit be990c02879914b5e141b5514783e8fc0e843991
Merge: e58e795 a607873
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 6 12:00:11 2017 +0200

    Merge pull request #2907 from Gouthamve/log-tm
    
    Log the stopping of TargetManager in Info

commit a607873ad26d46a85ca136a506c4f211a827be8e
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Jul 6 11:32:37 2017 +0200

    Log the stopping of TargetManager in Info
    
    Fixes #2715
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 8a2850b5e1bfc6114207ebc246cb9f287ad808c2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 5 16:39:50 2017 +0200

    vendor: add missing app engine dependencies

commit e58e7954a774ef23899a1fee275ccd5c5f38ed30
Merge: 3ed4fea 98d20d5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 5 16:24:18 2017 +0200

    Merge pull request #2904 from Gouthamve/srclbl-omitempty
    
    Make sure rendering config produces valid config

commit 24e9deac71d26a9db5d635df0865b83bd5ff9370
Merge: ad86c38 b2f7c8d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 5 16:13:21 2017 +0200

    Merge pull request #2859 from Gouthamve/docker-nobody
    
    Dockerfile: Run as nobody

commit ad86c389cbd0c5d4ed4420aeb76bb3a1abc1089a
Merge: 3299922 0e78b7e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 5 16:10:17 2017 +0200

    Merge pull request #2869 from Gouthamve/lblspc
    
    parser: Support spaces everywhere

commit 98d20d588081a97cfffd7fadefdc2289cc5c5b34
Author: Goutham Veeramachaneni <goutham@boomerangcommerce.com>
Date:   Wed Jul 5 16:09:29 2017 +0200

    Make sure rendering config produces valid config
    
    Fixes #2899
    
    Signed-off-by: Goutham Veeramachaneni <goutham@boomerangcommerce.com>

commit 0e78b7e7c8f45b38fb4fe6fbc0759e6bb3c800ae
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Jun 22 13:08:55 2017 +0530

    parser: support spaces everywhere
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 329992201e5fc7b26b46606d4b4b66807e31b599
Merge: 496c060 643c583
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 5 15:47:14 2017 +0200

    Merge pull request #2897 from Gouthamve/oob-metric
    
    Handle scrapes with OutOfBounds metrics better

commit 3ed4fea58c35ad96f1933783cb57fdc82d30bb26
Merge: 38de290 13c6e4a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 5 11:57:52 2017 +0200

    Merge pull request #2902 from mattbostock/patch-2
    
    Remote queue manager: Fix typo

commit 13c6e4a4bcdc07cf63a01ee6e59511f20a78bac3
Author: Matt Bostock <matt@mattbostock.com>
Date:   Tue Jul 4 20:48:52 2017 +0100

    Remote queue manager: Fix typo
    
    Change 'send' to 'sent'.

commit 38de290d5f1c394844a2e43862cad08b29529a95
Author: Alin Sinpalean <alin.sinpalean@amanaadvisors.com>
Date:   Tue Jul 4 16:30:12 2017 +0200

    Console graph color scheme support (#2900)
    
    Add a colorScheme parameter to PromConsole.Graph, to allow using custom colors in console graphs.

commit 643c5837a0789871bf2244c7f9704daebb3b49ad
Author: Goutham Veeramachaneni <goutham@boomerangcommerce.com>
Date:   Tue Jul 4 14:55:33 2017 +0200

    Stop metrics that are 10mins ahead from now
    
    Fixes #2893
    
    Signed-off-by: Goutham Veeramachaneni <goutham@boomerangcommerce.com>

commit 496c060f98bf70d1a7d2e0fae2ab7327d290076c
Merge: 4261252 65b087b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 4 11:59:30 2017 +0200

    Merge pull request #2896 from prometheus/filepath
    
    config: resolve file SD paths relative to config

commit 65b087bcc1bdf55334fe6c1f834db6e7f1013112
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 4 11:06:02 2017 +0200

    config: resolve file SD paths relative to config

commit 3069bd39961b695081ef6c9aab04165fc4a2a394
Author: Goutham Veeramachaneni <goutham@boomerangcommerce.com>
Date:   Tue Jul 4 11:24:13 2017 +0200

    Handle scrapes with OutOfBounds metrics better
    
    fixes #2894
    
    Signed-off-by: Goutham Veeramachaneni <goutham@boomerangcommerce.com>

commit 426125298e7ecb822273165b5e2c2b5562a53ded
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 3 14:41:02 2017 +0200

    vendor: update prometheus/tsdb

commit 3845dfb7150bc19e704386ff50db2e07db3d1942
Merge: 4b70318 9ea748e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 3 09:26:16 2017 +0200

    Merge pull request #2875 from prometheus/savemetric
    
    Savemetric

commit 4b70318d11da535ec0ba7e2445a5d1bd5504d0fb
Merge: ca2b688 2368d2c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 26 15:21:35 2017 +0200

    Merge pull request #2874 from prometheus/memleak
    
    retrieval: fix memory leak in scrape cache

commit 9ea748e74508297433424ca340d7836a97e14dae
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 26 08:56:40 2017 +0200

    Don't reallocate label set if still known
    
    If the storage deprecates a ref, we have to re-insert with the full
    label set. Typically that doesn't correlate with a new series being
    created.
    We can still use the allocated label set from before.

commit 2368d2c45bf21c9187a2a91e389e7af641fdf781
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 26 00:24:54 2017 +0200

    retrieval: fix memory leak in scrape cache

commit ca2b68889b4dacef5b64a6514ca845989fa533c9
Merge: 5cd37fe 6a767b7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 23 13:15:44 2017 +0200

    Merge branch 'master' into dev-2.0

commit 43075d0215c94c1f57efeb725a7880e7ff16ae99
Merge: 6a767b7 ab4d649
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri Jun 23 12:57:09 2017 +0200

    Merge pull request #2865 from mattbostock/add_marathon_port_ordinal_label
    
    Marathon SD: Set port index label

commit 5cd37fe36f779c25cebb2938ea219f48a8cac51e
Merge: cdfd9c8 be32afd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 23 11:38:08 2017 +0200

    Merge branch 'nolockfile' into dev-2.0

commit cdfd9c829d6ca09c0c8dd112a846db15d6759fca
Merge: 70f96b0 7be94d6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 23 11:37:05 2017 +0200

    Merge pull request #2870 from prometheus/fix-label-display-issue
    
    Fix display of before-relabeling labels

commit ab4d64959f117ca64ba9c099b60965fb55231968
Author: Matt Bostock <mbostock@cloudflare.com>
Date:   Tue Jun 20 15:43:36 2017 +0100

    Marathon SD: Set port index label
    
    The changes [1][] to Marathon service discovery to support multiple
    ports mean that Prometheus now attempts to scrape all ports belonging to
    a Marathon service.
    
    You can use port definition or port mapping labels to filter out which
    ports to scrape but that requires service owners to update their
    Marathon configuration.
    
    To allow for a smoother migration path, add a
    `__meta_marathon_port_index` label, whose value is set to the port's
    sequential index integer. For example, PORT0 has the value `0`, PORT1
    has the value `1`, and so on.
    
    This allows you to support scraping both the first available port (the
    previous behaviour) in addition to ports with a `metrics` label.
    
    For example, here's the relabel configuration we might use with
    this patch:
    
        - action: keep
          source_labels: ['__meta_marathon_port_definition_label_metrics', '__meta_marathon_port_mapping_label_metrics', '__meta_marathon_port_index']
          # Keep if port mapping or definition has a 'metrics' label with any
          # non-empty value, or if no 'metrics' port label exists but this is the
          # service's first available port
          regex: ([^;]+;;[^;]+|;[^;]+;[^;]+|;;0)
    
    This assumes that the Marathon API returns the ports in sorted order
    (matching PORT0, PORT1, etc), which it appears that it does.
    
    [1]: https://github.com/prometheus/prometheus/pull/2506

commit 7be94d664305fc5cf42a40c5d985f1ee6c77e6f7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jun 22 15:36:17 2017 -0400

    Fix display of before-relabeling labels

commit be32afd6df56029737cfafef82990c0cbca712ab
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 22 15:02:10 2017 +0200

    cmd/prometheus: add back tsdb.no-lockfile flag

commit 70f96b0ffb6567100ffc91f7c3fe4e57c8d9dedb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 22 12:02:51 2017 +0200

    *: cut v2.0.0-alpha.3

commit e69dca6b9c94858480c0a1ece539e90b949256b4
Merge: 290c6b2 f9202c6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 22 11:38:29 2017 +0200

    Merge pull request #2868 from Gouthamve/kingpin-promtool
    
    Move promtool to kingpin

commit f9202c651135cd0277a8b7c7c113a287a9d56705
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 21 18:38:37 2017 +0530

    Move from .yaml to .yml in update rules
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit e3701077c3e487e40a27028ea4636d4046c38084
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 21 17:02:04 2017 +0530

    Move promtool to kingpin
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 290c6b23835a1ee659553f95d5bde3473450ed2d
Merge: dd07f69 867b8d1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 21 11:56:30 2017 +0200

    Merge pull request #2866 from prometheus/kingpin
    
    Kingpin instead of Cobra

commit 867b8d108fe7e1641ed032baecdbeb16918530be
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 20 18:48:17 2017 +0200

    cmd/prometheus: cleanup

commit 34ab7a885a6d4ec877a0f74281fcf413660d360c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 20 17:38:01 2017 +0200

    cmd/prometheus: switch to kingpin

commit 8088600202ca5a6fed94a2ee8ac034154058de05
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 20 17:37:40 2017 +0200

    vendor: add kingpin, drop unused deps

commit dd07f693c8a2f632ee53c9302b16eb57382e4542
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Jun 19 16:46:50 2017 +0100

    Single quotes are not valid label value delimiters.

commit a6ca391e6e62dc7043a331e542c3c07e7e21547f
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Jun 16 13:09:50 2017 +0100

    Reject scrapes with invalid utf-8 label values.

commit 6a767b736be5cd4ddf72a8bc6024ac8115713e7d
Author: Alexey Palazhchenko <alexey.palazhchenko@gmail.com>
Date:   Mon Jun 19 19:22:59 2017 +0300

    Parse custom step parameter correctly. (#2861)
    
    Fixes #2827.

commit ab1bc9bcdd95c8bcfd6fb875671511bcf8810ae0
Merge: 98c2d84 592cb00
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 19 13:27:37 2017 +0200

    Merge pull request #2842 from Gouthamve/rulegroups
    
    Rulegroups

commit 592cb00c2f3a322eee4dae711a3afbc1c7ef85ee
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Jun 19 16:38:46 2017 +0530

    Remove version from RuleGroups
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 37e7b69f568d8c91bf191d1a22effa5c3d6e4186
Merge: c472316 98c2d84
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Jun 19 16:34:55 2017 +0530

    Merge remote-tracking branch 'upstream/dev-2.0' into rulegroups
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 98c2d8477a27f2751c1054746b712d76c267abb3
Merge: dfef6cf 67dc73f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 19 11:59:52 2017 +0200

    Merge pull request #2844 from Gouthamve/cobra
    
    Move CLI commander to cobra

commit b2f7c8d842fd765508f8c7f5055242e8e9fdfad3
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Jun 19 15:03:39 2017 +0530

    Use user nobody in Dockerfile
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit f46a8e9ea4bd4cd466ccf3065969a8e4177db407
Merge: 16867c8 6f5d952
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Jun 17 14:42:20 2017 +0200

    Merge pull request #2854 from prometheus/promql-rune
    
    Check for invalid utf-8 in lexer strings.

commit 67dc73fd590e01fbd4c47bfcf2169b02b426df2b
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 20:21:41 2017 +0530

    Flag changes for 2.0
    
    Fixes: prometheus/prometheus#2087
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit d407bd150c490e9d4b3cab73a37fadb6137a2c05
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 18:37:34 2017 +0530

    Consolidate the duration params in CLI
    
    * All CLI params moved to model.Duration
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit f40a5990a0ea9403e05befb87ec3d1cc8e2424ca
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 18:23:43 2017 +0530

    vendor: Update common/model
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 6f5d9521329f8570d29d4d7b8eb90a053c708b65
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Jun 16 15:19:24 2017 +0100

    Check for invalid utf-8 in lexer strings.
    
    This protects against invalid utf-8 sneaking
    in via label_replace.

commit 16867c89a74780a859b71b14ddf31237fb647bc2
Author: Harsh Agarwal <harshaga97@gmail.com>
Date:   Fri Jun 16 19:21:22 2017 +0530

    implement label_join issue 1147 (#2806)
    
    Replace OptionalArgs int with Variadic int.

commit c472316fb387bcaa5cd08a65665355936f70a5c1
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 16:57:22 2017 +0530

    Check done before every rule evaluation.
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 6b70a4d85031ecfb1404c3702237ebc0e7d3f2c8
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 16:44:33 2017 +0530

    Incorporate PR feedback
    
    * Move fingerprint to Hash()
    * Move away from tsdb.MultiError
    * 0777 -> 0666 for files
    * checkOverflow of extra fields
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 771e5a5d1d6d6f8d32aca9cf23002c891ef76842
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 16:04:33 2017 +0530

    vendor: gh/Sirupsen/logrus -> gh/sirupsen/logrus
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 6c1617fd1391cec442aed9f274fc18471f14bfe1
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 15:55:13 2017 +0530

    Simplify usage string
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 507790a35791a3dfcfea5aec3b02741a1a34dd2e
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 15:52:44 2017 +0530

    Rework logging to use explicitly passed logger
    
    Mostly cleaned up the global logger use. Still some uses in discovery
    package.
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit c399563ec1a168a4233d1b7c4ce8e8c80dfde157
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 13:33:26 2017 +0530

    vendor: Update common/log
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit c89f8753f516642a8bdeda970fcbc26cdda0fcd7
Merge: 9ba61df d8b4995
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 16 10:43:45 2017 +0200

    Merge pull request #2828 from prometheus/sd-label-valid
    
    Check target labels are valid. Check for address after relabelling.

commit dc69645e92024c092bf729907b40ded21e086a93
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Jun 16 10:46:21 2017 +0530

    Move back to go-yaml
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit ea255c65208c12e3be0bdab4eeb59cde4523b17c
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Jun 15 17:02:37 2017 +0530

    vendor: Add win specific dependency
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 8abb91f656fb16f0051cd6bba41c7acae1151167
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Jun 15 16:38:08 2017 +0530

    Move CLI commander to cobra
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit cbeeaf48aa6391b4b4e9ee9ef77e23122a9713e0
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Jun 15 16:36:36 2017 +0530

    vendor: Add cobra and pflag
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit dfef6cf2345465285e27802fcd24219ccbab1523
Merge: 7640960 6f66125
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 15 11:03:13 2017 +0200

    Merge pull request #2843 from prometheus/fix-scrape-err-reporting
    
    retrieval: Fix "up" reporting for failed scrapes

commit 6f66125809c672de68713881d56c36fec375e2a7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jun 14 22:08:03 2017 -0400

    retrieval: Fix "up" reporting for failed scrapes

commit 5ff283a7b7f1aaa3d564b46f3aa02d3746ab0f45
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 14 16:09:14 2017 +0530

    Reflect the grouping in the UI
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 8cca666cf2132919c213385a31ee057b527cae60
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 14 15:18:39 2017 +0530

    Add file name to group.
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit e893c89333d250e4061b857d1876d2f2d6caee71
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 14 15:07:54 2017 +0530

    Validate labels and annotations
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit c884881f7d4b6254669da09918444208f7bac7d4
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 14 13:34:13 2017 +0530

    Add License Header
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 1c0874372169d75c6765c89097863750ff490f21
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 14 13:32:26 2017 +0530

    Update check-rules to new format.
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 2d1e92513b4b66df2619b4cc02add379cbe29f06
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 14 13:21:32 2017 +0530

    Add tests
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit a48a01836810055029145881b7777fddd00c233a
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 14 12:19:21 2017 +0530

    Make sure groups are unique in a single file
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit cea1e99f78c739fe2261406313bfc673a5b77ddb
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Jun 14 11:13:00 2017 +0530

    Add update-rules command to promtool
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 76409604691a2a1b5305ad4624a7973ee529ddd5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 13 07:44:07 2017 +0200

    vendor: update tsdb (#2840)

commit baf5b0f0fccb0f597385f4a48986255d112901b8
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Tue Jun 13 10:52:27 2017 +0530

    Fix error where we look into the future. (#2829)
    
    * Fix error where we look into the future.
    
    So currently we are adding values that are in the future for an older
    timestamp. For example, if we have [(1, 1), (150, 2)] we will end up
    showing [(1, 1), (2,2)].
    
    Further it is not advisable to call .At() after Next() returns false.
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
    
    * Retuen early if done
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
    
    * Handle Seek() where we reach the end of iterator
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
    
    * Simplify code
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit 9ba61df45aeea9808d5ccd57a0dd9d64833f174f
Merge: f71d39a 64cef5c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 12 16:15:53 2017 +0200

    Merge pull request #2789 from mtanda/aws_default_region
    
    config: set default region for EC2 SD

commit e8f55669ea92c8e173127c8427914d70e6960835
Author: Goutham Veeramachaneni <goutham@boomerangcommerce.com>
Date:   Mon Jun 12 18:14:39 2017 +0530

    Move rules to new format
    
    Signed-off-by: Goutham Veeramachaneni <goutham@boomerangcommerce.com>

commit 3afb3fffa3a29c3de865e1172fb740442e9d0133
Merge: bfa37c8 aef7104
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Jun 12 13:41:21 2017 +0200

    Merge pull request #2836 from brancz/cut-1.7.1
    
    cut 1.7.1

commit aef71047910f94dacbfa79ede0d5eb12a0cdf99e
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Jun 12 11:00:30 2017 +0200

    cut 1.7.1

commit f71d39a053c9c6f9e444c376e7c5f6c80899d989
Merge: bfa37c8 9063f8d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 12 10:40:43 2017 +0200

    Merge pull request #2832 from brancz/fix-redirect
    
    web: fix double prefix redirect

commit 9063f8dedd0ebcae4832bac7b9b5417b10bf7e09
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Sat Jun 10 12:07:43 2017 +0200

    web: fix double prefix

commit d8b4995ddd9a63bfc4a2c2708d3be55a5cc0b808
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Jun 9 16:18:19 2017 +0100

    Check target labels are valid. Check for address after relabelling.
    
    Fixes #2822
    Fixes #2819

commit c843a0cd29e8b4c42b5201659d25dc2a76185410
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 7 16:58:15 2017 +0200

    pkg/rulefmt: Add rule group parsing

commit bfa37c8ee39d11078662dce16c162a61dccf616c
Merge: 5d9ac35 6d29f0c
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Wed Jun 7 11:40:29 2017 +0200

    Merge pull request #2814 from brancz/cut-1.7.0
    
    cut 1.7.0

commit 5d9ac3565ea9fecfc7e839b28b87450a8fb0ff23
Merge: d26f789 24a113b
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Wed Jun 7 10:21:34 2017 +0200

    Merge pull request #2786 from tomwilkie/report-error-in-remote-write
    
    Remote write: read first line of response and include it in the error.

commit 6d29f0c19fc3f734985fa73f62fd256e7f316bb8
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Tue Jun 6 18:27:32 2017 +0200

    cut 1.7.0

commit d26f789cb0ebb2df3b2c0f2918fafc0c0da37aee
Merge: 8f781e4 d6a55c3
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Wed Jun 7 09:54:31 2017 +0200

    Merge pull request #2816 from brancz/gophercloud-vendoring
    
    vendor: fix mixed versions of gophercloud packages

commit d6a55c3013927b00b203a68bf62e12ce7f06b95b
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Wed Jun 7 09:21:43 2017 +0200

    vendor: fix mixed versions of gophercloud packages

commit 64cef5cd050fdf23b7cfc843f25a2386221f732c
Author: Mitsuhiro Tanda <mitsuhiro.tanda@gmail.com>
Date:   Tue Jun 6 22:02:23 2017 +0900

    handle NewSession() error

commit 669075c6b902d809ed2c79210a55180a372fba27
Merge: eb65123 8f781e4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 6 09:36:51 2017 +0200

    Merge branch 'master' into dev-2.0

commit eb651233ac7b831675620a865a2055c4c8810900
Merge: c6eed97 37bc607
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 6 08:21:12 2017 +0200

    Merge pull request #2787 from prometheus/limit2
    
    Rework sample limit to work for 2.0

commit 8f781e411c79b6ef616dff3e074191da88ea0fde
Author: Christian Groschupp <christian@groschupp.org>
Date:   Thu Jun 1 23:49:02 2017 +0200

    Openstack Service Discovery (#2701)
    
    * Add openstack service discovery.
    
    * Add gophercloud code for openstack service discovery.
    
    * first changes for juliusv comments.
    
    * add gophercloud code for floatingip.
    
    * Add tests to openstack sd.
    
    * Add testify suite vendor files.
    
    * add copyright and make changes for code climate.
    
    * Fixed typos in provider openstack.
    
    * Renamed tenant to project in openstack sd.
    
    * Change type of password to Secret in openstack sd.

commit dbe2eb2afc32ba1ec5c1d4bb54e4ede56d651a6d
Author: Roman Vynar <roman.vynar@goquiq.com>
Date:   Fri Jun 2 00:14:23 2017 +0300

    Hide consul token on UI. (#2797)

commit a391156dfba9cd2fed2fb960baea20175cbc06f9
Merge: 1c9499b 42de0ae
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 1 10:20:10 2017 -0700

    Merge pull request #2667 from goller/go-discovery-logger
    
    Add logger injection into discovery services

commit a1ddab463e440801e4e3d0a28cff37d4e41377d1
Author: Mitsuhiro Tanda <mitsuhiro.tanda@gmail.com>
Date:   Wed May 31 23:19:31 2017 +0900

    config: set default region for EC2 SD

commit 42de0ae0132fe4d986fcb92a8ec14874a0638f89
Author: Chris Goller <goller@gmail.com>
Date:   Fri Apr 28 10:12:38 2017 -0500

    Use log.Logger interface for all discovery services

commit 24a113bb0943ceb8b9db15e6ff0b25f0e5d57066
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Jun 1 11:21:48 2017 +0100

    Review feedback: limit number of bytes read under error.

commit 37bc607e96ed062f60d12cf7d1fd991f36598de5
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon May 29 14:08:55 2017 +0100

    Rework sample limit to work for 2.0
    
    Correctly update reported series.
    Increment prometheus_target_scrapes_exceeded_sample_limit_total.
    Add back unittests.
    Ignore stale markers when calculating sample limit.
    
    Fixes #2770

commit 46abe8cbf23e0562e00415f0b327b3875dde50b0
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Wed May 31 13:46:08 2017 +0100

    Remote write: read first line of response and include it in the error.

commit 1c9499bbbd9825c0759ba8c6f1596fa369911bb3
Merge: 240bb67 287ec6e
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed May 31 11:28:46 2017 +0200

    Merge pull request #2785 from prometheus/grobie/fix-target-group-naming
    
    Fix outdated target_group naming in error message

commit 287ec6e6cc2f4b8e4af78e52015db911d48bb333
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed May 31 11:01:13 2017 +0200

    Fix outdated target_group naming in error message
    
    The target_groups config has been renamed to static_configs, the error
    message for overflow attributes should reflect that.

commit c6eed97c77a7f1ee8af6791bbf84109b987d7448
Merge: 72a276e bc7aff8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 30 15:55:37 2017 -0700

    Merge pull request #2774 from prometheus/stalemem
    
    Fix staleness memory leak

commit 240bb671e29ecd209e0ab23478f0155de528fd4c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue May 30 20:58:06 2017 +0200

    config: Fix overflow checking in global config (#2783)

commit bc7aff8cef1bc669c8473c541363566c5daa0b68
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 26 10:44:48 2017 +0200

    retrieval: extract scrape cache

commit e0f046396a163913ee3c40030a7f42fbdcf1cbd5
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon May 29 16:24:24 2017 +0200

    Fix InfluxDB retention policy usage in read adapter (#2781)

commit 14eee34da36ac52ccda444a3208c87246c1fd835
Author: Stephan Erb <github@stephanerb.eu>
Date:   Mon May 29 15:59:30 2017 +0200

    Update vendored go-zookeeper client (#2778)
    
    It is likely this will fix #2758.

commit 51626f2573f15ed1c7e31cc76a16f188cdfd46d9
Author: Benjamin <ben-st@users.noreply.github.com>
Date:   Mon May 29 15:58:40 2017 +0200

    change deprecated maintainer to label (#2724)

commit 6766123f93bd63677db051f67dc77aa5adb7db19
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Mon May 29 12:46:23 2017 +0100

    Replace regex with Secret type and remarshal config to hide secrets (#2775)

commit d66799d7f3fa2503c46130345f3c0fcea8caad28
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri May 26 16:17:48 2017 +0100

    Show gaps in graphs. (#2766)
    
    Fixes #345

commit 72a276e7edcf3a7abfd2b2eea509cfa895f49526
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu May 25 17:11:29 2017 +0100

    Pass through storage errors in limitAppender.

commit a83014f53c64cf6ae101faebaf38645106d52c95
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 26 08:44:24 2017 +0200

    retrieval: fix memory leak and consumption for caches

commit 2a426bfead5577a85adc7b8ff19401ce769fe6a8
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu May 25 08:57:01 2017 +0200

    Revert "Use tag names consistently (#2743)"
    
    Apparently, a decision was made at some point to only use the v prefix
    in tags and similar contexts where other things can appear. There was a
    vote to stick to that decision. For more information, read
    https://github.com/prometheus/prometheus/pull/2743.
    
    This reverts commit 5405a4724fbc7307786a65c176168a8948c0cbbf.

commit ab0ce4a8d9858956b37b545cfb84bb4edb5d7776
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 17:31:48 2017 +0200

    *: cut v2.0.0-alpha.1

commit 8fef036078e76541782125b1efe11071c8fbf040
Merge: 4c31061 3d8661b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 17:23:59 2017 +0200

    Merge pull request #2765 from prometheus/memmap
    
    retrieval: Don't allocate map on every scrape

commit 3d8661b8d505283c12d1543148b3505de463d6e0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 17:05:42 2017 +0200

    Add comment

commit 43ca6522171d57f0f3ff97c620861d2cbe1d946e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 16:23:48 2017 +0200

    retrieval: Don't allocate map on every scrape

commit 4c3106125193286d749c5d666d503358b0f58296
Merge: 025f553 9c95306
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 15:36:17 2017 +0200

    Merge branch 'master' into dev-2.0

commit 025f5531ade5e55645a9af1906963d7e91d989b5
Merge: e5f9414 d3f662f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 15:30:02 2017 +0200

    Merge pull request #2681 from prometheus/grobie/reduce-noisy-append-errors
    
    Handle errSeriesDropped correctly

commit d3f662f15ea9b9930c3df1297cd9830e8c7b1d35
Merge: 368206d e5f9414
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 15:29:30 2017 +0200

    Merge branch 'dev-2.0' into grobie/reduce-noisy-append-errors

commit e5f94145b87d418ca4accca3f927e2aec5e1c0ef
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue May 23 18:03:57 2017 +0100

    Drop series for federation if latest sample is stale.

commit 220e78b9c3dc63b0c8b83190f042183852b42772
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue May 23 17:36:35 2017 +0100

    Consider a series stale after 4.1 intervals with no data.
    
    To cover the cases where stale markers may not be available,
    we need to infer the interval and mark series stale based on that.
    As we're lacking stale markers this is less accurate, however
    it should be good enough for these cases.
    
    We need 4 intervals as if say we had data at t=0 and t=10,
    coming via federation. The next data point should be at t=20 however it
    could take up to t=30 for it actually to be ingested, t=40 for it to be
    scraped via federation and t=50 for it to be ingested.
    We then add 10% on to that for slack, as we do elsewhere.

commit c02c25d5ba7a6b6aad6b2d34ffc9f3121a1ba9f6
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue May 23 17:01:54 2017 +0100

    Allow peeking back further in buffer.

commit 10d8b6b633c6bf0e73812d882b1384a7e9be3ac0
Merge: dcea3e4 bdc763f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 15:24:38 2017 +0200

    Merge pull request #2764 from prometheus/nullparse
    
    pkg/textparse: allow null bytes in label values

commit 9c953064c312fbcf008745927b543df37eb81e4b
Author: conorbroderick <cjayjayb@gmail.com>
Date:   Fri May 19 14:21:55 2017 +0100

    check if result is a scalar in order to display correct number of returned time series

commit bdc763f95fb0181194f6f617d28f8e874d58a33d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 14:52:46 2017 +0200

    pkg/textparse: allow null bytes in label values

commit dcea3e4773204d698823da0d238d1ae211ab9247
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri May 19 17:02:25 2017 +0100

    Don't append a 0 when alert is no longer pending/firing
    
    With staleness we no longer need this behaviour.

commit cc867dae6067508175be7e473c048ebcc51bf3bd
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri May 19 16:43:59 2017 +0100

    Copy previous series and alert state more intelligently.
    
    Usually rules don't more around, and if they do it's likely
    that rules/alerts with the same name stay in the same order.
    
    If rules/alerts with the same name are added/removed this
    could cause a blip for one cycle, but this is unavoidable
    without requiring rule and alert names to be unique - which we don't
    want to do.

commit 9bc68db7e69b301cc4ade5bb56200f2810805c5e
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri May 19 13:42:07 2017 +0100

    Track staleness per rule rather than per group.

commit 0451d6d31be29c86d2cad7c84c2632936580a0f7
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu May 18 17:47:00 2017 +0100

    Add unittest for rule staleness, and rules generally.

commit 0400f3cfd2ac9a88cb4fa10f1318fd046a5c0f27
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu May 18 16:26:36 2017 +0100

    Very basic staleness handling for rules.

commit 9aa8f822c15cde3cbd3d9cee6ea028b75b2908b0
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu May 18 14:46:44 2017 +0100

    Fix typo

commit 09fcbf78df41285b996728c6b7366622ba1b5874
Merge: 5405a47 ad22606
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 24 10:09:47 2017 +0200

    Merge pull request #2755 from brancz/redirect-prefix
    
    prefix redirect with external url path

commit 5405a4724fbc7307786a65c176168a8948c0cbbf
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue May 23 14:14:15 2017 +0200

    Use tag names consistently (#2743)

commit fa58fdbd5db54eff99cca4b9bbfec396b3fac798
Merge: ea09299 d289dc5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 22 16:32:25 2017 +0200

    Merge pull request #2753 from prometheus/uptsdb2
    
    storage: update TSDB

commit ad22606a3da6893475f4d763e3c203c5b1bb2f58
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon May 22 14:15:02 2017 +0200

    web: prefix redirect with ExternalURL path

commit 45df5c2dafe14d60ccc5ab40c5f7f72a31cd9316
Merge: 75b8973 7d17ecb
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon May 22 13:44:44 2017 +0200

    Merge branch 'release-1.6'

commit d289dc55c33fdcb389a4d3f6cac80107154196e6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 22 11:53:08 2017 +0200

    storage: update TSDB

commit ea09299ca59f0b48aa0b92bf4266de4f5eca5d5f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 22 11:15:40 2017 +0200

    pkg/textparse: handle trailing labels comma (#2752)

commit 75b89739ded8017918bf639e719b87828ae3fe7b
Author: Jacky Wu <wjx_colstu@hotmail.com>
Date:   Sun May 21 00:33:14 2017 +0800

    Fix go version hint. (#2750)

commit 10cccd2e458bddbc6357a1dfcac9823679332306
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 19 09:56:41 2017 +0200

    Bump version file

commit 7d17ecbd484019a72eda740bfe12aaf79df98f88
Merge: 363554f 53a2bd7
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu May 18 16:56:54 2017 +0200

    Merge pull request #2735 from brancz/cut-1.6.3
    
    cut 1.6.3

commit 53a2bd71b97af8d9a505cca0915fc50730fb7b2b
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu May 18 11:06:29 2017 +0200

    *: cut 1.6.3

commit 2ae2b663a9be8c5bb339501cf789924db0fcfac4
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sat Apr 15 12:26:51 2017 -0300

    Create sha256 checksums file during release

commit e9787382b4d159a98ed1d3e8ec2e9b911db242a1
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Wed May 3 20:32:50 2017 +0100

    Ensure ewma int64s are always aligned. (#2675)

commit 363554f67568379c6e568c3205ec44325e4e4436
Merge: b916b37 9287a01
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu May 18 16:49:30 2017 +0200

    Merge pull request #2739 from Conorbro/stack-graph-fix
    
    Fixed graph ui max/min logic to accommodate for toggling of stacked graph option

commit 9287a01bbf8c1c1a42eed6b2f80f22d6bc290824
Author: conorbroderick <cjayjayb@gmail.com>
Date:   Thu May 18 15:03:58 2017 +0100

    Fixed fixed yaxis of stacked graph being cut off

commit b916b3784b5d494201d7564d7020f7bcdbcddda7
Merge: b38e977 94e8b43
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu May 18 10:59:38 2017 +0200

    Merge pull request #2731 from brancz/lset-non-cloned
    
    notifier: clone and not reuse LabelSet in AM discovery

commit 94e8b43aaeac879069681c9c1482bd016f128465
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Wed May 17 16:24:22 2017 +0200

    notifier: clone and not reuse LabelSet in AM discovery

commit 0e05cccfbd58cb753099782841e1a9f226a26307
Author: Fazal Majid <github@sentfrom.com>
Date:   Wed May 17 13:50:43 2017 -0700

    updated logrus so Prometheus can build on Solaris/Illumos (#2733)

commit 0920972f795bb7847992e9cb66703259465b3861
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue May 16 15:12:40 2017 +0100

    Initilise scraped sample map, and rename to series map.

commit bf38963118793064a1a7cd97556d1aca36d9bb52
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue May 16 14:04:37 2017 +0100

    Plumb through logger with target field to scrape loop.

commit d657d722dc8da78aca651ccf6bb34ca5237ae1f8
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue May 16 13:30:40 2017 +0100

    Log count of dupliates/out of order samples as warnings.
    
    Keep log of each sample as debug log.

commit 8b9d3e7547c4832f4506251c56e70b650611b7bb
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue May 16 13:12:21 2017 +0100

    Put end of run staleness handler in seperate function.
    
    Improve log message.

commit d532272520610c0e8fcb6ae83c90411f9873b08b
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu May 11 14:43:43 2017 +0100

    Add stalemarkers to synthetic series too when target stops.

commit b87d3ca9eaa489d8c8dc80323c1e8ee84469a03b
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed May 10 16:59:02 2017 +0100

    Create stale markers when a target is stopped.
    
    When a target is no longer returned from SD stop()
    is called. However it may be recreated before the
    next scrape interval happens. So we wait to set stalemarkers
    until the scrape of the new target would have happened
    and been ingested, which is 2 scrape intervals.
    
    If we're shutting down the context will be cancelled,
    so return immediately rather than holding things up for potentially
    minutes waiting to safely set stalemarkers no newer than now.
    If the server starts immediately back up again all is well.
    If not, we're missing some stale markers.

commit 73049ba79d2b6a752b0507f80ca09db03425ae39
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed May 10 14:56:46 2017 +0100

    Make the choice of NaN values clearer.
    
    Also switch stale nan value to one more suitable for expansion.

commit 95162ebc16144542e16044f2e7a502c549718989
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed May 10 14:44:13 2017 +0100

    Add log messages for out of order samples

commit 3c454001300f1ffa168ca73acc46bb61468db545
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed May 3 17:20:07 2017 +0100

    Don't fail scrape if one sample violates ordering.
    
    In Prometheus 1.x one sample that is out of order
    or that has a duplicate timestamp is discarded, and
    the rest of the scrape ingestion continues on.
    This will now also be true for 2.0.

commit fd5c5a50a32084953940cb3161b4a5ecd811e5d6
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed May 3 16:51:45 2017 +0100

    Add stale markers on parse error.
    
    If we fail to parse the result of a scrape,
    we should treat that as a failed scrape and
    add stale markers.

commit c0c7e32e61104789bcbc58d4455500f0e80f84c0
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed May 3 14:55:35 2017 +0100

    Treat a failed scrape as an empty scrape for staleness.
    
    If a target has died but is still in SD, we want the previously
    scraped values to go stale. This would also apply to brief blips.

commit 850ea412ad7e6e2bbb65543bddf1dcd75060c273
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Apr 28 16:36:36 2017 +0100

    If an explicit timestamp is provided, bypass staleness.

commit a5cf25743cd28c52ad07aa559e4fd5febddbef13
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Apr 19 11:54:38 2017 +0100

    Move stalness check into a function

commit 80b40e6d9164b6900edd1c85791668298d8a5fe6
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Apr 14 11:31:40 2017 +0100

    Add initial staleness handing to promql.
    
    For instant vectors, if "stale" is the newest sample
    ignore the timeseries.
    
    For range vectors, filter out "stale" samples.
    
    Make it possible to inject "stale" samples in promql tests.

commit 5060a0fc51319c435db3235fed1f8ca59d6f31f5
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Apr 14 10:41:18 2017 +0100

    Add unittests for ingestion stale NaNs

commit 4f35952cf3fa6160da47161cbc508376b347ae2f
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Apr 13 18:07:23 2017 +0100

    Inject a stale NaN when sample disappears between scrapes.

commit beaa7d5a431d7b1f282059896d4019bfdcb7d346
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Apr 13 10:33:08 2017 +0100

    Move consistent NaN logic into the parser.

commit 76acf7b9b14f413f662e63e4f81fe0920a9cb6d2
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Apr 11 15:42:17 2017 +0100

    Ensure all the NaNs we ingest have the same bit pattern.

commit dea60bb5539ff179ec0bf9d393d319d86a38dd9b
Author: Shashank Varanasi <es16btech11025@iith.ac.in>
Date:   Tue May 16 22:14:11 2017 +0530

    Fix malformed uname string (#2727)
    
    * Fix malformed uname string
    
    * Make fix better
    
    * Reformat code for simplicity

commit 73e7ff1eddd7c6aa79b3ba47c850545cbb8194a7
Merge: 24ce79f 06c2b76
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 16 18:42:28 2017 +0200

    Merge pull request #2728 from prometheus/uptsdb
    
    vendor: update prometheus/tsdb

commit 06c2b76cd4cc29ed4ba91f1eb0267355b5e7973a
Merge: fbb22dd 713fef2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 16 16:48:37 2017 +0200

    Merge branch 'master' into uptsdb

commit fbb22ddd8f0249bd96f87db00f400bf63f31a5f7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 16 16:41:25 2017 +0200

    vendor: update prometheus/tsdb

commit 24ce79f75de6581219d4e2c7aa1190cb39e56e9f
Merge: cf4e19c 0eabed8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 15 16:15:30 2017 +0200

    Merge pull request #2721 from prometheus/skipped-metric
    
    Remove unused metric

commit 0eabed804866bdfbdad6c20b68531e286711e72c
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon May 15 15:06:54 2017 +0100

    Remove unused metric

commit 713fef292a83d11489656982faeea3059f99e4ee
Author: jswitzer <jswitzer@tervela.com>
Date:   Mon May 15 08:35:57 2017 -0400

    vendor: upgrade govalidator to v6 (#2714)
    
    * vendor: upgrade govalidator to v6
    
    * Upgrade govalidator to latest in master.
    
    * Run govalidator update through govendor

commit b0e1ea7c6c27f0a0c5cdfab01225f9d5e6eb589b
Author: Alexey Palazhchenko <alexey.palazhchenko@gmail.com>
Date:   Mon May 15 11:56:09 2017 +0300

    Simplify code, fix typos. (#2719)

commit 61235fd851f08ae85f52775e3352d251b52d0fb2
Author: Shashank Varanasi <es16btech11025@iith.ac.in>
Date:   Sun May 14 00:12:29 2017 +0530

    Print system information (uname) at Prometheus startup (#2709)
    
    * Print uname on prom startup
    
    * Make uname file linux-only
    
    * Add missing license headers
    
    Add missing license headers
    
    * Print OS when uname is not available
    
    * Print only OS name when uname not available
    
    * Remove extra space, fix cmd/prometheus/main.go license header
    
    * Add fix for int8 and uint8 systems
    
    * Better formatting for build tags in cmd/prometheus/uname files
    
    * Remove newline

commit ac203ef0ee2e6bebec6bef2dd7057036b62adedf
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat May 13 15:47:04 2017 +0200

    Add externalURL template function (#2716)
    
    This allows users to e.g. add links back to the generating Prometheus
    right in their alert templates.

commit cf4e19c1b020a0e952ba483bfd746a51d1960801
Merge: 6e804b3 0e0da98
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 12 13:39:04 2017 +0200

    Merge remote-tracking branch 'origin' into dev-2.0

commit 6e804b3497fcaad122bcf15996de840aa4973d6b
Merge: fcc88f0 1c72524
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 12 13:29:58 2017 +0200

    Merge branch 'master' into dev-2.0

commit fcc88f0e1e519eb03cd098756f16ef4fb58fd87a
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Apr 18 14:51:10 2017 +0100

    query/query_range should return eval timestamp
    
    Query and query_range should return the timestamp
    at which an evaluation is performed, not the timestamp
    of the data. This is as that's what query range asked
    for, and we need to keep query consistent with that.
    
    Query for a matrix remains unchanged, returning the literal
    matrix.

commit 517b81f927a1f9dbae188fcd2ef383310858eed8
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Apr 14 11:57:05 2017 +0100

    Add timestamp() function.
    
    Make the timestamp of instant vectors be the timestamp of the sample
    rather than the evaluation. We were not using this anywhere, so this is
    safe.
    
    Add a function to return the timestamp of samples in an instant vector.
    
    Fixes #1557

commit d1d5c5c47dc371cf2955755da7b2d235a120bd68
Merge: 8e73bde c50a3ec
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 12 12:07:09 2017 +0200

    Merge pull request #2713 from brancz/max-block-duration-default
    
    prometheus: default max-block-duration to 10% of retention

commit c50a3eccce2e0a26407bf5771cb9e6f83628c05e
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Fri May 12 11:48:51 2017 +0200

    prometheus: default max-block-duration to 10% of retention

commit 0e0da989c5ab0dd810b6f7e6c41583644f2ef97e
Merge: 1c72524 8d54499
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 12 09:19:15 2017 +0200

    Merge pull request #2712 from prometheus/vendor
    
    vendor: remove leftover dependency

commit 8d54499e974f2935e128798ea409c16fe16703c3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 12 09:14:44 2017 +0200

    vendor: remove leftover dependency

commit 8e73bde650ae7b771c2c101455dd222763da2ab8
Merge: bf64d4e 76b3378
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 20:30:33 2017 +0200

    Merge pull request #2710 from prometheus/fabxc-patch-1
    
    retrieval: add missing scrape context cancelation

commit 1c72524870b3b40bd9d56a45ee9e3e5121ec4da4
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu May 11 18:40:10 2017 +0200

    Fix HTTP error handling in remote.Client.Store() (#2708)
    
    Regression introduced in
    https://github.com/prometheus/prometheus/commit/e5d7bbfc3c7e38b4ee257dd1c6bc9b3e28b23d57

commit 76b3378190ec7301017a87d2b9feb67a973faf75
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 17:20:03 2017 +0200

    retrieval: add missing scrape context cancelation

commit f160f17a6f13583c45b693550e3f8066cbaf330e
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu May 11 16:15:07 2017 +0200

    retrieval: fix missing scrape context cancellation (#2599)

commit 0c3462762bb4f2759313d0da54dd399b01896e75
Merge: a333c56 11aa049
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 15:06:15 2017 +0200

    Merge pull request #2707 from prometheus/merge16
    
    Merge 1.6 into master

commit 11aa049b0539b9ec33d0c66c98c4986bbfa2a375
Merge: a333c56 b38e977
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 15:00:51 2017 +0200

    Merge branch 'release-1.6' into merge16

commit b38e977fd8cc2a0d13f47e7f0e17b82d1a908a9a
Merge: e9c2513 b51cf7e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 14:56:43 2017 +0200

    Merge pull request #2706 from prometheus/cut162
    
    Cut 1.6.2

commit b51cf7efcb3987f4b780f7dc95eb2d8c87665342
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 14:35:17 2017 +0200

    *: cut 1.6.2

commit ddbbd2b71214cf2abbfca9f8e5e8440405881cc0
Merge: e9c2513 1edf99c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 14:29:49 2017 +0200

    Merge branch 'release-1.5' into cut162

commit 1edf99ce5dc52e8e680176c22864e5acc67b9243
Merge: bd1182d fc3214c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 14:22:02 2017 +0200

    Merge pull request #2705 from prometheus/cut153
    
    cut 1.5.3

commit fc3214c7bfb11f1f0d602f98e2fc016046b7bbc6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 13:58:18 2017 +0200

    *: cut 1.5.3

commit 2ff8855ae6685dadc28c05094044c3dbcd24891c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 11 10:29:10 2017 +0200

    discovery/k8s: update client library

commit a333c5612a9d312b7c45819f870efcd6574c837d
Merge: 3141a6b 0c96c4b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 10 18:37:13 2017 +0200

    Merge pull request #2678 from brancz/am-discovery-metrics
    
    notifier: expose metric for number of discovered alertmanagers

commit 3141a6b36be4aacd1f84dda8927cef9f3f2f1368
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Wed May 10 15:42:59 2017 +0100

    Compress remote storage requests and responses with unframed/raw snappy. (#2696)
    
    * Compress remote storage requests and responses with unframed/raw snappy, for compatibility with other languages.
    
    * Remove backwards compatibility code from remote_storage_adapter, update example_write_adapter
    
    * Add /documentation/examples/remote_storage/example_write_adapter/example_writer_adapter to .gitignore

commit bf64d4efa830456ccc6e92e0b693104a94e300a0
Merge: 373bec3 9a92118
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 10 15:42:14 2017 +0200

    Merge pull request #2703 from prometheus/alertmpl
    
    ui: fix alert template

commit 9a9211845e0bf44445b156738a06957779cfc7d1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 10 15:30:10 2017 +0200

    ui: fix alert template

commit 373bec3784fa033b812f4d0edc8042694592b7af
Merge: ff0ee26 4177c35
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 10 10:14:02 2017 +0200

    Merge pull request #2700 from improbable-io/bugfix/2699-p2-sighup
    
    Fixup sighup for P2 TSDB init #2699

commit 4177c35eba2b20914c01a93118d0127874e926c6
Author: Michal Witkowski <michal@improbable.io>
Date:   Tue May 9 17:00:54 2017 +0100

    Fixup sighup for P2 TSDB init #2699

commit ff0ee264aea5ac7f8b757433e226c0e4c708cf52
Merge: c1ce7cf 9b175d4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 9 14:41:24 2017 +0200

    Merge pull request #2695 from prometheus/nolock
    
    Allow disabling of lock file for TSDB

commit 14d0604aba95c7bb434f3a7687f7903bbe4fd81f
Author: Jorrit Salverda <JorritSalverda@users.noreply.github.com>
Date:   Tue May 9 13:57:49 2017 +0200

    Kubernetes config scrape node via api proxy (#2641)
    
    * scrape kubelet metrics via api node proxy
    
    * add manifests to setup serviceaccount, clusterrole and clusterrolebinding to work with rbac
    
    * removed .cluster.local and added newline to address comments

commit 9b175d48cb73a3821dac8c192171470996228b5c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 9 12:56:51 2017 +0200

    Add flag to disable TSDB lock file

commit dae4a801cb9d22f0b99bc365d3895acf1d8e64e2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 9 12:53:33 2017 +0200

    vendor: update tsdb

commit c1ce7cf81424e792b2d12bc0e5af1d211bb2fa7d
Merge: 8c483e2 f7c5d96
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 9 12:43:42 2017 +0200

    Merge pull request #2694 from prometheus/txtparse
    
    pkg/textparse: parse metric names with ':'

commit f7c5d96e84baa388c85ac181c2b7c9a44974afcf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 9 12:21:19 2017 +0200

    pkg/textparse: parse metric names with ':'

commit 46226088aa9374d2d365ae2ef89100845cea3a68
Merge: aaaec64 e9c2513
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue May 9 11:16:07 2017 +0200

    Merge branch 'release-1.6'

commit e9c25131fe38a3e3a9521842828a4c7027bda498
Merge: 8097a3c 69eddc9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 9 07:28:13 2017 +0200

    Merge pull request #2690 from prometheus/beorn7/storage
    
    storage: Correctly increase prometheus_local_storage_open_head_chunks

commit 69eddc9e8437f127f4891511481fd20ef4f37a29
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon May 8 18:20:23 2017 +0200

    storage: Correctly increase prometheus_local_storage_open_head_chunks

commit 0c96c4b157ebaca4dc1bd73b3305d18982d3d4f6
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu May 4 13:54:08 2017 +0200

    notifier: expose metric for number of discovered alertmanagers

commit 368206d2f5e3b19df2e7a6dca0daae67cd63b78b
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri May 5 14:58:36 2017 +0200

    Handle errSeriesDropped correctly
    
    If metrics_relabel_configs are used to drop metrics, an errSeriesDropped
    is returned. This shouldn't be used to return an error at the end of a
    append() call.

commit aaaec6431e60c5d0088a77a161752b6368b834b1
Merge: 2195bb6 27d6662
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 4 07:36:21 2017 +0200

    Merge pull request #2642 from bakins/kubernetes-namespaces
    
    Allow limiting Kubernetes service discover to certain namespaces

commit 2195bb66f7d04cee8848b6829a710a033cc68e39
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Wed May 3 20:32:50 2017 +0100

    Ensure ewma int64s are always aligned. (#2675)

commit 4d9b917d111f3ad0e0f482a42fe5930d47742d94
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Wed May 3 00:49:29 2017 +0100

    Instrument Prometheus with OpenTracing (#2554)
    
    * Use request.Context() instead of a global map of contexts.
    
    * Add some basic opentracing instrumentation on the query path.
    
    * Remove tracehandler endpoint.

commit 0b9fca983b05336e5996c08afecbcfcc7324fdfe
Author: Stephan Erb <github@stephanerb.eu>
Date:   Wed May 3 01:21:37 2017 +0200

    Fix reload of ZooKeeper service discovery config (#2669)
    
    Rational:
    
    * When the config is reloaded and the provider context is canceled, we need to
      exit the current ZK `TargetProvider.Run` method as a new provider will be
      instantiated.
    * In case `Stop` is called on the `ZookeeperTreeCache`, the update/events
      channel may not be closed as it is shared by multiple caches and would
      thus be double closed.
    * Stopping all `zookeeperTreeCacheNode`s on teardown ensures all associated
      watcher go-routines will be closed eagerly rather than implicityly on
      connection close events.

commit 86426c05669417cf1012fbc3a40fb7e0f5a8a101
Merge: 314b810 94a3e86
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 2 11:12:13 2017 +0200

    Merge pull request #2672 from svend/kubernetes-pods-port-comment
    
    Document what ports are scraped by default in k8s example

commit 94a3e863e406cab5844f521c8580f3c893888344
Author: Svend Sorensen <svend@ciffer.net>
Date:   Mon May 1 15:50:14 2017 -0700

    Document what ports are scraped by default in k8s example
    
    The Kubernetes pod SD creates a target for each declared port, as documented:
    
    https://prometheus.io/docs/operating/configuration/#pod
    
    > The pod role discovers all pods and exposes their containers as targets. For
    > each declared port of a container, a single target is generated. If a
    > container has no specified ports, a port-free target per container is created
    > for manually adding a port via relabeling.
    
    This results in the default port being the declared port, or no port if none are
    declared.

commit 8c483e27d3d53b39ee0211c28eeeff7626c9ac99
Merge: e829dbe 1df03d8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 27 17:49:57 2017 +0200

    Merge pull request #2661 from prometheus/texts
    
    pkg/textparse: implement timestamp parsing

commit 1df03d834677065a60c45bb29571942027fb00b7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 27 17:27:19 2017 +0200

    make: disable remote tests temporarily

commit 377886b37177243fe1e319fbff5ab27a5aa47a3c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 27 17:02:07 2017 +0200

    pkg/textparse: implement timestamp parsing

commit 314b81062d441913da7ddd6e321c42809197914a
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Thu Apr 27 14:25:13 2017 +0100

    Updated vendoring for log level reporting issue (#2660)

commit 27d66628a1a764277479ec8f6175a0b54049cbba
Author: Brian Akins <bakins@rsglab.com>
Date:   Wed Apr 19 08:36:34 2017 -0400

    Allow limiting Kubernetes service discover to certain namespaces
    
    Allow namespace discovery to be more easily extended in the future by using a struct rather than just a list.
    
    Rename fields for kubernetes namespace discovery

commit e829dbe2beac6fb4b0618f12e64ec874b254fadb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 27 11:46:08 2017 +0200

    retrieval: comment out accept header again

commit 0f3110487d3d9ff8c2d1f228dc40fc2b52a55ad4
Merge: 37deb21 6a94787
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 27 10:25:04 2017 +0200

    Merge remote-tracking branch 'origin/dev-2.0' into dev-2.0

commit 37deb21c4572340cdb95a3f1fe7e1ff59f3ca177
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 27 10:23:34 2017 +0200

    vendor: remove unused dependency and last ref to fabxc/tsdb

commit 73b8ff0ddc6bf32efa733dca11ab900cff336922
Merge: 757cba7 fe11c59
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 27 10:19:55 2017 +0200

    Merge branch 'master' into dev-2.0

commit fe11c5933aadd61ddf5219e1b590fa706ef690ca
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Apr 26 10:29:42 2017 -0500

    Fix mutation of active alert elements by notifier (#2656)
    
    This caused the external label application in the notifier to bleed back
    into the rule manager's active alerting elements.

commit 5248118b10a115a6c3cdcc0c794aae33b75d8bf6
Merge: 60d9138 8bb0749
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 25 08:43:36 2017 +0200

    Merge pull request #2654 from dsymonds/master
    
    Add maintainers' GitHub usernames to MAINTAINERS.md.

commit 8bb07490a2949e8d33d8ac075b114e0a21566322
Author: David Symonds <dsymonds@gmail.com>
Date:   Tue Apr 25 16:32:10 2017 +1000

    Add maintainers' GitHub usernames to MAINTAINERS.md.
    
    CONTRIBUTING.md instructs people to loop them in using that mechanism,
    but nothing lists the right username.

commit 60d9138b6bde3bf53fa9139eb3e72e89bae72107
Merge: 9eb1a5d 04ad889
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 25 08:27:31 2017 +0200

    Merge pull request #2653 from dsymonds/master
    
    Preserve Alertmanager URLs as *url.URL.

commit 04ad889751a8846c7285c2f707f08c5537641f1d
Author: David Symonds <dsymonds@gmail.com>
Date:   Tue Apr 25 15:42:33 2017 +1000

    Preserve Alertmanager URLs as *url.URL.
    Render a nicer link in the web UI.

commit 9eb1a5d6bf7afa14675f8073b36c65e8a49a3597
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Mon Apr 24 10:50:57 2017 +0100

    Handle invalid query in graph UI (#2652)

commit 8b8ba2612968cd192d8dba7ab745480a1774dcc3
Merge: e499ef8 8097a3c
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Apr 19 15:22:24 2017 +0100

    Merge pull request #2644 from prometheus/release-1.6
    
    Merge 1.6.1 release from 1.6 branch

commit 8097a3c52336de37d07822940b0d7fc4b7ef4e86
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Apr 19 14:23:56 2017 +0100

    Cut v1.6.1 (#2640)

commit 6a947878eb2c7a566cb3038a6dd13b607f130c45
Merge: ece483c 5c9a6ce
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 19 14:50:20 2017 +0200

    Merge pull request #2643 from prometheus/ci-2.0
    
    Add license to files.

commit 5c9a6ce747fc4211ebcf17445a15d967886436ad
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Apr 19 13:43:09 2017 +0100

    Add license to files.
    
    This should fix CI for dev-2.0.

commit e499ef8cac0f68584ca4f47a25f2d00723bfb1d1
Merge: 1faf33a 872ed88
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 18 18:06:01 2017 +0200

    Merge bug fixes from branch 'release-1.6'

commit 872ed88166c43b6507ced526a537c607ae8660ce
Merge: 10f6453 1dd737d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Apr 18 17:02:07 2017 +0200

    Merge pull request #2638 from prometheus/beorn7/storage
    
    storage: Don't panic if storage has no FPs even after initial wait

commit 1dd737d7c3d1ba34a65539fb5a2ad12cd3dbb83e
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 18 15:59:12 2017 +0200

    storage: Don't panic if storage has no FPs even after initial wait

commit 1faf33acacd28161ef8019e6beac68a10e524bfb
Author: Matt Layher <mdlayher@gmail.com>
Date:   Sat Apr 15 17:38:01 2017 -0400

    Add promlint check for histogram/summary reserved names (#2626)

commit 09a977a7824d60fbaa8450881d11c140b5ae20b5
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sat Apr 15 12:26:51 2017 -0300

    Create sha256 checksums file during release

commit 619cc0e0ffe91dffa05c3c8afae415c7ddb0f608
Merge: 34a4813 cc4198f
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Apr 14 22:47:30 2017 +0200

    Merge pull request #2625 from mdlayher/promlint-cleanup
    
    Simplify promlint problems gathering, use protobuf accessors

commit cc4198f42158b14780e81a69e56a6f49750ba15b
Author: Matt Layher <mdlayher@gmail.com>
Date:   Fri Apr 14 16:40:40 2017 -0400

    Simplify promlint problems gathering, use protobuf accessors

commit 34a48134640bf1c88b7c105f6adbd6196044283d
Author: Matt Layher <mdlayher@gmail.com>
Date:   Fri Apr 14 16:09:54 2017 -0400

    Initial promlint counter _total suffix check (#2624)

commit 254cb1ec29feb612fac87e26fcd8369ac4f91159
Author: Matt Layher <mdlayher@gmail.com>
Date:   Fri Apr 14 14:38:57 2017 -0400

    Use untyped metrics for some promlint tests (#2623)

commit 67d511784d16a2bd69a212337bd09e0761ed7cb9
Merge: 896f951 10f6453
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Apr 14 20:12:22 2017 +0200

    Merge pull request #2619 from prometheus/release-1.6
    
    Cut v1.6.0

commit 10f645382988add09c8e3420d0d7ff2dc4d36a29
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Apr 14 01:53:20 2017 +0200

    Cut v1.6.0

commit 896f951e6846ce252d9d19fd4707a4110ceda5ee
Author: Jack Neely <jjneely@gmail.com>
Date:   Fri Apr 14 10:21:49 2017 -0400

    Force buckets in a histogram to be monotonic for quantile estimation (#2610)
    
    * Force buckets in a histogram to be monotonic for quantile estimation
    
    The assumption that bucket counts increase monotonically with increasing
    upperBound may be violated during:
    
      * Recording rule evaluation of histogram_quantile, especially when rate()
         has been applied to the underlying bucket timeseries.
      * Evaluation of histogram_quantile computed over federated bucket
         timeseries, especially when rate() has been applied
    
    This is because scraped data is not made available to RR evalution or
    federation atomically, so some buckets are computed with data from the N
    most recent scrapes, but the other buckets are missing the most recent
    observations.
    
    Monotonicity is usually guaranteed because if a bucket with upper bound
    u1 has count c1, then any bucket with a higher upper bound u > u1 must
    have counted all c1 observations and perhaps more, so that c  >= c1.
    
    Randomly interspersed partial sampling breaks that guarantee, and rate()
    exacerbates it. Specifically, suppose bucket le=1000 has a count of 10 from
    4 samples but the bucket with le=2000 has a count of 7, from 3 samples. The
    monotonicity is broken. It is exacerbated by rate() because under normal
    operation, cumulative counting of buckets will cause the bucket counts to
    diverge such that small differences from missing samples are not a problem.
    rate() removes this divergence.)
    
    bucketQuantile depends on that monotonicity to do a binary search for the
    bucket with the qth percentile count, so breaking the monotonicity
    guarantee causes bucketQuantile() to return undefined (nonsense) results.
    
    As a somewhat hacky solution until the Prometheus project is ready to
    accept the changes required to make scrapes atomic, we calculate the
    "envelope" of the histogram buckets, essentially removing any decreases
    in the count between successive buckets.
    
    * Fix up comment docs for ensureMonotonic
    
    * ensureMonotonic: Use switch statement
    
    Use switch statement rather than if/else for better readability.
    Process the most frequent cases first.

commit 283756c503537466f8ca4b19ba93de1527a68dd9
Author: Matt Layher <mdlayher@gmail.com>
Date:   Thu Apr 13 17:53:41 2017 -0400

    Initial commit of 'promtool check-metrics', promlint package (#2605)

commit ee62807b62b22c96318cf9c3f18d1828c98adf23
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Wed Apr 12 14:25:25 2017 +0100

    Added min/max to graph to accomodate for constant time series (#2612)
    
    Added min/max to graph to accommodate constant time series

commit 1fb2190eeb62bf3b0445c6c63f536cdf6518cba8
Merge: 0e0fc5a c53f256
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Apr 11 14:31:58 2017 +0200

    Merge pull request #2607 from prometheus/beorn7/storage
    
    Vendoring update prior to 1.6 release

commit c53f256a09ab0f0443cc735fd11d05d8d7426397
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 11 12:56:34 2017 +0200

    storage: Fix use of counter (Set -> Add)

commit 1ae50b1d1bc542ce9501ca347e2f9c4432b73837
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 11 12:51:50 2017 +0200

    vendoring: Update client_golang/prometheus
    
    This is mostly required to enable summaries without quantiles

commit 92d4cf7663e39e68ef3e1512948104760b6540e1
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 11 12:47:20 2017 +0200

    vendoring: Remove unused packages

commit 0e0fc5a7f45ce28632f43f1ead0183ee82c7afca
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Apr 10 17:24:53 2017 +0100

    Correct example name to adapter. (#2590)

commit 757cba7c31db95ad71d4de5e878017aa9f59f394
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 10 16:22:01 2017 +0200

    cmd/prometheus: Undo GOGC adjustment

commit ece483c0c1f2ad11e7dc749ea958669b0914c1c3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 10 13:03:47 2017 +0200

    version: cut 2.0.0-alpha.0

commit f2d610c1e52e398341168fe2de7a148acbd440e4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 5 14:53:50 2017 +0200

    vendor: update tsdb for fast equal matching

commit acd72ae1a7bf62ef37f69830531666548ce40907
Merge: cffb1ac f20b84e
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Apr 7 20:02:14 2017 +0200

    Merge pull request #2591 from prometheus/beorn7/storage
    
    storage: Several optimizations of checkpointing

commit cffb1acf7fc9bb7f44f1fc99f5114fcf9a3f8452
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Apr 7 17:16:06 2017 +0530

    Test Longer Tests in Travis (#2570)
    
    * Test Longer Tests in Travis
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
    
    * Make test Target Run All Tests
    
    * Add test-short to run short tests
    
    test is running all the tests now as we are running make tests in
    CircleCI and I think the base image is shared across Prometheus Org.
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
    
    * Remove Empty Line
    
    Signed-off-by: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>

commit f20b84e81661f47d7d36c1fa7dd718b409d1d33b
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Apr 7 00:49:16 2017 +0200

    flags: Improve doc strings for checkpoint flags

commit f338d791d286838e2a5fb9c5e61d6c6ce512c6b5
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 6 16:57:25 2017 +0200

    storage: Several optimizations of checkpointing
    
    - checkpointSeriesMapAndHeads accepts a context now to allow
      cancelling.
    
    - If a shutdown is initiated, cancel the ongoing checkpoint. (We will
      create a final checkpoint anyway.)
    
    - Always wait for at least as long as the last checkpoint took before
      starting the next checkpoint (to cap the time spending checkpointing
      at 50%).
    
    - If an error has occurred during checkpointing, don't bother to sync
      the write.
    
    - Make sure the temporary checkpoint file is deleted, even if an error
      has occurred.
    
    - Clean up the checkpoint loop a bit. (The concurrent Timer.Reset(0)
      call might have cause a race.)

commit 934d86b936f3e6e35581c44e6ec22236f4c69de3
Merge: 0f48d07 4fcc73a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Apr 7 12:55:35 2017 +0200

    Merge pull request #2593 from prometheus/beorn7/storage2
    
    storage: Recover from corrupted indices for archived series

commit 0f48d07f953c71abc8503b187ddba1c0508e8bad
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Apr 7 12:25:01 2017 +0530

    Fix Map Race by Moving Locking closer to the Write (#2476)

commit 182d7de9cd4cc5648c618e3b13b6fd757e9a007d
Merge: 38bcba1 ec692f6
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Apr 7 01:02:02 2017 +0200

    Merge pull request #2597 from richardkiene/CMON-53
    
    Add triton zone brand metadata

commit 38bcba11fec64da29c3d6481c6bfc633e49b180f
Merge: f0076ac 3d12906
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Apr 7 00:52:28 2017 +0200

    Merge pull request #2594 from prometheus/beorn7/storage3
    
    storage: Guard against a corner case of data corruption

commit f0076aca01d7b652ac7790151cbbf561f45d003a
Merge: e5d7bbf 7199a9d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Apr 7 00:51:53 2017 +0200

    Merge pull request #2595 from prometheus/beorn7/storage4
    
    storage: Guard against appending to evicted chunk

commit e5d7bbfc3c7e38b4ee257dd1c6bc9b3e28b23d57
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Apr 6 23:15:41 2017 +0100

    Remote writes: retry on recoverable errors. (#2552)
    
    * Remote writes: retry on recoverable errors.
    
    * Add comments
    
    * Review feedback
    
    * Comments
    
    * Review feedback
    
    * Final spelling misteak (I hope).  Plus, record failed samples correctly.

commit ec692f616120161ea79df325637fcf5f8c222825
Author: Richard Kiene <richard.kiene@joyent.com>
Date:   Thu Apr 6 21:09:23 2017 +0000

    Add triton zone brand metadata

commit 7199a9d9d4cedfa2b7c880c15a69dea8db30d483
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 6 19:58:32 2017 +0200

    storage: Guard against appending to evicted chunk
    
    Fixes #2480. For certain definition of "fixes".
    
    This is something that should never happen. Sadly, it does happen,
    albeit extremely rarely. This could be some weird cornercase we
    haven't covered yet. Or it happens as a consequesnce of data
    corruption or a crash recovery gone bad.
    
    This is not a "real" fix as we don't know the root cause of the
    incident reported in #2480. However, this makes sure the server does
    not crash, but deals gracefully with the problem: The series in
    question is quarantined, which even makes it available for forensics.

commit 3d12906286cb31505ceebcd39567c4e6dee7a750
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 6 19:50:32 2017 +0200

    storage: Guard against a corner case of data corruption
    
    Fixes #2475.

commit 4fcc73a04c89c9e1a2cf0e27ccf98630cf17701d
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 6 19:26:18 2017 +0200

    storage: Recover from corrupted indices for archived series
    
    An unopenable archived_fingerprint_to_timerange is simply deleted and
    will be rebuilt during crash recovery (wich can then take quite some time).
    
    An unopenable archived_fingerprint_to_metric is not deleted but
    instructions to the user are logged. A deletion has to be done by the
    user explicitly as it means losing all archived series (and a repair
    with a 3rd party tool might still be possible).

commit 9775ad4754c93262bb044f76638226743034d854
Merge: c72692f c813c82
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Apr 6 17:10:31 2017 +0200

    Merge pull request #2588 from prometheus/read-multi
    
    Separate out remote read responses.

commit c72692fd7510185925d9f98e680a27737038f1f6
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Thu Apr 6 16:04:44 2017 +0100

    Fixed issue of partially hidden y-axis values on graph (#2589)

commit c813c824d41cce90c949c7ec669bc051dcdc309f
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Apr 6 15:28:42 2017 +0100

    Separate out remote read responses.
    
    Fixes #2574

commit 516a96d9a355dd25444e002ff1b2a86f541b43a9
Merge: beeb0b5 f3365c4
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Apr 6 16:42:06 2017 +0200

    Merge pull request #2587 from prometheus/beorn7/storage2
    
    storage: Mark storage as dirty if indexing fails

commit beeb0b55c04b496294e920b98d6449d935ba9fcb
Merge: fdd2bc2 f0e8a5f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Apr 6 16:36:20 2017 +0200

    Merge pull request #2572 from weaveworks/2571-propagate-api-error
    
    Add promql.ErrStorage, which the API propagates as a 500.

commit fdd2bc22ae1201c2efc01df441cee47adfda277c
Merge: 5f764d9 ed5f68f
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Apr 6 15:56:49 2017 +0200

    Merge pull request #2583 from prometheus/beorn7/storage
    
    storage: Increment s.persistErrors on all persist errors

commit ed5f68f3824aadfbf3eda6de5d95d043da6db438
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 6 01:36:29 2017 +0200

    storage: Increment s.persistErrors on all persist errors
    
    Fixes #2091

commit f0e8a5f37ceb486effabc52e82fbec113bbab65c
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Apr 4 17:22:51 2017 +0100

    Add promql.ErrStorage, which is interpreted by the API as a 500.

commit f3365c4f269da988aa703d8580ee339f96e52a33
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 6 15:29:33 2017 +0200

    storage: Mark storage as dirty if indexing fails

commit 5f764d99408ba3837d49f5d1bb7b6dcab1f1471e
Merge: 26bedc9 5e4f5fb
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Apr 5 23:13:32 2017 +0200

    Merge pull request #2582 from mdlayher/scrape-header-rename
    
    retrieval: make scrape timeout header consistent with others

commit 5e4f5fb5ada1306385f9a7b57345057ce93e59bd
Author: Matt Layher <mdlayher@gmail.com>
Date:   Wed Apr 5 14:56:22 2017 -0400

    retrieval: make scrape timeout header consistent with others

commit 26bedc9e00a39cec56bb7232d946e8b75b97ad95
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Apr 5 15:19:17 2017 +0100

    Revert use of buildVersion in console templates. (#2579)
    
    This function isn't available in console templates,
    so go back to pre-#2468 state to get things working again.

commit 17f15d024a495d07033deed4a09d7d98dcbf89ff
Author: Alexey Palazhchenko <alexey.palazhchenko@gmail.com>
Date:   Wed Apr 5 16:24:22 2017 +0300

    Small fixes. (#2578)
    
    Fix typos. Simplify with gofmt -s

commit 8c768f2ca3131b80644a170d67d6c3411ec65304
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 5 14:53:34 2017 +0200

    web: Fix federation for instance label

commit 425f591fc93dbecbedc39775805e53ea5b3fbfa3
Merge: a874556 ae28638
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Apr 4 23:23:51 2017 +0200

    Merge pull request #2576 from prometheus/beorn7/storage
    
    storage: Check for negative values from varint decoding

commit a874556a66a1ba6d9841416b9f34c3a4c4df8e93
Merge: fe4b669 9b6a1da
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Apr 4 19:44:42 2017 +0200

    Merge pull request #2577 from prometheus/beorn7/storage2
    
    storage: Fix `go vet` error

commit fe4b6693f74026cd26b0d979fc978d7a50a4faf6
Author: Matt Layher <mdlayher@gmail.com>
Date:   Tue Apr 4 13:26:28 2017 -0400

    retrieval: add Scrape-Timeout-Seconds header to each scrape request (#2565)
    
    Fixes #2508.

commit ae286385fd57008b64ecd960e6e8da478815ac38
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 4 19:14:52 2017 +0200

    storage: Check for negative values from varint decoding
    
    Sadly, we have a number of places where we use varint encoding for
    numbers that cannot be negative. We could have saved a bit by using
    uvarint encoding. On the bright side, we now have a 50% chance to
    detect data corruption. :-/
    
    Fixes #1800 and #2492.

commit 9b6a1dad05fcbe52b0f2125ce20093ea79181986
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 4 19:14:09 2017 +0200

    storage: Fix `go vet` error

commit 47b0b9f7b0aeb9e1b566f4eddc877528b2a38a68
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 4 16:04:29 2017 +0200

    vendor: add tsdb support for windows

commit 5f3327f620e3fd29bfc3770acd68d679d165d49c
Merge: 50e4f49 535a18e
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Apr 4 15:54:30 2017 +0200

    Merge pull request #2568 from AlekSi/patch-1
    
    Use latest released Go 1.8.x

commit cb84d6057e3215f06715d5c4b1fb148938003b3c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 4 15:19:22 2017 +0200

    vendor: add non-amd64 implementation for xxhash

commit 8ffc851147265ad878f02e4ff653a13c97c75207
Merge: cfb2a7f 50e4f49
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 4 14:44:39 2017 +0200

    Merge branch 'master' into dev-2.0

commit 535a18e97818030ac91642865f7ba4e059d4b2aa
Author: Alexey Palazhchenko <alexey.palazhchenko@gmail.com>
Date:   Tue Apr 4 13:52:18 2017 +0300

    Use latest released Go 1.8.x

commit cfb2a7f1d5f6bc547e83eb5a9136e7bc28d11f33
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 4 11:33:51 2017 +0200

    vendor: sync organisation migration of tsdb

commit bbcf20ba01571c580cf2c215be7a481ea407e443
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 4 11:13:46 2017 +0200

    web: deduplicate series in federation

commit f56644e3aeae4093376ec9e9d4669b1a7b8257b0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 4 11:09:11 2017 +0200

    api/v1: deduplicate selected series

commit 4e41987bcbdebdd9c80751c20e20fdf31abf6abe
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 4 11:07:21 2017 +0200

    storage: add deduplication function
    
    This adds a function to deduplicate two series sets given that duplicate
    series have equivalent data points.

commit 50e4f49b7e12469a71629a7ad532978cebac1e4a
Merge: eda4286 08fc6cb
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Apr 4 00:05:03 2017 +0200

    Merge pull request #2561 from prometheus/beorn7/storage2
    
    storage: Evict unused chunk.Descs in crash recovery

commit 08fc6cbd39eb6b2f07faab72541c4bf7fd6457b3
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Apr 3 17:03:59 2017 +0200

    storage: Evict unused chunk.Descs in crash recovery
    
    This is in line with the v1.5 change in paradigm to not keep
    chunk.Descs without chunks around after a series maintenance.
    
    It's mainly motivated by avoiding excessive amounts of RAM usage
    during crash recovery.
    
    The code avoids to create memory time series with zero chunk.Descs as
    that is prone to trigger weird effects. (Series maintenance would
    archive series with zero chunk.Descs, but we cannot do that here
    because the archive indices still have to be checked.)

commit eda42864845e88cdd3a55080b4bafab9154c9ccd
Merge: 1c6240f 111841a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Apr 3 18:29:22 2017 +0200

    Merge pull request #2557 from prometheus/influxdb-read
    
    Add InfluxDB read-back support to remote storage bridge

commit 1c6240fc40185e8eaa5b2d67142c8e17c6aa94c7
Merge: eac36d1 d284ffa
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Apr 3 16:56:21 2017 +0200

    Merge pull request #2559 from prometheus/beorn7/storage
    
    storage: Replace fpIter by sortedFPs

commit d284ffab03320f14a9392a8d8a695d6b38a1b898
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 27 19:52:53 2017 +0200

    storage: Replace fpIter by sortedFPs
    
    The fpIter was kind of cumbersome to use and required a lock for each
    iteration (which wasn't even needed for the iteration at startup after
    loading the checkpoint).
    
    The new implementation here has an obvious penalty in memory, but it's
    only 8 byte per series, so 80MiB for a beefy server with 10M memory
    time series (which would probably need ~100GiB RAM, so the memory
    penalty is only 0.1% of the total memory need).
    
    The big advantage is that now series maintenance happens in order,
    which leads to the time between two maintenances of the same series
    being less random. Ideally, after each maintenance, the next
    maintenance would tackle the series with the largest number of
    non-persisted chunks. That would be quite an effort to find out or
    track, but with the approach here, the next maintenance will tackle
    the series whose previous maintenance is longest ago, which is a good
    approximation.
    
    While this commit won't change the _average_ number of chunks
    persisted per maintenance, it will reduce the mean time a given chunk
    has to wait for its persistence and thus reduce the steady-state
    number of chunks waiting for persistence.
    
    Also, the map iteration in Go is non-deterministic but not truly
    random. In practice, the iteration appears to be somewhat "bucketed".
    You can often observe a bunch of series with similar duration since
    their last maintenance, i.e. you see batches of series with similar
    number of chunks persisted per maintenance. If that batch is
    relatively young, a whole lot of series are maintained with very few
    chunks to persist. (See screenshot in PR for a better explanation.)

commit eac36d123e194d222fe93cc6c056e80f7a86368f
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Apr 3 13:02:15 2017 +0200

    Fix unstable fanin test (#2558)

commit dafae52efa128d210418585db1106b31b76a168e
Author: Conor Broderick <conor.broderick@robustperception.io>
Date:   Mon Apr 3 11:52:25 2017 +0100

    Display total number of returned elements on console (#2532)
    
    Display total number of returned elements on console

commit 111841a2309c7862aa71b1472d821370035f754f
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 3 12:38:05 2017 +0200

    Vendor new InfluxDB client library

commit e18be8d1a57f534b6bca4b32e5f035a1db086918
Merge: 5a89603 eaf3375
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 3 10:09:12 2017 +0200

    Merge pull request #2556 from prometheus/grobie/count-missed-group-executions
    
    Export number of missed rule evaluations

commit 3581057ea43f08879b20359e7710f5850c771b8b
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun Apr 2 23:14:56 2017 +0200

    Update remote storage bridge README.md

commit b391cbb808a519204fd642007c958de7c163b485
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun Apr 2 11:59:11 2017 +0200

    Add InfluxDB read-back support to remote storage bridge

commit eaf33759fbaed5050348c73aaf83c884f71366b8
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sun Apr 2 20:32:56 2017 -0300

    Register forgotten prometheus_evaluator_iterations_total metric

commit aaaba57184848b7038d3b8221b3da732982650fa
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Sun Apr 2 20:03:28 2017 -0300

    Export number of missed rule evaluations
    
    In case the execution of all rules takes longer than the configured rule
    evaluation interval, one or more iterations will be skipped. This needs
    to be visible to the opterator.

commit 5a896033e3bde1114adfa8e5a1a4dd64db52c5dd
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Apr 2 17:48:15 2017 +0200

    Add remote read external label handling (#2555)
    
    * Add remote read external label handling
    
    This implements rule 1 and 2 from
    https://docs.google.com/document/d/188YauRgfF0J4CYMigLsVNN34V_kUwKnApBs2dQMfBbs/edit
    
    * Use more descriptive example labels in read test
    
    * Add comment for querier.addExternalLabels()
    
    * Make argument naming in removeLabels() more generic

commit 9cc7b393c50415f147616e3a87ae26e03f62ca20
Merge: 5890619 947c83b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Apr 1 00:07:31 2017 +0200

    Merge pull request #2548 from prometheus/sort-targets
    
    Sort targets by instance within a job

commit 589061919a5e2a2189253355518c8315e5b89214
Merge: 336c787 f27ce34
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Mar 31 21:45:05 2017 +0200

    Merge pull request #2465 from Gouthamve/alert-metrics-2429
    
    Better Metrics For Alerts

commit f27ce34a1369b682bd77230f42985d25200ed4e2
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Sat Apr 1 00:14:30 2017 +0530

    Use Registerer to Register All Metrics
    
    * Made Metric a Gauge so that it can be registered.

commit 7ba0a9e81acfa2abba6199efaf36ade544e97e3a
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Mar 31 22:59:20 2017 +0530

    Add Comment About Initialising Counters

commit 0d0c9d5440b0dd8eb04edb16a3b580fabdc82515
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Mar 31 21:20:12 2017 +0530

    Move Registerer to Config Struct in Notifier

commit 581f69d75503970abb37335c4e2ebfc63cf16b3f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Mar 31 14:08:30 2017 +0200

    vendor: update tsdb and remove unused

commit 947c83be3b864ed2517dd8a0979ba1c343f45785
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 30 22:45:18 2017 +0200

    Sort targets by instance within a job
    
    Fixes https://github.com/prometheus/prometheus/issues/2536

commit 336c7870eae2448a9b3509685767e74a1a256bcf
Merge: 8cd5aff a44aadf
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Mar 31 13:12:03 2017 +0200

    Merge pull request #2550 from prometheus/update-go-version
    
    ci: Update Go version to 1.8

commit a44aadf4a1e8f49ff63d38b72d21b536f9cd5342
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 31 00:20:39 2017 +0200

    ci: Update Go version to 1.8

commit 8cd5aff8fe06f358d43a04e606efb72731105dd6
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Mar 27 16:18:33 2017 +0100

    Send instance="" with federation if instance not set.
    
    This is needed for federating non-instance level metrics, so they don't
    end up with the instance label of the prometheus target.
    
    Also sort external labels, so label output order is consistent.

commit d42e01b07ceb172cd1b6f3fcb0684e5b212fd4c5
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Mar 27 15:44:37 2017 +0100

    Sort labelnames for federation.
    
    This makes unittests with multiple labels possible,
    and may be needed for performance with the new
    ingestion text parser.

commit dbb65846f11e04008a738ffefac21f2ea0f805fe
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Mar 27 14:58:34 2017 +0100

    Add unittest for federation external_labels behaviour

commit 5856f87be39bc70bbe24ebc5b3ec08460c613f3f
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Wed Mar 29 20:09:38 2017 +0530

    Update Issue Template (#2541)
    
    This is a comment in markdown and won't be shown while creating the issue.

commit 29f05680a29afe9aa6cf119563e99723a41765bd
Merge: e63d079 04ccf84
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Mar 27 15:00:37 2017 +0200

    Merge pull request #2528 from prometheus/beorn7/storage2
    
    main.go: Set GOGC to 40 by default

commit e63d079b594258a553540162ba1ac3c7fdb7af86
Merge: b5b0e00 434ab2a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Mar 27 14:49:42 2017 +0200

    Merge pull request #2527 from prometheus/beorn7/storage
    
    storage: Evict chunks and calculate persistence pressure...

commit b5b0e00923c00a4cc055c195b85e1480bb43ab27
Merge: e1a84b6 3f23aa2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Mar 27 14:43:44 2017 +0200

    Merge pull request #2499 from prometheus/remote-read
    
    Remote Read

commit 434ab2a6a344f4c25121f4e88a21958a660d3c54
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 1 15:17:31 2017 +0100

    storage: Evict chunks and calculate persistence pressure based on target heap size
    
    This is a fairly easy attempt to dynamically evict chunks based on the
    heap size. A target heap size has to be set as a command line flage,
    so that users can essentially say "utilize 4GiB of RAM, and please
    don't OOM".
    
    The -storage.local.max-chunks-to-persist and
    -storage.local.memory-chunks flags are deprecated by this
    change. Backwards compatibility is provided by ignoring
    -storage.local.max-chunks-to-persist and use
    -storage.local.memory-chunks to set the new
    -storage.local.target-heap-size to a reasonable (and conservative)
    value (both with a warning).
    
    This also makes the metrics intstrumentation more consistent (in
    naming and implementation) and cleans up a few quirks in the tests.
    
    Answers to anticipated comments:
    
    There is a chance that Go 1.9 will allow programs better control over
    the Go memory management. I don't expect those changes to be in
    contradiction with the approach here, but I do expect them to
    complement them and allow them to be more precise and controlled. In
    any case, once those Go changes are available, this code has to be
    revisted.
    
    One might be tempted to let the user specify an estimated value for
    the RSS usage, and then internall set a target heap size of a certain
    fraction of that. (In my experience, 2/3 is a fairly safe bet.)
    However, investigations have shown that RSS size and its relation to
    the heap size is really really complicated. It depends on so many
    factors that I wouldn't even start listing them in a commit
    description. It depends on many circumstances and not at least on the
    risk trade-off of each individual user between RAM utilization and
    probability of OOMing during a RAM usage peak. To not add even more to
    the confusion, we need to stick to the well-defined number we also use
    in the targeting here, the sum of the sizes of heap objects.

commit e1a84b6256ce387c8eb73dc9c8887d05ddc8b16f
Merge: 6dbd779 96a303b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Mar 27 14:25:08 2017 +0200

    Merge pull request #2529 from prometheus/beorn7/storage3
    
    storage: Use staleness delta as head chunk timeout

commit 96a303b348d18b1c74b4d1e7c56f2b83d1388e48
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Mar 26 23:44:50 2017 +0200

    storage: Use staleness delta as head chunk timeout
    
    Currently, if a series stops to exist, its head chunk will be kept
    open for an hour. That prevents it from being persisted. Which
    prevents it from being evicted. Which prevents the series from being
    archived.
    
    Most of the time, once no sample has been added to a series within the
    staleness limit, we can be pretty confident that this series will not
    receive samples anymore. The whole chain as described above can be
    started after 5m instead of 1h. In the relaxed case, this doesn't
    change a lot as the head chunk timeout is only checked during series
    maintenance, and usually, a series is only maintained every six
    hours. However, there is the typical scenario where a large service is
    deployed, the deoply turns out to be bad, and then it is deployed
    again within minutes, and quite quickly the number of time series has
    tripled. That's the point where the Prometheus server is stressed and
    switches (rightfully) into rushed mode. In that mode, time series are
    processed as quickly as possible, but all of that is in vein if all of
    those recently ended time series cannot be persisted yet for another
    hour. In that scenario, this change will help most, and it's exactly
    the scenario where help is most desperately needed.

commit 04ccf8455996ee3bb0c4bbcc81f6ab3018c340f0
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Mar 26 21:55:37 2017 +0200

    main.go: Set GOGC to 40 by default
    
    Rationale: The default value for GOGC is 100, i.e. a garbage collected
    is initialized once as many heap space has been allocated as was in
    use after the last GC was done. This ratio doesn't make a lot of sense
    in Prometheus, as typically about 60% of the heap is allocated for
    long-lived memory chunks (most of which are around for many hours if
    not days). Thus, short-lived heap objects are accumulated for quite
    some time until they finally match the large amount of memory used by
    bulk memory chunks and a gigantic GC cyle is invoked. With GOGC=40, we
    are essentially reinstating "normal" GC behavior by acknowledging that
    about 60% of the heap are used for long-term bulk storage.
    
    The median Prometheus production server at SoundCloud runs a GC cycle
    every 90 seconds. With GOGC=40, a GC cycle is run every 35 seconds
    (which is still not very often). However, the effective RAM usage is
    now reduced by about 30%. If settings are updated to utilize more RAM,
    the time between GC cycles goes up again (as the heap size is larger
    with more long-lived memory chunks, but the frequency of creating
    short-lived heap objects does not change). On a quite busy large
    Prometheus server, the timing changed from one GC run every 20s to one
    GC run every 12s.
    
    In the former case (just changing GOGC, leave everything else as it
    is), the CPU usage increases by about 10% (on a mid-size referenc
    server from 8.1 to 8.9). If settings are adjusted, the CPU
    consumptions increases more drastically (from 8 cores to 13 cores on a
    large reference server), despite GCs happening more rarely, presumably
    because a 50% larger set of memory chunks is managed now. Having more
    memory chunks is good in many regards, and most servers are running
    out of memory long before they run out of CPU cycles, so the tradeoff
    is overwhelmingly positive in most cases.
    
    Power users can still set the GOGC environment variable as usual, as
    the implementation in this commit honors an explicitly set variable.

commit 3f23aa2cc7471c717cc0373f9f6836a4b7c90b3f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Mar 24 17:39:51 2017 +0100

    Add headers to indicate remote read/write version
    
    Also add Content-Type header.

commit a2e7b0b9346027fb8b2185295ecef9ad670db35b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Mar 23 18:44:15 2017 +0100

    venodr: update tsdb and go-kit/log

commit 6dbd77909961875ac99e13193dc9693963d07540
Merge: c34257d a20105d
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Mar 23 14:18:38 2017 +0200

    Merge pull request #2519 from prometheus/update-arch-diag-link
    
    Update architecture diagram link

commit a20105ddb008c3737a6b7d6e939c0ccaef39e47a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Mar 23 13:16:54 2017 +0100

    Update architecture diagram link

commit c34257d069c630685da35bcef084632ffd5d6209
Merge: ddcf04a 428e1ad
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Mar 23 13:13:14 2017 +0100

    Merge pull request #2518 from prometheus/update-arch-diag
    
    Remove PromDash from architecture diagram

commit 428e1ad42c8f6477037e7baf313209a59ad4450a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 23 13:11:05 2017 +0100

    Remove PromDash from architecture diagram

commit ddcf04a76869dadc79cb222846e75eb05caaaaee
Merge: 40e41a4 4774d67
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 23 11:58:30 2017 +0100

    Merge pull request #2515 from leitzler/leitzler-patch-1
    
    Use go env to fetch GOPATH to support Go 1.8

commit 4774d6736ac7307fda998419ac19962e43a36b71
Author: Pontus Leitzler <leitzler@users.noreply.github.com>
Date:   Wed Mar 22 19:04:20 2017 +0100

    Use go env to fetch GOPATH to support Go 1.8
    
    Go 1.8 do not require env GOPATH to be set and make will fail if it isn't set.

commit 8fda83ea128ffc99af3a26d4771f2d480e4bfa54
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 21 00:46:31 2017 +0100

    Make rules only read local data

commit 94acd3f1d8579928dab7720351857a7c0d4b2dd9
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 20 21:40:52 2017 +0100

    Add fanin tests and fix uncovered bugs

commit 9b33cfc457cff3b51252e150f6e17d0f58d6a01e
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 20 14:17:06 2017 +0100

    Fix/unify context-based remote storage timeouts

commit 815762a4ad576df4065fc40bea8a382eb91e1a7b
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 20 14:17:04 2017 +0100

    Move retrieval.NewHTTPClient -> httputil.NewClientFromConfig

commit 397f001ac590615c1415a12480f7e17cea08f6e9
Merge: fc2e56c 40e41a4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 20 14:07:41 2017 +0100

    Merge branch 'master' into dev-2.0

commit fc2e56c13f22556ae5cb5cbc15f5f8afd5309e38
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 20 14:07:25 2017 +0100

    vendor: update tsdb

commit eb14678a25502c25f36ab630654ac7cce1ab6384
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 20 13:37:50 2017 +0100

    Make remote read/write use config.HTTPClientConfig

commit 406b65d0dc4cc074cbfd4604f8f400ec26c9bf53
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 20 13:15:28 2017 +0100

    Rename remote.Storage to remote.Writer

commit 02395a224da249951a0fc688b45dac8cc57326c8
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 10 12:53:27 2017 +0100

    [WIP] Remote Read

commit 40e41a47763f40fd703821187cd58a3fd5f20070
Merge: 525da88 75bb0f3
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Mar 20 12:45:17 2017 +0100

    Merge pull request #2494 from tomwilkie/remote-write-sharding
    
    Dynamically reshard the QueueManager based on observed load.

commit 525da88c359631c183444d69e4003a72b334513e
Merge: 0958c83 75880b5
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Mar 20 11:40:18 2017 +0100

    Merge pull request #2479 from YKlausz/consul-tls
    
    Adding consul capability to connect via tls

commit 0958c83d5de8c06ee64022e72511c6a63a582716
Merge: 5c89cec 107c335
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 20 08:46:57 2017 +0100

    Merge pull request #2511 from prometheus/fix-go-build
    
    Only truncate buildVersion if it's set

commit 107c33545b4c09eeafaf476a197ff3910b48e990
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 18 21:38:35 2017 +0100

    Don't truncate build version

commit 5c89cec65cfb4b83e10fff63a5085ac88724c02c
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Sun Mar 19 03:02:08 2017 +0530

    Stricter Relabel Config Checking for Labeldrop/keep (#2510)
    
    * Minor code cleanup
    
    * Labeldrop/Labelkeep Now *Only* Support Regex
    
    Ref promtheus/prometheus#2368

commit cc3e859d9efcb8dc276562aebb249a2adad86629
Author: Robson Roberto Souza Peixoto <robsonpeixoto@gmail.com>
Date:   Sat Mar 18 17:10:44 2017 -0300

    Add support for multiple ports in Marathon (#2506)
    
    - create a target for every port
    - add meta labels for Marathon labels in portMappings and portDefinitions

commit 75880b594fc8e39c56efb27d980c2025048d5ac8
Author: yklausz <yklausz@ippon.fr>
Date:   Tue Mar 7 15:47:40 2017 +0100

    Adding consul capability to connect via tls

commit c389193b377e1dbedab0a1c797690f4365fbc987
Merge: b586781 0a7c8e9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Mar 17 16:27:07 2017 +0100

    Merge branch 'master' into dev-2.0

commit b586781283c823a9a786ab90ca07e671b87d392c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Mar 17 16:06:04 2017 +0100

    *: update tsdb vendoring and add retention flag

commit 0a7c8e9da19b9ba138b019bcac9b56fd8e18d34e
Merge: 1823ae8 7bde44e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Mar 17 08:01:48 2017 +0100

    Merge pull request #2504 from prometheus/grobie/fix-discovery-naming
    
    Follow golang naming conventions in discovery packages

commit 7bde44e98e6990b69af6f80f1ad7fc62a7fc415c
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Mar 16 21:21:04 2017 -0300

    Remove testing.T usage in goroutines
    
    The staticcheck warns about testing.T usage in goroutines. Moving the
    t.Fatal* calls to the main thread showed immediately that this is a good
    practice, as one of the test setups didn't work.

commit 58cd39aacd8fdc6b0b80c8619649cf4b15d469f2
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Thu Mar 16 20:29:47 2017 -0300

    Follow golang naming conventions in discovery packages

commit 1823ae8bc41e1ee82e6796747faf7ee3e40fc855
Author: Bplotka <bwplotka@gmail.com>
Date:   Thu Mar 16 14:16:20 2017 +0000

    Fixed int64 overflow for timestamp in v1/api parseDuration and parseTime (#2501)
    
    * Fixed int64 overflow for timestamp in v1/api parseDuration and parseTime
    
    This led to unexpected results on wrong query with "(...)&start=148966367200.372&end=1489667272.372"
    That query is wrong because of `start > end` but actually internal int64 overflow caused start to be something around MinInt64 (huge negative value) and was passing validation.
    
    BTW: Not sure if negative timestamp makes sense even.. But model.Earliest is actually MinInt64, can someone explain me why?
    
    Signed-off-by: Bartek Plotka <bwplotka@gmail.com>
    
    * Added missing trailing periods on comments.
    
    Signed-off-by: Bartek Plotka <bwplotka@gmail.com>
    
    * MOved to only `<` and `>`. Removed equal.
    
    Signed-off-by: Bartek Plotka <bwplotka@gmail.com>

commit 48d221c11e8f9a7136c5eec2c27126841a186ce0
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 16 11:49:41 2017 +0100

    storage: Fix typo in comment

commit feb76709296a5c1abc2f2803bdac9cef224343b9
Author: Robert Neumayer <neumayer@users.noreply.github.com>
Date:   Wed Mar 15 09:33:53 2017 +0100

    Add tests for consul service discovery (#2490)
    
    * Add tests for consul service discovery
    
    * Add license header
    
    * Address comments
    
    * inline variables
    * check for extra error
    
    * Fix error formatting

commit 0ecd205794425815183f3df1f6857d6a0ee2acee
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 14 10:57:34 2017 +0100

    promql: Use buffer pool for matrix allocations

commit 75bb0f32536da6d4e4dd378a3a9142831cf1684d
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Mar 13 21:24:49 2017 +0000

    Review feedback

commit 77cce900b87a95b79cea75da48a9cdc8d07b297a
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Mar 13 15:21:59 2017 +0000

    Fix tests

commit b48799a01eb1a58a8f395a919c43ad5499b09458
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Mon Mar 13 14:50:15 2017 +0000

    Add license stanza

commit 9d22f030cff641d4c2fe8bce330b9eaf4b5ba119
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Mar 7 14:36:40 2017 +0000

    Dynamically reshard the QueueManager based on observed load.

commit 5aa90c075b7ea4f13292b9bd7d753de3145a39dd
Author: Wéber Gyula <gyula.weber.in@gmail.com>
Date:   Mon Mar 13 11:37:25 2017 +0100

    added docker run command to readme (#2491)
    
    * added docker run command to readme
    
    * updated codebox in readme

commit de1e4322d796fb1c41739565511357230069f068
Merge: 2677f3e 4b02702
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Mar 12 14:20:59 2017 +0100

    Merge pull request #2474 from Gouthamve/custom-timeouts-1399
    
    Support Custom Timeout for Queries

commit b09b90a940efff72a803d08abea0040db0f7d07a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Mar 9 15:40:52 2017 +0100

    Correctly close querier on error, revendor tsdb

commit 3abf54c66064e3371468ef81a8eb080616373dbf
Merge: 710f3f4 f160c4e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 8 17:01:32 2017 +0100

    Merge branch 'dev-2.0-compact' into dev-2.0

commit f160c4eb20313f6f226f96a18e1a1d5254077c8f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 8 16:54:48 2017 +0100

    vendor: integrate various tsdb fixes

commit 5ec1efe622d138887811caeb830e5c786ae95510
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 8 15:37:12 2017 +0100

    retrieval: fix test

commit 2677f3eaf2f83e009c7403d384f430f2b8e03aa9
Merge: e22553e 690b49e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 8 10:33:26 2017 +0100

    Merge pull request #2462 from m-kraus/master
    
    Allow the use of bearer_token or bearer_token_file for MarathonSD authorization

commit e22553edd2162d57d940f81165cce57552a763a2
Merge: 6aee155 90625b0
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Mar 7 22:22:01 2017 +0100

    Merge pull request #2468 from agaoglu/version-statics
    
    Adding version to names of static files

commit 90625b04001a3080313f1442597fe0094c6c07bf
Author: Erdem Agaoglu <erdem.agaoglu@gmail.com>
Date:   Tue Mar 7 18:03:52 2017 +0300

    Use revision as cachebuster

commit b416ccb6503d21b48fa69c4e068cf162095628c1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 7 12:04:15 2017 +0100

    vendor: add old inluxdb client

commit 8a8eb12985f6ae5cb43f023a07c438cad5b1e08e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 7 11:51:30 2017 +0100

    storage/tsdb: don't use partitioned DB.

commit 9eb1d6c9270f1ab7ecdd2a7e73b07d1f74df9d1f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 7 11:43:32 2017 +0100

    remote: take code from master

commit d9fb57cde44ea189be754eced4d224a413dd3d42
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 7 11:41:11 2017 +0100

    *: Simplify []byte to string unsafe conversion

commit 4b0270290b027b850c422d367f470f2688d91bd7
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Mar 6 23:21:27 2017 +0530

    Fix comments to match convention

commit c6b329c55b076018225578092eb367353d87151e
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Mar 6 23:02:21 2017 +0530

    Support Custom Timeouts for Queries

commit 6634984a38ef9bbf2bb22d7921fc0fb5d25925e9
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Mon Mar 6 17:16:37 2017 +0530

    Comments and Typo Fixes

commit 6aee1551e1ec53054d5cbf6464b806339c26ced7
Merge: 0a7fb56 3038d0e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 6 12:36:51 2017 +0100

    Merge pull request #2470 from StephanErb/zk-deadlock
    
    Prevent deadlock in ZK TreeCache constructor by deferring the initial sync.

commit 690b49e503fbe8e65c969ae189a96bd5065de1cf
Author: Michael Kraus <michael.kraus@consol.de>
Date:   Mon Mar 6 11:36:55 2017 +0100

    Fix marathon tests

commit 31252cc1b55e3373e642fdad64b8f49e87da0acc
Author: Michael Kraus <michael.kraus@consol.de>
Date:   Mon Mar 6 11:36:36 2017 +0100

    Clarify explicit use of authorization header

commit 30727b1e71691ebc356e127651b7a31213f2c5a5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Mar 2 10:12:08 2017 +0100

    Vendor compaction changes

commit 3038d0eb9b0d37ef560635bcbbe2a2d9cdab86fa
Author: Stephan Erb <stephan.erb@blue-yonder.com>
Date:   Fri Mar 3 23:51:13 2017 +0100

    Prevent deadlock in ZK TreeCache constructor by deferring the initial sync.
    
    Fixes #2254

commit 241da87f7f470043393e03b631dc13ef33e07825
Author: Erdem Agaoglu <erdem.agaoglu@gmail.com>
Date:   Fri Mar 3 23:36:06 2017 +0300

    Adding version to names of static files
    
    to prevent browsers using old files in local caches after an upgrade.

commit 710f3f418fe9ad5b5ed43e8c807be3878a7b8ecf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Mar 3 10:06:45 2017 +0100

    vendor: tsdb compaction changes

commit af222b63fcc3892132cf18d28df4211a62e264c8
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Mar 3 03:16:30 2017 +0530

    Fix broken tests

commit f35816613e2d5579c97799233ca8126937828f20
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Fri Mar 3 02:53:16 2017 +0530

    Refactored Notifier to use Registerer
    
    * Brought metrics back into Notifier
    
    Notifier still implements a Collector. Check if that is needed.

commit 41da5c4ef26c9624e6c1f466b0989f652df05b97
Author: Goutham Veeramachaneni <cs14btech11014@iith.ac.in>
Date:   Thu Mar 2 23:58:15 2017 +0530

    Better Metrics For Alerts
    
    * Closes prometheus/prometheus#2429
    * Moved metrics to top of file for easier access
    * Initialised CounterVecs

commit 04eadf6e20bd6c548139ed5d0aa98c06c4de4232
Author: Michael Kraus <michael.kraus@consol.de>
Date:   Thu Mar 2 13:17:19 2017 +0100

    Allow Marathon SD without bearer_token and bearer_token_file

commit 47bdcf0f676fc223f148ff8b2f64ebd4c2f2446a
Author: Michael Kraus <michael.kraus@consol.de>
Date:   Thu Mar 2 09:44:20 2017 +0100

    Allow the use of bearer_token or bearer_token_file for MarathonSD

commit 9304179ef7075d54cd60b3a0c5f3ab825179ddc7
Merge: 097a2c1 07491c9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 28 09:43:16 2017 +0100

    Merge branch 'master' into dev-2.0

commit 0a7fb56b164ff29c9c97da68f1bf12425b9fa529
Author: Derek Marcotte <derekmarcotte@users.noreply.github.com>
Date:   Wed Mar 1 17:37:50 2017 -0500

    Expose PromConsole.Graph.buildQueryUrl, refactor dispatch to use (#2461)
    
    Expose buildQueryUrl, refactor dispatch to use
    
    buildQueryUrl will allow users to execute queries over the range of an
    existing graph.  This will be helpful to select data series they wish to
    annotate the graph with, for example.

commit 7e14533b32afb163209867c295918004e35f8eca
Merge: 8809735 93d20d2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Feb 28 19:06:30 2017 +0100

    Merge pull request #2396 from lightpriest/fuzzy-fix-lookup
    
    Fix fuzzy search lookup issues

commit 8809735d7f53926fd60a37ac7f41399543d7fd36
Author: Erdem Agaoglu <erdem.agaoglu@gmail.com>
Date:   Tue Feb 28 15:59:33 2017 +0200

    Setting User-Agent header (#2447)

commit 097a2c1e5980651f85e84592ee802ecadaf359e6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 28 09:34:30 2017 +0100

    vendor: re-vendor storage

commit 4397b4d508318ae3f89aa32a9bfde92d70d1c351
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 28 09:33:14 2017 +0100

    *: pass Prometheus registry into storage

commit 07491c9f1bf51fc985c8370ea43282d539cec9e7
Merge: 1ab893c f152ac5
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Feb 27 22:15:24 2017 +0100

    Merge pull request #2452 from prometheus/swappable-post
    
    notifier: Allow swapping out HTTP Doer

commit f152ac5e23943fd22243896533df626ba89f3d54
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 27 20:31:16 2017 +0100

    notifier: Allow swapping out HTTP Doer
    
    We need to be able to modify the HTTP POST in Weave Cortex to add
    multitenancy information to a notification. Since we only really need a
    special header in the end, the other option would be to just allow
    passing in headers to the notifier. But swapping out the whole Doer is
    more general and allows others to swap out the network-talky bits of the
    notifier for their own use. Doing this via contexts here wouldn't work
    well, due to the decoupled flow of data in the notifier.
    
    There was no existing interface containing the ctxhttp.Post() or
    ctxhttp.Do() methods, so I settled on just using Do() as a swappable
    function directly (and with a more minimal signature than Post).

commit 1ab893c6ec9cb466e12a53e3d732ac6a12b6e4be
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Feb 23 18:20:39 2017 +0000

    Limit 'discarding sample' logs to 1 every 10s (#2446)
    
    * Limit 'discarding sample' logs to 1 every 10s
    
    * Include the vendored library
    
    * Review feedback

commit 16bd5c8ebe503a7279fccce85e39fc6e22349583
Merge: 8cd3be5 2f39dbc
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Feb 23 09:48:40 2017 +0100

    Merge pull request #2423 from prometheus/multiple-remote-writers
    
    Re-add multiple remote writers

commit cc0ff26f1fe8048de70d8b5d625e6b306c837c5c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 22 13:00:51 2017 +0100

    retrieval: handle GZIP compression ourselves
    
    The automatic GZIP handling of net/http does not preserve
    buffers across requests and thus generates a lot of garbage.
    We handle GZIP ourselves to circumvent this.t

commit 2f39dbc8b3598805a34fa220f136d90e2933d284
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Feb 21 21:45:43 2017 +0100

    Rename StorageQueueManager -> QueueManager

commit e9476b35d5b5c42a008007a89154181a2ed8c71b
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 13 21:43:20 2017 +0100

    Re-add multiple remote writers
    
    Each remote write endpoint gets its own set of relabeling rules.
    
    This is based on the (yet-to-be-merged)
    https://github.com/prometheus/prometheus/pull/2419, which removes legacy
    remote write implementations.

commit a6d81a9f8879913d1ab271bea7596eb45656e699
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 20 13:21:47 2017 +0100

    Update vendoring for github.com/prometheus/common/model

commit 8cd3be5c5f363135d92fba591195c080d1b90ec3
Merge: 74a3b10 a1596f9
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 20 11:46:17 2017 +0100

    Merge pull request #2433 from prometheus/beorn7/meta
    
    Replace AUTHORS.md by an updated MAINTAINERS.md

commit a1596f9c7915b143c168b1e18ef11e084f1b5a6a
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 16 20:13:49 2017 +0100

    Replace AUTHORS.md by an updated MAINTAINERS.md

commit 311e7b5069f186e0b2b53f5d8d2cea6067ccda42
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 20 11:11:44 2017 +0100

    storage/vendor: update to latest fabxc/tsdb

commit 74a3b1051ab29f388c0184800fdea47d150d8215
Author: Derek Marcotte <derekmarcotte@users.noreply.github.com>
Date:   Sat Feb 18 05:03:32 2017 -0500

    Add rickshawGraph proerty to the Graph object. (#2438)
    
    Add rickshawGraph property to the Graph object.
    
    This allows further changes to be made to the graph, for example,
    annotations.

commit 089dc1076b3dc14bd693e57ba8c2c0c8cfb4768c
Merge: e14caf8 025c828
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Feb 17 16:02:06 2017 +0100

    Merge pull request #2435 from jmeulemans/open-chunks-gauge
    
    Adding gauge for number of open head chunks.

commit 025c828976b0ba92bb55a88dfee5a80572e72a78
Author: Jeremy Meulemans <meule012@umn.edu>
Date:   Fri Feb 17 07:10:13 2017 -0600

    Changed to open_head_chunks to address review.
    
    Now incrementing numHeadChunks directly.

commit e14caf83e7b75999a5c5cdfa58b058d2e732a81d
Merge: 0436e98 3f29324
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Fri Feb 17 10:51:05 2017 +0000

    Merge pull request #2434 from stephen-soltesz/master
    
    Fix kubernetes host:port relabel regex.

commit 074050b8c053e65f383a9d59541191379bef1d42
Author: Jeremy Meulemans <meule012@umn.edu>
Date:   Thu Feb 16 18:04:28 2017 -0600

    Updating for failed codeclimate check.

commit f70b52d0b6d91bfb19fc45ac5ef7872d2ba78064
Author: Jeremy Meulemans <meule012@umn.edu>
Date:   Thu Feb 16 17:55:42 2017 -0600

    Adding gauge for number of open head chunks.
    
    Fixes #1710

commit 3f29324e04524f70b291f9aca694dade3835e52e
Author: Stephen Soltesz <soltesz@google.com>
Date:   Thu Feb 16 14:46:04 2017 -0500

    Fix kubernetes host:port relabel regex.
    
    This change corrects a bug introduced by PR
    https://github.com/prometheus/prometheus/pull/2427
    
    The regex uses three groups: the hostname, an optional port, and the
    prefered port from a kubernetes annotation.
    
    Previously, the second group should have been ignored if a :port was not
    present in the input. However, making the port group optional with the
    "?" had the unintended side-effect of allowing the hostname regex "(.+)"
    to match greedily, which included the ":port" patterns up to the ";"
    separating the hostname from the kubernetes port annotation.
    
    This change updates the regex for the hostname to match any non-":"
    characters. This forces the regex to stop if a ":port" is present and
    allow the second group to match the optional port.

commit 0436e982cba1f23736927581866a0b6cb160ac42
Merge: a37d39c 0b1790e
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Tue Feb 14 22:45:30 2017 -0500

    Merge pull request #2427 from stephen-soltesz/master
    
    Kubernetes port annotations - match addresses with or without declared ports

commit 0b1790ee4446449f276f9abac4e6436e0b3e87d6
Author: Stephen Soltesz <soltesz@google.com>
Date:   Tue Feb 14 20:12:38 2017 -0500

    Match addresses with or without declared ports.
    
    This change updates port relabeling for pod and service discovery so the
    relabeling regex matches addresses with or without declared ports. As
    well, this change uses a consistent style in the replacement pattern
    for the two expressions.
    
    Previously, for both services or pods that did not have declared ports, the
    relabel config regex would fail to match:
    
        __meta_kubernetes_service_annotation_prometheus_io_port
        regex: (.+)(?::\d+);(\d+)
    
        __meta_kubernetes_pod_annotation_prometheus_io_port
        regex: (.+):(?:\d+);(\d+)
    
    Both regexes expected a <host>:<port> pattern.
    
    The new regex matches addresses with or without declared ports by making
    the :<port> pattern optional.
    
        __meta_kubernetes_service_annotation_prometheus_io_port
        __meta_kubernetes_pod_annotation_prometheus_io_port
        regex: (.+)(?::\d+)?;(\d+)

commit a37d39c46354508de73e31cb932e12f0d7a6c1eb
Merge: 980586d b4ce5ca
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Feb 14 22:14:27 2017 +0100

    Merge pull request #2425 from prometheus/beorn7/vendoring
    
    vendoring: Do not ignore appengine build tags

commit 980586d1830a85f80b061740d8abcf4f2117f9a7
Merge: 0f412e7 beb3c4b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Feb 14 18:35:39 2017 +0100

    Merge pull request #2419 from prometheus/remove-legacy-remotes
    
    Remove legacy remote storage implementations

commit b4ce5ca9254c305dbed0a164486640a19d66de1e
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Feb 14 18:32:07 2017 +0100

    vendoring: Do not ignore appengine build tags
    
    For weird reasons, this excluded github.com/miekg/dns/udp_other.go
    from vendoring.

commit beb3c4b38950f588cb52bfde60fc7dff45318989
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 13 23:11:57 2017 +0100

    Remove legacy remote storage implementations
    
    This removes legacy support for specific remote storage systems in favor
    of only offering the generic remote write protocol. An example bridge
    application that translates from the generic protocol to each of those
    legacy backends is still provided at:
    
    documentation/examples/remote_storage/remote_storage_bridge
    
    See also https://github.com/prometheus/prometheus/issues/10
    
    The next step in the plan is to re-add support for multiple remote
    storages.

commit 0f412e7e26b987e225a0a1728fb041a2d66f3a53
Merge: 18cd724 865f28b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Feb 14 17:48:06 2017 +0100

    Merge pull request #2422 from levenlabs/nameList
    
    discovery: Instead of looping over conf.Search, use NameList()

commit 865f28bb153434dc12ebe695a57ff39a9e3cfe44
Author: James Hartig <james@getadmiral.com>
Date:   Mon Feb 13 15:48:51 2017 -0500

    discovery: Instead of looping over conf.Search, use NameList()

commit e7ce10d4e563c5a36b17330ce3135db167d9d4fc
Author: James Hartig <james@getadmiral.com>
Date:   Mon Feb 13 15:40:45 2017 -0500

    vendoring: Update github.com/miekg/dns
    This is needed to get the NameList function to get query names

commit 18cd7246b5e70a69fdd84ce08e15130af959d1ea
Author: Alex Somesan <alex.somesan@gmail.com>
Date:   Mon Feb 13 08:45:00 2017 -0800

    Instrument query engine timings (#2418)
    
    * Instrument query engine statistics

commit e7c8a612dea86e30039b96fc8ec2a3a11b12b4a1
Merge: b4450f0 bd1182d
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 10 15:45:54 2017 +0100

    Merge branch 'release-1.5'

commit bd1182d29f462c39544f94cc822830e1c64cf55b
Merge: d3297e0 6c17d30
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Feb 10 15:34:18 2017 +0100

    Merge pull request #2415 from prometheus/beorn7/release
    
    Cut v1.5.2

commit 6c17d3068896a32e6db0c95ff8292c098ed97403
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 10 13:16:17 2017 +0100

    Cut v1.5.2

commit d3297e06863728de1507bc18fbcd73b6eec84e7a
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 10 13:05:32 2017 +0100

    build: Use Go1.7.4 in Travis

commit abf1d6e413e94ebde06c181c262d6dab2d2aad3e
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 10 12:44:57 2017 +0100

    storage: Fix typo in doc comment

commit b4450f02bc06d41bce04fbd921b99505666d2559
Merge: 73bd5e4 d771185
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Feb 10 12:43:00 2017 +0100

    Merge pull request #2414 from prometheus/beorn7/storage
    
    storage: Fix chunkIndexToStartSeek calculation

commit d771185a43face7bcc88cda0ad6cb96e1bdfcd15
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 10 11:42:59 2017 +0100

    storage: Fix chunkIndexToStartSeek calculation
    
    With a high enough shrink ratio and enough chunks to persist, the
    cutoff point could be _outside_ of the file, which wreaks havoc in the
    storage.

commit 342f970e05688c4885b97bbcaa975aa9631c1d2b
Merge: 0c688ab 46a0837
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Feb 9 15:54:52 2017 +0100

    Merge pull request #2413 from prometheus/beorn7/storage
    
    storage: Fix offset returned by dropAndPersistChunks

commit 73bd5e4dff21158e1d134cf1ddaf0d0107967842
Merge: 9d12204 46a0837
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 9 14:44:10 2017 +0100

    Merge branch 'beorn7/storage' into beorn7/storage3

commit 46a0837816681aff55504d5729a05a5ed225df37
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 9 14:35:07 2017 +0100

    storage: Fix offset returned by dropAndPersistChunks
    
    This is another corner-case that was previously never exercised
    because the rewriting of a series file was never prevented by the
    shrink ratio.
    
    Scenario: There is an existing series on disk, which is archived. If a
    new sample comes in for that file, a new chunk in memory is created,
    and the chunkDescsOffset is set to -1. If series maintenance happens
    before the series has at least one chunk to persist _and_ an
    insufficient chunks on disk is old enough for purging (so that the
    shrink ratio kicks in), dropAndPersistChunks would return 0, but it
    should return the chunk length of the series file.

commit 9d12204da529ed5f2c4183af79b59279587912df
Merge: 242d8ed 0c688ab
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 9 13:11:53 2017 +0100

    Merge branch 'release-1.5'

commit 0c688ab339b28c32f9ff33270610a6fe4e530bc4
Merge: eac9696 bed4934
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Feb 9 13:09:41 2017 +0100

    Merge pull request #2412 from prometheus/beorn7/storage
    
    storage: One more persist error code path discovered

commit bed493422472f28ddf8e5ff3f212c4b6860896ca
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 9 01:53:57 2017 +0100

    storage: One more persist error code path discovered
    
    Also, in that code path, set chunkDescsOffset to 0 rather than -1 in
    case of "dropped more chunks from persistence than from memory" so
    that no other weird things happen before the series is quarantined for
    good.

commit 242d8edcb59acc673c489a266ee25b7336fb8bbc
Merge: be8b1eb eac9696
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 8 17:28:09 2017 +0100

    Merge branch 'release-1.5'

commit eac9696a3693ac8ef26518354c34f45452e97d69
Merge: c4686f7 8c8baaa
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Feb 8 17:27:43 2017 +0100

    Merge pull request #2410 from prometheus/beorn7/storage
    
    storage: writeMemorySeries needs to return true for quarantined series

commit 8c8baaa5589d3e00c7ca700c19b5e344b844aedc
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 8 16:28:56 2017 +0100

    storage: writeMemorySeries needs to return true for quarantined series
    
    This is another fallout of my bug hunt.

commit be8b1eb6564bbf0ad7036ae4d8c8c3ee5884f2d3
Author: Mitsuhiro Tanda <mitsuhiro.tanda@gmail.com>
Date:   Wed Feb 8 01:33:54 2017 +0900

    storage: optimize dropping chunks by using minShrinkRatio (#2397)
    
    storage: prevent unnecessary chunk header reading if minShrinkRatio > 0

commit f6dae7a5ba554fa8324e19003c9992fe6ddbda28
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 7 03:42:02 2017 -0800

    vendor: add fabx/tsdb

commit 85268a55c08be990a5883000ee126d6ec75221f3
Merge: 0f3d37c c4686f7
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Feb 7 12:10:40 2017 +0100

    Merge branch 'release-1.5'

commit c4686f79154ed4913415fc0855ae4544b3819b81
Merge: 3e133a9 eb6b95a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Feb 7 11:54:26 2017 +0100

    Merge pull request #2403 from prometheus/beorn7/release
    
    Cut release 1.5.1

commit eb6b95ac2ee68ed8995679f080b0c2b3301944a1
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Feb 7 10:55:01 2017 +0100

    Cut release 1.5.1
    
    Sadly, this is urgently required.

commit 0f3d37ca4cb0005ec9d87d134774ea989c58fe4d
Merge: e4f58d9 3e133a9
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Feb 7 00:22:40 2017 +0100

    Merge branch 'release-1.5'

commit 3e133a931276c29a3c721b27ceffd2b589da4624
Merge: 34767c2 2363a90
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Feb 7 00:21:14 2017 +0100

    Merge pull request #2400 from prometheus/beorn7/storage2
    
    storage: Fix checkpointing of fully persisted memory series.

commit e4f58d9860e8e41d4df2b86309658ed22d118144
Merge: 4daffbe 3a96d0e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 6 23:25:37 2017 +0100

    Merge pull request #2401 from svend/kubernetes-config
    
    Kubernetes SD: Fix namespace meta label in example config

commit 3a96d0e267032b52bf7b0806869fb633bfeb0627
Author: Svend Sorensen <svend@ciffer.net>
Date:   Mon Feb 6 13:28:12 2017 -0800

    Kubernetes SD: Fix namespace meta label
    
    Replace one more instance of `__meta_kubernetes_service_namespace` with
    `__meta_kubernetes_namespace`.

commit 2363a90adc48b6408315a1f5a9c850fa33fe997f
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 6 17:39:59 2017 +0100

    storage: Do not throw away fully persisted memory series in checkpointing

commit ea3ba338ddd36c3a51d45f14478306375bc41340
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Feb 5 18:22:06 2017 +0100

    main: add flags for new storage

commit 93d20d2d2b90aac38fa57e6dcdddd621959b09d9
Author: Or Cohen <orc@fewbytes.com>
Date:   Sun Feb 5 17:38:05 2017 +0200

    Improve fuzzy search
    
    The fuzzy library didn't try to find a "best match", but settled on the
    first fuzzy match that exists. This patch includes a modified version of
    the fuzzy library, which recursivley tries on the rest of the search
    string to find a better match. If found, returns that one.
    
    Another small modification is that if a pattern fully matches, it
    skips the lookup entirley and returns the highest score possible for
    that match.

commit 81d37a04aa909b7f8d3bc4dc37a335591d252035
Author: Or Cohen <orc@fewbytes.com>
Date:   Sun Feb 5 16:20:52 2017 +0200

    Fix autocomplete misses certain queries
    
    For some of the queries, the fuzzy lookup was not filtering properly.
    The problem is due to the "replace" beind made on the query itself. It
    accidently removes only the first underscore. This patch changes it so
    that it removes all of the whitespaces, letting the fuzzy algorithm do
    its magic, also fixing this problem.
    
    Originally, the underscore were replaced by a space for this specific
    reason, to let the user type a space and have the lookup treat it as the
    word break.
    
    Fixes #2380

commit 244a65fb293573cad7b80407ff0e14ff96297ec4
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Feb 5 02:25:09 2017 +0100

    storage: Increase persist watermark before calling append
    
    The append call may reuse cds, and thus change its len.
    (In practice, this wouldn't happen as cds should have len==cap.
    Still, the previous order of lines was problematic.)

commit 75282b27ba6ae6a45a49eb78afcf39218372ca84
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Feb 4 23:40:22 2017 +0100

    storage: Added checks for invariants

commit 31e9db7f0cec1719834aeca2cda17e02a7a3b434
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Feb 4 22:29:37 2017 +0100

    storage: Simplify evictChunkDesc method

commit 87bea50b85541298276dd6b7c4df6e154e1bcc5f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Feb 2 13:18:17 2017 +0100

    web: fix /targets for new label types

commit 5772f1a7ba74cbe80eba747a111bbdefc359c9bd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 1 15:59:37 2017 +0100

    retrieval/storage: adapt to new interface
    
    This simplifies the interface to two add methods for
    appends with labels or faster reference numbers.

commit 65dc8f44d3c7cfb8981026afdacd67aa7cd2dfa7
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 1 20:14:01 2017 +0100

    storage: Test for errors returned by MaybePopulateLastTime

commit 752fac60ae4a07e742dd5908120d8bc3b9fe656b
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 1 19:41:15 2017 +0100

    storage: Remove race condition from TestLoop

commit 4daffbef1296dd28769e5418376fc12ffaff95de
Merge: d5f6079 34767c2
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 1 23:43:05 2017 +0100

    Merge branch 'release-1.5'
    
    This merges forward the bug-fixes from the release1.5 branch.

commit 34767c2221686edd4c69c586778137e169fc7284
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Feb 1 19:49:50 2017 +0000

    Clone lset before relabelling. (#2386)
    
    We need to not change the lset passed into populateLabels, as that
    is kept around by the SDs.
    
    Fixes 2377

commit 7db444739060c6a54f993c55717e782f85338b90
Merge: d840f2c 4ccfc93
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Feb 1 16:58:56 2017 +0100

    Merge pull request #2385 from prometheus/beorn7/storage
    
    Fix embarrassing bug of not setting the shrink ratio

commit 4ccfc93dcfd2891a2fa9943175186bd796bcadb5
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 1 15:36:38 2017 +0100

    storage: Set shrink ratio in the constructor.

commit b2f086c6c43cf4b1cc0ed5dc00ddd6ea45c76f96
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 1 15:34:03 2017 +0100

    storage: Expose bug of not setting the shrink ratio in the contstructor

commit d5f6079029e8367f6f356513e5071216841461a8
Merge: 5e985f2 b163715
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 1 13:23:06 2017 +0100

    Merge pull request #2381 from prometheus/remote-storage-bridge-example
    
    Add standalone remote storage bridge example

commit b16371595daa6eddff192b63d3f570d2a32bb858
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jan 31 17:44:22 2017 +0100

    Add standalone remote storage bridge example
    
    In preparation for removing specific remote storage implementations,
    this offers an example of how to achieve the same in a separate process.
    Rather than having three separate bridges for OpenTSDB, InfluxDB, and
    Graphite, I decided to support all in one binary.
    
    For now, this is in the example documenation directory, but perhaps we
    will want to make a first-class project / repository out of it.

commit 1d3cdd0d67f3bc776e434e95becdd63f92084708
Merge: 035976b 5e985f2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 30 17:30:28 2017 +0100

    Merge branch 'master' into dev-2.0-rebase

commit 5e985f24de627ac5e0db52b65fbcb63208da85a5
Merge: 22a8fb4 2e1d8dd
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jan 26 17:08:16 2017 +0100

    Merge pull request #2179 from prometheus/update-mailing-list-ref
    
    Replace mailing list / IRC mention with link to Community page

commit 2e1d8dd6bd0df825f98978e1a9945393b8bc6fd3
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Nov 10 07:45:09 2016 +0100

    Replace mailing list / IRC mention with link to Community page

commit 22a8fb4bc9a6e234005c38cd8d8d36307716945e
Merge: d840f2c 5319e1d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jan 24 11:51:51 2017 +0100

    Merge pull request #2361 from larkinscott/patch-1
    
    Update .codeclimate.yml

commit 5319e1da0993c360b5bf59968671e6b9ce8821ab
Author: Scott Larkin <scott@codeclimate.com>
Date:   Mon Jan 23 14:58:53 2017 -0500

    Update .codeclimate.yml
    
    Changed the vendor/ path in the exclude paths node.

commit d840f2c400629a846b210cf58d65b9fbae0f1d5c
Merge: 9688a31 fb17493
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Jan 23 14:05:51 2017 +0100

    Merge pull request #2359 from brancz/cut-1.5.0
    
    *: cut 1.5.0

commit fb17493f668a2aed85d20ec2e660d71f9838bcd0
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Jan 23 11:09:42 2017 +0100

    *: cut 1.5.0

commit 9688a312edb772413f4a0f3b60e16aa77710d10b
Merge: d717175 4392aa4
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Jan 20 11:31:51 2017 +0100

    Merge pull request #2355 from prometheus/beorn7/lint
    
    Remove auto-generated protobuf code from codeclimate

commit 035976b275c1a82abeaf1bbbeb0f2a3ff4b53411
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jan 19 11:29:00 2017 +0100

    retrieval: handle not found error correctly

commit 4392aa43d447b6708db57c363bdae9336001f6ae
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Jan 20 11:07:20 2017 +0100

    Remove auto-generated protobuf code from codeclimate

commit d717175104e3e4957784ca3722d6931d946c8ac3
Merge: e5a75b2 0c8b753
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Jan 20 10:51:05 2017 +0100

    Merge pull request #2354 from prometheus/beorn7/lint
    
    Documentation: Add Code Climate badges to README.md

commit 0c8b753f6e1af65e5891025761ca5c8a017377b8
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jan 19 23:22:22 2017 +0100

    Documentation: Add Code Climate badges to README.md

commit e5a75b2b30f21183656d6f2c7a4ee32d58d338e5
Author: Scott Larkin <scott@codeclimate.com>
Date:   Thu Jan 19 16:19:32 2017 -0500

    Code Climate config (#2351)
    
    Created a Code Climate config with gofmt, golint, and govet enabled

commit b22eb65d0f5e4dcea306827903a442e314f2dd90
Author: Alex Somesan <alex.somesan@gmail.com>
Date:   Thu Jan 19 10:52:52 2017 +0100

    Cleaner separation between ServiceAccount and custom authentication in K8S SD (#2348)
    
    * Canonical usage of cluster service-account in K8S SD
    
    * Early validation for opt-in custom auth in K8S SD
    
    * Fix typo in condition

commit 7eb849e6a82094b649087e36d2ce5132fc798ef6
Merge: c1b547a f3d9692
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 18 05:08:11 2017 +0100

    Merge pull request #2307 from joyent/triton_discovery
    
    Add Joyent Triton discovery

commit f3d9692d099015b8cab93403fbd577dd43e3a2bd
Author: Richard Kiene <richard.kiene@joyent.com>
Date:   Wed Dec 28 02:16:47 2016 +0000

    Add Joyent Triton discovery

commit 598e2f01c00d899d3ec598a79dc0b08c95b6746a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 17 08:39:18 2017 +0100

    retrieval: don't erronously break appending

commit d80a3de235b5f1349591420c55925d82ca49204e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 16 20:34:49 2017 +0100

    pkg/textparse: add documentation

commit c1b547a90e7f36cd937479311cedc90bceecec12
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Jan 17 00:59:38 2017 +0000

    Only checkpoint chunkdescs and series that need persisting. (#2340)
    
    This decreases checkpoint size by not checkpointing things
    that don't actually need checkpointing.
    
    This is fully compatible with the v2 checkpoint format,
    as it makes series appear as though the only chunksdescs
    in memory are those that need persisting.

commit 5418a429651077eb6e5f7c53946bf932a76470f4
Merge: 990e40c 579e33f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 16 18:29:51 2017 +0100

    Merge pull request #2345 from Bplotka/fixed-alertmanager-flag-auth
    
    Fixed regression in `-alertmanager.url flag`. Basic auth was ignored.

commit 579e33f19a704c28e19e1add8b6da7cae51ef21f
Author: Bartek Plotka <bwplotka@gmail.com>
Date:   Mon Jan 16 16:45:58 2017 +0000

    Fixed style issues.

commit d7febe97fa8abe61a7f1a1b9ca02f96722de6907
Author: Bartek Plotka <bwplotka@gmail.com>
Date:   Mon Jan 16 16:39:20 2017 +0000

    Fixed regression in -alertmanager.url flag. Basic auth was ignored.
    
    - Included basic auth parsing while parsing to AlertmanagerConfig
    - Added test case
    
    Signed-off-by: Bartek Plotka <bwplotka@gmail.com>

commit db48726a6b967c583691993a58125a30d8865684
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 16 17:24:00 2017 +0100

    pkg/textparse: allocate single string per metric

commit 157e6989588479b53daeb4fd1418bc245e831108
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 16 14:09:59 2017 +0100

    web/api: fix min/max timestamps to valid range

commit 990e40c9597438e224543501a62e44378787a410
Merge: 022714b bd92571
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 16 12:08:14 2017 +0100

    Merge pull request #2338 from brancz/alertmanager-api
    
    web/api: add alertmanager api

commit c691895a0fbfa346e10468236eb709ea107cef66
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Jan 15 17:33:07 2017 +0100

    retrieval: cache series references, use pkg/textparse
    
    With this change the scraping caches series references and only
    allocates label sets if it has to retrieve a new reference.
    pkg/textparse is used to do the conditional parsing and reduce
    allocations from 900B/sample to 0 in the general case.

commit bd92571bdd881b171c1ea2a2c0ff9c842bb997f7
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Fri Jan 13 17:15:04 2017 +0100

    web/api: make target and alertmanager api responses consistent

commit 022714b60a43daf717afcd463e3d4cba70e7775c
Merge: f64c231 4160892
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 16 09:23:46 2017 +0100

    Merge pull request #2341 from mattbostock/patch-1
    
    Correct notifications_dropped description

commit fb3ab9bdb76776cac0dd2403ad82836334524428
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Jan 15 13:55:53 2017 +0100

    pkg/textparse: add more benchmarking, align lex defs

commit e44d80314d4859218d90e3a697a31f783da748be
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Jan 14 19:30:19 2017 +0100

    pkg/textparse: add tests and method to retrieve full labels

commit 091a7f23952ec52a4f7faa2a2255601951dd3e73
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Jan 14 16:39:04 2017 +0100

    pkg/textparse: add initial text parser

commit 4160892109c12913083da0895cb21aa97fe097cb
Author: Matt Bostock <matt@mattbostock.com>
Date:   Fri Jan 13 23:36:00 2017 +0000

    Correct notifications_dropped description
    
    The current description does not accurately describe when the metric is incremented.
    
    Aside from Alertmanger missing from the configuration, `prometheus_notifications_dropped_total` is incremented when errors occur while sending alert notifications to Alertmanager, or because the notifications queue is full, or because the number of notifications to be sent exceeds the queue capacity.
    
    I think calling these cases 'errors' in a generic sense is more useful than the current description.

commit f64c231dad25426b1c735c06a0bff3db70d1038a
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Jan 13 17:24:19 2017 +0000

    Allow checkpoints and maintenance to happen concurrently. (#2321)
    
    This is essential on larger Prometheus servers, as otherwise
    checkpoints prevent sufficient persisting of chunks to disk.

commit 389c6d00434b95271c78abedbd542e27f578563f
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Fri Jan 13 10:20:11 2017 +0100

    web/api: add alertmanager api

commit ad9bc62e4c153d3dd13e29b061a07c0e6070166d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jan 13 14:48:01 2017 +0100

    storage: extend appender and adapt it

commit 1dcb7637f55bcad31dde690394c6ab92eaccd47d
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Jan 11 15:11:19 2017 +0000

    Add various persistence related metrics (#2333)
    
    Add metrics around checkpointing and persistence
    
    * Add a metric to say if checkpointing is happening,
    and another to track total checkpoint time and count.
    
    This breaks the existing prometheus_local_storage_checkpoint_duration_seconds
    by renaming it to prometheus_local_storage_checkpoint_last_duration_seconds
    as the former name is more appropriate for a summary.
    
    * Add metric for last checkpoint size.
    
    * Add metric for series/chunks processed by checkpoints.
    
    For long checkpoints it'd be useful to see how they're progressing.
    
    * Add metric for dirty series
    
    * Add metric for number of chunks persisted per series.
    
    You can get the number of chunks from chunk_ops,
    but not the matching number of series. This helps determine
    the size of the writes being made.
    
    * Add metric for chunks queued for persistence
    
    Chunks created includes both chunks that'll need persistence
    and chunks read in for queries. This only includes chunks created
    for persistence.
    
    * Code review comments on new persistence metrics.

commit 6ce97837abbb37e9d0a7c96386f47c31b26cdb13
Merge: 3302bb1 86ec87b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jan 9 13:28:36 2017 +0100

    Merge pull request #2327 from prometheus/beorn7/vendoring
    
    vendoring: Update prometheus/common to pull in bug fixes

commit 86ec87b78f9d442f3994e3617f3603dad46f6971
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 9 12:25:17 2017 +0100

    vendoring: Update prometheus/common to pull in bug fixes
    
    In particular the one for https://github.com/prometheus/common/issues/72.

commit 3302bb1eb1db041fd964a5514ad65849cb1f2600
Merge: ad40d0a 767c070
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Jan 8 06:49:47 2017 +0100

    Merge pull request #2323 from prometheus/beorn7/retrieval
    
    Retrieval: Avoid copying Target

commit ad40d0abbc0e4bbfd3b24c02ea5c57ff90bb8b41
Merge: c43dfab 5dc0120
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sun Jan 8 01:34:06 2017 +0100

    Merge pull request #2288 from prometheus/limit-scrape
    
    Add ability to limit scrape samples, and related metrics

commit 5dc01202d7402c7fc8dee476cecee4bef68054a5
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Jan 7 23:51:38 2017 +0100

    Retrieval: Remove some test lines that fail on Travis only
    
    These lines exercise an append in
    TestScrapeLoopWrapSampleAppender. Arguably, append shouldn't be tested
    there in the first place.
    
    Still it's weird why this fails on Travis:
    
    ```
    --- FAIL: TestScrapeLoopWrapSampleAppender (0.00s)
        scrape_test.go:259: Expected count of 1, got 0
        scrape_test.go:290: Expected count of 1, got 0
    2017/01/07 22:48:26 http: TLS handshake error from 127.0.0.1:50716: read tcp 127.0.0.1:40265->127.0.0.1:50716: read: connection reset by peer
    FAIL
    FAIL	github.com/prometheus/prometheus/retrieval	3.603s
    ```
    
    Should anybody ever find out why, please revert this commit accordingly.

commit 3610331eeb8624ff42bb4b6498c2946f79170530
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Jan 7 17:28:49 2017 +0100

    Retrieval: Do not buffer the samples if no sample limit configured
    
    Also, simplify and streamline the code a bit.

commit c43dfaba1cfed11f1ab2517f47a4f5d542d1c43f
Author: André Carvalho <asantostc@gmail.com>
Date:   Sat Jan 7 12:41:25 2017 -0200

    Add max concurrent and current queries engine metrics (#2326)
    
    * Add max concurrent and current queries engine metrics
    
    This commit adds two metrics to the promql/engine: the
    number of max concurrent queries, as configured by the flag, and
    the number of current queries being served+blocked in the engine.

commit 767c0709b18c17179ad6f77e843db3b6bbd88999
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Jan 6 18:43:41 2017 +0100

    Retrieval: Avoid copying Target
    
    retreival.Target contains a mutex. It was copied in the Targets()
    call. This potentially can wreak a lot of havoc.
    
    It might even have caused the issues reported as #2266 and #2262 .

commit 304cae99289bc06af339fa892c58d455337cd2c9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jan 6 12:34:54 2017 +0100

    tsdb: Use PartitionedDB constructor

commit f9e581907a63bded8ad739f14137dc9b2c46ce00
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Jan 5 17:57:42 2017 +0000

    Make index queue bigger. (#2322)
    
    When a large Prometheus starts up fresh it can take many minutes
    to warmup and clear out the index queue. A larger queue means less
    blocking, bigger batches and cuts down startup time by ~50%.

commit c9f4aea8e2aaa61d0f6084377d5f3e0397d7ad14
Merge: 78fae31 135d32e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 4 10:15:27 2017 +0100

    Merge pull request #2305 from alicebob/favicon
    
    Add a favicon to the web GUI

commit 78fae3155fa7bcf349d9513b791bde6582b54c17
Author: Martin Lehmann <martin@lehmann.tech>
Date:   Tue Jan 3 21:07:33 2017 +0100

    Make relative links in README.md absolute (#2316)
    
    The relative links don't work in other pages that render the README (for example https://hub.docker.com/r/prom/prometheus/). As they are (hopefully) not due to change any time soon, I think using absolute links is better.

commit bc20d93f0a18c1132699e9af9f23e92c3e82d751
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 2 13:33:37 2017 +0100

    storage: rename iterator value getters to At()

commit 90dd216646359ea89b493fdaec0d23f98777d18c
Merge: 7e369b9 b3a39cc
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Dec 31 13:12:30 2016 +0100

    Merge pull request #2306 from EdSchouten/sorted-alerts
    
    Use lexicographic order to sort alerts by name.

commit 89b6b3be9f9fbccf540e7c22b710e5684c0429ac
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 31 09:32:55 2016 +0100

    vendor: remove unused dependencies

commit e631a1260dd1edb4144cbf70b7ebf54315ae45b9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 30 21:35:35 2016 +0100

    retrieval: use separate appender per target

commit 61bd698143ce43164976d0235c5a696d931f4261
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 30 19:34:45 2016 +0100

    web: implement federation for new storage

commit 7322c46b8ebda444f6925e29e6c7720d4e35b022
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 30 10:45:56 2016 +0100

    storage: add mock iterator for test

commit 28f547bcc74eefaff5fa578327f5760a895de345
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 30 10:43:44 2016 +0100

    api/v1: fix tests, restore series queries

commit e94b0899ee9dd2f7cefb8447806891a9ac90b388
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 29 17:31:14 2016 +0100

    rules: fix tests, remove model types

commit 68dc358496f935a40cd1246030fff43f426db912
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 29 16:55:22 2016 +0100

    cmd/prometheus: remove tests for old flags

commit 8b4e4a9d2b1b13b6289422b651f510ab95402675
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 29 16:53:11 2016 +0100

    notifier: fully use labels.Labels

commit f8fc1f5bb29edb6cc815feda2a27e786a4cacbe9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 29 09:27:30 2016 +0100

    *: migrate ingestion to new batch Appender

commit 86cb0f30fd8f401117be0312cf71fc6808e99236
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 28 19:04:59 2016 +0100

    pkg/relabel: add relabel pkg using new labels

commit 0987a72ec9043e859536c3c21624b1987b2238e7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 28 11:33:00 2016 +0100

    pkg/timestamp: create timestamp package

commit 71fe0c58a8814e9eb901effac6742d96bae21d15
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 28 09:16:48 2016 +0100

    promql: misc fixes

commit 7e369b9318a4d5d97a004586a99f10fa51a46b26
Author: Mitsuhiro Tanda <mitsuhiro.tanda@gmail.com>
Date:   Wed Dec 28 03:34:07 2016 +0900

    expose max memory chunks metrics (#2303)
    
    * expose max memory chunks metrics

commit b3a39ccd8a21203370247db9012dd068271c5687
Author: Ed Schouten <ed@kumina.nl>
Date:   Tue Dec 27 14:13:33 2016 +0100

    Use lexicographic order to sort alerts by name.
    
    Right now the /alerts page of Prometheus sorts alerts by severity
    (firing, pending, inactive). Once multiple alerts have the same
    severity, their order seems to correlate to how they are placed in the
    configuration files, but not always. Looking at the code, we make use of
    sort.Sort(), which is documented not to provide a stable sort. The
    Less() function also only takes the alert state into account.
    
    This change extends the Less() function to provide a lexicographic order
    on both the alert state and the name. This means I can finally find the
    alerts I'm looking for without using my browser's search feature.

commit 135d32ea2233491f93fa443afbe9ffa23b74c8ff
Author: Harmen <harm@dds.nl>
Date:   Tue Dec 27 13:59:20 2016 +0100

    make assets

commit dfa4f79bcd4a90c157a20b6159305f0cc26a1ad3
Author: Harmen <harm@dds.nl>
Date:   Tue Dec 27 13:58:51 2016 +0100

    add favicon

commit fecf9532b9ffb23d71b3a2dd06e9371b681815c8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Dec 25 11:34:22 2016 +0100

    *: fix misc compile errors

commit 622ece6273376838d007e32ee88e166375a2f4a5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Dec 25 11:12:57 2016 +0100

    *: fix recording tests, migrate matcher types

commit 0492ddbd4d8090c1202842195ea441e92d2a1434
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Dec 25 01:40:28 2016 +0100

    *: fully decouple tsdb, add new storage interfaces

commit 1becee3f6c530771b3142f7c8fc503816db782ec
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Dec 25 00:43:41 2016 +0100

    main: remove Alertmanager legacy flag configuration

commit d17b5be48a7005a81c73e00c20d64bce908fd81b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Dec 25 00:42:52 2016 +0100

    storage/metric: remove package

commit 5817cb5bde7be713ef486e7eadaeb171e4e8eae9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Dec 25 00:37:46 2016 +0100

    *: migrate from model.* to promql.* types

commit 9ea10d5265443555dee6151b402e7e997f9d9c70
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 14:35:24 2016 +0100

    promql: use labels.Builder to modify labels

commit c6cd9989058ad6562c5c4d83e012c622da8e45ff
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 14:01:10 2016 +0100

    promql: use local labels, add conversion

commit ff504af2aae95311745f80d9c4dcf032acfb48a6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 11:37:16 2016 +0100

    promql: undo accidental exports

commit 6dedf89cc3a9f27051f871a3991e0e5731818803
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 11:32:42 2016 +0100

    promql: rename SampleStream to Series

commit c5f225b92071b9c342d6702d62c4c7cccf88b6c0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 11:32:10 2016 +0100

    promql: export Sample

commit 65581a3d46ca3eb7866adce10e4cad0b91a386da
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 11:29:39 2016 +0100

    promql: export SmapleStream

commit 6315d009429f7fe42ec66cf56267bfc58cf7d31f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 11:25:26 2016 +0100

    promql: export String value

commit ac5d3bc05ef0269a34ceedd0e2d3c16ff53330df
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 11:23:06 2016 +0100

    promql: scalar T/V and Point

commit 09666e2e2a8e017fe6026e838b69e5d5f22d2198
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 10:44:04 2016 +0100

    promql: make scalar public

commit b3f71df350bcbc80c08c49ec2d04908256fe6a16
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 10:42:54 2016 +0100

    promql: make matrix exported

commit a62df87022a44e2ded63f311117f7aad97719ab6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Dec 24 10:40:09 2016 +0100

    promql: rename vector

commit 15a931dbdb728160a40a5ad73b0ae258a05e7ff3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 23 13:51:59 2016 +0100

    promql: migrate model types, use tsdb interfaces

commit 8b84ee5ee6bbd326d54ed189801aa1f0415c0aed
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 22 23:33:32 2016 +0100

    storage: remove old storage
    
    This removes all old storage files and only keeps interfaces
    to still allow the code to compile.

commit 313ab48b45fcfae2f93d649617515f21a23985ba
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 22 23:20:34 2016 +0100

    vendor: drop unused dependencies

commit 11a731ba82eab164d3710748f6268d337c944855
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 22 23:17:35 2016 +0100

    remote: remove hard-coded remote storages
    
    This commit removes the flag-configured remote storage integrations
    in favor of the generic remote write path.

commit 93b70ee4eae4a6bd62c13b80a2e3cf27b398be1f
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Dec 22 13:49:03 2016 +0000

    Evict chunk descs of all unloaded chunks during maintenance. (#2297)
    
    Keeping these around has two problems:
    1) Each desc takes 64 bytes, 10 of them is 640B. This is a lot of
    overhead on a 1024 byte chunk.
    2) It can take well over a week to reach a point where this and thus
    Prometheus memory usage as a whole enters steady state. This makes RAM
    estimation very hard for users, and makes it difficult to investigate
    things like memory fragmentation.
    
    Instead we'll wipe them during each memory series maintenance cycle, and
    if a query pulls them in they'll hang around as cache until the next
    cycle.

commit bed4635802fe3ff5f83c38dbb71f08e9e68bc582
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Dec 21 13:19:23 2016 +0000

    Use irate consistently in console template examples. (#2296)
    
    I must have forgotten my 'g' when switching these.

commit d6d03a966f31e01597b90841dbe88b2fcd1083e7
Merge: 6c07453 1b8a474
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 21 12:36:41 2016 +0100

    Merge pull request #2295 from prometheus/fast-path-remote
    
    Don't clone the metric if there's no remote writes.

commit 1b8a474612f200b0e37a61e789fce4827363e666
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Dec 21 11:33:28 2016 +0000

    Don't clone the metric if there's no remote writes.
    
    The metric clone can't be further optimised, and is a
    non-trivial memory allocation cost so fast path it
    if there's no remote writes configured.

commit 6c07453ec1ca1612be466e4c40d30cd0fd314304
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Dec 21 10:00:33 2016 +0000

    Only clone the metric in the one place relabelling needs it. (#2292)
    
    This cuts ~17% off memory allocations related to ingesting data
    in a basic setup.

commit 2e3b42ad6c9730891908eb126aa3dc4df65764f2
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Dec 18 19:30:52 2016 +0000

    Correctly handle the end time being 0 in the URL. (#2290)

commit f421ce0636621693d6d7f2d94e1cd78eb5ffb923
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Dec 16 18:00:52 2016 +0000

    Remove label from prometheus_target_skipped_scrapes_total (#2289)
    
    This avoids it not being intialised, and breaking out by
    interval wasn't partiuclarly useful.
    
    Fixes #2269

commit 30448286c7a2a0d57c1efa9e8df6251bbcbab630
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Dec 16 15:08:50 2016 +0000

    Add sample_limit to scrape config.
    
    This imposes a hard limit on the number of samples ingested from the
    target. This is counted after metric relabelling, to allow dropping of
    problemtic metrics.
    
    This is intended as a very blunt tool to prevent overload due to
    misbehaving targets that suddenly jump in sample count (e.g. adding
    a label containing email addresses).
    
    Add metric to track how often this happens.
    
    Fixes #2137

commit f3f798fbcfbff0b643d7069aac034c05c906ab74
Merge: 4d9134e 30be8e0
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Dec 15 13:32:03 2016 +0100

    Merge pull request #2283 from tcolgate/ignoredots
    
    ignore dotfiles in data directory

commit 30be8e0b8a7ff5f9a30c7e5818355632530a33b8
Author: Tristan Colgate <tristan@qubit.com>
Date:   Thu Dec 15 11:48:23 2016 +0000

    ignore dotfiles in data directory

commit 4d9134e6d8fc5e3759a46d4419fb9c4f7a81c28a
Author: Tristan Colgate-McFarlane <tcolgate@gmail.com>
Date:   Wed Dec 14 10:17:42 2016 +0000

    Add labeldrop and labelkeep actions. (#2279)
    
    Introduce two new relabel actions. labeldrop, and labelkeep.
    These can be used to filter the set of labels by matching regex
    
    - labeldrop: drops all labels that match the regex
    - labelkeep: drops all labels that do not match the regex

commit 45570e59721a5b4d6b48f184e8a77a70ef517c20
Merge: 5f0c0e4 253be23
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Dec 14 02:59:10 2016 +0100

    Merge pull request #2277 from prometheus/beorn7/storage2
    
    storage: Sanity-check number of loaded chunk descs

commit 253be23c00eba5592e1673845a38f4fd08efff83
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Dec 13 18:41:02 2016 +0100

    storage: Sanity-check number of loaded chunk descs
    
    Two cases:
    
    - An unarchived metric must have at least one chunk desc loaded upon
      unarchival. Otherwise, the file is gone or has size 0, which is an
      inconsistency (because the series is still indexed in the archive
      index). Hence, quarantining is triggered.
    
    - If loading the chunk descs of a series with a known chunkDescsOffset
      (i.e. != -1), the number of chunks loaded must be equal to
      chunkDescsOffset. If not, there is a data corruption. An error is
      returned, which leads to qurantining.
    
    In any case, there is a guard added to not access the 1st element of
    an empty chunkDescs slice. (That's what triggered the crashes in issue
    2249.)  A time series with unknown chunkDescsOffset and no chunks in
    memory and no chunks on disk either could trigger that case. I would
    assume such a "null series" doesn't exist, but it's not entirely
    unthinkable and unreasonable to happen (perhaps in future uses of the
    storage). (Create a series, and then something tries to preload chunks
    before the first sample is added.)

commit 5f0c0e43cfa53b4b1ecd1d83c294baaf198caf8a
Merge: a4c8292 4719482
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Dec 13 23:13:39 2016 +0100

    Merge pull request #2276 from prometheus/beorn7/storage
    
    storage: Catch data corruption that leads to division by zero

commit a4c829223275eb86a143dae83a0a14140dd0c823
Merge: 568fd8a 837c029
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Dec 13 23:13:05 2016 +0100

    Merge pull request #2278 from prometheus/beorn7/style
    
    storage: Fix linter issue

commit 837c029b163c4482085ba02dee62291d6c7384c2
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Dec 13 19:03:22 2016 +0100

    storage: Fix linter issue
    
    Go style tries to avoid indented `else` blocks.

commit c8de1484d593c65dbbaa68828e2401490a28230b
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Dec 13 17:32:11 2016 +0000

    Add scrape_samples_post_metric_relabeling
    
    This reports the number of samples post any keep/drop
    from metric relabelling.

commit 06b9df65ec782df6e7c0be4bb3e3d4c16a255621
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Dec 13 16:18:17 2016 +0000

    Refactor and add unittests to scrape result handling.

commit 568fd8a8cb2c225ac0173e1450593cea151ea488
Merge: e714079 906c3a2
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Dec 13 17:10:59 2016 +0100

    Merge pull request #2155 from prometheus/beorn7/vendoring2
    
    Update vendoring for Azure

commit 4719482f5fa4ba79855adf6210bd65a3c4dc4b7d
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Dec 13 16:57:49 2016 +0100

    storage: Make tests go-vet and golint clean

commit 485ac8dff78a60aa46f7045be9a21f84a3176396
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Dec 13 16:51:02 2016 +0100

    storage: Verify validity of byte length when unmarshalling (double)delta chunks
    
    This makes sure a division-by-zero crash cannot happen in the Len()
    method.
    
    Fixes #2773

commit b5ded4359421e40fb554ddb3c2f98bbbb7267b80
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Dec 13 15:01:35 2016 +0000

    Allow buffering of scraped samples before sending them to storage.

commit 906c3a22378fbc7e2b80e6fcb319465966143737
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 3 16:03:13 2016 +0100

    Update vendoring for Azure
    
    Also, actually record the vendored version in vendor.json.

commit e714079cf2bde9dba9b82faa51551c74de4c5868
Author: tattsun <t.t.mc1192.sf@gmail.com>
Date:   Sat Dec 10 07:36:27 2016 +0900

    storage: fix error message (#2270)
    
    * storage: add error message

commit 9ecea36ef91f354e9142fe72c3d70515e13b6b41
Merge: 0ea0a19 cef2e04
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Dec 6 16:18:03 2016 +0100

    Merge pull request #2259 from prometheus/federationerr
    
    web: don't return federation errors over HTTP

commit cef2e04aa3c97bf30d26b3968e05a22de17e8814
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Dec 6 16:09:50 2016 +0100

    web: add error counter for federation responses

commit 0ea0a198485bdb29b130e9cbf92f0861b22279c9
Merge: 893390e 054f8eb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Dec 6 16:01:45 2016 +0100

    Merge pull request #2240 from agaoglu/read-timeout
    
    Set read-timeout for http.Server

commit 9d68e81b3279ab7c6fb031d5c1118b37670e7a1e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Dec 6 15:52:50 2016 +0100

    web: don't return federation errors over HTTP
    
    We are writing federation responses streaming. So after
    the first byte we wrote, the status header is fixed. We cannot
    return an HTTP error for intermediate error but should just abort
    and log instead.

commit 054f8ebbfb420b47923f997c79de773877f2e66b
Author: Erdem Agaoglu <erdem.agaoglu@gmail.com>
Date:   Tue Dec 6 17:45:19 2016 +0300

    Increase default max-connections

commit 2260079c127b38e08a64f2aa037955d3bc7da092
Author: Erdem Agaoglu <erdem.agaoglu@gmail.com>
Date:   Tue Dec 6 12:52:02 2016 +0300

    Vendor x/net/netutil

commit e487477a17e90d1b145eb2fe1a67005715fee250
Author: Erdem Agaoglu <erdem.agaoglu@gmail.com>
Date:   Tue Dec 6 12:45:59 2016 +0300

    LimitListener to limit max number of connections
    
    This also drops tcp keep-alive in ListenAndServe but it's no longer
    necessary since we now close idle connections long before that.

commit 893390e0c65b8a8125bba1700e3a50a085ca033a
Merge: a932c1a c5b1726
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Dec 5 21:41:37 2016 +0100

    Merge pull request #2248 from msiebuhr/cwd-in-status
    
    web: Display current working directory on status-page

commit c5b17263a601947ed73941d91e8c24964346f8af
Author: Morten Siebuhr <sbhr@sbhr.dk>
Date:   Sun Dec 4 00:37:59 2016 +0100

    web: Display current working directory on status-page

commit a932c1a4b655567d779dfe17664448939c6b96ef
Merge: 0459dcd 148b006
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Dec 5 18:40:51 2016 +0100

    Merge pull request #1794 from cmluciano/cml/persistenceerror
    
    Clarify error message when Prometheus data dir finds unexpected files

commit 148b006e25565a7b3b8fcc8570dcc2953b22b00e
Author: Christopher M. Luciano <christophermluciano@gmail.com>
Date:   Tue Nov 29 08:57:06 2016 -0500

    Clarify error message when Prometheus data dir finds unexpected files

commit 0459dcd2e2cdb0c62e4ea2cf5257fc2e9d5153ac
Merge: 63fe65b 33b583d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Dec 5 14:14:04 2016 +0100

    Merge pull request #2234 from brancz/targets-api
    
    web/api: add targets endpoint

commit 33b583d50e5107e599f758cf85cc05bb37eefb37
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Fri Dec 2 13:31:43 2016 +0100

    web/api: add targets endpoint

commit 8f8cea4fbdd7d13a4992b596b0dab19ecc626d57
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Fri Dec 2 13:28:58 2016 +0100

    retrieval: refactor TargetManager to return flat list of Targets

commit 9986b28380de77c86e0c8cef6b64640ac5d0277b
Author: Erdem Agaoglu <erdem.agaoglu@gmail.com>
Date:   Thu Dec 1 16:29:45 2016 +0300

    Set read-timeout for http.Server
    
    This also specifies a timeout for idle client connections, which may
    cause "too many open files" errors.
    See #2238

commit 63fe65bf2ff8c480bb4350e4d278d3208ca687be
Merge: 2a89e87 5770d9e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 30 09:55:09 2016 +0100

    Merge pull request #2235 from prometheus/beorn7/doc
    
    Kubernetes SD: More fixes to example config

commit 5770d9e545002d00083898d35d151ccf1493e3da
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Nov 29 18:42:35 2016 +0100

    Kubernetes SD: More fixes to example config
    
    - Avoid mentioning the `in_cluster` option. (It doesn't exist anymore.)
    - Replace `__meta_kubernetes_service_namespace` and
      `__meta_kubernetes_pod_namespace` (which don't exist anymore) by
      `__meta_kubernetes_namespace`.

commit 2a89e8733f240d3cd57a6520b52c36ac4744ce12
Merge: ecad074 6be1e98
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 28 09:33:26 2016 +0100

    Merge pull request #2230 from prometheus/cut-1.4.1
    
    *: cut 1.4.1

commit 6be1e98278b8e656a20d31a4e3f03fbc09c0eea4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 28 09:29:23 2016 +0100

    *: cut 1.4.1

commit d95e61d418ec98cdb8b14fecca39c03e70fa56a5
Merge: 56f57a8 35da23f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 28 08:00:41 2016 +0100

    Merge pull request #2223 from prometheus/consulfix
    
    consul: start service watch as goroutine

commit 35da23fd821ab228dffb2c1718949dc261eed757
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Nov 27 11:01:16 2016 +0100

    consul: start service watch as goroutine

commit 56f57a826f6093f57bee2318e657323cad128d7a
Merge: ecad074 340de6c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 16:05:53 2016 +0100

    Merge pull request #2219 from prometheus/builderimg
    
    circle: update golang-builder image version

commit 340de6c31c259071eac10e650df56465b0b66375
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 14:29:07 2016 +0100

    circle: update golang-builder image version

commit ecad074e46ef60536722c5b01e6c5277f2b50a3d
Merge: 9b7f5c7 8045595
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 13:35:04 2016 +0100

    Merge pull request #2218 from prometheus/cut-1.4.0
    
    *: cut 1.4.0

commit 80455950eef72afed3c2c54d652918daec68ae5a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 13:28:29 2016 +0100

    *: cut 1.4.0

commit b97f19a85ee4cd9fab5d76e8d468adcb86ad457c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 13:28:19 2016 +0100

    travis: update used Go compiler version

commit 9b7f5c7f297ed5b461f3ded4eb7911dde68aa036
Merge: fd51ab4 2ad56aa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 11:28:38 2016 +0100

    Merge pull request #2217 from prometheus/alertingsd
    
    Extract alertmanager into interface

commit 2ad56aabd49537a4309fc9d2f38c7d7701723bbb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 11:11:28 2016 +0100

    notifier: extract alertmanager into interface

commit cc3510450442427e8a677c58ab8fb6f07c62f64c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 11:04:33 2016 +0100

    config: fix naming and typo

commit fd51ab46e504621889be867d5dd79ea12e899a6c
Merge: dd1a656 b1f28b4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 10:38:00 2016 +0100

    Merge pull request #2215 from prometheus/alertingsd2
    
    Discover Alertmanagers dynamically

commit b1f28b48a3c5649e31ef03f298d35906c5cec437
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 25 08:47:04 2016 +0100

    Fix typo

commit 3fb4d1191b18eff01c0b1696a91f0220b70fa907
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 24 15:17:50 2016 +0100

    config: rename AlertingConfig, resolve file paths

commit d4deb8bbf2f9f0c8271dadc274f7e04f58226cf4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 23 18:23:09 2016 +0100

    web: show discovered Alertmanagers in UI

commit f210d964977ab03a6cb015542f914031073286e4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 23 17:03:22 2016 +0100

    notifier: use dynamic service discovery

commit 183c5749b9756ce1ef1b650c7fdff961df61ea9f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 23 12:42:33 2016 +0100

    config: add Alertmanager configuration

commit 200bbe1badf6cf6e0791e58d1ab4548c4a743ef6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 23 12:41:19 2016 +0100

    config: extract SD and HTTPClient configurations

commit dd1a656cc4dba4c86fc0226f1324cbbccb8ed32b
Merge: 8b11646 4762320
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 23 17:46:48 2016 +0100

    Merge pull request #2212 from prometheus/alertingsd
    
    Extract discovery package

commit 47623202c73da35bff479334d91014f92d1c83a6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 23 09:17:04 2016 +0100

    retrieval: remove metric namespaces

commit d7f4f8b879c6fde3f069450ee11a4bbe63e32761
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 22 12:48:30 2016 +0100

    discovery: move TargetSet into discovery package

commit 8b11646276933bbefff6323693e31cb27e62ac86
Merge: c34f55d ab60bc3
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Tue Nov 22 22:59:25 2016 -0600

    Merge pull request #2164 from tcolgate/master
    
    Fix export of grouping modifier

commit c34f55d7c00f86bb289c2a34f06fc18936ef4df2
Merge: 5b72eae e68a3cf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 22 15:55:18 2016 +0100

    Merge pull request #2213 from prometheus/alertannotations
    
    rules: update annotations on each iteration

commit e68a3cf21f4132337c62fd335ff703fa7ac2a27a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 22 15:43:07 2016 +0100

    rules: update annotations on each iteration

commit d19d1bcad38c70bd801433da0be29ca5b2828334
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 21 15:59:03 2016 +0100

    discovery: move into top-level package

commit 7bd9508c9b2a4121ea9bb2b2c8b00117f85ab918
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 21 15:51:36 2016 +0100

    discovery: move TargetProvider and multi-constructor

commit bd0048477c42c460825c48ee2fb8d30e5c2636e3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 21 15:03:30 2016 +0100

    discovery: move remaining SDs into own package

commit 5b72eae1b0b0fe1637f67583752e153187837b3c
Merge: ec66082 a1eec44
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 21 16:46:20 2016 +0100

    Merge pull request #2203 from prometheus/sdfix
    
    Service discovery fixes

commit ab60bc3929de17e18965f85c735f9d0ba48b4e4a
Author: Tristan Colgate <tristan@qubit.com>
Date:   Fri Nov 4 11:06:07 2016 +0000

    Fix export of grouping modifier

commit ec66082749003ecee471d7600b9e9ca5c83332bd
Merge: 06555bd bec6870
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 21 11:49:23 2016 +0100

    Merge branch 'ec2_sd_profile_support' of https://github.com/Ticketmaster/prometheus into Ticketmaster-ec2_sd_profile_support

commit 06555bde93edef34d86fc70103ab5f8f01bcda98
Merge: 52c762e eb10ff9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 21 11:44:48 2016 +0100

    Merge branch 'k8s_sd_metrics' of https://github.com/dominikschulz/prometheus into dominikschulz-k8s_sd_metrics

commit 52c762e9f1444367bcd7f39c77caea08c4480b11
Author: gambrose <graham.ambrose@gmail.com>
Date:   Mon Nov 21 08:53:59 2016 +0000

    The defaults stated in the example config where wrong (#2110)
    
    * The stated defaults where wrong
    
    * Update prometheus.yml

commit 0b1a07b531c6ea80f7d9c90cd4c623615e5369cf
Merge: dbd6810 68fc15f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 21 09:49:49 2016 +0100

    Merge pull request #2197 from tcolgate/fix_error_types
    
    Report type names in the form used in documentation

commit dbd6810ea0a0bb7f912c8856468895c93e6594cb
Merge: 9b7e097 d78dd35
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 21 09:48:55 2016 +0100

    Merge pull request #2207 from weaveworks/expose-rules
    
    Expose rule & group evaluation

commit d78dd3593d4d13faa69a01078d707fedb4aa3298
Author: Jonathan Lange <jml@mumak.net>
Date:   Fri Nov 18 16:32:30 2016 +0000

    Set evaluation interval on Group construction
    
    Prevents having object in invalid state, and allows users of public API
    to construct valid Groups.

commit 31fc357cd858def9d942a2396de4c726b48ae23b
Author: Jonathan Lange <jml@mumak.net>
Date:   Fri Nov 18 16:25:58 2016 +0000

    Make NewGroup and Group.Eval public
    
    Allows callers to execute evaluate lists of rules without first writing
    them to disk.

commit 2a2da402236f1cc40d1e68c2414c90311e73ba72
Author: Jonathan Lange <jml@mumak.net>
Date:   Fri Nov 18 16:12:50 2016 +0000

    Make rule evaluation publicly available
    
    Means that a third-party can parse rules and run them with their own
    execution model.

commit a1eec447a4d214874b98c7214b3e7f6071d588aa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 18 11:20:28 2016 +0100

    discovery: fix+consolidate Zookeeper discoveries

commit 68fc15fe4e9cf4dd107013648a64a3cbf27282fe
Author: Tristan Colgate <tcolgate@gmail.com>
Date:   Thu Nov 17 21:02:28 2016 +0000

    Report type names in the form used in documentation

commit b4d7ce1370fbd6af0786d28882f13fb5830b25a6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 18 10:55:29 2016 +0100

    discovery: respect context cancellation everywhere
    
    This also removes closing of the target group channel everywhere
    as the contexts cancels across all stages and we don't care about
    draining all events once that happened.

commit 9b7e097a76034989212c752921a80cf73a4c3ff0
Merge: 127332c bc7bd72
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Nov 18 01:07:34 2016 -0800

    Merge pull request #2201 from prometheus/consul-race
    
    discovery: terminate senders before closing channel

commit bc7bd7202cb8be754b4308ab5c41419a8d67804d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 18 10:03:12 2016 +0100

    discovery: terminate senders before closing channel
    
    Fixes #2200

commit 127332c56f85b71af24cb87bea1fe7a72e60899a
Merge: 7daa21e 585878c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Nov 17 23:13:50 2016 -0800

    Merge pull request #2168 from tomwilkie/chunk-len
    
    Add call to estimate number of samples in a chunk to the API

commit 585878cdb256ba8bd3d5223473150320cdbc1ea0
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Sun Nov 6 07:34:41 2016 -0800

    Add call to estimate number of samples in a chunk to the API

commit 7daa21eeb6ccbe628839c5c07704e0f1d7801992
Merge: 4a80448 4298d91
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Nov 16 21:45:58 2016 -0800

    Merge pull request #2194 from TheTincho/replace-js-libs
    
    Replace datetimepicker and handlebars JS libraries

commit 4298d91a9cd5568a0f22694265c03d4fd210d49a
Author: Martín Ferrari <tincho@debian.org>
Date:   Thu Nov 17 02:33:31 2016 +0000

    Update bindata.go

commit fe83ea511f499eb0d303d7ec91dbb4d35042ed47
Author: Martín Ferrari <tincho@debian.org>
Date:   Thu Nov 17 01:29:58 2016 +0000

    Replace handlebars with the simpler and saner mustache library.

commit 0a6972b6a36c68f050b1e2a0cf95b55c77f60a45
Author: Martín Ferrari <tincho@debian.org>
Date:   Thu Nov 17 01:20:36 2016 +0000

    Replace datetimepicker library with a more maintained version.
    
    Adds also the moment.js library, which is a dependency of it.
    
    Following conventions in the web/ui directory, I am not including the original
    sources or LICENSE files.

commit 4a80448b7e11b17ee16aa3ef1475e396a2812a4e
Merge: 17a95f3 bcdf870
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Nov 15 12:53:50 2016 +0100

    Merge pull request #2190 from prometheus/beorn7/doc
    
    AUTHORS.md: Replace explicit list of authors with reference to git log

commit bcdf870edaf036eccc7e86cb99a1495efd5b4bc4
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Nov 14 21:00:51 2016 +0100

    AUTHORS.md: Add link to Github contributors page

commit 5944a1d1bd8baa600aa98b2bfc7d6c9f26dd1b7b
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Nov 14 19:57:07 2016 +0100

    AUTHORS.md: Replace explicit list of authors with reference to git log
    
    Given the many contributors to the repository, maintaining a dedup'd
    list of contributors is infeasible.

commit 17a95f3366380da79faaeaabb493b75fd0e53d8a
Merge: 0fcea6e 473dd5b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 14 16:23:24 2016 +0100

    Kubernetes SD: Add endpoints role to API servers job to actually discover some API servers (#2181)

commit 0fcea6e9fb12c914bf8923cfe5ced047eaefb90e
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Nov 14 16:21:38 2016 +0100

    retrieval/discovery/kubernetes: fix cache state unknown behavior (#2180)
    
    * retrieval/discovery/kubernetes: fix cache state unknown behavior
    
    * retrieval/discovery/kubernetes: extract type casting
    
    * retrieval/discovery/kubernetes: add tests for possible regressions

commit 036715370ff66d7e9f3e996fd684f723cfe5a18c
Merge: fa82c65 c999902
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Nov 14 15:26:39 2016 +0100

    Merge pull request #2184 from huydx/master
    
    Fix possible memory leak by defer inside loop

commit fa82c65d1551dea64d0818211d59135b975136a6
Merge: ae806af 7ecc271
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 14 09:52:15 2016 +0100

    Merge pull request #2186 from prometheus/fixes
    
    Test fixes

commit ae806af7d87ea85e7e9ea47ff11c36ae79877914
Merge: e193579 530cdba
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 14 09:52:07 2016 +0100

    Merge pull request #2185 from prometheus/errhandler
    
    kubernetes: only use one error logging handler

commit c999902761c69fc034291b82f52bea2f86a60964
Author: huydx <xuanhuy.do@linecorp.com>
Date:   Mon Nov 14 00:45:51 2016 +0900

    Fix possible memory leak by defer inside loop

commit 7ecc2714115c963641d2b89cc9fab90a590d9d5a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Nov 13 18:21:42 2016 +0100

    Move Fatalf call into main test goroutine

commit 856de30c09b2ca77cf8ab73f9d52bc5e6aef4e7b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Nov 13 18:16:02 2016 +0100

    Check error before defer closing
    
    If an error is returned the file might be nil and a Close call
    would cause a panic.

commit 530cdba103051d80dee3c973e7ccc339d054e75f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Nov 12 14:13:38 2016 +0100

    kubernetes: only use one error logging handler

commit 473dd5b89a51b1486f1f1658c3532647d7f8ce74
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Thu Nov 10 09:46:36 2016 +0000

    Kubernetes SD: Add endpoints role to API servers job to actually discover some API servers

commit e193579df8897a91727d1fbff4d3676e3ed693d8
Merge: 79f8514 aa662cb
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Nov 9 11:09:56 2016 +0100

    Merge branch 'release-1.3'

commit aa662cb0a974a2b04c750415bfaaf4b0ed995dbe
Merge: 63630a0 4e3abc6
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Nov 9 11:08:19 2016 +0100

    Merge pull request #2167 from prometheus/beorn7/promql
    
    Check for int64 overflow when converting from float64

commit 4e3abc6cbf7f1d25499f9be0a9838683b0754468
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Nov 8 21:03:31 2016 +0100

    Simply use `math.Mod(float64, float64)` after all
    
    This circumvents all the problems with int overflow, plus it is what was originally intended.

commit 79f8514c9cfd085fe23a0b13cfd25894790f850f
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Nov 7 15:14:22 2016 +0000

    Point user to POST if they try to GET /-/reload (#2172)

commit 5cf5bb427a422082b5a484bae2d8c29dd0bb9241
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Nov 5 00:48:32 2016 +0100

    Check for int64 overflow when converting from float64

commit a94a8807f9e5cc241c4c679f8cec5c1dc86028d9
Merge: 2d203e7 63630a0
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Nov 4 22:47:12 2016 +0100

    Merge branch 'release-1.3'

commit 63630a0416fac4bf80e6b483f7f5d97cc6abd916
Merge: 96a93c0 be47695
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Nov 4 21:20:03 2016 +0100

    Merge pull request #2166 from prometheus/beorn7/release
    
    Cut v1.3.1

commit be476954e80349cb7ec3ba6a3247cd712189dfcb
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Nov 4 21:08:26 2016 +0100

    Cut v1.3.1

commit 96a93c0bc1af81c15e42e6e62f71f73300db4c65
Merge: 18254a1 92c0ef1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Nov 4 12:56:11 2016 -0700

    Merge pull request #2159 from prometheus/beorn7/release
    
    Merge release1.2 into release-1.3

commit 92c0ef1a9267d8ef292075ffc335695aa1d1ab65
Merge: 18254a1 c1eee5b
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 3 22:48:39 2016 +0100

    Merge branch 'release-1.2' into beorn7/release

commit c1eee5b0da2540b9dfd2f70752015b0fce83b616
Merge: 6ba87cb cd8d382
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Nov 3 22:40:08 2016 +0100

    Merge pull request #2157 from prometheus/beorn7/release
    
    Cut v1.2.3

commit 2d203e777f16b90e897cc59e3393f5c3b62bb5e7
Merge: c4c31a8 817ecb8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 3 14:27:10 2016 -0700

    Merge pull request #2158 from prometheus/merge-1.3
    
    Merge release-1.3 into master

commit 817ecb8ddd4e60adf99997cc48ece919b8d6f111
Merge: c4c31a8 18254a1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 3 14:19:34 2016 -0700

    Merge branch 'release-1.3' into merge-1.3

commit cd8d3822f4977c225d4f564403c7b750cfa4b00a
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 3 20:23:49 2016 +0100

    Cut v1.2.3

commit 6ba87cbc87bcefae7431deeb3e5697958e3c5fc6
Merge: e072e7f 0fdb74c
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Nov 3 20:06:58 2016 +0100

    Merge pull request #2153 from prometheus/beorn7/vendoring
    
    Improve DNS error reporting and update to current miekg/dns

commit c4c31a85ab160900f9a8969159ae393fdca55f90
Merge: b2f28a9 e072e7f
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 3 19:56:25 2016 +0100

    Merge branch 'release-1.2'

commit e072e7f90386e81f5d7e374e47feb8a18b506246
Merge: d1ece12 07f1bdf
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Nov 3 19:54:57 2016 +0100

    Merge pull request #2156 from prometheus/beorn7/promql
    
    Fix MOD binop for scalars and vectors

commit 07f1bdfe9451e5320afe04e1569905f5541e4a67
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 3 19:03:44 2016 +0100

    Fix MOD binop for scalars and vectors
    
    Previously, a floating point number that would round down to 0 would
    cause a "division by zero" panic.

commit bec6870ed462840013e1daab1a853e4886752f79
Author: Kraig Amador <Kraig.Amador@ticketmaster.com>
Date:   Thu Nov 3 07:54:27 2016 -0700

    ec2_sd_configs: Support profiles for configuring the ec2 service

commit ba3fcceaa553c653825144e2e0dffb7ad1fb8331
Author: Kraig Amador <Kraig.Amador@ticketmaster.com>
Date:   Thu Nov 3 08:37:23 2016 -0700

    vendoring: updated aws-sdk-go to v1.5.1

commit 0fdb74c069ec5a14a32ce3c146b7eaacae0eabe7
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 3 14:41:04 2016 +0100

    Adjust dns.go to new miekg/dns package and improve error handling.
    
    When hitting the 64kiB limit of DNS, the error message so far was
    really misleading.

commit b2f28a9e8210c11e5fe4692caa9cecd4dfa81f8b
Merge: 0634509 d1ece12
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 3 14:42:15 2016 +0100

    Merge branch 'release-1.2'

commit 9a63ff0c32db484a1f24b07a75104d659461b2b9
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Nov 3 14:40:30 2016 +0100

    Update vendoring github.com/miekg/dns
    
    This is to pull in bug fixes. However, it also requires code changes,
    see next commit.

commit 0634509f96b30b145892f15b0b7cbbde9b23ed1c
Merge: 6703404 da23543
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 3 06:35:03 2016 -0700

    Merge pull request #2148 from jimmidyson/prom-1.3-k8s-disco-example
    
    Kubernetes SD: Update config for discovery in 1.3

commit d1ece12c706334899834f290a4d2aa348512c3ee
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Nov 3 13:34:15 2016 +0000

    Handle null Regex in the config as the empty regex. (#2150)

commit da23543f29e51701b4e8ec0ffc1912e3a530c5d1
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Wed Nov 2 20:48:01 2016 +0000

    Kubernetes SD: Update example config to use endpoints role for API server discovery

commit 4d37dca66968147f138ce4180823a4b9933c500f
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Wed Nov 2 15:06:20 2016 +0000

    Kubernetes SD: Update config for discovery in 1.3

commit 18254a172b1e981ed593442b2259bd63617d6aca
Merge: 6703404 6fc9cf3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 1 17:24:33 2016 +0100

    Merge pull request #2144 from prometheus/cut-1.3.0
    
    Cut release 1.3.0

commit 6fc9cf3a9630b54c07fa372eec47d32a8e013c8c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 1 15:45:09 2016 +0100

    Cut release 1.3.0

commit 6703404cb431f57ca4c5097bc2762438d3c1968e
Merge: 30af475 fc4d9c1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 1 16:35:22 2016 +0100

    Merge remote-tracking branch 'origin/release-1.2'

commit fc4d9c13e8adbd183abffd51de0a9d99c991bb29
Merge: 6875e9e 5c41ca8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 1 16:34:57 2016 +0100

    Merge pull request #2143 from prometheus/beorn7/fix
    
    Protect against negative time ranges.

commit 30af47535d4d7c0a7566df78e63e77515ba26863
Merge: 5b16d6b 6875e9e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 1 15:42:13 2016 +0100

    Merge remote-tracking branch 'origin/release-1.2'

commit 6875e9ef91d44745c7d7fd2a2851eac87746de3f
Merge: e3d7c39 5c025a2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 1 15:40:07 2016 +0100

    Merge pull request #2142 from amorken/issue-2140
    
    query_range: Validate that start comes before end

commit 5c025a2f418c57b7b57ecce228217658a160fc35
Author: Anders Daljord Morken <amorken@gmail.com>
Date:   Tue Nov 1 14:25:34 2016 +0100

    query_range: Validate that start comes before end

commit 5c41ca84e5056d3cab46911c13f3e91128a612a9
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Nov 1 15:17:59 2016 +0100

    Catch negative staleness delta set on the command line

commit c5bd178b930207362a425889c155ac8ca86628e3
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Nov 1 15:05:01 2016 +0100

    Protect exported Querier interface method against negative time ranges

commit 2f6899cbb8097cbbc645c39daccb36193a1b5694
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Nov 1 14:21:22 2016 +0100

    Add missing line to CHANGELOG.md
    
    This got dropped in the cherrypicking.

commit 5b16d6bd6e5b1d16551fc91b6d01077a3b85a64c
Merge: 04dfd2f e3d7c39
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Oct 31 00:06:23 2016 +0100

    Merge branch 'release-1.2'

commit e3d7c39529212d80a01fd4158e086eab89681e54
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Oct 30 23:48:15 2016 +0100

    Update date of v1.2.2

commit 720f7e86360ae7b86aeb4a78538f35ab611f9d9d
Merge: 1c3531a b216e91
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sun Oct 30 17:43:50 2016 +0100

    Merge pull request #2135 from prometheus/beorn7/vendoring
    
    Revert "Update github.com/miekg/dns to pull in bug fixes."

commit b216e91b613c16aea325b462f4c61e80f4520205
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Oct 30 16:37:32 2016 +0100

    Revert "Update github.com/miekg/dns to pull in bug fixes."
    
    This reverts commit 590446434f3d840dc0b20cd2686c0c9e7790be23.
    
    Sadly, there's a problem with truncated messages:
    WARN[0684] resolving all.telemetry.pm.prod.bazooka.dd.srv.int.s-cloud.net failed: dns: failed to unpack truncated message  source=dns.go:187
    
    We have to revisit the SRV DNS part later.

commit 1c3531af4ef7f624c280be20481fa21e808de26a
Merge: c1ae61a d2f1ace
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Oct 30 14:34:07 2016 +0100

    Merge pull request #2133 from prometheus/beorn7/vendoring
    
    Cut v1.2.2

commit d2f1ace31dd779fccb9294997b942630d7459bed
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 16:03:10 2016 +0200

    vendoring: re-add snappy/*_other.go files
    
    For some reason, govendor doesn't add these files (but it works for
    platform dependent files elsewhere).

commit 9c60dce1defe8037300c22331452db607cea0d3a
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 15:36:41 2016 +0200

    vendoring: Update vendor/golang.org/x/sys/unix/ vendoring
    
    No immediate need here, but after adding the windows vendoring, we
    have different commits vendored from the same repository. To avoid
    confusion, this commit brings them in line.

commit 0cc51a5c5d6b131a099525197a26f8d9bff1aadd
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 15:34:39 2016 +0200

    vendoring: Vendor packages not vendored so far

commit 43cddad30b1d7d16299830e96442e305502a2c8a
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 15:27:00 2016 +0200

    vendor: Update consul client
    
    We were so much behind...

commit 5754f5237e5afadc64a31b7ebaee662474a237c8
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 15:23:59 2016 +0200

    vendoring: Clean up files accidentally left behind

commit 9d91b9f2a53e82808f75c8e05b84a2472e8331aa
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 15:21:42 2016 +0200

    vendoring: Update checksum
    
    Govendor insisted on changing this checksum. I don't know why.

commit 997864a1f4e0d201a458c61db8e74db18a41bfb7
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 15:19:33 2016 +0200

    Update context vendoring
    
    Most fixes here are mostly http2, but since I'm suspecting a bug in
    the context package, I thought we better go with the current version
    to rule out bugs already fixed.

commit fefe55d11ea199ced5dcdc9dd02d46e0194a8844
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 15:15:29 2016 +0200

    Cut 1.2.2

commit 56c9e024cb25ad0f7aad7aaa45c69e5a45068c73
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 14:58:36 2016 +0200

    Update goleveldb vendoring to pick up many bug fixes
    
    Including data races and shutdown fixes.
    Might be the reason for some reported problems.

commit 13c1086f184f3bd6a208eda6f60268b381e6b7c5
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 14:54:47 2016 +0200

    Update vendoring of our own Prometheus packages.
    
    This most notably updates to v0.8.0 of client_golang.
    Also, it unifies the commit of different packages from the same repo.

commit 590446434f3d840dc0b20cd2686c0c9e7790be23
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 14:42:36 2016 +0200

    Update github.com/miekg/dns to pull in bug fixes.
    
    Most notable a race condition.

commit 98e6e4fbee07fe8ed8a106431eeebacd55ba29ed
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 14:33:45 2016 +0200

    Update github.com/golang/protobuf/proto vendoring
    
    This fixes a memory leak in Unmarshal code

commit 50fb82f987d199d26d04066e64b0474b29df33ef
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 14:23:57 2016 +0200

    vendor: Remove duplicate entries for "gopkg.in/yaml.v2" from vendor.json

commit f0acde7721d0cacfaf6b9f0e69e296161e40a103
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 28 14:16:48 2016 +0200

    Regenerate assets after cherry-pick

commit e6dc9b05d5e27f8531a1529ea819a199650a72d8
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu Oct 27 10:55:42 2016 +0200

    vendor: update govalidator package (#2125)
    
    Fixes #2025

commit e1cfc994f716ebdbc5104bee9aef18ea8d97af13
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Oct 19 18:38:26 2016 +0100

    Correctly handle on() in alerts. (#2096)
    
    Fixes #2082

commit 223a22457fcda9da46d51fc80c229c619d6825b5
Author: Stuart Olivera <stuart@stuartolivera.com>
Date:   Wed Oct 12 17:05:50 2016 -0700

    ui: don’t consider aborted requests complete
    
    If an existing request is aborted due to a new request, ignore the completion of the initial request.
    
    Example:
    1. Chrome dev tools: enable 5 second network latency
    2. Execute query
    3. A second later, execute the query again
    4. Currently, the spinner will hide, and the stats will immediately display, as if the request had completed. Instead, the spinner and stats should wait until the 2nd execution finishes.

commit 04dfd2fab39f6797085f05860f14a465cf308ac6
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu Oct 27 10:55:42 2016 +0200

    vendor: update govalidator package (#2125)
    
    Fixes #2025

commit c1ae61a2cc463e1407f880f19828e1fdaa90edd5
Merge: 6bc29ba 876e5da
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Oct 26 22:50:10 2016 +0200

    Merge pull request #2116 from prometheus/beorn7/fix
    
    Add guard against non-monotonic samples in series

commit 64263f280d2073452e5c733fc9855daede97b2d4
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Oct 26 17:43:01 2016 +0100

    Add scrape_samples_scraped to indicate samples scraped. (#2123)

commit 6bc29ba857ee20f641beccbfbe32f8595eb18b6e
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Oct 26 14:47:41 2016 +0100

    Fix regression from #1957, specify non-zero default timeout. (#2121)
    
    Fixes #2075

commit bbec65d45490f44ddef8ead14fddfe868604d435
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Oct 26 10:03:35 2016 +0100

    Call SD metrics refresh rather than scrape. (#2120)
    
    This avoids confusion with scrape_duration_seconds, and
    is more in line with the API naming.

commit 876e5da4f818b490537a73e97bf078c2b44cf4f7
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Oct 25 14:59:33 2016 +0200

    Add guard against non-monotonic samples in series
    
    This can only happen due to data corruption.

commit 569a1d78eb309d6478d9c4c09360009dde1de7e3
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Oct 25 12:15:55 2016 +0200

    Regenerate bindata after merge

commit 7e4d005ee12f8f1ac9c99cbe6a9c8a29b58ed9b8
Merge: 72e4f1c 233a25a
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Oct 25 12:15:41 2016 +0200

    Merge branch 'release-1.2'

commit 233a25a060e6610a311a1438159fb30400991b5c
Merge: ec203a2 68e20bd
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Oct 25 12:12:59 2016 +0200

    Merge pull request #2113 from tattsun/fix/ISSUE-2109-v1.2
    
    ui: fix decode query params bug(ISSUE-2109)

commit 68e20bd9acdd010f895803f912717e116c0b438a
Author: tattsun <t.t.mc1192.sf@gmail.com>
Date:   Sat Oct 22 00:49:06 2016 +0900

    ISSUE-2109 ui: fix decode query params bug

commit 72e4f1caa378344437187104f8d8dea22bfad363
Merge: f002fe1 2bc12fa
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 24 12:10:47 2016 +0100

    Merge pull request #2045 from bekbulatov/marathon_tls
    
    Add tls support for marathon

commit 2bc12fa2fb1ebf50f3c016b22ffa94deaeed65b9
Author: bekbulatov <alexander@bekbulatov.ru>
Date:   Mon Oct 24 11:27:08 2016 +0100

    Set timeout for marathon_sd

commit c689b35858d419c54ac9cdfe1cfac1e1d63ec0f7
Merge: ac702f6 f002fe1
Author: bekbulatov <alexander@bekbulatov.ru>
Date:   Mon Oct 24 10:37:32 2016 +0100

    Merge branch 'master' into marathon_tls

commit eb10ff987116bbf82d93b76b9ec9a23ced4362fd
Author: Dominik Schulz <dominik.schulz@gauner.org>
Date:   Sun Oct 23 13:33:54 2016 +0200

    Also handle service update in endpoints.go

commit f002fe186abd04ecd9cd8961c24bc039f134ea13
Author: Dominik Schulz <dominik.schulz@gmail.com>
Date:   Fri Oct 21 12:14:53 2016 +0200

    Add Marathon-SD metrics. (#2106)

commit 296644adeb9a73b1439ee7858a26608668ca3bd6
Author: Mitsuhiro Tanda <mitsuhiro.tanda@gmail.com>
Date:   Fri Oct 21 19:13:47 2016 +0900

    Expose ec2_instance_type (#2107)

commit 36de16390027b6615bc6855e8baf6811a763baee
Author: Dominik Schulz <dominik.schulz@gmail.com>
Date:   Fri Oct 21 12:12:19 2016 +0200

    Add File-SD metrics (#2103)
    
    * Add File-SD metrics
    
    * Count read errors, not scan errors.

commit 3d0fb0cf17145a57a96d29ddf345d89899b5b89b
Author: Dominik Schulz <dominik.schulz@gauner.org>
Date:   Fri Oct 21 12:11:15 2016 +0200

    Avoid too generic label type.

commit e1e30f12cd5b116abe0d0165e573bee1a924cad2
Author: Dominik Schulz <dominik.schulz@gauner.org>
Date:   Fri Oct 21 10:48:28 2016 +0200

    Add Kubernetes-SD metrics.

commit 552ab61fa1f1598408ca891d39ac957f1c61d9d4
Author: Dominik Schulz <dominik.schulz@gmail.com>
Date:   Fri Oct 21 10:18:28 2016 +0200

    Change SD metric names to make logical grouping more visible. (#2102)

commit 0c692276160a1a345ad837a2834dbe188dbc3ca7
Author: Dominik Schulz <dominik.schulz@gmail.com>
Date:   Fri Oct 21 09:59:43 2016 +0200

    Add Consul-SD metrics (#2097)
    
    * Add Consul-SD metrics
    
    * Remove unnecessary metric and add labels to summary.
    
    * Do not stutter

commit 5273b55a0c5d5b04b8b4cccf9e5033ca71944552
Merge: 255a8c8 26a0fa9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 20 10:49:04 2016 +0200

    Merge pull request #2090 from brancz/release-1.3
    
    Cut v1.3.0-beta.0

commit 26a0fa9f98508b494ceeb1c8a33af2f740f7e8ce
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Tue Oct 18 15:12:32 2016 +0200

    Cut v1.3.0-beta.0

commit 255a8c8b4cdcb2b55b9b785bd41cfb7169075f85
Author: Dominik Schulz <dominik.schulz@gmail.com>
Date:   Thu Oct 20 10:01:00 2016 +0200

    Fix small typo in EC2 SD metric name (#2100)

commit 00e486a05b2e8ac4b73c4fc99e317a12eeab8693
Author: Dominik Schulz <dominik.schulz@gmail.com>
Date:   Thu Oct 20 09:23:50 2016 +0200

    Add Azure-SD metrics (#2099)

commit 17691d914117ea4f345ba4dacbcfe5dedd13618d
Merge: c4b4a58 9eefce6
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Oct 20 00:48:05 2016 +0100

    Merge pull request #2098 from prometheus/add-coc
    
    Add CNCF code of conduct as the Prometheus code of conduct

commit 9eefce6811b4137f322869db565d71bb69d92257
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Oct 19 21:39:19 2016 +0200

    Add CNCF code of conduct as the Prometheus code of conduct

commit c4b4a58e3ac3ffd0b579ad8d9086431f0a2e1278
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Oct 19 18:38:26 2016 +0100

    Correctly handle on() in alerts. (#2096)
    
    Fixes #2082

commit 8462fe9fac484b3b8df2e54a9f9584f0d8ce23c9
Merge: 163d5a8 aabf4a4
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Oct 19 18:21:40 2016 +0200

    Merge pull request #2094 from Nomon/bug/target_label_unmarshal
    
    Bug/target label unmarshal

commit aabf4a419bfbc95112b437b7ba0be426c83d8a09
Author: Matti Savolainen <matti@applifier.com>
Date:   Wed Oct 19 16:30:52 2016 +0300

    use LabelNam.IsValid() instead of LabelNameRE and MatchString instead of Match

commit ec6524ce747f2424daae04a7f46ed98461d24bb2
Author: Matti Savolainen <matti@applifier.com>
Date:   Wed Oct 19 13:32:42 2016 +0300

    test the labelTarget regex to make sure it properly validates pre-interpolated label names.

commit f867c1fd58c6ef0d8061d71089193de7b9598c9f
Author: Matti Savolainen <matti@applifier.com>
Date:   Wed Oct 19 13:31:55 2016 +0300

    formating and text fixes, adjust regexp

commit 163d5a897707066add272e57b0b55c4b862d6d12
Author: Dominik Schulz <dominik.schulz@gmail.com>
Date:   Wed Oct 19 11:20:00 2016 +0200

    Add EC2 SD metrics (#2095)
    
    * Add EC2 SD metrics
    
    * Address review comments

commit 56907ba6e33646d6db9d2b76fbbf229879d8e4b4
Author: Matti Savolainen <matti@unity3d.com>
Date:   Wed Oct 19 01:19:19 2016 +0300

    Add interpolation to good test config. Fix regex

commit 7a36af1c852777f265e125459639318f61717196
Author: Matti Savolainen <matti@unity3d.com>
Date:   Wed Oct 19 00:42:49 2016 +0300

    add comment about interpolation

commit 3b8e7c1277992fe549b622c21dce2ef84a5cd8e7
Merge: 5a1e909 d93f738
Author: Matti Savolainen <matti@unity3d.com>
Date:   Wed Oct 19 00:33:52 2016 +0300

    Merge branch 'master' of https://github.com/prometheus/prometheus into bug/target_label_unmarshal

commit 5a1e909b5d8a63421556e98347d3cbeba4384d26
Author: Matti Savolainen <matti@unity3d.com>
Date:   Wed Oct 19 00:33:22 2016 +0300

    Make TargetLabel in RelabelConfig a string

commit d93f73874f71288f26142f5264eae4585f14642b
Merge: 3c8140f 182e179
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Oct 18 22:46:03 2016 +0200

    Merge pull request #2093 from dominikschulz/spelling
    
    Trivial spelling corrections

commit 182e17958ab53c9f27d4f01692d3abfd2e25de61
Author: Dominik Schulz <dominik.schulz@gauner.org>
Date:   Tue Oct 18 20:14:38 2016 +0200

    Trivial spelling corrections and a small comment.

commit 721ed3fb41871453125170c323b1469a2edc36bf
Author: Victor Palma <palma.victor@gmail.com>
Date:   Tue Oct 18 09:46:11 2016 -0500

    run as prometheus user insted of root

commit 3c8140f2e6e3b84b58e5787a4e7a6250c01e2177
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Oct 18 16:20:26 2016 +0200

    kubernetes: fix typo in endpoint switch case

commit ac702f66eb8fa51cf0edd8429457cb6c3a1f353b
Merge: 01b53c1 228bfc1
Author: bekbulatov <alexander@bekbulatov.ru>
Date:   Tue Oct 18 14:14:24 2016 +0100

    Resolve merge conflicts

commit 228bfc1bb55cf9444c7f66ed9cd51f04d4013626
Merge: b10879a 1b6dfa3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 17 20:09:22 2016 +0200

    Merge pull request #2040 from prometheus/kubernetes
    
    Add K8S v2 pod discovery

commit b10879a45028abff0f4ed1753f6bfa97966a934f
Merge: bfa7099 bdaf0ec
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Oct 17 14:52:30 2016 +0200

    Merge pull request #2078 from Nomon/master
    
    Add support for interpolating target_label

commit 1b6dfa32a97c5bdcbc4c9ba2bb9491f407302cae
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 17 11:50:54 2016 +0200

    config: rename role 'endpoint' to 'endpoints'

commit ce45040e47e0bddd576f4d79e143e3354d9b5c23
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 17 11:05:13 2016 +0200

    kubernetes: fix missing port labels
    
    This commit fixes endpoint port labeling, adjusts tests accordingly
    and enhances test delta printing

commit 1df905ea421671d3109b1bcf2a56d9c4a8e9a509
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 17 11:04:52 2016 +0200

    vendor: add testing require dependencies

commit 8f576a85108f9ad1a1d0c2fff92dc09314096d56
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Fri Oct 14 17:16:06 2016 +0200

    retrieval: add kubernetes endpoint discovery tests

commit 08fa4eaa9244deed533b161634eb7bf059e65eb1
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu Oct 13 15:36:15 2016 +0200

    retrieval: add kubernetes pod discovery tests

commit 3762e39ce51d0f3e7d6bc0cd1cec09c46cc211db
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Thu Oct 13 14:04:23 2016 +0200

    retrieval: add kubernetes service discovery tests

commit 397072a4827b9b7081ddb059c0d312cad70e7659
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Wed Oct 12 15:23:39 2016 +0200

    retrieval: add kubernetes node discovery tests

commit cc4605880281f21db6ae1ca9d23483dbb168a058
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Wed Oct 12 15:23:11 2016 +0200

    retrieval: kubernetes nodes are not namespaced

commit a318d9ad27683cc5d9899ba552151004c149fea9
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Tue Oct 11 09:22:56 2016 +0200

    retrieval: fix pod label and annotation prefixes

commit 2e18c81a00555fce569f7d72ed481689bd669b76
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Oct 10 12:42:01 2016 +0200

    config: adapt unit tests

commit b24602f713d5268473e9d5abe744d6b6160f3651
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 7 14:53:11 2016 +0200

    kubernetes: merge back into single configuration

commit a9cfb66b2849497356b0b3dac78d506d907dc6f9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 7 13:33:04 2016 +0200

    kubernetes: add node discovery

commit d896a654f986caedcbf33829003629945ceec05a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 6 16:28:59 2016 +0200

    kubernetes: Add discovery of services

commit 6d269ed87087392d947f4e4fa40c480e4c14a9fd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 30 14:18:49 2016 +0200

    kubernetes: infer pod information in endpoints discovery

commit 7c439a90608d8347cccd0d1f6738486b9ec72fe8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 30 11:33:23 2016 +0200

    kubernetes: use and vendor 1.5 client

commit de22524e57c398fc219727ab53fa9243257ed526
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 30 10:42:07 2016 +0200

    kubernetes: add KubernetesV2 endpoints

commit 2331701b505db961e23a36c2ab07da6159dd244b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 28 19:29:55 2016 +0200

    kubernetes: Add K8S v2 pod discovery
    
    This adds plumbing for a parallel version of the new K8S SD
    and adds pod discovery as the first role.

commit bfa70996161835100a460a752abbd56d8e620f4d
Author: Dominik Schulz <dominik.schulz@gmail.com>
Date:   Mon Oct 17 09:45:43 2016 +0200

    Report GCE instance metdata (#2084)
    
    * Report GCE instance metdata
    
    * Fix spelling acording to code review guidelines
    
    * Address review comments

commit 50f8e35c54b7c4035f3267e9b106f4523d4a18bf
Author: Or Cohen <orc@fewbytes.com>
Date:   Mon Oct 17 10:37:11 2016 +0300

    Add fuzzy search to /graph textarea (#2081)
    
    * Add fuzzy search to /graph textarea
    
    We have a few thousands different metrics and looking up some of them
    can be quite annoying with the simple string matching.
    
    This patch adds a fuzzy search to the textarea lookup box on the /graph
    page. It uses a small neat library from github.com/mattyork/fuzzy.
    
    * Add fuzzy lib to NOTICE and re-build assets
    
    Previously built assets changed the mode.

commit 630b96c5f35a70a15fb2623a34c197800edc7f35
Merge: 5238a68 8fa18d5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Oct 16 10:48:51 2016 +0200

    Merge pull request #2079 from prometheus/fabxc-storage
    
    storage: enhance Querier interface usage

commit 8fa18d564a85bc6e7c6c977e02f29a1cccd8f3c7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Oct 12 19:34:22 2016 +0200

    storage: enhance Querier interface usage
    
    This extracts Querier as an instantiateable and closeable object
    rather than just defining extending methods of the storage interface.
    This improves composability and allows abstracting query transactions,
    which can be useful for transaction-level caches, consistent data views,
    and encapsulating teardown.

commit 5238a6845e3f7d8a2a5b655901425e6b54d305f8
Merge: 4f96d28 b76d59e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 13 08:25:32 2016 +0200

    Merge pull request #2080 from sman591/ui-aborted-requests
    
    ui: don’t consider aborted requests complete

commit b76d59e68bd6a75dd6072e325244553d2dc04149
Author: Stuart Olivera <stuart@stuartolivera.com>
Date:   Wed Oct 12 17:05:50 2016 -0700

    ui: don’t consider aborted requests complete
    
    If an existing request is aborted due to a new request, ignore the completion of the initial request.
    
    Example:
    1. Chrome dev tools: enable 5 second network latency
    2. Execute query
    3. A second later, execute the query again
    4. Currently, the spinner will hide, and the stats will immediately display, as if the request had completed. Instead, the spinner and stats should wait until the 2nd execution finishes.

commit 4f96d28e607ea7dfc350c822173fe7e57e7f6283
Author: Matthias Rampke <mr@soundcloud.com>
Date:   Wed Oct 12 12:45:47 2016 +0200

    Always show instance label on target page. (#2062)

commit bdaf0ec6a2210ac93e0addc7b67d524ce5e1c182
Author: Matti Savolainen <matti@unity3d.com>
Date:   Tue Oct 11 22:00:14 2016 +0300

    simplify regex

commit 23be3dab53a1815e61ba00ba6d96f112901832b5
Author: Matti Savolainen <matti@unity3d.com>
Date:   Tue Oct 11 21:54:33 2016 +0300

    test label name validation

commit 8f77d271b15d4f8a9416181f1efd09e364f9cf52
Author: Matti Savolainen <matti@unity3d.com>
Date:   Tue Oct 11 21:48:03 2016 +0300

    validate the label name

commit 56e8e7cac3c2e37af5e7762e17e635245591e43b
Author: Matti Savolainen <matti@unity3d.com>
Date:   Tue Oct 11 21:01:22 2016 +0300

    Allow target_label to be expanded in replace label

commit ec203a23e27e7a168f1c4dbb5b0b6201c1e757ee
Merge: dd66f2e f383786
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Oct 11 16:32:06 2016 +0200

    Merge pull request #2077 from prometheus/beorn7/build
    
    promu: Use default Go version again

commit 274d008fbf1dfab652757bb0338c4b79b42d83de
Merge: 492eac9 f383786
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Oct 11 16:29:55 2016 +0200

    Merge pull request #2074 from prometheus/beorn7/build
    
    promu: Use default Go version again

commit f3837864f6940d9456014ffc743a65c0f4f46dd3
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Oct 11 11:42:05 2016 +0200

    promu: Use default Go version again
    
    The default is Go1.7.1 now.

commit 492eac96d5f638905053d0877afb554a1a9ec0e7
Merge: b66ce9c dd66f2e
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Oct 10 17:59:58 2016 +0200

    Merge branch 'release-1.2'

commit dd66f2e94b2b662804b9aa1b6a50587b990ba8b7
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Oct 10 17:53:50 2016 +0200

    Fix go version spec in .promu.yml

commit b66ce9c5cd4a0cc624d9d29da9c6733d1236f382
Merge: a728f19 dc52a85
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Oct 10 17:10:14 2016 +0200

    Merge branch 'release-1.2'

commit dc52a852ddfa815a150e243f01d73463e113c38c
Merge: 5ec9869 ddcd92b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Oct 10 17:04:28 2016 +0200

    Merge pull request #2072 from prometheus/beorn7/release
    
    Cut v1.2.1

commit ddcd92b76cab730b1d7cf22de7602cc617f5ae06
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Oct 10 16:54:19 2016 +0200

    Cut v1.2.1

commit dc0ad8ee341fd7533e0fca6888fa862be33ffc26
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Oct 10 17:02:36 2016 +0200

    Use Go1.7.1 with Promu

commit 3f02e33e34e2c312db7bbe5ab7b991046f452c23
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Oct 10 16:30:10 2016 +0200

    Re-add counting of evict chunk ops and decrementing NumMemChunks
    
    Also, modify test to expose the regression.

commit ab870ac6534114384c634037b6dfccdf01c83d04
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 6 21:53:40 2016 +0200

    Clean up some doc comments

commit 5ec9869463b3928f7aa61bb3233fc394ff004efa
Merge: 522c933 7195087
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Oct 10 16:48:13 2016 +0200

    Merge pull request #2071 from prometheus/beorn7/storage
    
    Re-add counting of evict chunk ops and decrementing NumMemChunks

commit 719508752b190a7c08da29b63e90fbb2fd4fde4a
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Oct 10 16:30:10 2016 +0200

    Re-add counting of evict chunk ops and decrementing NumMemChunks
    
    Also, modify test to expose the regression.

commit a728f193de0ecc1f744a76730b10ec5b2314a159
Merge: 008dd20 c73aa82
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sat Oct 8 08:32:47 2016 +0100

    Merge pull request #2063 from dominikschulz/gce_instance_status
    
    Add GCE Instance Status

commit 008dd20d7a546ffb103b3775a40aa75491e09c49
Merge: 0cf8586 72cbf8a
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sat Oct 8 08:30:41 2016 +0100

    Merge pull request #2064 from dominikschulz/gce_copy
    
    Fix small copy and paste error

commit 72cbf8af6fe480cd69765b08c49458bb2d02ce3f
Author: Dominik Schulz <dominik.schulz@gauner.org>
Date:   Sat Oct 8 08:49:00 2016 +0200

    Fix small copy and paste error

commit c73aa8258970666abc331156182af0b50fcab841
Author: Dominik Schulz <dominik.schulz@gauner.org>
Date:   Sat Oct 8 08:40:12 2016 +0200

    Add GCE Instance Status

commit 0cf8586136cda8b35405595644eaca1c33f636b6
Merge: 05d3d6d 522c933
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Oct 7 14:42:31 2016 +0200

    Merge pull request #2059 from prometheus/release-1.2
    
    Cut v1.2.0

commit 522c93361459686fe3687f5ffe68c2ee34ea5c8e
Merge: d8cbac1 05d3d6d
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 7 14:41:50 2016 +0200

    Merge branch 'master' into release-1.2

commit 01b53c1180dd9e484806a1ea2fbbd96d97dad86e
Author: bekbulatov <alexander@bekbulatov.ru>
Date:   Thu Sep 29 13:57:28 2016 +0100

    Add tls support

commit d8cbac1225c2b7b39a7ab776c8724dfbcf1b257f
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Oct 7 13:39:46 2016 +0200

    Abbreviate CHANGELOG.md entry for 1.2.0
    
    It now follows the policy of only documenting user-relevant changes.

commit 05d3d6d9f72ad02ec27077f2686b4b17d76b9f76
Merge: 2844a8c cb02f01
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Oct 6 23:16:05 2016 +0200

    Merge pull request #2060 from prometheus/cleanup-comments
    
    Clean up some doc comments

commit cb02f017ee7863a6934e138d9c7db844578012d9
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 6 21:53:40 2016 +0200

    Clean up some doc comments

commit 836c61e1daa378c17ac0b65d9f3cac97f993172f
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Oct 6 21:28:51 2016 +0200

    Cut v1.2.0

commit 2844a8c7b547b674994927bd25c4bfb75c6761a0
Merge: 0dbcf55 c212ef0
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Oct 6 16:36:25 2016 +0200

    Merge pull request #2055 from prometheus/utilization
    
    Add Chunk.Utilization() methods

commit c212ef03265262ecc61c370b27468c4c0af7fcca
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 5 20:32:55 2016 +0200

    Add Chunk.Utilization() methods
    
    When using the chunking code in other projects (both Weave Prism and
    ChronixDB ingester), you sometimes want to know how well you are
    utilizing your chunks when closing/storing them.

commit 0dbcf55bd27284afbc474da20ba8e942185430eb
Merge: ee8e8d1 c7932aa
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Oct 5 17:56:25 2016 +0200

    Merge pull request #2054 from prometheus/remove-grpc-leftovers
    
    Remove gRPC leftovers in protobuf definitions

commit ee8e8d1d31e5a86b0727ab058c0b14bd94b12dfa
Merge: 1e2f03f b516335
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Oct 5 17:53:45 2016 +0200

    Merge pull request #2053 from prometheus/fix-remote-write-example
    
    Simplify and fix remote write example

commit b5163351bfe88fed99ad0598a91d58f15fa7d939
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 5 17:46:51 2016 +0200

    Simplify and fix remote write example
    
    After removing gRPC, this can be simplified again. Also, the
    configuration for the remote storage moved from flags to the config
    file.

commit c7932aa009f820ce74934d769f704887173d784e
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 5 17:31:04 2016 +0200

    Remove gRPC leftovers in protobuf definitions

commit 1e2f03f668ef66ba2a895127be5c0048040a8b13
Merge: 6e8f87a e6db9f8
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Oct 5 17:26:56 2016 +0200

    Merge pull request #2005 from redbaron/microoptimise-matching
    
    Microoptimise matching

commit e6db9f81594507ee954d452a5a65416a395718f8
Author: Maxim Ivanov <ivanov.maxim@gmail.com>
Date:   Sun Sep 18 12:20:46 2016 +0100

    New fpsForLabelMatchers and seriesForLabelMatchers methods
    
    These more specific methods have replaced `metricForLabelMatchers`
    in cases where its  `map[fingerprint]metric` result type was
    not necessary or was used as an intermediate step
    
    Avoids duplicated calls to `seriesForRange` from
    `QueryRange` and `QueryInstant` methods.

commit 6e8f87a37fd3a665d8aee694f60433af15a9e03b
Merge: 9172728 7760564
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Oct 5 07:47:49 2016 +0100

    Merge pull request #2047 from prometheus/write-relabel
    
    Add support for remote write relabelling.

commit 77605649a93a3ab1671470c65edfc232eb3c64ec
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Oct 1 16:42:43 2016 +0100

    Add support for remote write relabelling.
    
    Switch back to a single remote writer, as we were only ever meant to
    have one and the relabel semantics are clearer that way.

commit 91727281252c935522f61fec2329c049331976b7
Merge: f07e676 c9d4526
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 3 11:36:25 2016 +0200

    Merge pull request #2050 from prometheus/unpublish-series-methods
    
    Unpublish accidentally published series methods

commit f07e67650e667feaf6457250dadbb31879e977c5
Merge: c0889fd 4f79072
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Oct 3 12:06:46 2016 +0300

    Merge pull request #2049 from prometheus/ctxfn-error
    
    Update common/route vendoring for contextFn errors

commit c9d4526428237feba95eb9756637b290d24386fe
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 3 00:04:56 2016 +0200

    Unpublish accidentally published series methods
    
    There were some more accidentally published methods of the memorySeries
    type which I didn't notice when reviewing https://github.com/prometheus/prometheus/pull/2011

commit 4f79072fd1e67b1626f6b2d3e8a0428fd9494154
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun Oct 2 23:04:03 2016 +0200

    Update common/route vendoring for contextFn errors

commit c0889fd92eb903dc54783229ac4add758a0da510
Merge: 32d29f8 c25f0de
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Oct 2 20:48:08 2016 +0200

    Merge pull request #2032 from prometheus/separate-chunk-package
    
    storage: separate chunk package, publish more names

commit 4978a65495e8e055e9869e97feceb2896adac5fb
Author: Maxim Ivanov <ivanov.maxim@gmail.com>
Date:   Sun Sep 18 11:37:17 2016 +0100

    Extract initial FP candidate build logic into candidateFPsForLabelMatchers method
    
    No functional changes otherwise

commit c048a0cde874bb6ac037e6d476068b4863739926
Author: Maxim Ivanov <ivanov.maxim@gmail.com>
Date:   Sun Sep 18 11:03:00 2016 +0100

    Add metrics to result after checking all matchers
    
    Should be marginally faster and somewhat more GC friendly

commit bedc0eda1f25e61db2d78407ca67708ce1f4dd28
Author: Maxim Ivanov <ivanov.maxim@gmail.com>
Date:   Sun Sep 18 22:58:39 2016 +0100

    Added BenchmarkQueryRange

commit 32d29f8dbcc062ecaacf3e940ab6c986302620be
Merge: 0c64ad1 ccbce0c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 30 11:18:46 2016 +0200

    Merge pull request #2044 from prometheus/changes-nan
    
    promql: handle NaN in changes() correctly

commit ccbce0c51f05751c7432a3a281fe98587ffa3a1c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 30 10:46:58 2016 +0200

    promql: handle NaN in changes() correctly

commit c25f0de5aefc85f396681951f0e45c3305a1090d
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 28 23:40:26 2016 +0200

    Remove local.ZeroSample{,Pair}, use model definitions

commit 50b5837a63b85b5c78f98be07ad7fec27017a237
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 28 23:25:32 2016 +0200

    Update github.com/prometheus/common/model vendoring

commit 044ebce7792baaec10a6c936aba40785b90c95b7
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 28 23:33:34 2016 +0200

    Review fixups.

commit 0c64ad1a3db954a6ec97a7690457353d33c4ce54
Merge: 00f5e54 f92532f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Sep 28 14:38:39 2016 +0200

    Merge pull request #2012 from prometheus/context-consolidation
    
    api: Consolidate web API contexts

commit 00f5e5470e24abe0eb56cb137db0877b30895445
Merge: 0baab6a 572423c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Sep 27 14:43:41 2016 +0200

    Merge pull request #2035 from brancz/external-relabelling
    
    notifier: attach external labels before relabelling

commit 572423cbe5716bd109eb5e1d35cddca5a19d3a80
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Tue Sep 27 14:34:56 2016 +0200

    notifier: attach external labels before relabelling
    
    By attaching external labels before relabelling, they are available
    during relabelling.

commit 0baab6a88c737fc8f3e55c446d6c9b16dae9350b
Merge: 42c05dd db63a4b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 27 11:09:12 2016 +0200

    Merge pull request #2034 from roman-vynar/consul-tolerance
    
    Do not fail Consul discovery on Prometheus startup when Consul is down.

commit db63a4bd2a3ca00831815aadc967c31440c0002b
Author: Roman Vynar <roman.vynar@percona.com>
Date:   Mon Sep 26 22:20:56 2016 +0300

    Do not fail Consul discovery on Prometheus startup when Consul is down.

commit d30a3c7c0fd8b0d6bba0aa9c411dfe677562ccbe
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Sep 26 13:06:06 2016 +0200

    Fix accidental publishing of memorySeries.firstTime()

commit ab80ced756e5ada81783ae602b5c696ec10c6845
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 21 23:44:27 2016 +0200

    storage: separate chunk package, publish more names
    
    This is a followup to https://github.com/prometheus/prometheus/pull/2011.
    
    This publishes more of the methods and other names of the chunk code and
    moves the chunk code to its own package. There's some unavoidable
    ugliness: the chunk and chunkDesc metrics are used by both packages, so
    I had to move them to the chunk package. That isn't great, but I don't
    see how to do it better without a larger redesign of everything. Same
    for the evict requests and some other types.

commit 42c05dd3a2e847b5329470a6a0d380b09cf3ca13
Merge: 57b358b 67d76e3
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Sep 23 14:45:35 2016 +0200

    Merge pull request #2011 from mattkanwisher/chuck-public
    
    Make Chunk and ChunkIterator public for reuse

commit 57b358b82a91705bd57bfc7940329bd544de6c5a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 23 01:06:51 2016 +0200

    vendor: update govalidator (#2023)
    
    Fixes #2022

commit 5e57fa85c05517a241e4cc59b6cba35e6f828e98
Merge: 71b3322 926a5ab
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 22 19:30:56 2016 +0200

    Merge pull request #2016 from mattbostock/fix_race_between_reload_and_stop
    
    rules/manager.go: Fix race between reload and stop

commit 71b332278d11fe723000a29a17f31811abcf32ab
Merge: 2ee00b4 ca98382
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 22 18:12:21 2016 +0200

    Merge pull request #2021 from prometheus/beorn7/storage
    
    Avoid `defer` in seriesMap.get

commit ca98382943093e1997bf5911757076acadedbe75
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 22 17:49:22 2016 +0200

    Avoid `defer` in seriesMap.get
    
    This is related to https://github.com/golang/go/issues/14939 .
    It's probably the only occurrence where it matters.

commit 2ee00b4461b0a53cc8225400c49626dca2248aa9
Merge: e5c633e f6fbcf9
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Sep 22 14:57:19 2016 +0100

    Merge pull request #2019 from dominikschulz/ec2state
    
    Expose ec2_instance_state

commit f6fbcf9aa26c4dbeb1f217f10e75c5bf0fb436c3
Author: Dominik Schulz <dominik.schulz@justwatch.com>
Date:   Thu Sep 22 15:01:23 2016 +0200

    Expose ec2_instance_state

commit e5c633ed14a006effd3e162a4a2e30da1c5902e7
Merge: 4520e12 dd98766
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 21 23:41:06 2016 +0200

    Merge pull request #2015 from mattbostock/fix_typo
    
    cmd/prometheus/main.go: Fix typo in comment

commit 926a5ab3dd77afc57729d1258fd51723dd2ca60e
Author: Matt Bostock <matt@mattbostock.com>
Date:   Wed Sep 21 22:03:02 2016 +0100

    rules/manager.go: Fix race between reload and stop
    
    On one relatively large Prometheus instance (1.7M series), I noticed
    that upgrades were frequently resulting in Prometheus undergoing crash
    recovery on start-up.
    
    On closer examination, I found that Prometheus was panicking on
    shutdown.
    
    It seems that our configuration management (or misconfiguration thereof)
    is reloading Prometheus then immediately restarting it, which I suspect
    is causing this race:
    
        Sep 21 15:12:42 host systemd[1]: Reloading prometheus monitoring system.
        Sep 21 15:12:42 host prometheus[18734]: time="2016-09-21T15:12:42Z" level=info msg="Loading configuration file /etc/prometheus/config.yaml" source="main.go:221"
        Sep 21 15:12:42 host systemd[1]: Reloaded prometheus monitoring system.
        Sep 21 15:12:44 host systemd[1]: Stopping prometheus monitoring system...
        Sep 21 15:12:44 host prometheus[18734]: time="2016-09-21T15:12:44Z" level=warning msg="Received SIGTERM, exiting gracefully..." source="main.go:203"
        Sep 21 15:12:44 host prometheus[18734]: time="2016-09-21T15:12:44Z" level=info msg="See you next time!" source="main.go:210"
        Sep 21 15:12:44 host prometheus[18734]: time="2016-09-21T15:12:44Z" level=info msg="Stopping target manager..." source="targetmanager.go:90"
        Sep 21 15:12:52 host prometheus[18734]: time="2016-09-21T15:12:52Z" level=info msg="Checkpointing in-memory metrics and chunks..." source="persistence.go:548"
        Sep 21 15:12:56 host prometheus[18734]: time="2016-09-21T15:12:56Z" level=warning msg="Error on ingesting out-of-order samples" numDropped=1 source="scrape.go:467"
        Sep 21 15:12:56 host prometheus[18734]: time="2016-09-21T15:12:56Z" level=error msg="Error adding file watch for \"/etc/prometheus/targets\": no such file or directory" source="file.go:84"
        Sep 21 15:12:56 host prometheus[18734]: time="2016-09-21T15:12:56Z" level=error msg="Error adding file watch for \"/etc/prometheus/targets\": no such file or directory" source="file.go:84"
        Sep 21 15:13:01 host prometheus[18734]: time="2016-09-21T15:13:01Z" level=info msg="Stopping rule manager..." source="manager.go:366"
        Sep 21 15:13:01 host prometheus[18734]: time="2016-09-21T15:13:01Z" level=info msg="Rule manager stopped." source="manager.go:372"
        Sep 21 15:13:01 host prometheus[18734]: time="2016-09-21T15:13:01Z" level=info msg="Stopping notification handler..." source="notifier.go:325"
        Sep 21 15:13:01 host prometheus[18734]: time="2016-09-21T15:13:01Z" level=info msg="Stopping local storage..." source="storage.go:381"
        Sep 21 15:13:01 host prometheus[18734]: time="2016-09-21T15:13:01Z" level=info msg="Stopping maintenance loop..." source="storage.go:383"
        Sep 21 15:13:01 host prometheus[18734]: panic: close of closed channel
        Sep 21 15:13:01 host prometheus[18734]: goroutine 7686074 [running]:
        Sep 21 15:13:01 host prometheus[18734]: panic(0xba57a0, 0xc60c42b500)
        Sep 21 15:13:01 host prometheus[18734]: /usr/local/go/src/runtime/panic.go:500 +0x1a1
        Sep 21 15:13:01 host prometheus[18734]: github.com/prometheus/prometheus/rules.(*Manager).ApplyConfig.func1(0xc6645a9901, 0xc420271ef0, 0xc420338ed0, 0xc60c42b4f0, 0xc6645a9900)
        Sep 21 15:13:01 host prometheus[18734]: /home/build/packages/prometheus/tmp/build/gopath/src/github.com/prometheus/prometheus/rules/manager.go:412 +0x3c
        Sep 21 15:13:01 host prometheus[18734]: created by github.com/prometheus/prometheus/rules.(*Manager).ApplyConfig
        Sep 21 15:13:01 host prometheus[18734]: /home/build/packages/prometheus/tmp/build/gopath/src/github.com/prometheus/prometheus/rules/manager.go:423 +0x56b
        Sep 21 15:13:03 host systemd[1]: prometheus.service: main process exited, code=exited, status=2/INVALIDARGUMENT

commit dd98766b32704adb5d9ce2bac52ecdcac73b5932
Author: Matt Bostock <matt@mattbostock.com>
Date:   Wed Sep 21 21:59:25 2016 +0100

    cmd/prometheus/main.go: Fix typo in comment

commit 67d76e3a5db28ebf1ec040d2a92eeba945160a61
Author: Matthew Campbell <hyper@hyperworks.nu>
Date:   Wed Sep 21 17:56:55 2016 +0200

    timeseries: store varbit encoded data into cassandra

commit f92532f254f36483fc10b9b22344cd47f947cd5d
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 21 03:05:35 2016 +0200

    api: Consolidate web API contexts
    
    This is based on the common/route changes in
    https://github.com/prometheus/common/pull/61.

commit 766074568e797280c4f0621fd3b24536ddfa28fa
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 21 02:51:34 2016 +0200

    Update vendoring of github.com/prometheus/common/route

commit 4520e124403b234ef973636dc4c17e197ad423b4
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Mon Sep 19 21:47:51 2016 +0100

    Add HTTP Basic Auth & TLS support to the generic write path. (#1957)
    
    * Add config, HTTP Basic Auth and TLS support to the generic write path.
    
    - Move generic write path configuration to the config file
    - Factor out config.TLSConfig -> tlf.Config translation
    - Support TLSConfig for generic remote storage
    - Rename Run to Start, and make it non-blocking.
    - Dedupe code in httputil for TLS config.
    - Make remote queue metrics global.

commit 6dda28dbd48bf163160bf129225fb7a01384a785
Merge: c9c2663 c187308
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Sep 19 16:31:12 2016 +0200

    Merge pull request #2000 from prometheus/contextify-storage
    
    Contextify storage and PromQL interfaces.

commit c18730836689652d38999e55acaa332f04f09d6d
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 16 00:58:06 2016 +0200

    storage: Contextify storage interfaces.
    
    This is based on https://github.com/prometheus/prometheus/pull/1997.
    
    This adds contexts to the relevant Storage methods and already passes
    PromQL's new per-query context into the storage's query methods.
    The immediate motivation supporting multi-tenancy in Frankenstein, but
    this could also be used by Prometheus's normal local storage to support
    cancellations and timeouts at some point.

commit ed5a0f0abeeb3c313c8fbc4472cf620dfb8331d1
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Sep 15 13:52:50 2016 +0200

    promql: Allow per-query contexts.
    
    For Weaveworks' Frankenstein, we need to support multitenancy. In
    Frankenstein, we initially solved this without modifying the promql
    package at all: we constructed a new promql.Engine for every
    query and injected a storage implementation into that engine which would
    be primed to only collect data for a given user.
    
    This is problematic to upstream, however. Prometheus assumes that there
    is only one engine: the query concurrency gate is part of the engine,
    and the engine contains one central cancellable context to shut down all
    queries. Also, creating a new engine for every query seems like overkill.
    
    Thus, we want to be able to pass per-query contexts into a single engine.
    
    This change gets rid of the promql.Engine's built-in base context and
    allows passing in a per-query context instead. Central cancellation of
    all queries is still possible by deriving all passed-in contexts from
    one central one, but this is now the responsibility of the caller. The
    central query context is now created in main() and passed into the
    relevant components (web handler / API, rule manager).
    
    In a next step, the per-query context would have to be passed to the
    storage implementation, so that the storage can implement multi-tenancy
    or other features based on the contextual information.

commit c9c2663a541125cf90aacd80059f610efd475458
Merge: 5f5a78e bdc5309
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Sep 19 00:40:03 2016 +0200

    Merge pull request #2004 from redbaron/no-false-sharing
    
    Avoid having contended mutexes on same cacheline

commit bdc53098fca3f0a0eb9eab00c2d70b4b792c8e95
Author: Maxim Ivanov <ivanov.maxim@gmail.com>
Date:   Sun Sep 18 08:37:55 2016 +0100

    Avoid having contended mutexes on same cacheline
    
    CPUs have to serialise write access to a single cache line
    effectively reducing level of possible parallelism. Placing
    mutexes on different cache lines avoids this problem.
    
    Most gains will be seen on NUMA servers where CPU interconnect
    traffic is especially expensive
    
    Before:
    go test . -run none -bench BenchmarkFingerprintLocker
    BenchmarkFingerprintLockerParallel-4   	 2000000	       932 ns/op
    BenchmarkFingerprintLockerSerial-4     	30000000	        49.6 ns/op
    
    After:
    go test . -run none -bench BenchmarkFingerprintLocker
    BenchmarkFingerprintLockerParallel-4   	 3000000	       569 ns/op
    BenchmarkFingerprintLockerSerial-4     	30000000	        51.0 ns/op

commit 5f5a78e807c3609eac48f2a7bb5daa003bc10b3a
Merge: 0619926 b24e5d6
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Sep 17 18:40:01 2016 +0200

    Merge pull request #1974 from prometheus/disable-local-storage
    
    Allow disabling local storage.

commit 06199268b5ec1fa5be5e9a9d9daa8bfb47e6b308
Merge: a9b96be 4fc619b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Sep 17 14:41:27 2016 +0200

    Merge pull request #2003 from mattbostock/remove_json_from_accept
    
    Scrape: Remove JSON from Accept request header

commit 4fc619b605a24c72b8b3423e62a660e54d2513e8
Author: Matt Bostock <matt@mattbostock.com>
Date:   Sat Sep 17 10:28:03 2016 +0100

    Scrape: Remove JSON from Accept request header
    
    JSON is no longer supported as an exposition format [1] [2] [3]. Remove
    it from the `Accept` header added to requests when scraping targets.
    
    [1]: https://github.com/prometheus/prometheus/blob/master/CHANGELOG.md#100--2016-07-18
    [2]: https://prometheus.io/docs/instrumenting/exposition_formats/#historical-versions
    [3]: https://docs.google.com/document/d/1ZjyKiKxZV83VI9ZKAXRGKaUKK2BIWCT7oiGBKDBpjEY/edit?usp=sharing

commit a9b96be3fdb49593c47bc827e43f538990aa6ddc
Merge: 5ac89fb 2e9de70
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Sep 17 00:26:09 2016 +0200

    Merge pull request #2002 from grandbora/graphPageUrlClientSideMigration
    
    Graph page url client side migration

commit 2e9de702675b80ededfd1d8a6d7223d5b0a63bd5
Author: Bora Tunca <bora@soundcloud.com>
Date:   Fri Sep 16 17:02:01 2016 -0400

    generate assets

commit 44377dc458027cb1f85f374001956557fd5416e0
Author: Bora Tunca <bora@soundcloud.com>
Date:   Fri Sep 16 17:01:21 2016 -0400

    Add backward compatibility to old query format

commit 5ac89fbc1f63d923abc44491bcbf2ca7bf1b7431
Merge: 874cb44 3730255
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Sep 16 20:48:04 2016 +0100

    Merge pull request #1985 from tommyulfsparre/resync
    
    Resync state after ZooKeeper failure

commit 874cb44bb6fa3808838de6f1ea04424af3265002
Merge: 1f2785e 1aa8898
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Sep 16 11:08:52 2016 -0400

    Merge pull request #1996 from ton31337/Fix/allow_numbers_as_first_letter
    
    Allow number to be the first letter as well for `job_name`

commit 1f2785ebb733e8813e93b6279b37a583e5b17581
Merge: 304f971 ac374aa
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Sep 16 16:33:28 2016 +0200

    Merge branch 'release-1.1'

commit ac374aa6748e1382dbeb72a00abf47d982ee8fff
Merge: 3eef959 f4656ac
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Sep 16 13:33:59 2016 +0200

    Merge pull request #2001 from prometheus/beorn7/release
    
    Cut v1.1.3

commit f4656acd1feb8b34e1598b87f0da48f4143c6e29
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Sep 16 13:08:16 2016 +0200

    Cut v1.1.3

commit 1aa8898b6649527a16fbdeffea19894ea9092431
Merge: 4f7e6e8 b41a240
Author: Donatas Abraitis <donatas.abraitis@gmail.com>
Date:   Thu Sep 15 08:00:14 2016 +0200

    Allow number to be the first letter as well for `job_name`

commit 304f971e3ea1b6f550b7fe70696207ed83724dd5
Merge: 4b85097 3b546d0
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Sep 16 03:11:51 2016 -0400

    Merge pull request #1769 from gottwald/gce-discovery
    
    GCE discovery

commit 3b546d061f924232f840416e54761c3ec50f26a6
Author: Ingo Gottwald <in.gottwald@gmail.com>
Date:   Tue Jun 28 15:15:37 2016 +0200

    Add support for GCE discovery

commit fefcd6eef2c6a5843924ae4636deef1782505aeb
Author: Ingo Gottwald <in.gottwald@gmail.com>
Date:   Tue Jun 28 15:10:06 2016 +0200

    Add deps for google cloud support

commit 4b850970a26f98407b2f949ed49468db221b8da1
Merge: 099adab 92d60ba
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Sep 15 19:12:15 2016 -0400

    Merge pull request #1999 from prometheus/print-promu
    
    Add promu installation logging to Makefile

commit 099adab253d0dffc940f2befad7f068fe60366f7
Merge: bcd43e8 d838792
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Sep 16 01:01:47 2016 +0200

    Merge pull request #1987 from tomwilkie/1982-die-grpc-die
    
    Switch back to protos over HTTP, instead of grpc.

commit 92d60ba4c05b9cdbeb61216db3a87968f1e00119
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 16 00:58:18 2016 +0200

    Add promu installation logging to Makefile
    
    Due to bad GitHub connectivity, "make" frequently got stuck at the promu
    step for me, and I was thinking that "format" was taking a long time
    because the promu step wasn't logged. All other Makefile targets have
    log statements...

commit d83879210cb250772d4b42e386cb6c4734b3ebef
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Sep 15 23:16:03 2016 +0100

    Switch back to protos over HTTP, instead of GRPC.
    
    My aim is to support the new grpc generic write path in Frankenstein.  On the surface this seems easy - however I've hit a number of problems that make me think it might be better to not use grpc just yet.
    
    The explanation of the problems requires a little background.  At weave, traffic to frankenstein need to go through a couple of services first, for SSL and to be authenticated.  So traffic goes:
    
        internet -> frontend -> authfe -> frankenstein
    
    - The frontend is Nginx, and adds/removes SSL.  Its done this way for legacy reasons, so the certs can be managed in one place, although eventually we imagine we'll merge it with authfe.  All traffic from frontend is sent to authfe.
    - Authfe checks the auth tokens / cookie etc and then picks the service to forward the RPC to.
    - Frankenstein accepts the reads and does the right thing with them.
    
    First problem I hit was Nginx won't proxy http2 requests - it can accept them, but all calls downstream are http1 (see https://trac.nginx.org/nginx/ticket/923).  This wasn't such a big deal, so it now looks like:
    
        internet --(grpc/http2)--> frontend --(grpc/http1)--> authfe --(grpc/http1)--> frankenstein
    
    Next problem was golang grpc server won't accept http1 requests (see https://groups.google.com/forum/#!topic/grpc-io/JnjCYGPMUms).  It is possible to link a grpc server in with a normal go http mux, as long as the mux server is serving over SSL, as the golang http client & server won't do http2 over anything other than an SSL connection.  This would require making all our service to service comms SSL.  So I had a go a writing a grpc http1 server, and got pretty far.  But is was a bit of a mess.
    
    So finally I thought I'd make a separate grpc frontend for this, running in parallel with the frontend/authfe combo on a different port - and first up I'd need a grpc reverse proxy.  Ideally we'd have some nice, generic reverse proxy that only knew about a map from service names -> downstream service, and didn't need to decode & re-encode every request as it went through.  It seems like this can't be done with golang's grpc library - see https://github.com/mwitkow/grpc-proxy/issues/1.
    
    And then I was surprised to find you can't do grpc from browsers! See http://www.grpc.io/faq/ - not important to us, but I'm starting to question why we decided to use grpc in the first place?
    
    It would seem we could have most of the benefits of grpc with protos over HTTP, and this wouldn't preclude moving to grpc when its a bit more mature?  In fact, the grcp FAQ even admits as much:
    
    > Why is gRPC better than any binary blob over HTTP/2?
    > This is largely what gRPC is on the wire.

commit e0989fde894853435a470df4edb9d5076e19f3f4
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Thu Sep 15 23:15:37 2016 +0100

    Remove grpc vendoring.

commit bcd43e82c6a1b8ad70b3b1f6683cccf58ca12cd5
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Thu Sep 15 22:05:56 2016 +0100

    Add go_import_path to travis so it works on a fork. (#1995)

commit 3eef95962b811ba766465c1256837565ce8c052b
Merge: 07babe5 717dd8a
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Sep 15 17:03:13 2016 -0400

    Merge pull request #1965 from prometheus/beorn7/federation
    
    federation: Collapse time series of the same name

commit 717dd8adac15e12d270e3e792f7604c9c9680f66
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 15 15:23:55 2016 +0200

    web: add more federation test scenarios

commit 784a8ad7c5acf323fb241f6782ca68f5c46e7c7f
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 15 15:06:36 2016 +0200

    web: Inline httptest.NewRequest because it only exists in Go1.7+

commit 737ae60ceaebc4264358e28e377eda061861117e
Merge: 4f7e6e8 b41a240
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 15 08:00:14 2016 +0200

    Merge pull request #1993 from prometheus/grobie/include-go-report
    
    Link to goreport from README

commit 4f7e6e8bf00fe3b7cab196da26f8c3c1c5556798
Merge: 0385567 29ced00
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 15 07:57:55 2016 +0200

    Merge pull request #1994 from prometheus/grobie/fix-small-issues
    
    Fix low hanging code issues

commit 29ced0090fb422fa929c4f13ded6e333af70239d
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Sep 14 23:23:28 2016 -0400

    Fix common english misspellings

commit e2c12dcdb5415ab103c7b8f4201c58573366b83f
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Sep 14 23:16:47 2016 -0400

    Add missing error check in persistence test

commit 27074863b400f40fe351d1628dd41d4f1e6fbca9
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Sep 14 23:15:18 2016 -0400

    Print url.URLs correctly in tests

commit 8f3b62bfe4fe0924513c9a629e080d51e022c9cf
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Sep 14 23:13:27 2016 -0400

    Simplify struct initialization

commit b41a240c36614ba51d8959658bd7f8fe06e888ee
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Sep 14 23:09:26 2016 -0400

    Link to goreport from README

commit 39c49154019fad9e0de10d8ace8af73a7353b953
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 8 17:39:52 2016 +0200

    federation: Collapse time series of the same name
    
    This will avoid duplicate MetricFamilies, thereby shrinking the size
    of the federation payload and also creating legal text format.
    
    Also, add unit tests for federation. They were also needed for the
    previous state of the code, but were missing.

commit b24e5d63bcc0904c85721b57422244a1a1985aae
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Sep 10 02:28:19 2016 +0200

    Add noop local storage engine.
    
    This adds a flag -storage.local.engine which allows turning off local
    storage in Prometheus. Instead of adding if-conditions and nil checks to
    all parts of Prometheus that deal with Prometheus's local storage
    (including the web interface), disabling local storage simply means
    replacing the normal local storage with a noop version that throws
    samples away and returns empty query results. We also don't add the noop
    storage to the fanout appender to decrease internal overhead.
    
    Instead of returning empty results, an alternate behavior could be to
    return errors on any query that point out that the local storage is
    disabled. Not sure which one is more preferable, so I went with the
    empty result option for now.

commit 03855679a10540da91fe99ec6a1027f064dc67a8
Merge: 3fd992d a020103
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Sep 12 18:20:38 2016 -0400

    Merge pull request #1984 from mattbostock/1983_add_minute
    
    PromQL: Add minute() function

commit a0201036fae06ec0cf10da829ea005bc9e15d9d3
Author: Matt Bostock <matt@mattbostock.com>
Date:   Mon Sep 12 23:12:43 2016 +0100

    PromQL: Add tests for time/date funcs with arg
    
    Add tests for the date and time functions where an argument is
    specified.
    
    Suggested by @grobie:
    https://github.com/prometheus/prometheus/pull/1984#issuecomment-246508286
    
    `1136239445` is the reference time used by Go:
    https://golang.org/src/time/format.go

commit 9628eb59982b113a68f5e61cb46eab75516db0d2
Author: Matt Bostock <matt@mattbostock.com>
Date:   Mon Sep 12 20:29:44 2016 +0100

    PromQL: Add minute() function
    
    Returns the minutes from the current time in UTC. Related to the
    `hour()` function.
    
    Fixes #1983.

commit 3fd992d2d1450e9153f27e0061bd92743499286a
Merge: 815cb57 22296dc
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Sep 12 11:39:25 2016 +0200

    Merge pull request #1979 from prometheus/fabxc-patch-1-1
    
    storage: fix Querier interface documentation

commit 22296dcb8504c3d999d845d86508761f37c3d71d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 12 11:19:36 2016 +0200

    storage: clarify sample/matcher relation in docs

commit cc6f988a5ecffa263d58ccce4029a6988dcd5f6f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 12 10:48:54 2016 +0200

    storage: fix Querier interface documentation

commit 815cb57af32640d6d6bc4cf8a0cd4c4ef3004fd4
Merge: 7e28b45 7bd7e63
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Sep 11 04:26:37 2016 +0200

    Merge pull request #1975 from prometheus/storage-test
    
    storage: fix struct alignment issue in test

commit 7bd7e63f97bc917dd65d65ccd7c4591361219e6c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Sep 11 00:32:57 2016 +0200

    storage: fix struct alignment issue in test
    
    The uint64 `numCalls` ends up being not word-aligned on certain architectures,
    which makes atomic reads/writes panic.

commit 7e28b4509d2d10b39af51c1ceeca4aef29c6d56e
Merge: 1e26b96 7655038
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Sep 9 19:59:53 2016 +0200

    Merge pull request #1960 from nghialv/master
    
    Fix typo

commit 1e26b96baac4d5d717a6b6edbe5f682a3ebed32a
Merge: f805208 07babe5
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Fri Sep 9 16:55:24 2016 +0200

    Merge pull request #1973 from prometheus/release-1.1
    
    CircleCI improvement from release-1.1

commit 07babe586e9794625c9aac72374cbac465ac8bf2
Merge: 36fbdcc 0ebdd9c
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Fri Sep 9 13:53:45 2016 +0200

    Merge pull request #1969 from prometheus/sdurrheimer-circle-use-base-image-for-tests
    
    Use golang-builder base image for tests in CircleCI

commit 0ebdd9c3e900dce14b88c4700f41085b5e593cb6
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Fri Sep 9 08:33:44 2016 +0200

    Use golang-builder base image for tests in CircleCI

commit 373025539279d3892a1f4ba9384af9bf84c5b4ed
Author: Ulfsparre, Tommy <tommy.ulfsparre@dice.se>
Date:   Fri Sep 9 00:27:23 2016 +0200

    remove deleted zookeeper nodes

commit f805208c3e02636076105243d4668980b9330791
Merge: e5a5dc1 0cb6b99
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Sep 8 17:36:36 2016 -0400

    Merge pull request #1966 from dmilstein/make-test-not-hit-internet
    
    Fix broken test which relied on DNS resolution #1962

commit 0cb6b9962e614154a70c5a99ab154dfd8a54a950
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Thu Sep 8 16:59:46 2016 -0400

    Fix broken test which relied on DNS resolution #1962
    
    Switched to testing by way of the static_configs rather than
    dns_sd_config parameter.  Verified that the revised test both passes
    without network access, and also still catches the bug it's supposed to
    cover.

commit e5a5dc172df397ec5f6bb2949cd4e3e9a8147cc3
Merge: 07a3cd4 36fbdcc
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Sep 8 15:17:40 2016 +0200

    Merge pull request #1964 from prometheus/release-1.1
    
    Forward-merge the bug fix from release-1.1

commit 36fbdcc30fd13ad796381dc934742c559feeb1b5
Merge: 531991e 03831e0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 8 15:04:07 2016 +0200

    Merge pull request #1961 from prometheus/beorn7/release
    
    Cut 1.1.2

commit 03831e0e1e5043444233f275be56874b924b8835
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 8 14:17:49 2016 +0200

    Cut 1.1.2

commit 531991e4a1a431ace1515e16c8d086948e369779
Merge: 24db241 04ae619
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Sep 8 14:06:39 2016 +0200

    Merge pull request #1958 from prometheus/grobie/fix-aggregator-label-error
    
    Fix parsing of label names which are also keywords

commit 7655038184ae4afa5b1dd0ee7673c7339698e1ec
Author: nghialv <nghialv2607@gmail.com>
Date:   Thu Sep 8 19:01:32 2016 +0900

    fix typo

commit 04ae6196f228c26c942494640fa6fc36a6534b45
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Sep 7 15:16:34 2016 -0400

    Fix parsing of label names which are also keywords
    
    The current separation between lexer and parser is a bit fuzzy when it
    comes to operators, aggregators and other keywords. The lexer already
    tries to determine the type of a token, even though that type might
    change depending on the context.
    
    This led to the problematic behavior that no tokens known to the lexer
    could be used as label names, including operators (and, by, ...),
    aggregators (count, quantile, ...) or other keywords (for, offset, ...).
    
    This change additionally checks whether an identifier is one of these
    types. We might want to check whether the specific item identification
    should be moved from the lexer to the parser.

commit 07a3cd48515c1af0e556d541d88fd77e39dd5b0c
Merge: d48a1be 4bb2063
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 7 14:44:42 2016 +0200

    Merge pull request #1950 from prometheus/readme
    
    readme: direct link to Prometheus docker image

commit 4bb20630471ee22f4c746ccb5519ddc80b9f91b3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 7 14:32:48 2016 +0200

    readme: point to prometheus.io download section

commit d48a1bedb114cfb9bcfbe993ae84fd1670329776
Merge: fec3b54 24db241
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 7 11:27:50 2016 +0200

    Merge branch 'release-1.1'

commit 24db241bd556fd45854dd310692ac291de7d24e1
Merge: a60378c 333e2ed
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 7 11:27:27 2016 +0200

    Merge pull request #1954 from prometheus/backport
    
    Cut v1.1.1

commit 333e2ed92d921c97a5cd16e230364ec9f00b170f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 7 11:16:45 2016 +0200

    *: cut v1.1.1

commit a2589e78157afdf35798a3e53bce28c7b270915e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 5 14:40:28 2016 +0200

    retrieval: correctly handle IPv6 addresses
    
    This updates all service discoveries to correctly
    build the __address__ label for IPv6 addresses.

commit 692ddc592c3f8cbafdd3cf07c2ab3bd38c929b99
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 5 14:17:10 2016 +0200

    retrieval: fix IPv6 port default, add tests
    
    This fixes port defaulting for IPv6 addresses and restructures
    and test the construction of target label sets.

commit f030cb5f012109efd4ac55ee703de562dd790b92
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 5 16:44:40 2016 +0200

    retrieval: export NewHTTPClient

commit fec3b54cfc00f05b49f49c1dc591b3fa7caf84fb
Merge: 2b45d51 a15237a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 6 17:18:28 2016 +0200

    Merge pull request #1946 from prometheus/ipv6
    
    Fix IPv6 scraping

commit 0a4d31477a75ff229ddfd95f610919c493a5a9c7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 6 17:02:15 2016 +0200

    readme: direct link to Prometheus docker image

commit a15237a0b8852f2346592206996badacb56c6fa7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 5 14:40:28 2016 +0200

    retrieval: correctly handle IPv6 addresses
    
    This updates all service discoveries to correctly
    build the __address__ label for IPv6 addresses.

commit 17cdd4f9664fd1b3dcc83d8f6256526f38a85a5b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 5 14:17:10 2016 +0200

    retrieval: fix IPv6 port default, add tests
    
    This fixes port defaulting for IPv6 addresses and restructures
    and test the construction of target label sets.

commit 2b45d516fde7519d748d4aeac623e1c294925ad7
Merge: 75bae06 0322c59
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 5 17:07:45 2016 +0200

    Merge pull request #1948 from prometheus/httpclient
    
    retrieval: export NewHTTPClient

commit 0322c59dc3610d73dd209927c268bc0753ff1d65
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 5 16:44:40 2016 +0200

    retrieval: export NewHTTPClient

commit 75bae065fdf1ff9b60508e12e24d650fd559abc2
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Sep 3 21:08:33 2016 +0200

    Revert "Modify tests to adjust to reverting the /graph changes"
    
    This reverts commit f1ea5bf232836990d008f8912454021763c39db3.
    
    Part two necessary for reverting the /graph revert.

commit 094a098ce6ded95fa4cebe12aaf6c30c5e2884be
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Sep 3 21:05:23 2016 +0200

    Revert "Revert the /graph changes."
    
    This reverts commit aa43d34a86cf0124a1a8cecc92c544f7f4793d91.
    
    This brings back the /graph changes so that @grandbora can continue to
    work on the redirect for backwards compatibility. And other changes
    can already take the new /graph parameters into account.

commit a60378c77765080a781e313ece0d0ab47c2e54e2
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Sep 3 21:01:04 2016 +0200

    Fix release date v1.1.0

commit 5ee84a96db6190d4fcdaf4eff74a09b52824a9aa
Merge: 71fb535 a49f3f6
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sat Sep 3 20:58:42 2016 +0200

    Merge pull request #1940 from prometheus/beorn7/release
    
    Cut 1.1.0

commit a49f3f6c0827d43bc073beb48e5d17467072fa22
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Sep 1 19:11:01 2016 +0200

    Cut 1.1.0

commit 71fb535ad1e1934d3f63f26b777d152d25aec65b
Merge: af5c7d5 f1ea5bf
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Sep 2 15:03:08 2016 +0200

    Merge pull request #1942 from prometheus/beorn7/revert-graph-params
    
    Revert /graph changes.

commit f1ea5bf232836990d008f8912454021763c39db3
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Sep 2 14:12:31 2016 +0200

    Modify tests to adjust to reverting the /graph changes
    
    These tests have been added after the /graph changes and therefore
    already test the new syntax.
    
    This commit has to be reverted together with the previous one to get
    back to the old new state. *sigh*

commit aa43d34a86cf0124a1a8cecc92c544f7f4793d91
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Sep 2 13:56:13 2016 +0200

    Revert the /graph changes.
    
    This revert will be reverted once v1.1 is released and has its own
    release branch. Since we had already change on top of this, there was
    no cleaner way of cutting those changes out.
    
    This commit reverts the following commits:
    
    Revert "Update backend helpers and templates to new url schema"
    This reverts commit fc6cdd0611f5eae523c4eb54b74b97a18c174972.
    
    Revert "Refactor graph.js"
    This reverts commit 445fac56e07b29bf31b55f34493273ee1c84f9d6.
    
    Revert "Use query parameters in the url"
    This reverts commit 3e18d86d8a424e32dfb7584fe4fa751d3126f3f3.
    
    Revert "Point to correct place for GraphLinkForExpression"
    This reverts commit 3da825fc76252155aade2bb25203428579df42e8.
    
    Assets are also updated.

commit af5c7d56163575835892b6ca84b33a351aa2da53
Merge: 1c27189 a88e950
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Sep 1 01:19:48 2016 +0200

    Merge pull request #1938 from prometheus/remote-write-experimental
    
    Mark remote write address flag as experimental.

commit a88e950d1f9f9b6ddbb2f24c8d3789e03f0e22e2
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Sep 1 00:58:53 2016 +0200

    Mark remote write address flag as experimental.

commit 1c271897bee958c6be0d807917de06811de3615d
Merge: fe29e87 d41d913
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Aug 30 17:49:13 2016 +0200

    Merge pull request #1931 from tomwilkie/1843-remote-storage-ordering
    
    Remote storage ordering

commit d41d91388f93a980a5935fdc63585edf2d876915
Author: Tom Wilkie <tom.wilkie@gmail.com>
Date:   Tue Aug 30 17:43:29 2016 +0200

    Update for new generic remote storage.

commit a6931b71e80382440bafecc6320b28a828c21432
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Mon Aug 29 18:13:26 2016 +0200

    Rationalise retrieval metrics so we have the state (success/failed) on both samples and batches, in a consistent fashion.
    
    Also, report total queue capacity of all queues, i.e. capacity * shards.

commit ece12bff939828feb3209de1cad67dd623e0ae8b
Author: Tom Wilkie <tomwilkie@users.noreply.github.com>
Date:   Mon Aug 29 17:08:19 2016 +0200

    Shard/parrallelise samples by fingerprint in StorageQueueManager
    
    By splitting the single queue into multiple queues and flushing each individual queue in serially (and all queues in parallel), we can guarantee to preserve the order of timestampsin samples sent to downstream systems.

commit fe29e878245250efabd165cadc1a51daa74b127e
Merge: 2dd6517 aa3f2b7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Aug 30 17:28:48 2016 +0200

    Merge pull request #1930 from prometheus/generic-write-grpc
    
    Generic write via gRPC

commit aa3f2b7216886045e66ac20ead54a2ef6e3dbe36
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 29 18:48:20 2016 +0200

    Generic write cleanups and changes.
    
    - fold metric name into labels
    - return initialization errors back to main
    - add snappy compression
    - better context handling
    - pre-allocation of labels
    - remove generic naming
    - other cleanups

commit d8ce6e5849731008eea176a62a0b5f2539237f97
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 29 18:48:29 2016 +0200

    Update vendoring.

commit 36d2c4bd0b6a6ebe0cb539d4d83731de0a5d305c
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 29 19:15:08 2016 +0200

    Add generic write path using grpc.
    
    This uses a new proto format, with scope for multiple samples per
    timeseries in future. This will allow users to pump samples out to
    whatever they like without having to change the core Prometheus code.
    
    There's also an example receiver to save users figuring out the
    boilerplate themselves.

commit 72475cfa8480ce65eb4074933a4db2100cc85620
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Aug 17 13:38:39 2016 +0100

    Update vendoring

commit 2dd651770e50d98a30bcc5d2c4e8e2581e85530f
Merge: ee9abf4 ec064c9
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Aug 30 15:22:41 2016 +0200

    Merge pull request #1923 from dmilstein/fix-delta-unmarshaling
    
    Catch errors when unmarshalling delta/doubleDelta encoded chunks

commit ec064c96f682fb2335e20d56ecb8a3f7da2419f5
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Tue Aug 30 07:54:40 2016 -0400

    Add field names to table-driven test fixtures

commit ac8788aca61fb655447ac056b228bfd3e3fc7b23
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Mon Aug 29 11:58:31 2016 -0400

    Convert to table-driven test and inline helper func

commit f50f656a667ccaacf1e2af1b532abc08a361a3af
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Mon Aug 29 11:22:12 2016 -0400

    Fix double-delta unmarshaling to respect actual min header size
    
    Turns out its valid to have an overall chunk which is smaller than the
    full doubleDeltaHeaderBytes size -- if it has a single sample, it
    doesn't fill the whole header.  Updated unmarshalling check to respect
    this.

commit b8159563419c0e87b61f4d3f6482bf898d14dfa1
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Thu Aug 25 11:16:11 2016 -0400

    Catch errors when unmarshalling delta/doubleDelta encoded chunks
    
    This is (hopefully) a fix for #1653
    
    Specifically, this makes it so that if the length for the stored
    delta/doubleDelta is somehow corrupted to be too small, the attempt to
    unmarshal will return an error.
    
    The current (broken) behavior is to return a malformed chunk, which can
    then lead to a panic when there is an attempt to read header values.
    
    The referenced issue proposed creating chunks with a minimum length -- I
    instead opted to just error on the attempt to unmarshal, since I'm not
    clear on how it could be safe to proceed when the length is
    incorrect/unknown.
    
    The issue also talked about possibly "quarantining series", but I don't
    know the surrounding code well enough to understand how to make that
    happen.

commit ee9abf4535d2a28feb14473716e9118b4e12741b
Merge: ab88057 5792eaa
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Tue Aug 30 11:49:44 2016 +0200

    Merge pull request #1932 from prometheus/sdurrheimer-circleci-tests-1.6-tag
    
    Use 1.6 tag of the test image in circleci

commit ab88057063fdce5c9078c44c80040d04578310a6
Merge: a83c815 4680daf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 30 11:03:23 2016 +0200

    Merge pull request #1908 from prometheus/on-dates
    
    Add various time and date functions

commit 5792eaa1e865f065abc09eebc58ec8e2938acb6b
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Tue Aug 30 09:34:17 2016 +0200

    Use 1.6 tag of the test image in circleci

commit a83c8156b527f4f163bc786523c8c752372aabcf
Merge: bc1178b b9fb974
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 30 08:14:04 2016 +0200

    Merge pull request #1926 from dmilstein/add-tests-for-targetmanager
    
    Add basic test for TargetManager.targetSet

commit b9fb9742ed2b0d814360d02f5d10502708c601ca
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Mon Aug 29 16:08:40 2016 -0400

    Move test helper function into scope of test func

commit 4680daf2370391a4fd22d92eec4c043b949d7679
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 29 18:22:12 2016 +0100

    Default date functions to current time.

commit bc1178bf70f315c22722a1351185e5b65e93112b
Merge: c9d9f56 e29d939
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Aug 29 17:45:05 2016 +0200

    Merge pull request #1929 from hashmap/1900_validate_relabel_conf
    
    Forbid invalid relabel configurations

commit e29d9394e52cb381e4befaeaaa0ea412cf3c0ea7
Author: Alexey Miroshkin <alexey.miroshkin@optiopay.com>
Date:   Mon Aug 29 16:01:45 2016 +0200

    Forbid invalid relabel configurations
    
    This fix adds check if target_label value is set in case if action is replace or
    hashmod
    Issue [#1900]

commit c9d9f564ff6e138c991916a2eb48431c49347939
Merge: 23ddbd6 c7bd563
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Aug 29 11:36:53 2016 +0200

    Merge pull request #1928 from prometheus/beorn7/testing
    
    Testing: Add more test targets

commit c7bd563b2611aace122ab6c443726d6360c868c9
Author: Bjoern Rabenstein <bjoern@rabenste.in>
Date:   Mon Aug 29 10:08:30 2016 +0200

    Testing: Add more test targets

commit 23ddbd64aad64f1b959724628014b11eb697c5ed
Merge: a614e3d bf0e441
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 29 09:28:02 2016 +0200

    Merge pull request #1925 from hashmap/1898-test-race
    
    Fix data race in lexer and lexer test

commit bf0e441576266ed3bf3d50d6a96ec30833f2defa
Author: Alexey Miroshkin <alexey.miroshkin@optiopay.com>
Date:   Mon Aug 29 09:20:43 2016 +0200

    Instantiate lexer inline for the test
    
    Don't use the lex constructor, remove the constructor introduced in the
    prevous commit.

commit a614e3dd27d566951b6f71010fe2ee72904e98fc
Merge: 0ac2dbe e618af5
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Aug 28 18:42:32 2016 +0200

    Merge pull request #1927 from mattbostock/add_crash_recovery_metric
    
    Storage: Add crash recovery metric 'started_dirty'

commit e618af5d0b78ededd219cb6b1bd251b6a831a921
Author: Matt Bostock <matt@mattbostock.com>
Date:   Sat Aug 27 21:39:27 2016 +0200

    Storage: Add crash recovery metric 'started_dirty'
    
    ...to indicate when crash recovery was invoked during Prometheus
    startup.
    
    Fixes #1918.

commit 79216011cb72be07ab760ede71bf96c2bc3b4bd1
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Thu Aug 25 14:36:26 2016 -0400

    Add basic test for TargetManager.targetSet
    
    Verify that if the configs change, target groups are cleaned on
    TargetManager.reload (rather than having old ones linger around, even if
    they are no longer present in the configs).
    
    This covers the bug fixed in #1907 -- I verified that by checking out
    source from before that commit.
    
    This is a start on #1906

commit 485f7dde082c7d6aaad91fe612be11f714fa62fd
Author: Alexey Miroshkin <alexey.miroshkin@optiopay.com>
Date:   Fri Aug 26 17:07:17 2016 +0200

    Fix data race in lexer and lexer test
    
    As described in #1898 'go test -race' detects a race in lexer code. This
    pacth fixes it and also add '-race' option to test target to prevent
    regression.

commit 0ac2dbe6aa209bec4cbc6a828d51317295112dc0
Merge: b23169d 71571a8
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Aug 26 08:42:44 2016 +0200

    Merge pull request #1917 from prometheus/beorn7/promql
    
    promql: Fix (and simplify) populating iterators

commit b23169d86f8ae914089472d9ee61d8190edfb43d
Merge: 4b8f963 764ceaa
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Aug 24 18:56:22 2016 +0200

    Merge pull request #1913 from dmilstein/fix-remote-storage-test
    
    Fix one of the tests for a remote storage QueueManager

commit 71571a8ec47a23b838e5798e1d4d5461a6f4a8bf
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Aug 24 18:37:09 2016 +0200

    promql: Fix (and simplify) populating iterators
    
    This was only relevant so far for the benchmark suite as it would
    recycle Expr for repetitions. However, the append is unnecessary as
    each node is only inspected once when populating iterators, and
    population must always start from scratch.
    
    This also introduces error checking during benchmarks and fixes the so
    far undetected test errors during benchmarking.
    
    Also, remove a style nit (two golint warnings less…).

commit 764ceaa9394801629542fef00055153e5e03c2ca
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Wed Aug 24 11:30:38 2016 -0400

    Add timeout to test, cap waiting at 1 second

commit 4b8f963847e4f2a688486d12bb4db29aa4b888e3
Merge: 16d70a8 d9b4079
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Aug 24 13:04:45 2016 +0200

    Merge pull request #1915 from prometheus/release-1.0
    
    Forward-merge the bug fix from release-1.0

commit d9b40793acad059529e148891cb4cd584f634d37
Merge: 30cfee8 acd8937
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Aug 24 13:03:00 2016 +0200

    Merge pull request #1914 from prometheus/beorn7/release
    
    Cut v1.0.2

commit acd8937bab07e9472ad368e83db035b60cc6e84a
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Aug 24 12:04:10 2016 +0200

    Cut v1.0.2

commit 30cfee81a16c8a25b6ad9db20974e2436bdcfd15
Merge: be40190 e2b3626
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Aug 24 12:00:30 2016 +0200

    Merge pull request #1907 from prometheus/beorn7/sd
    
    retrieval: Clean up target group map on config reload

commit ea1318f38b34399e2a2db782e8d7d55a719488ca
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Aug 23 22:34:22 2016 +0100

    Short names of some date related functions

commit 007907b4103f5245fd3f6f18e245cfb0855e5b5e
Author: Dan Milstein <milstein.dan@gmail.com>
Date:   Tue Aug 23 16:26:33 2016 -0400

    Fix one of the tests for a remote storage QueueManager
    
    Specifically, the TestSpawnNotMoreThanMaxConcurrentSendsGoroutines was failing on a fresh checkout of master.
    
    The test had a race condition -- it would only pass if one of the
    spawned goroutines happened to very quickly pull a set of samples off an
    internal queue.
    
    This patch rewrites the test so that it deterministically waits until
    all samples have been pulled off that queue.  In case of errors, it also
    now reports on the difference between what it expected and what it found.
    
    I verified that, if the code under test is deliberately broken, the test
    successfully reports on that.

commit d2ca2b496aa4f752a6befc4769ee737589712bcc
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 22 21:08:13 2016 +0100

    Add days_in_month function.

commit 0ed31c8c47ae28c944247e55eed5157965ed86ad
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 22 21:00:53 2016 +0100

    Sort list of functions.

commit fd7822829cda24910efd3db8cb66ca27f3edeb69
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 22 20:57:33 2016 +0100

    Add date related functions.
    
    Add day_of_month, day_of_week, hour_of_day, month_of_year and year.
    This only work for UTC, and ignore leap seconds the same as Go.

commit e2b3626e0cde417ffd9c3d384d281bad4ff44e25
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Aug 22 19:25:33 2016 +0200

    retrieval: Clean up target group map on config reload
    
    Also, remove unused `providers` field in targetSet.
    
    If the config file changes, we recreate all providers (by calling
    `providersFromConfig`) and retrieve all targets anew from the newly
    created providers. From that perspective, it cannot harm to clean up
    the target group map in the targetSet. Not doing so (as it was the
    case so far) keeps stale targets around. This mattered if an existing
    key in the target group map was not overwritten in the initial fetch
    of all targets from the providers. Examples where that mattered:
    
    ```
    scrape_configs:
    - job_name: "foo"
      static_configs:
      - targets: ["foo:9090"]
      - targets: ["bar:9090"]
    ```
    updated to:
    ```
    scrape_configs:
    - job_name: "foo"
      static_configs:
      - targets: ["foo:9090"]
    ```
    
    `bar:9090` would still be monitored. (The static provider just
    enumerates the target groups. If the number of target groups
    decreases, the old ones stay around.
    
    ```
    scrape_configs:
    - job_name: "foo"
      dns_sd_configs:
      - names:
        - "srv.name.one.example.org"
    ```
    updated to:
    ```
    scrape_configs:
    - job_name: "foo"
      dns_sd_configs:
      - names:
        - "srv.name.two.example.org"
    ```
    
    Now both SRV records are still monitored. The SRV name is part of the
    key in the target group map, thus the new one is just added and the
    old ane stays around.
    
    Obviously, this should have tests, and should have tests before, not
    only for this case. This is the quick fix. I have created
    https://github.com/prometheus/prometheus/issues/1906 to track test
    creation.
    
    Fixes https://github.com/prometheus/prometheus/issues/1610 .

commit 16d70a8b6bd90f0ff793813405e84d5724a9ba65
Merge: fcac52e 95cadd0
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Aug 18 13:36:05 2016 -0400

    Merge pull request #1901 from amorken/master
    
    Run scrape loop with interval 1 instead of 0

commit 95cadd07029abce1557bdca00ec75c828dea7813
Author: Anders Daljord Morken <anders.morken@cxense.com>
Date:   Thu Aug 18 09:33:52 2016 +0200

    Run scrape loop with interval 1 instead of 0
    
    0 is considered an invalid interval by time.NewTicker() and will cause a
    panic if control reaches that point. Given the vagaries of timekeeping,
    this may occasionally happen and make this test unstable.

commit fcac52ebbfd5a289c69f6ad2a9e71a0554b4cd08
Merge: 54c0b10 8633ac1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 17 16:01:58 2016 +0200

    Merge pull request #1899 from amorken/master
    
    Trim stray whitespace from bearer token file

commit 8633ac180e80da0b9895b4d2475d804fbbde3f35
Author: Anders Daljord Morken <anders.morken@cxense.com>
Date:   Wed Aug 17 15:16:24 2016 +0200

    Strip stray whitespace from bearer token file
    
    Apart from not trying to send a newline in a HTTP header,
    this also allows Prometheus to build and pass tests with Go 1.7,
    which features stricter checking of HTTP headers.

commit 54c0b10abb02311531637ea50dcbd00db3003001
Merge: 6bfd302 e9885ec
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 16 15:27:35 2016 +0200

    Merge pull request #1896 from amorken/master
    
    Bugfix: Avoid divide-by-zero panic on query_range?step=0

commit e9885ecb9437be8ca83ba2767b7d5e64aadfe8f7
Author: Anders Daljord Morken <anders.morken@cxense.com>
Date:   Tue Aug 16 15:10:02 2016 +0200

    Bugfix: Avoid divide-by-zero panic on query_range?step=0

commit 6bfd30269adda08a621bf5a9763f2ddab3b4d6c3
Merge: 289e299 a861911
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 15 18:19:05 2016 +0200

    Merge pull request #1894 from d-ulyanov/annotations-formatting
    
    Added toUpper and toLower formatting to templates

commit a8619111f3ad54f9dcadfa0a1ff5d03e577a958c
Author: Dmitry Ulianov <dmitry.ulianov@lazada.com>
Date:   Mon Aug 15 14:00:22 2016 +0300

    Added toUpper and toLower formatting to templates

commit 289e299eb53807057557927e47972c601c22ef64
Merge: 80b0e1b 4a866c1
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Sat Aug 13 18:55:35 2016 -0400

    Merge pull request #1890 from prometheus/fix-applyconfig-error
    
    Fix ApplyConfig() error handling

commit 4a866c13be444795ad30d8f8679bd9773be9cec7
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Aug 12 03:23:18 2016 +0200

    Fix ApplyConfig() error handling
    
    Currently, Prometheus starts up without any error when there is an
    invalid rule file :-/

commit 80b0e1b74c7112d738e0e910e2b45c0b9892ecff
Merge: fe7b8b7 08b6556
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Aug 13 00:14:07 2016 +0200

    Merge pull request #1892 from fstab/assume-counters-start-at-zero-after-reset
    
    Assume counters start at zero after reset.

commit fe7b8b7fd1a0e3279c416f13aa2401a0466a986f
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Aug 13 00:11:52 2016 +0200

    Add missing license header to alerting_test.go

commit 08b6556ee6270a4910e43c8922dab95264fadb56
Author: Fabian Stäber <fabian@fstab.de>
Date:   Fri Aug 12 20:21:04 2016 +0200

    Assume counters start at zero after reset.

commit d118acef9642a3efbea969172e8382dc8c972ec8
Merge: be596f8 da7206e
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Aug 12 08:58:10 2016 +0100

    Merge pull request #1889 from prometheus/fix-rule-escaping
    
    Fix rule HTML escaping issues

commit da7206ec29c44de321221e230b9689be5b0768ee
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Aug 12 02:52:59 2016 +0200

    Fix rule HTML escaping issues
    
    This was mentioned as part of https://github.com/prometheus/alertmanager/issues/452

commit be596f82b45b1a948653d2c11c72ed63aaff09d2
Merge: 76edb86 772a3af
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 10 09:42:17 2016 +0200

    Merge pull request #1783 from knyar/json
    
    Allow URLs in targets defined via a JSON file

commit 76edb86e86b186540078196075762af0a4977a7a
Merge: c9b58d3 b655aa0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 9 14:50:08 2016 +0200

    Merge pull request #1878 from brancz/relabel-alerts
    
    allow relabeling of alerts

commit b655aa002fba7beaf2da30a038e0e6c5c41d4e03
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Tue Aug 9 13:09:36 2016 +0200

    introduce top level alerting config node

commit 7714b9c781d8e5ae869c1fe3679f93f71cf4a0c1
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Tue Aug 9 12:36:23 2016 +0200

    move relabeling functionality to its own package
    
    also remove the returned error as it was always nil

commit 679d225c8df5fcac2791c288e8b3d15169bbeca3
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Tue Aug 9 10:08:15 2016 +0200

    allow relabeling of alerts
    
    in case of dropping don't even enqueue them

commit c9b58d3e27f003d5f6c4cb6bcbccd0dbed9a869b
Merge: 98c0d33 df22684
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 9 09:42:50 2016 +0200

    Merge pull request #1877 from prometheus/fabxc-fix-joblink
    
    web/ui: fix job link

commit df22684b5b20562189dd5700ddb47c40a18d7aa5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 8 19:02:02 2016 +0200

    web/ui: fix job link

commit 98c0d335676d4c55cf2bfdec6c0808c4aae82341
Merge: 32fad9f f02df41
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 8 12:33:07 2016 +0200

    Merge pull request #1875 from brancz/idelta-function
    
    add idelta function

commit f02df4138c24cbadee7b965776955dc44f9e1fa0
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Aug 8 10:52:00 2016 +0200

    refactor duplication of irate and idelta functions implementations

commit 32fad9fbb4030857a70ca5f1d9af5ae87c00b251
Merge: d3aa6c0 cfe5c5f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 8 10:48:34 2016 +0200

    Merge pull request #1874 from prometheus/fabxc-joblink
    
    Add HTML link for job name on target page

commit cfe5c5fa15f6dbae6851845c2ee79555cf62cc19
Merge: d3aa6c0 7ebcd67
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 8 10:46:36 2016 +0200

    Merge branch 'master' of https://github.com/cambridge-university-press/prometheus into cambridge-university-press-master

commit d3aa6c01338a0dc198ce577a080e866e87f4a8bc
Merge: d770783 12bcc92
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 8 10:43:06 2016 +0200

    Merge pull request #1872 from grandbora/ui-url-params
    
    Use query parameters in the /graph page

commit dbf83666bb135b1ee236aa3120e470a235732c4a
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Aug 8 10:40:50 2016 +0200

    add idelta function
    
    similar to the irate function the idelta function calculates the delta
    function with the last two values

commit 0ce5e7fe6d5a0bf41324468b7ae673d2682821ff
Author: Frederic Branczyk <fbranczyk@gmail.com>
Date:   Mon Aug 8 10:02:58 2016 +0200

    move legacy test for delta function

commit 12bcc92311462c24abd735014ab5a47b847bca4b
Author: Bora Tunca <bora@soundcloud.com>
Date:   Sun Aug 7 14:46:21 2016 +0200

    Generate bindata.go

commit fc6cdd0611f5eae523c4eb54b74b97a18c174972
Author: Bora Tunca <bora@soundcloud.com>
Date:   Sat Aug 6 17:24:09 2016 +0200

    Update backend helpers and templates to new url schema

commit 445fac56e07b29bf31b55f34493273ee1c84f9d6
Author: Bora Tunca <bora@soundcloud.com>
Date:   Fri Aug 5 16:35:38 2016 +0200

    Refactor graph.js

commit 3e18d86d8a424e32dfb7584fe4fa751d3126f3f3
Author: Bora Tunca <bora@soundcloud.com>
Date:   Fri Aug 5 15:45:55 2016 +0200

    Use query parameters in the url

commit 3da825fc76252155aade2bb25203428579df42e8
Author: Bora Tunca <bora@soundcloud.com>
Date:   Fri Aug 5 12:47:04 2016 +0200

    Point to correct place for GraphLinkForExpression

commit d77078377747fb7ccb93c4932e7e2e3bfe861fd6
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Aug 5 23:35:11 2016 +0200

    Neurotic cleanups to graph.js

commit 70490fe5685277a7ff5bf09aaa96843a379a6e25
Merge: 8065710 3bfec97
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 5 16:17:14 2016 +0200

    Merge pull request #1805 from prometheus/higher-level-storage-interface
    
    Make the storage interface higher-level.

commit 806571074ad283211b76c2b5b3ae9bc7d3efb610
Merge: a4ee5b1 9a269b5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 3 10:47:28 2016 +0200

    Merge pull request #1869 from prometheus/fabxc-patch-1
    
    Clarify comment on rule evaluation

commit 9a269b5507f56c5c79ada406acf2fd8ae023fa14
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 3 08:29:51 2016 +0200

    Clarify comment on rule evaluation
    
    Fixes #1866

commit a4ee5b14d561fd6d79d1f946c8fb6a3d6004aeb8
Merge: f953375 6fc88d4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 1 23:34:19 2016 -0700

    Merge pull request #1865 from prometheus/alert-name
    
    Remove __name__ from alerts sent to AM.

commit 6fc88d4b4d7f477c4331382c9d71055c8db2a951
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 1 23:32:01 2016 +0100

    Remove __name__ from alerts sent to AM.
    
    Fixes #1861

commit f9533754d1140b763a8ab20e6747fd1b10c6c670
Merge: 6633df1 7b4a67f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Jul 31 12:19:27 2016 -0700

    Merge pull request #1862 from alicebob/removegraph
    
    'Remove Graph' links on the /graph page

commit 7b4a67f651ee5b64701ff5cd128702d468fcef23
Author: Harmen <harm@dds.nl>
Date:   Sun Jul 31 16:31:37 2016 +0200

    make assets build

commit 0b883e24bae0a4995cc544eb723c8e7e77de6922
Author: Harmen <harm@dds.nl>
Date:   Sun Jul 31 16:30:23 2016 +0200

    Add a 'Remove Graph' link to the 'Graph' screen

commit 6633df160786462aff39446a511b123ff05477b1
Merge: 603b3e5 d41e66e
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Sun Jul 31 13:02:34 2016 +0200

    Merge pull request #1859 from prometheus/sdurrheimer-promu-go-version
    
    Use the default go version for the crossbuilt process

commit d41e66e9a3217de3655b8710e9c6a6e823782ea7
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Sat Jul 30 11:19:56 2016 +0200

    Use the default go version for the crossbuilt process

commit 603b3e50b9de5cca1507bcc05a23f3b3e2a9ab2a
Merge: 3a1a578 bf6d92c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Jul 30 01:30:34 2016 -0700

    Merge pull request #1858 from fabric8io/docker-consoles-dir
    
    Docker: Move console dirs to /usr/share/prometheus

commit bf6d92c63aba3e4ee6686a8021434259ce92eef3
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Fri Jul 29 14:00:47 2016 +0100

    Docker: Move console dirs to /usr/share/prometheus

commit 7ebcd678ea1882f057707add05482935843b5583
Author: Andrew Hemming <ahemming@cambridge.org>
Date:   Thu Jul 28 15:19:42 2016 +0100

    Added HTML link for each job name
    
    Useful for quick navigation on the target page when there are many jobs
    and targets
    
    Corrected HTML link for each job name
    
    Regenerated bindata

commit 3a1a5786a8f4ad1a498ad025156b2507be3ea43f
Merge: 0b6bec1 4042392
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 27 16:06:22 2016 -0700

    Merge pull request #1851 from prometheus/grobie/always-format-assets
    
    Always format generated assets

commit 4042392a2dc60ce3ef82fe58d5a05e0ad2e78797
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Jul 27 19:01:51 2016 -0400

    Always format generated assets
    
    It's easy to forget formatting assets after re-generating them, so let's
    do this automatically.

commit 0b6bec1af7d728f3a05bdd6b82612f676a2b4a96
Merge: 5416518 8066de9
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Wed Jul 27 18:41:42 2016 -0400

    Merge pull request #1850 from caniszczyk/patch-1
    
    Add CNCF reference in the README

commit 541651817803bfa66c89245593b063567d914fad
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Wed Jul 27 18:35:01 2016 -0400

    Fix go fmt of ui/bindata.go

commit 8066de91ca26bbf268e28283aef1e6cf78eb5c17
Author: Chris Aniszczyk <caniszczyk@gmail.com>
Date:   Wed Jul 27 17:15:03 2016 -0500

    Add CNCF reference in the README
    
    A simple reference to the CNCF and link to the website.

commit e7ce06f50670f5faabc978ad8eb219487c8d564b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 27 12:06:49 2016 -0700

    Update Travis Go versions

commit 3bcc36dd8a781d990d2d756c6850fc4301908af6
Merge: 823ee3e 50e044b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 27 09:31:55 2016 -0700

    Merge pull request #1848 from audunstrand/patch-1
    
    added path to pods scrape job

commit 823ee3eeee0074f787bc840bc5146f1ba74d500a
Merge: 67b7535 a144328
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 27 09:30:08 2016 -0700

    Merge pull request #1847 from alicebob/alertmsg
    
    Message on an empty Alerts page

commit 50e044bb006f74b14cc44fc65a1f3bdad0ed5676
Author: Audun Fauchald Strand <audunstrand@gmail.com>
Date:   Wed Jul 27 15:13:53 2016 +0200

    added path to pods scrape job

commit a1443280b43e15943ba7868dd265aab6eb6ef4dc
Author: Harmen <harm@dds.nl>
Date:   Wed Jul 27 12:56:08 2016 +0200

    make assets build

commit 512b3f8d95f8a1236ecbb535afc60f9492a2ed51
Author: Harmen <harm@dds.nl>
Date:   Wed Jul 27 12:53:28 2016 +0200

    Friendlier message when there are no alerting rules

commit 67b753547158a1571471131345583c7fd18af601
Merge: 4be73d1 6c80806
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 26 15:18:42 2016 -0700

    Merge pull request #1835 from fabric8io/k8s-sd-pod-disco-hostname
    
    Kubernetes SD: Add node name and host IP to pod discovery

commit 4be73d118e4d67be99c8ef11daf1128fd908e23c
Merge: 49e3173 78715e4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 26 13:41:55 2016 -0700

    Merge pull request #1831 from mattbostock/remove_silence_column
    
    Alerts template: remove silence table header

commit 78715e41823323e23669d5ac2e01ba6654903f2e
Author: Matt Bostock <matt@mattbostock.com>
Date:   Wed Jul 20 07:52:39 2016 +0100

    Alerts template: remove silence table header
    
    There's no corresponding table column for this table header. The
    placeholder link for silences was removed in e8800730.
    
    Accordingly, regenerate `web/ui/bindata.go` by running:
    
        make assets format

commit 49e317333cf40f260e06a181302997ffce8d4133
Merge: e980913 afc5873
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jul 26 00:59:48 2016 +0200

    Merge pull request #1844 from alicebob/lessnoise
    
    don't store empty values in the URL

commit afc5873b0e8bd6d7991781939ec08434e1fbf5c1
Author: Harmen <harm@dds.nl>
Date:   Mon Jul 25 20:58:21 2016 +0200

    don't store empty values in the URL

commit 3bfec97d46676812d6cb7e4225abd2ba6376d4f3
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 11 20:27:25 2016 +0200

    Make the storage interface higher-level.
    
    See discussion in
    https://groups.google.com/forum/#!topic/prometheus-developers/bkuGbVlvQ9g
    
    The main idea is that the user of a storage shouldn't have to deal with
    fingerprints anymore, and should not need to do an individual preload
    call for each metric. The storage interface needs to be made more
    high-level to not expose these details.
    
    This also makes it easier to reuse the same storage interface for remote
    storages later, as fewer roundtrips are required and the fingerprint
    concept doesn't work well across the network.
    
    NOTE: this deliberately gets rid of a small optimization in the old
    query Analyzer, where we dedupe instants and ranges for the same series.
    This should have a minor impact, as most queries do not have multiple
    selectors loading the same series (and at the same offset).

commit e980913cd69a85d9644ffd0d0cfeb26633e9f983
Merge: cc86d3f f97cd29
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jul 21 16:13:30 2016 +0200

    Merge pull request #1840 from zoidbergwill/patch-1
    
    Fix missing roles in prometheus kubernetes example

commit f97cd29e47dcb5a839a192dace2c9756bd1c15c7
Author: William Stewart <zoidbergwill@gmail.com>
Date:   Thu Jul 21 15:46:14 2016 +0200

    Drop '__meta_kubernetes_role' since we have role in the config

commit 599fafd2aa989ea49f23935954356916bdea201d
Author: William Stewart <zoidbergwill@gmail.com>
Date:   Thu Jul 21 15:45:42 2016 +0200

    Add node job

commit cc86d3fb0ca04cb04a6fb1405fbbb43849e3b2de
Merge: c3a7941 1bb077b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jul 21 15:01:52 2016 +0200

    Merge pull request #1842 from prometheus/beorn7/release
    
    Merge release-1.0 into master

commit 1bb077b5ef7d83100c51eb9eeff35d95e65a57c4
Merge: c3a7941 be40190
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jul 21 14:55:05 2016 +0200

    Merge branch 'release-1.0' into beorn7/release

commit be4019065c943428e1ac88750aa364a7d9d6d1b3
Merge: bf62014 4ff4857
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jul 21 14:51:05 2016 +0200

    Merge pull request #1841 from prometheus/beorn7/release
    
    Cut release 1.0.1

commit 4ff48571124a00aba92ca411527b754bc3985210
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jul 21 14:11:09 2016 +0200

    Recreate assets

commit 7e75bb2101162b7c61f070bad3e89f49d3335513
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jul 21 14:08:31 2016 +0200

    Cut v1.0.1

commit 40b9666479902908c9af3f1dbd38fec8695abd86
Author: Dave Rawks <dave@pandora.com>
Date:   Tue Jul 19 16:33:34 2016 -0700

    Error on non-flag commandline arguments
    
    - Added minor cmdline parsing logic change to bail on
      unconsumed arguments. Fixes #1821

commit 56151e57ba03b702f89874693038a31f439e3219
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Jul 18 20:28:21 2016 +0100

    Update example console templates to new HTTP API.
    
    Fixes #1819

commit 58a3771e494e7b3f8b4e10a64bb0f52f5771bc7e
Author: William Martin Stewart <zoidbergwill@gmail.com>
Date:   Thu Jul 21 13:16:23 2016 +0200

    Add roles to prometheus kubernetes example
    
    Needed with Prometheus 1.0

commit c3a7941da7c2e0a240143e24377226e0cbd4e992
Merge: 08891be 0303ccc
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Jul 21 10:34:27 2016 +0100

    Merge pull request #1799 from prometheus/quantile
    
    Implement quantile and quantile_over_time

commit 0303ccc6a7352f3fb83deba543217df2aae40e9b
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Jul 8 13:48:48 2016 +0100

    Add quantile aggregator.

commit 15f9fe0a455cc860ccfb488b97c3dbbc2a77b36a
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Jul 8 13:33:20 2016 +0100

    Factor out quantile fucntion.

commit b0342ba9ecdf988c530fcff493c3fcfa3a1acbc3
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Jul 8 13:22:22 2016 +0100

    Add quantile_over_time function

commit 08891beb5fccc25b2dfd5ac0f245fe1368c9919a
Merge: 12709af 00ea36c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jul 21 00:35:53 2016 +0200

    Merge pull request #1828 from drawks/iss-1821
    
    Error on non-flag commandline arguments

commit 12709af24989d8677bcfc4d4bab7fb7310e65595
Merge: 5fab430 bf62014
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jul 21 00:33:12 2016 +0200

    Merge pull request #1838 from prometheus/release-1.0
    
    Explicitly add logging flags to our custom flag set

commit 00ea36cdbe3b372b0223a3667b6108bdac181d5e
Author: Dave Rawks <dave@pandora.com>
Date:   Tue Jul 19 16:33:34 2016 -0700

    Error on non-flag commandline arguments
    
    - Added minor cmdline parsing logic change to bail on
      unconsumed arguments. Fixes #1821

commit 5fab430e73f38694772f27344debfed65357b88b
Merge: 40f8da6 fc6737b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Jul 20 17:38:04 2016 +0200

    Merge pull request #1774 from prometheus/beorn7/index
    
    storage: improve index lookups

commit fc6737b7fb42e2087ff2a543ccf7ca99b73ec5fd
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Jun 28 20:18:32 2016 +0200

    storage: improve index lookups
    
    tl;dr: This is not a fundamental solution to the indexing problem
    (like tindex is) but it at least avoids utilizing the intersection
    problem to the greatest possible amount.
    
    In more detail:
    
    Imagine the following query:
    
        nicely:aggregating:rule{job="foo",env="prod"}
    
    While it uses a nicely aggregating recording rule (which might have a
    very low cardinality), Prometheus still intersects the low number of
    fingerprints for `{__name__="nicely:aggregating:rule"}` with the many
    thousands of fingerprints matching `{job="foo"}` and with the millions
    of fingerprints matching `{env="prod"}`. This totally innocuous query
    is dead slow if the Prometheus server has a lot of time series with
    the `{env="prod"}` label. Ironically, if you make the query more
    complicated, it becomes blazingly fast:
    
        nicely:aggregating:rule{job=~"foo",env=~"prod"}
    
    Why so? Because Prometheus only intersects with non-Equal matchers if
    there are no Equal matchers. That's good in this case because it
    retrieves the few fingerprints for
    `{__name__="nicely:aggregating:rule"}` and then starts right ahead to
    retrieve the metric for those FPs and checking individually if they
    match the other matchers.
    
    This change is generalizing the idea of when to stop intersecting FPs
    and go into "retrieve metrics and check them individually against
    remaining matchers" mode:
    
    - First, sort all matchers by "expected cardinality". Matchers
      matching the empty string are always worst (and never used for
      intersections). Equal matchers are in general consider best, but by
      using some crude heuristics, we declare some better than others
      (instance labels or anything that looks like a recording rule).
    
    - Then go through the matchers until we hit a threshold of remaining
      FPs in the intersection. This threshold is higher if we are already
      in the non-Equal matcher area as intersection is even more expensive
      here.
    
    - Once the threshold has been reached (or we have run out of matchers
      that do not match the empty string), start with "retrieve metrics
      and check them individually against remaining matchers".
    
    A beefy server at SoundCloud was spending 67% of its CPU time in index
    lookups (fingerprintsForLabelPairs), serving mostly a dashboard that
    is exclusively built with recording rules. With this change, it spends
    only 35% in fingerprintsForLabelPairs. The CPU usage dropped from 26
    cores to 18 cores. The median latency for query_range dropped from 14s
    to 50ms(!). As expected, higher percentile latency didn't improve that
    much because the new approach is _occasionally_ running into the worst
    case while the old one was _systematically_ doing so. The 99th
    percentile latency is now about as high as the median before (14s)
    while it was almost twice as high before (26s).

commit bf6201483c79d6ae54a290105fc3d6e32ad5a794
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Jul 20 17:32:42 2016 +0200

    Improve wording on log flag comment

commit 25385aafcbe0adef24ddefb72a561d491a060b09
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Jul 20 17:27:39 2016 +0200

    Explicitly add logging flags to our custom flag set
    
    In https://github.com/prometheus/prometheus/pull/1782 , we moved to a
    custom flag set to avoid getting test flags into the main prometheus
    binary. However, that removed the logging flags, too. This commit
    updates the vendoring to a version of the log package that allows
    adding the log flags to our flag set explicitly.

commit 6c8080607f9480ce40ea2f078d1a38bb15968af8
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Wed Jul 20 12:00:54 2016 +0100

    Kubernetes SD: Add node name and host IP to pod discovery

commit 40f8da699ecfece9f6aaf8a46ebbee63fc026e8f
Merge: 9e58070 1edd687
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Jul 19 15:48:32 2016 +0100

    Merge pull request #1815 from prometheus/stddev
    
    Add stddev_over_time and stdvar_over_time.

commit 9e58070c04bc7f4cf7cf9e0baac2b8f629da7dde
Merge: 42a3cb6 d458ecd
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jul 18 21:59:21 2016 +0100

    Merge pull request #1820 from prometheus/console-api
    
    Update example console templates to new HTTP API.

commit d458ecd4b90a98058a1fba90feb7ff4f4bdc8ad1
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Jul 18 20:28:21 2016 +0100

    Update example console templates to new HTTP API.
    
    Fixes #1819

commit 42a3cb61720bad934f54f4c74e5d22dc41b4c625
Merge: 0938661 e2bb136
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 19 00:51:32 2016 +0900

    Merge branch 'release-1.0'

commit e2bb136f4eb24df85153d41f9798e0f194511d72
Merge: 6eb1d5e e867944
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 18 23:19:29 2016 +0900

    Merge pull request #1818 from prometheus/fabxc-1.0.0
    
    *: cut 1.0.0

commit e8679441725c83f5284e0d763b7b13fc14410014
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 18 22:38:51 2016 +0900

    *: cut 1.0.0

commit 6eb1d5e63c606acd94abc2c5579f16013c9da3fc
Merge: 4d0c697 7a0b3af
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jul 18 14:29:10 2016 +0100

    Merge pull request #1816 from prometheus/fabxc-k8sfix
    
    config: validate Kubernetes role correctly.

commit 7a0b3af0b7d3bad37956259cd2e8326848d99e2c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 18 22:16:27 2016 +0900

    config: validate Kubernetes role correctly.

commit 1edd6875f50142ce20dc1ef64ca19814bb0f4ed0
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Jul 16 00:34:44 2016 +0100

    Add stddev_over_time and stdvar_over_time.

commit 0938661db93af4b8367a9ef331ad8f3e27da80fd
Merge: 4d0c697 273e457
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 15 18:26:19 2016 +0900

    Merge pull request #1804 from pydima/master
    
    web: return status code and error message for config resource

commit 273e457da4ec971c658282f1869bd54e24b962fc
Author: Dmitry Vorobev <dimahabr@gmail.com>
Date:   Mon Jul 11 16:24:54 2016 +0200

    web: return status code and error message for config resource

commit 4d0c697548eca5f3d447cd961289d8657be5306c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 14 10:49:02 2016 +0900

    circle: add tag v-prefix

commit a6c81f32bca54216ba4dada7e9335ab7af39de70
Merge: e3f4df7 675b018
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 14 10:44:02 2016 +0900

    Merge branch 'release-1.0' of github.com:prometheus/prometheus into release-1.0

commit 675b0184afce3c89d58f4a373f3e785cb3283048
Merge: 9c31297 1c4b3ab
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 14 10:43:41 2016 +0900

    Merge pull request #1812 from prometheus/fabxc-1.0.0-rc.0
    
    Release 1.0.0-rc.0

commit 1c4b3ab0e207b8e6771f8b251a8d51416173cf3b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 14 09:54:35 2016 +0900

    *: update changelog for version 1.0.0-rc.0

commit e3f4df75a83a639d6a3cc3923399a20ca8fb4998
Merge: 0622304 0509b0f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 13 17:01:42 2016 +0200

    Merge pull request #1807 from prometheus/am-label
    
    Expand alert templates at eval time.

commit ca7ab62f4096ad39c6db945c5bc45f8c868eeeea
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 14 09:43:11 2016 +0900

    *: bump version to 1.0.0-rc.0

commit 919558f601e60d797b02280a342b3a1f82b42f04
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 14 09:54:10 2016 +0900

    config: remove deprecated `target_groups` configuration

commit 9c3129746cfe088b94dd02c462520e30e548f924
Merge: 0622304 0509b0f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 13 17:01:42 2016 +0200

    Merge pull request #1807 from prometheus/am-label
    
    Expand alert templates at eval time.

commit 0622304244d350468d8ad10449002cbb966e4c19
Merge: e87d604 2a75b15
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Jul 13 16:53:18 2016 +0200

    Merge pull request #1798 from prometheus/beorn7/storage2
    
    Crash recovery: Fix an edge case.

commit 0509b0f2db5d6afac2fab110755ceeb15e367982
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Jul 12 17:11:31 2016 +0100

    Expand alert templates at eval time.
    
    Fixes #1678 #1677

commit e87d604f94574028e26d2aa01957ad275fca26fe
Merge: f8bb0ee 59d26e8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Jul 10 12:05:39 2016 +0200

    Merge pull request #1791 from prometheus/fabxc-routepref
    
    web: add -web.route-prefix flag

commit f8bb0ee91fcfde4af10f03ffe2a4caf5d2e3f2ad
Merge: b4660a5 1669073
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 8 11:50:42 2016 +0200

    Merge pull request #1793 from prometheus/count_values
    
    Add count_values() aggregator.

commit b4660a550c20dc85a39c863163c24c671b927e50
Merge: b16f49b 064b578
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 7 17:23:06 2016 +0200

    Merge pull request #1797 from prometheus/beorn7/storage
    
    Consistently use the `Seconds()` method for conversion of durations

commit 2a75b15328c44ec9c6cb0be2bac76d97e2232f42
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jul 7 16:17:38 2016 +0200

    Crash recovery: Fix an edge case.
    
    If the chunks of a series in the checkpoint are all older then the
    latest chunk on disk, the head chunk is persisted and therefore has to
    be declared closed.
    
    It would be great to have a test for this, but that would require more
    plumbing, subject of #447.

commit 064b57858ebd77cd112b4e3d7116c4ddedb3fc77
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jul 7 15:24:35 2016 +0200

    Consistently use the `Seconds()` method for conversion of durations
    
    This also fixes one remaining case of recording integral numbers
    of seconds only for a metric, i.e. this will probably fix #1796.

commit 59d26e8536d3f85fcb7fd42acc4453e7eb668e8d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 5 15:05:43 2016 +0200

    web: add -web.route-prefix flag
    
    Fixes #1191

commit b16f49bb441fee3ef5925db2aba65241e19361e0
Merge: 6f19e41 875818d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 7 09:08:37 2016 +0200

    Merge pull request #1795 from prometheus/keeping_extra
    
    Clean out old keywords

commit 875818d060f1a05b5f64e857333be81b3d886f1c
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Jul 7 05:30:48 2016 +0100

    Clean out old keywords

commit 16690736ab1d724d9ff434f5406298eb21aa03f8
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Jul 5 17:12:19 2016 +0100

    Add count_values() aggregator.
    
    This is useful for counting how many instances
    of a job are running a particular version/build.
    
    Fixes #622

commit 6f19e418e12c4e3ba34f454dbb395b1c420ff4c0
Merge: abdf353 4591a26
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 5 14:29:46 2016 +0200

    Merge pull request #1781 from prometheus/fabxc-k8s-sd
    
    Select Kubernetes SD type in configuration

commit 4591a2623b5726bfa0d09243490d56ae3f9824ef
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 5 10:24:53 2016 +0200

    discovery/kubernetes: filter pod/container, service/endpoint
    
    This change distinguishes and filters by pod/container and
    service/endpoint in the respective sub-SDs.

commit 0ff354341b5bb3d7a38d2b5f1ebe9a6342e6d9b7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 5 10:13:24 2016 +0200

    discovery/kubernetes: remove unused channel

commit 7221228843bf0c969cd7357115adcebe24860219
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 19:28:29 2016 +0200

    discovery/kubernetes: select between discovery role
    
    This adds `role` field to the Kubernetes SD config, which indicates
    which type of Kubernetes SD should be run.
    This no longer allows discovering pods and nodes with the same SD
    configuration for example.

commit abdf3536e45e22d91f3ae695862388af345d5adc
Merge: 3c1e150 7f23a4a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 5 11:32:17 2016 +0200

    Merge pull request #1788 from prometheus/topk
    
    Make topk/bottomk aggregators.

commit e0f8caacd757538e3193bf8b18c84014197eedbb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 17:45:07 2016 +0200

    discovery/kubernetes: extract service endpoint discovery
    
    This extract discovery of services and their endpoints into its own
    type.

commit 7f23a4a09925e26211c1d6deda2ad5f6d9d74d70
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Jul 4 18:03:05 2016 +0100

    Add type check on topk/bottomk parameter.

commit fa9cc155738908ddb090e435f582907c46666fd3
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Jul 4 13:17:30 2016 +0100

    Add topk/bottomk tests for multiple buckets.

commit 3b0c182eee1301a597da893520aec2a09f0261fa
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Jul 4 13:12:12 2016 +0100

    Move topk/bottomk unittests over to aggregators.

commit 3e5136e36d9d307817ae55efcef4450aeb736741
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Jul 4 13:10:42 2016 +0100

    Make topk/bottomk aggregators.

commit 3c1e15087d713a22b63ceff4e6d839f098c72b15
Merge: f26823a 7d441ab
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 4 13:21:50 2016 +0200

    Merge pull request #1785 from prometheus/fabxc-vendor
    
    Update vendoring

commit f26823afa77008acadf2b3f9b0de24878e4fd647
Merge: f4398d5 746d330
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 4 11:47:44 2016 +0200

    Merge pull request #1787 from prometheus/fabxc-gitignore
    
    gitignore: clean up

commit 746d330a2371a6498a1e4db77fe183e6f305de2e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 4 11:34:33 2016 +0200

    gitignore: clean up
    
    This removes several outdated or unnecessary ignore patterns.
    Especially those that match random words such as 'local' or 'core',
    which repeatedly caused weird behavior that's hard to debug, e.g.
    invisble vendored files.

commit 7d441abd7bddc75ea4d6ea731f5e494c007d2feb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 4 11:09:06 2016 +0200

    vendor: update prometheus org dependencies

commit 7700cff1ffd680e355bb49e69bbc4487a2af8843
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 4 11:07:02 2016 +0200

    vendor: update golang.org/x/sys

commit e4e847971666081a7101936968d7de31a80e1ba9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 4 10:14:36 2016 +0200

    vendor: add missing liencse/patent notices

commit bc506ce959b406be13cbc00edd43eb13fbe8496b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 4 10:08:49 2016 +0200

    vendor: update goleveldb dependencies

commit f4398d5bdf11295fc8d03ef4b66025285178046a
Merge: b3f321b 8c24dfd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 4 09:27:10 2016 +0200

    Merge pull request #1782 from prometheus/fabxc-testflags
    
    cmd/prometheus: use own flag set

commit 772a3af38f0be72ebf7a16e090a6003bd593865e
Author: Anton Tolchanov <me@knyar.net>
Date:   Sun Jul 3 23:59:46 2016 +0300

    Allow URLs in targets defined via a JSON file
    
    This enables defining `blackbox_exporter` targets (which can be URLs,
    because of relabeling) in a JSON file.
    
    Not sure if this is the best approach, but current behaviour is
    inconsistent (`UnmarshalYAML` does not have this check) and breaks
    officially documented way to use `blackbox_exporter`.

commit 8c24dfdb860c09a5bf776b2cfb0b6f9a676d5b1f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Jul 3 14:23:31 2016 +0200

    cmd/prometheus: use own flag set
    
    Fixes #1743

commit fdbe28df85bd5490f91120ff33657cefe0b0f86b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 16:55:37 2016 +0200

    discovery/kubernetes: extract node discovery
    
    This change extracts node discovery into its own type.

commit 8a97c211a800695150abf5c2e96cfb277db1d20b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 12:17:17 2016 +0200

    discovery/kubernetes: extract pod discovery
    
    This change extracts pod discovery into its own type.

commit e03e138d34cd9f38bb374ff39645c5bf38fa953e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 10:54:10 2016 +0200

    discovery: consolidate constructors into single file

commit b3f321b38a6280a2c8a60db56a9ecaee927f40d0
Merge: 2901376 57333d1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 17:10:09 2016 +0200

    Merge pull request #1780 from prometheus/fabxc-k8s-locks
    
    discovery/kubernetes: add missing locking

commit 57333d183176408c618da2d806f29856427f57f8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 16:46:38 2016 +0200

    discovery/kubernetes: add missing locking

commit 290137694043d012cec487fd53885e8c58056491
Merge: 4d1985e 472b836
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 16:53:29 2016 +0200

    Merge pull request #1777 from prometheus/fabxc-patch-1
    
    readme: update debian and container releases

commit 4d1985e40501ddaa1814d7d0fb280f9d39d5262f
Merge: 44036a0 cc98e16
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 11:45:18 2016 +0200

    Merge pull request #1778 from mattbostock/fix_annotations
    
    promql: Fix annotations conflated with labels

commit cc98e164d35c275f73b1d8546936dcc418c8db2b
Author: Matt Bostock <matt@mattbostock.com>
Date:   Fri Jul 1 10:39:17 2016 +0100

    promql: Fix annotations conflated with labels
    
    When converting `AlertStmt` to a string, the alert rule labels were
    printed as `ANNOTATIONS` instead of the annotations themselves.
    
    Fix and add a test to catch future regressions.

commit 472b8363a1bc355edc9f7c9296b58cefbea8b890
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 1 10:16:49 2016 +0200

    readme: update debian and container releases

commit 44036a08d0ca3c378dde2e18891990c573413136
Merge: e1cf13a 84334a8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 30 09:30:14 2016 +0200

    Merge pull request #1725 from nicholascapo/use-consul-service-address
    
    discovery: use consul service address if available

commit e1cf13aaef71a1f9ab3361e645959a7a74f53317
Merge: c673aa2 9140179
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 29 10:34:23 2016 +0200

    Merge pull request #1771 from prometheus/make-storage-public
    
    storage: Make MemorySeriesStorage a public type

commit 91401794fa5098de4c0fd3f32855149bcefee1ea
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 29 08:14:23 2016 +0200

    storage: Make MemorySeriesStorage a public type
    
    See https://twitter.com/fabxc/status/748032597876482048

commit c673aa2b341fcb03e2c4ee30469d2ff6fa5d112b
Merge: f68789d b86db08
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 29 07:35:01 2016 +0200

    Merge pull request #1770 from prometheus/milliseconds-console
    
    The metrics are no longer ms, we can remove the scaling.

commit b86db088b580d5c32be0029608cfb6d8a799b562
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Jun 29 01:09:24 2016 +0100

    The metrics are no longer ms, we can remove the scaling.

commit f68789dc5a5753f387bbf9ddabde5688fd560bfe
Merge: 62af249 5733de0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 27 15:49:52 2016 +0200

    Merge pull request #1767 from fabric8io/k8s-sd-https-config
    
    Kubernetes SD: Update example config with TLS options

commit 5733de0dfe34ec519ff0dd7b1de9e033e111d1bb
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Mon Jun 27 14:38:51 2016 +0100

    Kubernetes SD: Update example config with TLS options

commit 62af249d06b3a78223b02c850d2f62cf7ad4a1d7
Merge: ba9fbb9 97f62c0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 27 14:26:03 2016 +0200

    Merge pull request #1761 from prometheus/fabxc-legacyapi
    
    api: drop legacy API

commit ba9fbb9ea252da0e726e899847e6f7f13536aaca
Merge: d431187 3b89616
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Jun 24 14:15:23 2016 +0100

    Merge pull request #1765 from prometheus/on-dummy
    
    Support on()

commit 3b89616d82110b2c843cd87bc9a1da4fb8c0bd34
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Jun 23 17:49:22 2016 +0100

    Allow on, ignoring, by and without wit empty laberls.
    
    This offers new semantics in allowing on() for matching
    two single-element vectors with no known common labels.
    Previosuly this was often done using on(dummy).
    
    This also allows making it explict that you meant
    to do an aggregation without labels via by().
    
    Fixes #1597.

commit 246a817300bb253a51e0171691201416dc650842
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Jun 23 17:23:44 2016 +0100

    Flip vector matching to be ignoring by default.
    
    This is a noop semantically.

commit d431187f77f6467baa00aa3f3905afb66b59a78b
Merge: dc4d5fe 425736a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 23 17:57:05 2016 +0200

    Merge pull request #1763 from prometheus/fabxc-sec-metrics
    
    *: remove last remainers of non-second metrics

commit 425736a377b342fcafa9d0d5eb20df40a4e8483b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 23 17:50:06 2016 +0200

    *: remove last remainers of non-second metrics

commit dc4d5fef2a75b9b4e5124fe41ec291eda52f667e
Merge: 6f6dddb e2bc305
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Jun 23 16:23:59 2016 +0100

    Merge pull request #1762 from prometheus/fabxc-common
    
    vendor: update common/expfmt

commit e2bc30585fdf8185cf9adcac6ddc09a8a78f86fb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 23 17:21:06 2016 +0200

    vendor: update common/expfmt
    
    Update the exposition library to drop the JSON format decoding.

commit 97f62c021e6c44c4962b2e9ccc766d6d3413c29e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 23 17:14:32 2016 +0200

    api: drop legacy API

commit 6f6dddb23066c36863260e581cc900fcfb553a40
Merge: 0e281f5 b7b6717
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 23 15:56:03 2016 +0200

    Merge pull request #1759 from prometheus/separate-querier
    
    Separate query interface out of local.Storage.

commit b7b6717438d7664d59f060ee8da698a8d1557484
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 23 13:03:41 2016 +0200

    Separate query interface out of local.Storage.
    
    PromQL only requires a much narrower interface than local.Storage in
    order to run queries. Narrower interfaces are easier to replace and
    test, too.
    
    We could also change the web interface to use local.Querier, except that
    we'll probably use appending functions from there in the future.

commit 0e281f5500485dc2fc5055cbd2165ae070a3beaa
Merge: f928ca1 2fdc571
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 23 10:28:57 2016 +0200

    Merge pull request #1687 from royels/issue-1629
    
    Added power binop

commit 2fdc5717a3db2afc3b165afaa9237a7fd9d7cafd
Author: royels <docmentz@gmail.com>
Date:   Sun May 29 05:06:14 2016 -0400

    promql: add power binary operation

commit f928ca13d0294b5a3c136f4e1a6b6c77f1eeb22c
Merge: beecbe3 68f3df4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 21 11:24:59 2016 +0200

    Merge pull request #1754 from prometheus/jan11011977-master
    
    Fix 'access denied' error on Windows

commit 68f3df49d065b0f089005eac36853c7575d4d0f7
Author: Jan van Valburg <jan.van.valburg@activision.com>
Date:   Thu Jun 16 22:00:44 2016 +0100

    stoarge: fix 'access denied' error on Windows
    
    On Windows, it is not possible to rename or delete a file that is
    currerntly open. This change closes the file in dropAndPersistChunks
    before it tries to delete it, or rename the temporary file to it.

commit beecbe3d2f0d39035d050020c4a981b1529367ce
Merge: f3e3bef aeab25c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 17 14:43:10 2016 +0200

    Merge branch 'release-0.20'

commit f3e3befb8336d19291adfc1ce2b77727d869ab1d
Merge: bae1cfe 362e445
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Jun 16 16:49:19 2016 +0100

    Merge pull request #1746 from fatih/fix-alertstmt-print
    
    promql: fix printing annotations of an *AlertStmt

commit 362e44501ab8f515e206bbb5acfe54a54f839957
Author: Fatih Arslan <ftharsln@gmail.com>
Date:   Thu Jun 16 17:43:54 2016 +0300

    promql: fix printing annotations of an *AlertStmt
    
    Currently the printer doesn't print the annotations of an `*AlertStmt`
    declaration. I've added a test case as well, which fails for the current
    master.

commit 84334a8410c5174054f0018616f76a1827e0e2d8
Author: Nicholas Capo <nicholas@stream.me>
Date:   Fri Jun 10 13:40:06 2016 -0500

    discovery: use consul service address if available

commit aeab25c35daeb06db9d7e7eaa5882b72a1721c48
Merge: bae1cfe 3a9b739
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 15 17:52:52 2016 +0200

    Merge pull request #1742 from prometheus/fabxc-0.20.0
    
    *: cut 0.20.0

commit 3a9b739f304d873a8cd13d92ebfcd21ad21774a7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 15 17:31:26 2016 +0200

    *: cut 0.20.0

commit bae1cfee69170bb7e431c7b18957d4f5d42b090f
Merge: 4aeab79 384153f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 15 17:20:16 2016 +0200

    Merge pull request #1739 from prometheus/fabxc-opendbsd-arm
    
    promu: don't build openbsd/arm

commit 384153fe1fffecb46ebdb6edac44063f5d7c0b64
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 14 18:17:45 2016 +0200

    promu: don't build openbsd/arm and mips
    
    Deactivate crossbuilding for openbsd/arm and mips as golang.org/x/sys
    does not have the necessary syscalls implemented.

commit 4aeab798e89d3f5505d16ee304fafe0c4194626a
Merge: 4f139c7 3c80609
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 14 18:11:47 2016 +0200

    Merge pull request #1738 from prometheus/release-0.19
    
    Forward-merge 0.19 fixes into master

commit 3c80609fce62aab433c577d64fb3aaec0a6ed656
Merge: 452486b a5b3549
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 14 18:04:56 2016 +0200

    Merge pull request #1737 from prometheus/fabxc-0.19.3
    
    Bump version to 0.19.3

commit a5b35498a870917d83293f565e05f8bf0f891adc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 14 14:19:31 2016 +0200

    *: bump version to 0.19.3

commit 4c864c8a88fb5b6190a4b2818ce1ddec2873c8c7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 14 14:04:22 2016 +0200

    retrieval: don't sync to uninitialized scrape pool
    
    This change does just signal a scrape target update to the scraping loop
    once an initial target set is fetched.
    Before, the scrape pool was directly synced, causing a race against an
    uninitialized scrape pool.
    
    Fixes #1703

commit 4f139c765babd9d6a001e4fb7131c41d25d88453
Merge: 43a36e5 d0eeae9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 14 14:16:11 2016 +0200

    Merge pull request #1736 from prometheus/fabxc-ctxpanic
    
    retrieval: don't sync to uninitialized scrape pool

commit 452486bd223976f76b0d570ca6098221bc618d09
Merge: bc58d3d 03adbe5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 14 14:12:16 2016 +0200

    Merge pull request #1735 from prometheus/beorn7/race
    
    discovery/marathon: Fix race conditions in test

commit d0eeae9d0eb5934013689103b8780cc7b2fc1f28
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 14 14:04:22 2016 +0200

    retrieval: don't sync to uninitialized scrape pool
    
    This change does just signal a scrape target update to the scraping loop
    once an initial target set is fetched.
    Before, the scrape pool was directly synced, causing a race against an
    uninitialized scrape pool.
    
    Fixes #1703

commit 03adbe57e45fe675e6760527adc5b6b69a639107
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Jun 14 11:35:21 2016 +0200

    discovery/marathon: Fix race conditions in test
    
    The concurrency applied before is in most cases not even needed. With
    a cap=1 channel, most tests are much cleaner.
    
    TestMarathonSDRunAndStop was trickier. It could even have blocked
    before.
    
    This also includes a general refactoring of the whole file.

commit 43a36e545bd77e63c19856d42af49f1f55731de1
Merge: 2ea3a83 44aa7ec
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jun 14 10:01:39 2016 +0200

    Merge pull request #1732 from prometheus/beorn7/doc
    
    Update scrape config in example prometheus.yml

commit 44aa7ec46d5815541040fc6832ddb909da0decad
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Jun 14 09:39:34 2016 +0200

    doc: Update scrape config in example prometheus.yml

commit 2ea3a837c3bec9f3c8b19b6512d9a0f600452909
Merge: 3dcdd2b bc58d3d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jun 14 09:21:52 2016 +0200

    Merge pull request #1731 from prometheus/release-0.19
    
    Forward-merge 0.19 fixes to master

commit bc58d3dc509d4c62bcbe31d011370d711dc31970
Merge: 23ca13c 47dd5f7
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jun 14 08:14:45 2016 +0200

    Merge pull request #1729 from rohit01/release-0.19
    
    discovery/marathon: #1722 - ignore apps with zero ports

commit 47dd5f74ba7e753e023b771253946dbcfdde24bf
Author: rohit01 <hello@rohit.io>
Date:   Mon Jun 13 14:54:03 2016 +0530

    discovery/marathon: #1722 - ignore apps with zero ports

commit 3dcdd2b5ea02ecb7d4872abb0fbf8c097b5554f7
Merge: a3c4beb 98c156c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 13 09:32:58 2016 +0200

    Merge pull request #1728 from alileza/file_sd
    
    Re-ordering config validation

commit 98c156c36120b32d510e1ad7f28ffccac1011238
Author: Ali Reza <alirezayahya@gmail.com>
Date:   Sun Jun 12 21:18:05 2016 +0700

    reorder config validation, move checkOverflow before any other validation

commit a3c4beb6ee56f68fc7a3fed38dd9624717899874
Merge: a08943e 4dbe689
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Jun 10 10:29:02 2016 +0100

    Merge pull request #1721 from prometheus/console-time
    
    Do our own date parsing in console template graph controls.

commit 4dbe68963210dd3b8fde52da9cff522254192dbd
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Jun 9 17:52:03 2016 +0100

    Do our own date parsing in console template graph controls.
    
    Fixes #1442

commit a08943e6d347119bfb1b50e738fca577e5733290
Merge: 76ffdf4 25135c3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 8 20:30:01 2016 +0200

    Merge pull request #1718 from prometheus/fabxc-template-round
    
    web: round last scrape timestamp to milliseconds

commit 25135c369118558963b13b784acd2b2864a8a91c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 8 20:23:54 2016 +0200

    web: round last scrape timestamp to milliseconds

commit 76ffdf4cc5aa6649a497b882c4a9ba878a959fdc
Merge: ad18ac5 0f21bd3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 8 16:14:21 2016 +0200

    Merge pull request #1716 from prometheus/fabxc-static-configs
    
    config: deprecate `target_groups` for `static_configs`

commit 0f21bd31ca274d65f0ef7df9c51edad0502b9af3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 8 15:54:04 2016 +0200

    config: deprecate `target_groups` for `static_configs`
    
    This change deprecates the `target_groups` option in favor
    of `static_configs`. The old configuration is still accepted
    but prints a warning.
    Configuration loading errors if both options are set.

commit ad18ac51b812594b7e6a48d8e8e8829bc2ed3a97
Merge: 05b918a 733ed09
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 8 15:33:23 2016 +0200

    Merge pull request #1715 from prometheus/fabxc-vendor-fsnotify
    
    vendor: update gopkg.in/fsnotify.v1

commit 733ed099f55e02a883b2989ccc9e8f2cfac754b6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 8 11:59:16 2016 +0200

    vendor: update gopkg.in/fsnotify.v1
    
    This updates the fsnotify package, which now uses golang.org/x/sys/unix
    package. This fixes #1507.

commit 05b918a024a4b4a1ce6d668c3273098c3abbe2fb
Merge: 33759dd 329a00e
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Jun 7 17:22:34 2016 +0100

    Merge pull request #1713 from mattbostock/document_drop
    
    Relabel: Document whole label set is dropped

commit 329a00e44f0846ee04e2bc146e167a9334d231b7
Author: Matt Bostock <matt@mattbostock.com>
Date:   Tue Jun 7 17:13:30 2016 +0100

    Relabel: Document whole label set is dropped
    
    From the documentation and current tests, it wasn't immediately clear to
    me whether the `target` being dropped as the result of a 'drop' action
    was a label key-value pair or the entire labelset.
    
    Add a test that documents this behaviour.
    
    Documentation: https://prometheus.io/docs/operating/configuration/

commit 33759dddd22b743ce81061c662ff4cd6af02e6bc
Merge: 26b1c89 206bcfc
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Jun 7 12:37:40 2016 +0100

    Merge pull request #1712 from fabric8io/kubernetes-sd-node-ip-labels
    
    Kubernetes SD: Add labels for all node addresses and discover node port

commit 206bcfcdaac356e8bdb0cd91f3478f111eaa6d30
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Jun 7 12:06:30 2016 +0100

    Kubernetes SD: Remove kubeletPort config option

commit d48297c90414f231cd7b396f55692bc7c2edce5f
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Jun 7 11:31:29 2016 +0100

    Kubernetes SD: Add labels for all node addresses and discover node port if available

commit 26b1c8946937ba910157c68c89264749e1ef3400
Merge: dd57e7e 1e6770c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 6 15:14:49 2016 +0200

    Merge pull request #1702 from pdbogen/master
    
    Initial local pods before using the pod list to initialize pod targets

commit dd57e7ef5cde123d58ccc4bc2ec46fd627eff40c
Merge: 35ccca0 9baf120
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 6 12:01:41 2016 +0200

    Merge pull request #1699 from prometheus/fabxc-multiam
    
    notifier: dispatch to multiple Alertmanagers

commit 35ccca09ea03fed10eade23f56d1707b6537ccbf
Merge: 2bcf712 fa1dc01
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 6 11:49:09 2016 +0200

    Merge pull request #1704 from prometheus/fabxc-ghtemplate
    
    Make issue reports great again!

commit fa1dc018cbd70d8cc857dc369f0c7f841892facb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 3 08:57:22 2016 +0200

    .github: Add issue template

commit 9baf120cd52edbdedb2011a513fc986325bb4731
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 2 14:25:19 2016 +0200

    notifier: dispatch to multiple Alertmanagers
    
    This commit extends the notifier to dispatch alert batches
    to multiple Alertmanagers concurrently.
    It changes the `-alertmanager.url` flag to accept a comma
    separated list of URLs and/or to be set multiple times.

commit 2bcf712e29683bfa3c0f104b0fb6668498ce56fc
Merge: e084d8e fd7775e
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jun 6 11:35:49 2016 +0200

    Merge pull request #1657 from joshuarubin/master
    
    fix build with multi-part $GOPATH

commit e084d8e8c10bacf282fc1a6fd5e5fa1ea96519b1
Merge: 894cf8d b274c7a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Jun 3 13:31:57 2016 +0200

    Merge pull request #1701 from prometheus/beorn7/lock
    
    Make the number of fingerprint mutexes configurable

commit b274c7aaa7314ec800ecf3233c378b1365ace20e
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Jun 3 12:34:01 2016 +0200

    Update doc comments

commit 1e6770cdc58c8ee64f8ee1e029a6a0e082890729
Author: Patrick Bogen <patrick@srcclr.com>
Date:   Thu Jun 2 17:49:21 2016 -0700

    Initial local pods before using the pod list to initialize pod targets; include more logging in pod target creation

commit 99881ded63eb9650a10366a3bfb86a4fd9a1307b
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jun 2 19:18:00 2016 +0200

    Make the number of fingerprint mutexes configurable
    
    With a lot of series accessed in a short timeframe (by a query, a
    large scrape, checkpointing, ...), there is actually quite a
    significant amount of lock contention if something similar is running
    at the same time.
    
    In those cases, the number of locks needs to be increased.
    
    On the same front, as our fingerprints don't have a lot of entropy, I
    introduced some additional shuffling. With the current state, anly
    changes in the least singificant bits of a FP would matter.

commit 894cf8df2f0e37da8704964d2167dd11d1fa2c67
Merge: 2eaccdd 3f07a6b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jun 1 21:15:49 2016 -0500

    Merge pull request #1690 from andmarios/master
    
    Fix consoles and console_libraries path in Dockerfile.

commit 2eaccdd11147a8805b5333a7115fb69c6cc555bf
Merge: 9e952a5 2dd8022
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jun 1 20:15:02 2016 -0500

    Merge pull request #1697 from sigma-star/master
    
    Fix JS XHR requests in prom_console.js on IE11

commit 2dd80225a4c8f8abba60d9c8affc1816bccc2a7b
Author: David Gstir <david@sigma-star.at>
Date:   Wed Jun 1 16:50:37 2016 +0200

    Fix JS XHR requests in prom_console.js on IE11
    
    IE11 does not support automatic JSON parsing for responses with
    xhr.responseType = 'json', so we have to to do it manually.

commit 9e952a55c6356bfba445be1c2c5f2e62103abf27
Merge: e3ec8fa c81b4e8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 1 07:49:34 2016 -0700

    Merge pull request #1686 from alileza/master
    
    change file_sd names to files, for consistency

commit c81b4e8a870c4b3311bdafde3041c64092b941b4
Author: Ali Reza <alirezayahya@gmail.com>
Date:   Mon May 30 07:34:18 2016 +0700

    change config names to files for consistency

commit 3f07a6b9d03b6f9e0a81378f44aa87995c8fe948
Author: Marios Andreopoulos <opensource@andmarios.com>
Date:   Mon May 30 01:02:38 2016 +0300

    Fix consoles and console_libraries path in Dockerfile.

commit e3ec8fa83bad9ebaaad608af10d7c9f1416332a6
Merge: f55a1d4 23ca13c
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun May 29 21:06:44 2016 +0200

    Merge branch 'release-0.19'

commit 23ca13c2fb15762a64c21c62e8db2c18bf785958
Merge: 3113c0d 592f029
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun May 29 10:41:00 2016 -0700

    Merge pull request #1688 from prometheus/beorn7/0.19
    
    Cut 0.19.2

commit 592f02925ee131e821be3dab0680e412ac644f44
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun May 29 18:44:40 2016 +0200

    Cut 0.19.2
    
    Note that this will be merged into the release-0.19 branch and only
    includes bug fixes, not other recent commits.
    
    This is low-risk and contains critical bug fixes and should therefore
    be released ASAP.

commit 3113c0d7193cdec525738b8e3bf5eaf00d4b0059
Merge: 9d61695 5408666
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sun May 29 18:34:58 2016 +0200

    Merge pull request #1685 from prometheus/beorn7/fix-group
    
    Correctly stringify GROUP_x modifiers without labels

commit 54086663878c479eb3dc8968c0d3214119ee3300
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat May 28 19:45:35 2016 +0200

    Correctly stringify GROUP_x modifiers without labels
    
    Since rule evaluations work via String(), this fixes evaluation of
    rules containing GROUP_x modifiers without labels. This change is the
    minimal bugfix (so that we can release a fixed version without
    risk). It does not intend to implement any additional features (like
    allowing `GROUP_LEFT()` or `ON()` or even `ON` - see discussion in
    https://github.com/prometheus/prometheus/issues/1597 ).

commit f55a1d463d1db4f931a495bb22f8f1279417f327
Merge: bd6568c 4ceedff
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu May 26 22:49:39 2016 +0100

    Merge pull request #1670 from gregorygtseng/tls-servername-const
    
    Unexport testing constant

commit 4ceedffe863aaa14b7b8fe365f64477f2eff18be
Author: Gregory G. Tseng <gregory@teambanjo.com>
Date:   Thu May 26 14:39:44 2016 -0700

    Unexport testing constant

commit bd6568ccc953be173c2fe0b8ae77d358298e54e8
Merge: 26f3b7b 7997c14
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu May 26 22:33:07 2016 +0100

    Merge pull request #1658 from gregorygtseng/tls-servername-override
    
    Add ServerName into TLS Config

commit 7997c14b0d1477943f86471ce81e01624854b036
Author: Gregory G. Tseng <gregory@teambanjo.com>
Date:   Thu May 26 14:24:49 2016 -0700

    Add ServerName into TLS Config

commit 26f3b7bbc6634cfcd5e736ecc2f5e17f1d633e39
Merge: 194a486 e7eba75
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu May 26 15:04:19 2016 -0500

    Merge pull request #1669 from alileza/master
    
    remove keeping_extra because it's replaced with keep_common

commit 194a486c603b692c772fdd9939f0539a5b2b9bb4
Merge: f24b8b6 5e2b197
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu May 26 15:03:15 2016 -0500

    Merge pull request #1660 from alileza/add_http_errorlog
    
    Log HTTP server errors using common/log

commit 5e2b197a000effeac6ee01954288834bbee17d33
Author: Ali Reza <alirezayahya@gmail.com>
Date:   Thu May 26 23:19:09 2016 +0700

    Update vendoring for github.com/prometheus/common/log

commit 624717e801464e2079d1b8621db7cc69f85d59e1
Author: Ali Reza <alirezayahya@gmail.com>
Date:   Wed May 25 18:13:22 2016 +0700

    Log HTTP server errors using common/log
    
    change naming to be more descriptive.
    Fixes #1651
    
    remove pointer receiver
    
    use common/log error logger

commit e7eba7569026fc2693698c9e01338876672f1778
Author: Ali Reza <alirezayahya@gmail.com>
Date:   Thu May 26 23:42:19 2016 +0700

    remove keeping_extra because it's replaced with keep_common
    
    change all keepExtra label into keepCommon, and move action into removed list
    
    change incorrect token list

commit f24b8b6c1bb9b77df626af79c7af823a9dd44628
Merge: 0b6e5eb 9d61695
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu May 26 17:29:57 2016 +0200

    Merge pull request #1668 from roman-vynar/missed-path-prefix
    
    Added missed pathPrefix to Status sub-menus

commit 9d616952b33b0389f6db1905c849b4fdeaeb1be8
Author: Roman Vynar <roman.vynar@percona.com>
Date:   Thu May 26 17:06:55 2016 +0300

    Added missed pathPrefix to Status sub-menus

commit 0b6e5eb7dd83fc83d5ba1e459cd5b54d83ae5c81
Merge: 74c4483 500a494
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 17:40:42 2016 -0700

    Merge branch 'release-0.19'

commit 500a494c9c37c2b9b029298eea2c2375fc8981e4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 17:26:44 2016 -0700

    *: add 0.19.1 changelog

commit 807428118049c188458027e9b3ed3c44c07a1570
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 17:25:13 2016 -0700

    *: bump version to 0.19.1

commit 4e087165aa4844948dbfe1c28b8da2b0b6905eba
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 16:59:16 2016 -0700

    retrieval: handle nil target groups from updates

commit 8fe8ccce637ac50e551c45b1719ce11a1e5c7b05
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 16:17:25 2016 -0700

    retrieval: document panic behavior

commit 021ef27fe3351e97d0d1a48ca63eeada0d48d7b1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 16:05:20 2016 -0700

    retrieval: don't panic on non-HTTP scheme

commit 9a506fae47d2412778a04dc00bc41e32f9d089a2
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed May 25 13:59:50 2016 +0200

    Remove a spurious "w" from `_base.html`

commit 810e0e254bcdff20cb6f2315e45be2675525f1d5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 15:11:46 2016 -0700

    Fix typo

commit ec3aa12163afc60006061e4535e1bfdcba7e690f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 14:50:30 2016 -0700

    Fix indentation

commit b26f4c05371aa904039701f8933ec14b108b6a27
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 14:04:58 2016 -0700

    *: add 0.19.0 changelog

commit a3f5ab0b726bfca1106393aa29b2bb1eb36b97f6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 13:34:48 2016 -0700

    *: bump version to 0.19.0

commit ed0008b435f16f06039eae1c3b575a4437d18438
Author: Pieter Lange <pieterlange@users.noreply.github.com>
Date:   Tue May 24 11:12:42 2016 +0200

    Minor typo

commit c01d2924a2a023c9a75c9e8937cfcd7feb92e7fd
Author: Bjoern Rabenstein <bjoern@rabenste.in>
Date:   Mon May 23 11:13:08 2016 +0200

    Make assets without debug settings

commit 74c448386c213107d9ed97feeed1ddf362617ac0
Merge: e222e17 12b03db
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 17:13:27 2016 -0700

    Merge pull request #1665 from prometheus/fabxc-retrpanic
    
    Fix kubernetes SD crash

commit 12b03db373e7a8f52eda727dcf7b1a4df9381d39
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 16:59:16 2016 -0700

    retrieval: handle nil target groups from updates

commit e222e1707366fe48e7bb80613c1e971e08be7d3b
Merge: 7c237ee a5ba166
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu May 26 00:19:04 2016 +0100

    Merge pull request #1664 from prometheus/fabxc-scheme-panic
    
    retrieval: don't panic on non-HTTP scheme

commit ea36efbbd177fc309884d35f428d0fc5dc371fca
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 16:17:25 2016 -0700

    retrieval: document panic behavior

commit a5ba166935512ac786a8e6abec740df38b68ab44
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 25 16:05:20 2016 -0700

    retrieval: don't panic on non-HTTP scheme

commit 7c237eee0e6851e2fbe75e6d6e68ed4a94276ddd
Merge: e184844 93460fb
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed May 25 13:10:06 2016 +0100

    Merge pull request #1661 from prometheus/beorn7/ui
    
    Remove a spurious "w" from `_base.html`

commit 93460fb853ba76ad35c03a5f26e72fda11ec0cec
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed May 25 13:59:50 2016 +0200

    Remove a spurious "w" from `_base.html`

commit fd7775e25143eff5d61c30ce17dfdbc1e3ff48f9
Author: Joshua Rubin <jrubin@zvelo.com>
Date:   Tue May 24 16:50:27 2016 -0600

    fix build with multi-part $GOPATH

commit e1848445f47ce246f60e1b6b49723f2cc60419b7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 15:11:46 2016 -0700

    Fix typo

commit c4c2756a391422d0546bedc424d71ae41fa0dee4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 14:50:10 2016 -0700

    Fix indentation

commit 58a7f5b08984062c88ad2b4d7bd94c7e6e8527ee
Merge: 642eb59 604d711
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 14:20:59 2016 -0700

    Merge pull request #1655 from prometheus/release-0.19
    
    Release 0.19

commit 604d7114dff5e9abf14f8361a5e42219582c4da0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 14:04:58 2016 -0700

    *: add 0.19.0 changelog

commit 0d466e76cc762ccd9e01d64edc21a724ae28024c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 24 13:34:48 2016 -0700

    *: bump version to 0.19.0

commit 642eb59f8756c4d863b6102c1c8438eb0b135609
Merge: afc9582 427b322
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue May 24 10:27:46 2016 +0100

    Merge pull request #1652 from pieterlange/patch-1
    
    Minor typo

commit 427b32207882d35414b33b0f7156c03bcc7b08d8
Author: Pieter Lange <pieterlange@users.noreply.github.com>
Date:   Tue May 24 11:12:42 2016 +0200

    Minor typo

commit afc95820b1b82a0e77ea80ee9dc4a5e3fa01973a
Merge: b713ca5 52a133d
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon May 23 10:22:17 2016 +0100

    Merge pull request #1650 from prometheus/beorn7/ui
    
    Make assets without debug settings

commit 52a133d4d27f28e2164684beddf6861f91a485e9
Author: Bjoern Rabenstein <bjoern@rabenste.in>
Date:   Mon May 23 11:13:08 2016 +0200

    Make assets without debug settings

commit b713ca56c288480a8573ffa07b754f9761d3b26e
Merge: 4c439b4 0c6ed9d
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri May 20 12:35:43 2016 -0400

    Merge pull request #1649 from prometheus/grobie/fix-kubernetes-discovery
    
    Fix type usage in Kubernetes discovery

commit 0c6ed9d43752ee9b6038e70f591a27acf1745353
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Fri May 20 11:03:19 2016 -0400

    Fix type usage in Kubernetes discovery
    
    The event types have been recently changed to be exported types which
    wasn't reflected in the new pod discovery.

commit 4c439b4b45ad9b35bda47486b04e2622d28326c6
Merge: f7ed2ff a308c76
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri May 20 10:38:05 2016 -0400

    Merge pull request #1646 from prometheus/beorn7/valuecomparison
    
    Correctly identify no-op appends if the value is NaN

commit f7ed2ff706c17718f24f384296f6b7c87ed40d93
Merge: dec5683 45e5775
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 20 05:52:00 2016 -0700

    Merge pull request #1644 from prometheus/beorn7/logging
    
    Add missing logging of out-of-order samples

commit dec56838fc2f2694f4178d7021dfade24db48e33
Merge: 95ef7b1 89940eb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 20 05:45:09 2016 -0700

    Merge pull request #1449 from pdbogen/master
    
    k8s pod discovery

commit 95ef7b14a79efeec30032d4aa402d7314081ff82
Merge: 0c567b9 d43c015
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri May 20 13:51:10 2016 +0200

    Merge pull request #1645 from prometheus/beorn7/style
    
    Fix same style issues

commit a308c762920eb625d6886cbc6b801a6e11ac6905
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri May 20 13:46:33 2016 +0200

    Improve TestAppendOutOfOrder
    
    It did not test the returned error so far.
    Also, add tests for the NaN case broken before
    https://github.com/prometheus/common/pull/40

commit 8032763db1ae6d5df8bc795f68b85d52f02552c2
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri May 20 13:44:37 2016 +0200

    Update vendoring of github.com/prometheus/common/...

commit 0c567b95543d68df03b3191202b6d5218be46599
Merge: d9394eb bd2a770
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri May 20 10:28:28 2016 +0100

    Merge pull request #1643 from pydima/master
    
    storage/remote: Spawn not more than "maxConcurrentSends" goroutines.

commit 89940eb48dff5e37e42fcc18c219e440dd6c2003
Author: Patrick Bogen <patrick@srcclr.com>
Date:   Thu May 19 10:57:23 2016 -0700

    Write tests to include testing determinancy of various slice orders; ensure that container order is deterministic

commit b3350d872a770b06a1d6c48d335765da9c212ebe
Author: Patrick Bogen <patrick@srcclr.com>
Date:   Thu May 19 10:37:11 2016 -0700

    Add one label named for each port name, mapping it to port number; add corresponding tests; prefix port list label with a comma

commit b2ef4dc52d8166b4aea3348cc8fc5a7844a6e070
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu May 19 18:32:47 2016 +0200

    Correctly identify no-op appends if the value is NaN
    
    This requires an updating of the vendored commen.model package, which
    I will do once https://github.com/prometheus/common/pull/40 is merged.

commit d43c0159aaca9cc5f50292cf2d696f3a1c12236c
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu May 19 17:14:04 2016 +0200

    Fix style issues in retrieval/...

commit b95c096a450fc51fbc69ca9322de42108a9ef814
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu May 19 16:59:53 2016 +0200

    Fix style issues in rules/...

commit 45e5775f9b6a3ec58823edc6fe83c5f7f54e6962
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu May 19 16:22:49 2016 +0200

    Add missing logging of out-of-order samples
    
    So far, out-of-order samples during rule evaluation were not logged,
    and neither scrape health samples. The latter are unlikely to cause
    any errors. That's why I'm logging them always now. (It's alway highly
    irregular should it happen.) For rules, I have used the same plumbing
    as for samples, just with a different wording in the message to mark
    them as a result of rule evaluation.

commit bd2a770015dd3b86ce7d6040e5473726966c70ae
Author: Dmitry Vorobev <dimahabr@gmail.com>
Date:   Thu May 19 15:30:09 2016 +0200

    storage/remote: Spawn not more than "maxConcurrentSends" goroutines.

commit ae413704e837d10cb18dc93348509552028430c3
Author: Patrick Bogen <patrick@srcclr.com>
Date:   Wed May 18 17:18:52 2016 -0700

    kubernetes pod-level discovery

commit d9394eb359873bb2dd82e5b841a188aeaaccd5f8
Merge: a2fc876 5ae32dc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 18 16:58:23 2016 -0700

    Merge pull request #1641 from prometheus/beorn7/vendoring
    
    Update vendoring of golang.org/x/net/context/...

commit 5ae32dce1cbf228b046fadb038074c6185689ea7
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu May 19 00:40:29 2016 +0200

    Update vendoring of golang.org/x/net/context/...
    
    This should fix problems with hung scrapes.

commit a2fc87630649c6d3787b829785391e30304d1276
Merge: 8ec10ae da8cb10
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 18 10:12:30 2016 -0700

    Merge pull request #1631 from prometheus/beorn7/ui
    
    Pull targets and rules out of status into their own tab

commit da8cb10b438d4637a199631a878cd569142f235d
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri May 13 17:59:59 2016 +0200

    Partition the status tab into items in a dropdown
    
    I got feedback from different sources about rules and targets being
    too heavy in the status tab if their are lots of them.
    
    This change also allows for more fine-granular locking.

commit 8ec10ae7a5c3ec7a0b6e54c326a09d9afc9d39e8
Merge: 54de6af 7409494
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu May 12 10:35:54 2016 -0400

    Merge pull request #1627 from prometheus/effect-affect
    
    effect -> affect

commit 74094947eac707fc0ced1108c467e630b7045544
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu May 12 15:14:48 2016 +0100

    effect -> affect

commit 54de6afd22a0b70cbf8270cb5c806d55c7574db3
Merge: 68aaea6 0c1e7a5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 12 11:53:31 2016 +0200

    Merge pull request #1625 from prometheus/series-api-time-bounds
    
    Support time range in /api/v1/series endpoint.

commit 0c1e7a5b00449e79b701928ea6187bf395d5680e
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed May 11 23:59:52 2016 +0200

    Support time range in /api/v1/series endpoint.
    
    This adds optional "start" and "end" form values that may be used to
    restrict the time range of returned series.
    
    Fixes https://github.com/prometheus/prometheus/issues/1542

commit 68aaea618a2e4848d472d57ba375bd137f0d1224
Merge: bbc4f11 7fdb62c
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed May 11 14:20:19 2016 +0100

    Merge pull request #1624 from dmitris/golint
    
    (trivial) fix several minor golint style issues

commit bbc4f11bcc6288c8190f4c80997d7a5bbd59d46a
Merge: ba87e2d ffc8cab
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 11 14:31:31 2016 +0200

    Merge pull request #945 from msiebuhr/fuzz
    
    Fuzz parsers

commit 7fdb62c25316e164252228181cd50427276ba098
Author: Dmitry Savintsev <dsavints@yahoo-inc.com>
Date:   Wed May 11 14:20:36 2016 +0200

    fix several minor golint style issues

commit ffc8cab39a96b2129adb07c24840d88571957c25
Author: Morten Siebuhr <sbhr@sbhr.dk>
Date:   Tue May 10 11:46:03 2016 +0200

    Updates fuzzers to discard less interesting data

commit ba87e2d8c1ff606a6d412b3698db571ea344117e
Merge: 2ca9ee7 ef55fd6
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun May 8 17:11:06 2016 +0100

    Merge pull request #1619 from prometheus/threshold_vars
    
    Add unittest for using a metric for thresholds with group_left.

commit ef55fd6176e82d8a9107de9f68ad4617069dc1c0
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun May 8 16:33:08 2016 +0100

    Add unittest for using a metric for thresholds with group_left.

commit 2ca9ee7b0d9f47299999dcfc5f4af33d5ca27d00
Merge: baa3e19 d959d2b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 6 12:23:59 2016 +0200

    Merge pull request #1612 from prometheus/stn-dns-mv
    
    [discovery][dns] move dns to own package

commit d959d2b90a6f1e24760ab1d47bbf9bf2fcd2933e
Author: stuart nelson <stuartnelson3@gmail.com>
Date:   Fri May 6 10:46:22 2016 +0200

    discovery/dns: Maintain argument order consistency

commit d02591814bcd4bd8fbde8008c61d81e0735fa9e8
Author: stuart nelson <stuartnelson3@gmail.com>
Date:   Thu May 5 11:45:51 2016 +0200

    discovery/dns: move dns to own package

commit baa3e19fa048d8aeedd55a9fe2c17743e90991ed
Merge: d5a9ce1 399d5c6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 6 10:58:24 2016 +0200

    Merge pull request #1614 from sdurrheimer/common-version
    
    Make version informations consistent between prometheus components

commit d5a9ce18c5d986f7a9c510ae10d4522e21ac8af2
Merge: 82a9616 d00e8f1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 6 10:22:43 2016 +0200

    Merge pull request #1613 from sdurrheimer/fix-circleci-flanky-go-get
    
    Fix CircleCI flanky go get

commit 399d5c6375bf4b1bb9c881ccd01baf61b2adab70
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Thu May 5 13:46:51 2016 +0200

    Make version informations consistent between prometheus components

commit d00e8f114d315f48d1f00f887e4216442346a0bb
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Thu May 5 13:55:08 2016 +0200

    Fallback to default promu's crossbuild platforms list

commit a2b913f018311ac68dcd3da8ce7fbfc495b67c85
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Thu May 5 12:09:29 2016 +0200

    Change the test docker image tag to match promu golang version

commit b07768f613360f643bfd95be939f14698fb06bf1
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Thu May 5 12:09:09 2016 +0200

    Fix CircleCI problems during go get promu

commit 82a96167f6e6dfd4611cd758f38a24e86eb47a34
Merge: a32cab5 d7481f2
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed May 4 05:45:57 2016 +0100

    Merge pull request #1611 from shawnps/patch-1
    
    fix typo

commit d7481f266ef89590d12e00fe12e97bfc06980daa
Author: Shawn Smith <shawnpsmith@gmail.com>
Date:   Wed May 4 13:42:27 2016 +0900

    fix typo

commit a32cab5992e2c9b80447055c1e44b6884616a468
Merge: ad1542c 4ebf797
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Tue May 3 18:14:07 2016 -0400

    Merge pull request #1598 from sdurrheimer/master
    
    Update README image shields

commit 4ebf7970ce29f39bea0b2dd9f9c5a7178f8e99c2
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Tue Apr 26 17:23:41 2016 +0200

    Update README image shields

commit ad1542cf953884a77dbb78e74e7b785cce870824
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 2 14:53:20 2016 +0200

    ci: fix inconsistent indentation

commit 26799411f6285b16940cc9d58c62c4fb1d6b47d2
Merge: 3ce895e d153dc3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 2 13:10:01 2016 +0200

    Merge pull request #1609 from prometheus/fabxc-goversion
    
    *: bump default Go version to 1.6.2

commit d153dc3e82a0caa853121f1f739788b7c3204895
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 2 11:55:45 2016 +0200

    *: bump default Go version to 1.6.2

commit 3ce895e86d846738904fd543afc458182c3ca15c
Merge: f94fc76 97b018d
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Sun May 1 17:44:16 2016 -0400

    Merge pull request #1608 from prometheus/fix-printf
    
    Fix format argument in retrieval test.

commit 97b018d26d47932b6beb02bdb2d8a7fa624f0bcd
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun May 1 23:37:45 2016 +0200

    Fix format argument in retrieval test.

commit f94fc766081fb7d08ca2edede9d109a20c77cef1
Merge: 289f306 086f7ca
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 30 21:18:33 2016 +0200

    Merge pull request #1592 from prometheus/fabxc-consul-ref
    
    discovery: sanitize Consul service discovery

commit 289f306dd95df6a83f259f4ca846457e0246cee8
Merge: 0429342 76076bf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 30 21:17:22 2016 +0200

    Merge pull request #1590 from prometheus/fabxc-marathon-ref
    
    Fix basic issues in marathon SD

commit 76076bfb47710fd1fcd43e74bf8fed84d3b0e133
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 30 21:04:19 2016 +0200

    discovery: simplify client initialization

commit b5bfb502df63e97d421264898d0417fb31287bef
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 25 16:32:04 2016 +0200

    discovery: properly check context on chan send

commit 9f8feb9ff67234b70503ac1c2a62246e931a0798
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 25 15:30:11 2016 +0200

    discovery: consolidate Marathon SD files

commit 086f7caceb3daa81fdabe9ba63792d764ebb0131
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 25 18:47:21 2016 +0200

    discovery: extract Consul shouldWatch logic

commit e805e68c012a9df25cb0ba1bf3b77eac5920db5b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 25 18:40:39 2016 +0200

    discovery: sanitize Consul service discovery
    
    This commits simplifies the SD's structure and ensures that all
    channel sends are checked against a canceled context.

commit 981b6360043951eb44ae8039c7fca3a71c922401
Author: Morten Siebuhr <sbhr@sbhr.dk>
Date:   Tue Aug 4 12:43:53 2015 +0200

    Bring fuzzer error handling in line.

commit 9eb2e9850963083d1ccec771d5c6efc1e95f952b
Author: Morten Siebuhr <sbhr@sbhr.dk>
Date:   Mon Aug 3 22:23:44 2015 +0200

    Fix up documentation + go fmt.

commit 7371dcc7875bec486337f90496e4b27d2385ae5f
Author: Morten Siebuhr <sbhr@sbhr.dk>
Date:   Wed Jul 29 22:34:22 2015 +0200

    Fuzzing corpus for ParseMetric.

commit 5fec020b27dab06c007e66f97da777f3054734a1
Author: Morten Siebuhr <sbhr@sbhr.dk>
Date:   Wed Jul 29 22:32:22 2015 +0200

    Initial fuzzing corpus for ParseExpr.

commit 0ebcca5eb73c98adc734a91f8cfca16d6f0184c5
Author: Morten Siebuhr <sbhr@sbhr.dk>
Date:   Wed Jul 29 22:32:02 2015 +0200

    Add basic fuzzer of the parser.

commit 04293424eb55a37a73cac06eafed05990da2621d
Merge: 95a7a58 68e70d9
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Apr 26 16:02:12 2016 +0100

    Merge pull request #1571 from prometheus/ignoring
    
    Fix for #1503

commit 68e70d992a304ea692a496fe43a3ad2f7af14cc0
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Apr 26 14:31:00 2016 +0100

    Clarify error message around on(x) group_left(x)

commit 7201c010c4688fb5d43f2761ce2a799218504870
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Apr 26 14:28:36 2016 +0100

    Rename On to MatchingLabels

commit 95a7a58eb5c64db9e884a74b3dff72555bcf39ec
Merge: 25775b3 07a294a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Apr 26 01:47:24 2016 +0200

    Merge pull request #1591 from prometheus/beorn7/logging
    
    Bring back logging of discarded samples

commit 07a294ac1541307ca02f1bd3e000c3fb840e1388
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 26 01:05:56 2016 +0200

    Doc comment fixes

commit 20cba1ed8fcc9d849f0057d59d3398ee0cff969d
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Apr 25 17:08:07 2016 +0200

    Initialize metric vectors in memorySeriesStorage

commit 5837e6a97fb47af2b43cbcd5dae0fc4b27728191
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 25 16:56:27 2016 +0200

    discovery: move consul SD into own package

commit d566808d40a2602e31250e2e604bbf90b84ca02a
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Apr 25 16:43:52 2016 +0200

    Bring back logging of discarded samples
    
    But only on DEBUG level.
    
    Also, count and report the two cases of out-of-order timestamps on the
    one hand and same timestamp but different value on the other hand
    separately.

commit 25775b3583508e14f9dda355349a491b4e6d06cd
Merge: 490ff9f b5c0931
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Apr 25 12:20:28 2016 +0200

    Merge pull request #1588 from jhermann/patch-1
    
    Explicit link to full install docs added

commit b5c09310e590f136d2fc2d5abb130fcabd5f738d
Author: Jürgen Hermann <jh@web.de>
Date:   Mon Apr 25 11:31:38 2016 +0200

    Explicit link to full install docs added

commit 490ff9fee852905408aa213a27bdaa3051ae60c7
Merge: 816193f e15c354
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Apr 24 13:16:43 2016 +0200

    Merge pull request #1580 from prometheus/fabxc/quay
    
    build: push to Dockerhub and Quay

commit e15c35431b0293a8e08809b5d407db62512dc3db
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Apr 22 18:45:45 2016 +0200

    build: push to Dockerhub and Quay

commit 816193f2541182dfde20a43b3f0783d7c4ed8536
Merge: 53fe563 838c74e
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Apr 24 09:56:30 2016 +0100

    Merge pull request #1581 from prometheus/vendorup
    
    vendor: update govalidator

commit 838c74ee9f6650dad26c0192c92ae977600321b2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Apr 24 10:13:39 2016 +0200

    vendor: update govalidator

commit 53fe5639bf73a823faa752936ef4efcb0efa6876
Merge: 9003ee4 3c6432a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Apr 24 09:56:02 2016 +0200

    Merge pull request #1576 from sdurrheimer/change-circleci-test-image
    
    Update CircleCI test docker image

commit 3c6432ae2a499f7f0ab2ec79aca652c0da01671b
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Fri Apr 22 20:00:47 2016 +0200

    Update CircleCI test docker image

commit 9003ee441b867dfec05db3b6751e9fc53c6fb496
Merge: 0647926 b2292aa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 23 15:14:46 2016 +0200

    Merge pull request #1577 from sdurrheimer/fix-git-branch-with-slash-as-docker-tag
    
    Fix git branch with slash as docker tag

commit 064792681729b0443d04992770a9b6ee8649d6be
Merge: bf0897b c78bd13
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Apr 22 17:10:00 2016 -0400

    Merge pull request #1578 from prometheus/time-in-hoverdetail
    
    Include date and time in graph hover detail.

commit c78bd13a2b80eb6f235a5e2f24c0ef117e1f2ee9
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 22 23:00:18 2016 +0200

    Include date and time in graph hover detail.
    
    This is the same solution as applied to PromDash in
    https://github.com/prometheus/promdash/pull/72.
    
    Fixes https://github.com/prometheus/prometheus/issues/1569

commit b2292aaa62160e2735f55052cb3f67156428038d
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Fri Apr 22 21:47:55 2016 +0200

    Fix git branch with slash as docker tag

commit bf0897bea54e9f2c2fbb1c33674773fe2fbb6eae
Merge: b8b114a 7735d0d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Apr 22 18:33:37 2016 +0200

    Merge pull request #1575 from prometheus/fix-promu-path
    
    Fix build for people without $GOPATH/bin in $PATH.

commit 7735d0da63d9f1ad2739a3ff75e460035ff37688
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 22 18:16:00 2016 +0200

    Fix build for people without $GOPATH/bin in $PATH.

commit d991f0cf47fd00f55c893043dbad2c4d34423c94
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Apr 21 19:03:10 2016 +0100

    For many-to-one matches, always copy label from one side.
    
    This is a breaking change for everyone using the machine roles
    labeling approach.

commit 768d09fd2af923c1b3f0d63ffa5109a32fc2fdfe
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Apr 21 18:41:27 2016 +0100

    Change on+group_* to take copy from the one side.
    
    If the label doesn't exist on the one side, it's not copied.
    
    All labels on the many inside are included, this is a breaking change
    but likely low impact.

commit d1edfb25b3dcea198658e6a6a0984a7be00e1007
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Apr 21 15:53:14 2016 +0100

    Add support for OneToMany with IGNORING.
    
    The labels listed in the group_ modifier will be copied from the one
    side to the many side. It will be valid to specify no labels.
    
    This is intended to replace the existing ON/GROUP_* support.,

commit 1d08c4fef012e169aa5c6f22c2729b7175fc2123
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Apr 21 11:45:06 2016 +0100

    Add 'ignoring' as modifier for binops.
    
    Where 'on' uses the given labels to match,
    'ignoring' uses all other labels to match.
    
    group_left/right is not supported yet.

commit f5084ab1c5a8767020356ee0706b145a8f98fe22
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Apr 21 16:52:33 2016 +0100

    Add tests for group_left/group_right

commit b8b114a82ab72d137dd503741cb2c4add4380d0e
Merge: 585ab6b 8688cf2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 21 16:38:32 2016 +0200

    Merge pull request #1556 from sdurrheimer/master
    
    [WIP] New release process using docker, circleci and a centralized building tool

commit 585ab6b163b4910c7eab35353832205c5c985da4
Merge: 261aba6 79fe798
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 21 13:49:44 2016 +0200

    Merge pull request #1494 from iamseth/master
    
    Add discovery capability for Microsoft Azure

commit 8688cf25793d762df66b92b17ae3d9ffb3b75846
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Mon Dec 21 18:09:38 2015 +0100

    New release process using docker, circleci and a centralized
    building tool

commit 261aba68f1081bfd9f79533c490788e5734c1e4f
Merge: f12ebd6 c0b430b
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Apr 18 19:33:54 2016 +0100

    Merge pull request #1564 from prometheus/better-tooltips
    
    Improve before-relabeling label tooltips.

commit c0b430b8e5a2aa02dd12e9c393117934c4db51cc
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 18 19:56:13 2016 +0200

    Improve before-relabeling label tooltips.
    
    Yes, the label names and values really need double HTML escaping in
    order to end up correctly in the tooltip after two levels of unescaping.
    
    Fixes https://github.com/prometheus/prometheus/issues/1563

commit f12ebd66359cbc3270df186e6fa63258315e084e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 18 09:45:18 2016 +0200

    Update changelog for 0.18.0

commit b489427ea4e280ce9cf7829e85133bdf3192e15f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 18 09:42:46 2016 +0200

    Bump version to 0.18.0

commit 64ed5d0cc7dc6d683b17a7691afe63259322f645
Merge: 78e43ff fceedfa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 16 22:44:15 2016 +0200

    Merge pull request #1561 from prometheus/fabxc/alerterr
    
    Add error message if old alert rule tokens are read

commit fceedfa807fd1d856726711827a568d7a7dc7851
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 16 22:25:51 2016 +0200

    Add error message if old alert rule tokens are read

commit 78e43ff758acd0a385cb3ba097276bb6fbc1e897
Merge: 23d383a 6ac3970
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Apr 15 18:54:03 2016 +0100

    Merge pull request #1560 from prometheus/fix-keep-common-printing
    
    Fix missing printed keep_common without grouping.

commit 6ac39700ead8d40b5394db51528e50992955a47d
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 15 19:48:17 2016 +0200

    Fix missing printed keep_common without grouping.

commit 23d383a743105c1586174bc60ba74f814538c6d3
Merge: 096a2ef db16acd
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Apr 15 19:34:11 2016 +0200

    Merge pull request #1559 from prometheus/beorn7/storage
    
    Never drop a still open head chunk.

commit db16acd7fb43a916b873d07eeb52d776eb06cd4a
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Apr 15 19:18:40 2016 +0200

    Never drop a still open head chunk.

commit 096a2ef200429b3f7f99c3b1eb3d692775a466af
Merge: f6c2984 a90d645
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Apr 15 01:05:32 2016 +0200

    Merge pull request #1555 from prometheus/beorn7/cd
    
    Checkpoint fingerprint mappings only upon shutdown

commit a90d64537872d6dc260f48792d85adb9294b0374
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 14 16:02:37 2016 +0200

    Checkpoint fingerprint mappings only upon shutdown
    
    Before, we checkpointed after every newly detected fingerprint
    collision, which is not a problem as long as collisions are
    rare. However, with a sufficient number of metrics or particular
    nature of the data set, there might be a lot of collisions, all to be
    detected upon the first set of scrapes, and then the checkpointing
    after each detection will take a quite long time (it's O(n²),
    essentially).
    
    Since we are rebuilding the fingerprint mapping during crash recovery,
    the previous, very conservative approach didn't even buy us
    anything. We only ever read from the checkpoint file after a clean
    shutdown, so the only time we need to write the checkpoint file is
    during a clean shutdown.

commit f6c29843fb8a85fbba162dfe0986eed0c55482a7
Merge: 4a372fd 92d5054
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 14 10:38:06 2016 +0200

    Merge pull request #1552 from prometheus/link-to-documentation
    
    Add link to prometheus.io in the README

commit 92d5054c67310894f64324145039cc93460f4224
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Apr 12 21:01:09 2016 -0400

    Add link to prometheus.io in the README

commit 4a372fdcfb3da90f8b55c5e73cc3d7f9955c6508
Merge: 322ad49 096219d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Apr 13 16:36:41 2016 +0200

    Merge pull request #1554 from jonboulle/master
    
    Add missing Apache license headers + travis check

commit 096219d53551aaf0fcddf563c20f15264d2333d6
Author: Jonathan Boulle <jonathanboulle@gmail.com>
Date:   Wed Apr 13 16:09:52 2016 +0200

    Add check_style to travis configuration

commit 38098f8c9597e7cae803b1430526d57e3e364e03
Author: Jonathan Boulle <jonathanboulle@gmail.com>
Date:   Wed Apr 13 16:08:22 2016 +0200

    Add missing license headers
    
    Prometheus is Apache 2 licensed, and most source files have the
    appropriate copyright license header, but some were missing it without
    apparent reason. Correct that by adding it.

commit 1c8262be12c120b43ed18e83321d47e1bd449ea0
Author: Jonathan Boulle <jonathanboulle@gmail.com>
Date:   Wed Apr 13 16:06:32 2016 +0200

    Add script to check for missing license headers
    
    Also adds a `check_license` target to the Makefile to run the script

commit 322ad49b01a11d925d9fe326cef223344f6b91f2
Merge: a18639d b9853ca
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 9 12:56:13 2016 +0200

    Merge branch 'release-0.18'

commit b9853cacbac731da514a3739de96b139ad41356c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 9 12:55:49 2016 +0200

    Add CHANGE on alerting rule syntax

commit a18639dc2d2138fcf2eb536b9d143b565d6682b8
Merge: 0520414 75a6b46
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Apr 8 14:58:01 2016 +0200

    Merge pull request #1454 from prometheus/beorn7/fix-test
    
    Give TestEvictAndLoadChunkDescs more time to actually evict

commit 05204140009e6847a86bcdce837edf23eb83e883
Merge: 8ce4cfe 6d1a756
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 7 16:45:10 2016 +0200

    Merge pull request #1535 from prometheus/fabxc/0.18.0rc1_changelog
    
    Add 0.18.0rc1 changelog

commit 6d1a7566132799b02ac59e050e03848131b3c1f1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 7 16:11:00 2016 +0200

    Add 0.18.0rc1 changelog

commit 8ce4cfe858e566c5889568c192658bcaa9ca9564
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 7 15:43:09 2016 +0200

    Bump version to 0.18.0rc1

commit 79fe798e67b421c50688d64a3d70b75858b1e431
Author: Seth Miller <seth@sethmiller.me>
Date:   Wed Apr 6 22:48:01 2016 -0500

    Add vendoring for Azure discovery

commit 0988e3b93710cff1d293dfa33aeb925ebde51be0
Author: Seth Miller <seth@sethmiller.me>
Date:   Wed Apr 6 22:47:02 2016 -0500

    Add support for Azure discovery
    
    This change adds the ability to do target discovery with Microsoft's Azure platform.

commit 3683eaf20553f54ef97301049ba5aed0a2b7e60d
Merge: 1707995 f3e55cb
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Apr 6 15:40:15 2016 +0100

    Merge pull request #1534 from prometheus/fabxc/gover
    
    Include goversion in build_info metric

commit f3e55cba1d6919a69071dca440249a6d0df64343
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 6 16:22:21 2016 +0200

    Include goversion in build_info metric

commit 17079952c190b391fb2bcfc90e686e5f54ec7905
Merge: cb690a2 77f5b9d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Apr 6 12:08:09 2016 +0200

    Merge pull request #1531 from prometheus/revert-1530-simplify-runtime-version
    
    Revert "Simplify runtime version code more"

commit 77f5b9d268abb4dbb933352c9169ad157cd0c08e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 6 08:39:51 2016 +0200

    Revert "Simplify runtime version code more"

commit cb690a2d2384439c97009525adbea0c8b61036ce
Merge: 2c19334 17ece74
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Apr 6 00:54:20 2016 +0200

    Merge pull request #1530 from prometheus/simplify-runtime-version
    
    Simplify runtime version code more

commit 17ece745117b213c50de7d17c767a5cd8acd4022
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 5 23:57:22 2016 +0200

    Simplify runtime version code more
    
    It's no longer a build-time injected variable (as the comment above its
    block indicates), so move it to the map below.

commit 2c1933471536b81943822315923c39243a32edee
Merge: da701f9 9f5ae81
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 5 23:23:32 2016 +0200

    Merge pull request #1529 from prometheus/fabxc/goversion
    
    Use runtime.Version()

commit da701f9d135d9cad4aadecc022870a14a3e5ad11
Merge: 9ee9106 769389e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 5 22:41:01 2016 +0200

    Merge pull request #1527 from prometheus/fabxc/fixrace
    
    Fix potential race in ctx intialization

commit 9f5ae819e250cc011d6c2475ba81ef9657a6b7c2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 5 22:36:54 2016 +0200

    Use runtime.Version()

commit 769389e559f7cbc453311443a5e883fc944c0bf4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 5 20:27:31 2016 +0200

    Fix potential race in ctx intialization

commit 9ee91062c4edb346ff4940b7c9618a7abdca3e4e
Merge: 6453f64 8cc86f2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 4 21:36:17 2016 +0200

    Merge pull request #1522 from prometheus/unless-operator
    
    Implement relative complement set operator "unless"

commit 8cc86f25c0efa7c87fe01571efdb41e630f3e052
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Sat Apr 2 18:52:18 2016 -0400

    Implement relative complement set operator "unless"
    
    The `unless` set operator can be used to return all vector elements from
    the LHS which do not match the elements on the RHS. A use case is to
    return all metrics for nodes which do not have a specific role:
    
        node_load1 unless on(instance) chef_role{role="app"}

commit 6453f64000e53a5740416de6fce7520315d09ea2
Merge: 4c3dc25 e82ef15
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Apr 3 01:28:44 2016 +0100

    Merge pull request #1523 from prometheus/cleanup
    
    Remove unused code leftovers

commit e82ef154ee21d5e2b6edb461e48abfcaa65b7495
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Mar 25 04:20:15 2016 -0400

    Remove unused code leftovers

commit 4c3dc25e35467b81453b4ff45670350abe0598a7
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Sat Apr 2 18:23:59 2016 -0400

    Fix whitespace in promql test data

commit 6aef22d68ab1d3bf86570eabea71b7ace7a0652e
Merge: eb183ce 235e6c5
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Apr 1 09:39:25 2016 +0100

    Merge pull request #1516 from prometheus/fabxc/rune
    
    Use ContainsRune

commit 235e6c554b4788e191171d0fabb1165bbe6b1828
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Apr 1 10:35:00 2016 +0200

    Use ContainsRune

commit eb183ce15428656033e450e4561dee8762affc32
Merge: 24a3ad3 d09ca03
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Mar 29 16:30:02 2016 +0100

    Merge pull request #1510 from prometheus/beorn7/fix
    
    Work around compiler bug

commit d09ca03e10bc4c17e2d72f15e0460a8168603a80
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 29 16:59:37 2016 +0200

    Work around compiler bug
    
    Benchmarks don't show any significant changes.

commit 24a3ad3d16218f1d34e11f3e7eb7900970417113
Merge: 15ffd6b 1543ef9
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Mar 28 20:53:01 2016 +0100

    Merge pull request #1485 from eliothedeman/master
    
    Adds holt-winters query function

commit 1543ef92b2cd9eaf6041d45864e802f4ae5ec3d7
Author: eliothedeman <eliot.d.hedeman@gmail.com>
Date:   Wed Mar 9 22:29:02 2016 -0500

    Adds holt-winters query function

commit 15ffd6b2827cd8c3dcfe44f340021a428867ca58
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Mar 24 17:02:57 2016 +0100

    Update Fabian's email address

commit d43f380cf2d58898114100361bf5707aaeb0526f
Merge: 070d663 507f550
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 24 14:23:16 2016 +0100

    Merge pull request #1502 from prometheus/beorn7/storage7
    
    Beorn7/storage7

commit 507f550cd44c96006c165311ee4e91decb6ccd24
Merge: 2a62a7c 070d663
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 24 14:21:28 2016 +0100

    Merge branch 'master' into beorn7/storage7

commit 2a62a7c702946d26b0c3aef3e0bad8ff4b9dadac
Merge: 168333d 865d16f
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 24 14:19:20 2016 +0100

    Merge pull request #1491 from prometheus/beorn7/storage8
    
    Gorilla-style chunks

commit 070d663948777a0b6ca7aa7776540bb688024a20
Merge: a9168e6 da5311a
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Mar 24 12:52:28 2016 +0000

    Merge pull request #1501 from prometheus/and-dummy
    
    Pull in fix for and with empty labelsets

commit da5311a35f630748a984fcd84e0b5e619b7c822f
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Mar 24 12:46:53 2016 +0000

    Update common dependency to pick up label fix for #1489

commit 865d16f870debe94dacf8098624f483f19b1ee58
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 23 16:30:41 2016 +0100

    Rename Gorilla into varbit

commit a9168e60c443919ec945e241e3a5cee1e423bae7
Merge: d3b53bd ab3d7a0
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Mar 23 09:30:18 2016 +0000

    Merge pull request #1497 from prometheus/fabxc/alerts
    
    Remove old alerting syntax

commit ab3d7a0ec03021ace5a3a39dc6fb108cdf6cc0b3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 23 10:19:00 2016 +0100

    Remove old alerting syntax

commit d3b53bd7f0433de5fcbd769e555b5621f28cd60b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Mar 23 00:38:32 2016 +0100

    Fix comment about Graphite mapping of dimensions.

commit 4b574e8a61372bf58d103703b676d8b978f9d23c
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Mar 20 23:32:20 2016 +0100

    Switch chunk encoding to type 2 where it was hardcoded type 1 before
    
    The chunk encoding was hardcoded there because it mostly doesn't
    matter what encoding is chosen in that test. Since type 1 is
    battle-hardened enough, I'm switching to type 2 here so that we can
    catch unexpected problems as a byproduct. My expectation is that the
    chunk encoding doesn't matter anyway, as said, but then "unexpected
    problems" contains the word "unexpected".

commit c72979e3ed1a1c3fb7a070b35d935f6e8816b3ad
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Mar 20 23:09:48 2016 +0100

    Remove a redundancy from Gorilla-style chunks
    
    So far, the last sample in a chunk was saved twice. That's required
    for adding more samples as we need to know the last sample added to
    add more samples without iterating through the whole chunk. However,
    once the last sample was added to the chunk before it's full, there is
    no need to save it twice. Thus, the very last sample added to a chunk
    can _only_ be saved in the header fields for the last sample. The
    chunk has to be identifiable as closed, then. This information has
    been added to the flags byte.

commit b6dbb826aea79e2e6de6b96de693fb9477814e71
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Mar 20 17:14:47 2016 +0100

    Improve fuzz testing and fix a bug exposed
    
    This improves fuzz testing in two ways:
    
    (1) More realistic time stamps. So far, the most common case in
    practice was very rare in the test: Completely regular increases of
    the timestamp.
    
    (2) Verify samples by scanning through the whole relevant section of
    the series.
    
    For Gorilla-like chunks, this showed two things:
    
    (1) With more regularly increasing time stamps, BenchmarkFuzz is
    essentially as fast as with the traditional chunks:
    
    ```
    BenchmarkFuzzChunkType0-8              2         972514684 ns/op        83426196 B/op    2500044 allocs/op
    BenchmarkFuzzChunkType1-8              2         971478001 ns/op        82874660 B/op    2512364 allocs/op
    BenchmarkFuzzChunkType2-8              2         999339453 ns/op        76670636 B/op    2366116 allocs/op
    ```
    
    (2) There was a bug related to when and how the chunk footer is
    overwritten to make use for the last sample. This wasn't exposed by
    random access as the last sample of a chunk is retrieved from the
    values in the header in that case.

commit 8788701ce7e8103ffb4633a229713d4d68b30d30
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Mar 18 12:07:40 2016 +0000

    Add test for incorrect behaviour

commit 39d556f0d541f445c3942e64b8016ae8ae331695
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Mar 18 12:02:24 2016 +0000

    Move all the operator tests into one file

commit 9d8fbbe82275f35a1abbda841cd9ac65e8476cbb
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 17 11:58:37 2016 +0100

    Review improvements

commit 8cdced38503a94bebfba0e81c489bc961391e314
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Mar 12 21:34:51 2016 +0100

    Implement Gorilla-inspired chunk encoding
    
    This is not a verbatim implementation of the Gorilla encoding.  First
    of all, it could not, even if we wanted, because Prometheus has a
    different chunking model (constant size, not constant time).  Second,
    this adds a number of changes that improve the encoding in general or
    at least for the specific use case of Prometheus (and are partially
    only possible in the context of Prometheus). See comments in the code
    for details.

commit e83f05fe93c32c9e808b2a6a907337b442a540dc
Merge: 19c5eb6 6f00df2
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 17 14:43:59 2016 +0100

    Merge pull request #1492 from prometheus/beorn7/storage4
    
    Merging what has already been reviewed in other PRs.

commit 6f00df2ee8a0fbd7ec2ee1729913b00f63f1b3da
Merge: 19c5eb6 8e64e8d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 17 14:43:14 2016 +0100

    Merge pull request #1453 from prometheus/beorn7/storage5
    
    Quarantine series upon problem writing to the series file

commit 8e64e8dfca92b9bc6971d9b3a02a647866f8b2ec
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 17 14:43:00 2016 +0100

    Fix return statement.

commit 90eb0555df267beaf539a3e0d421e78073bd053b
Merge: 195853e 98c8560
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 17 14:40:24 2016 +0100

    Merge pull request #1466 from prometheus/beorn7/storage6
    
    Rework chunk iterators

commit 98c85608510f5b91948397b22539cd300fc5d5f6
Merge: e7ac9c6 168333d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 17 14:39:28 2016 +0100

    Merge pull request #1477 from prometheus/beorn7/storage7
    
    Solve the series churn problem...

commit e7ac9c6863baaed1455b2113eaabe5b200316fb6
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 17 14:37:24 2016 +0100

    Improvments based on review
    
    - Moved returns into the default section of switch statement that can
      only happen then.
    
    - Fix typo.

commit 168333d6625206ddc8656793ffd3f6c70b841c0b
Merge: 199f309 79628ae
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 16 17:02:35 2016 +0100

    Merge branch 'beorn7/storage6' into beorn7/storage7

commit 79628ae88364997b0ec596891d552c75be5c822c
Merge: 5e4fa96 195853e
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 16 17:02:18 2016 +0100

    Merge branch 'beorn7/storage5' into beorn7/storage6

commit 195853e8badd1d918e9f750a4cd7c2f7a1da4ae8
Merge: b343e65 19c5eb6
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 16 17:02:04 2016 +0100

    Merge branch 'beorn7/storage4' into beorn7/storage5

commit 19c5eb6194c73c105972a6ea326e86205854b9de
Merge: 813f61e dbe5d18
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 15 18:46:19 2016 +0100

    Merge pull request #1486 from prometheus/instrument-scrape-pool-sync
    
    Instrument scrape pool `sync()`

commit dbe5d18b6e6d76804bafa462b795857d9cd44a0c
Author: stuart nelson <stuartnelson3@gmail.com>
Date:   Fri Mar 11 12:22:23 2016 +0100

    Instrument scrape pool `sync()`
    
    Instruments:
    - duration
    - count

commit 199f309a39c6079b3502766225bfaa54cfd434bc
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Mar 13 11:54:24 2016 +0100

    Resurrect and rename invalid preload requests count metric.
    
    It is now also used in label matching, so the name of the metric
    changed from `prometheus_local_storage_invalid_preload_requests_total`
    to `non_existent_series_matches_total'.

commit 2e4e2459a9a09f7d6690269247213b68a9c1395c
Merge: e8c1f30 813f61e
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat Mar 12 15:07:31 2016 +0100

    Merge branch 'master' into beorn7/storage7

commit 813f61e551e1815ad14bf1279c0535b3b67c2639
Merge: 583b1f3 a1ee776
Author: stuart nelson <stuartnelson3@gmail.com>
Date:   Fri Mar 11 12:26:00 2016 +0100

    Merge pull request #1484 from prometheus/instrument-retrieval
    
    Instrument retrieval/scrape.go

commit a1ee77601aa93cda8c4711a6b3a860be45c0a4e3
Author: stuart nelson <stuartnelson3@gmail.com>
Date:   Wed Mar 9 16:33:10 2016 +0100

    Instrument the duration of the `reload` function

commit e8c1f30ab2020a558cae2f6ec030f1d4fab24421
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 21:56:15 2016 +0100

    Merge the parallel logic of getSeriesForRange and metricForFingerprint

commit 9445c7053d2203ea8ff1d37dfb33d80331c4d709
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 20:27:50 2016 +0100

    Add tests for range-limited label matching
    
    While doing so, improve getSeriesForRange.

commit 47e3c90f9b417938c9caa72e1932f743800d47da
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 18:56:30 2016 +0100

    Clean up error propagation
    
    Only return an error where callers are doing something with it except
    simply logging and ignoring.
    
    All the errors touched in this commit flag the storage as dirty
    anyway, and that fact is logged anyway. So most of what is being
    removed here is just log spam.
    
    As discussed earlier, the class of errors that flags the storage as
    dirty signals fundamental corruption, no even bubbling up a one-time
    warning to the user (e.g. about incomplete results) isn't helping much
    because _anything_ happening in the storage has to be doubted from
    that point on (and in fact retroactively into the past, too). Flagging
    the storage dirty, and alerting on it (plus marking the state in the
    web UI) is the only way I can see right now.
    
    As a byproduct, I cleaned up the setDirty method a bit and improved
    the logged errors.

commit 99854a84d702e1d0cef13c3d662f6870c14254f3
Merge: bbd34d7 5e4fa96
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 17:23:25 2016 +0100

    Merge branch 'beorn7/storage6' into beorn7/storage7

commit 5e4fa96719a6a16e5d28e4a981401d82cab5613e
Merge: 161eada b343e65
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 17:21:32 2016 +0100

    Merge branch 'beorn7/storage5' into beorn7/storage6

commit 583b1f375379edb0e55ea76c89855b7c3588a488
Merge: 7bcf0f2 c088b26
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 9 17:18:05 2016 +0100

    Merge pull request #1483 from prometheus/beorn7/storage
    
    Accumulated merge, already reviewed.

commit c088b2669bc96d4ec2da17e48ac6fbc7818f70f0
Merge: eebe077 b2ce53a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 9 17:16:44 2016 +0100

    Merge pull request #1424 from prometheus/beorn7/storage2
    
    Move and improve lastSamplePair.

commit b2ce53af00301f6f490eab71e95eb12cc9e8dce9
Merge: beb36df cd068c1
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 9 17:16:09 2016 +0100

    Merge pull request #1426 from prometheus/beorn7/storage3
    
    Improve predict_linear

commit cd068c1e65d73439eaf44fbc6c5446eed7d17e86
Merge: 55eddab d0a4477
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 9 17:15:45 2016 +0100

    Merge pull request #1448 from prometheus/beorn7/storage4
    
    Handle errors caused by data corruption more gracefully

commit b343e65907f07d5db777915bd468d320e168b7a6
Merge: d6b00b4 d0a4477
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 17:14:42 2016 +0100

    Merge branch 'beorn7/storage4' into beorn7/storage5
    
    erge is necessary,

commit d0a44774465cfb78a3508fb010829caebfdca964
Merge: eb9caf1 55eddab
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 17:13:16 2016 +0100

    Merge branch 'beorn7/storage3' into beorn7/storage4
    
    Conflicts:
    	storage/local/preload.go
    	storage/local/storage.go
    	storage/local/storage_test.go

commit 55eddab25fc0edfeeb649d7a64228e694191fd21
Merge: dad3021 beb36df
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 16:48:46 2016 +0100

    Merge branch 'beorn7/storage2' into beorn7/storage3

commit 7bcf0f289310237be27ac1386095ba992663cef9
Merge: eebe077 895f2f0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 9 16:36:39 2016 +0100

    Merge pull request #1482 from prometheus/fabxc/testswap
    
    Fix flaky test comparison

commit 161eada3ad5bf65f677778656d92ef418cd2abd1
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 16:20:39 2016 +0100

    Make chunkIterator even leaner.

commit 895f2f092fe3c41419d8107835ebff82cbf91f54
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 9 16:00:33 2016 +0100

    Fix flaky scrape test
    t

commit dad302144dd8e0c304f1b906cdfaa37c445074f9
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 15:06:00 2016 +0100

    Make a naked return less naked

commit beb36df4bb795b170825b6fb9d0e292278ca9af1
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 14:50:09 2016 +0100

    De-flag preloadChunksForRange
    
    Now there is preloadChunksForRange and preloadChunksForInstant in
    both, the series and the storage.

commit bbd34d7ccf5628d0118373eae2c76f033bcfb54a
Merge: 836f1db 7cdfae1
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 00:50:33 2016 +0100

    Merge branch 'beorn7/storage6' into beorn7/storage7

commit 7cdfae1466ebf57e9677642e55b84c614dc0cc6d
Merge: d77d625 d6b00b4
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 00:50:17 2016 +0100

    Merge branch 'beorn7/storage5' into beorn7/storage6

commit d6b00b4f6cf339509c17c9f25d6c3865c5da32a9
Merge: 0179538 eb9caf1
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 00:50:05 2016 +0100

    Merge branch 'beorn7/storage4' into beorn7/storage5

commit eb9caf13be024752f866b91696573bdf964f5448
Merge: c01658e d284864
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 00:49:52 2016 +0100

    Merge branch 'beorn7/storage3' into beorn7/storage4

commit d284864c871ce8f6dd5ef92f3f831616fbe207ac
Merge: f138847 dcb7c0d
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 00:49:41 2016 +0100

    Merge branch 'beorn7/storage2' into beorn7/storage3

commit dcb7c0d3ee8d4a6385ef7831844f4d2c67d45b63
Merge: 1f30c8d eebe077
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 00:48:51 2016 +0100

    Merge branch 'master' into beorn7/storage2

commit 836f1db04c9718bc8164e39d4dc98876c143524a
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 9 00:09:42 2016 +0100

    Improve MetricsForLabelMatchers
    
    WIP: This needs more tests.
    
    It now gets a from and through value, which it may opportunistically
    use to optimize the retrieval. With possible future range indices,
    this could be used in a very efficient way. This change merely applies
    some easy checks, which should nevertheless solve the use case of
    heavy rule evaluations on servers with a lot of series churn.
    
    Idea is the following:
    
    - Only archive series that are at least as old as the headChunkTimeout
      (which was already extremely unlikely to happen).
    
    - Then maintain a high watermark for the last archival, i.e. no
      archived series has a sample more recent than that watermark.
    
    - Any query that doesn't reach to a time before that watermark doesn't
      have to touch the archive index at all. (A production server at
      Soundcloud with the aforementioned series churn and heavy rule
      evaluations spends 50% of its CPU time in archive index
      lookups. Since rule evaluations usually only touch very recent
      values, most of those lookup should disappear with this change.)
    
    - Federation with a very broad label matcher will profit from this,
      too.
    
    As a byproduct, the un-needed MetricForFingerprint method was removed
    from the Storage interface.

commit eebe077f9808cf5caf57260bafee559a45900460
Merge: 84c421d 6ba379e
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Mar 8 18:18:54 2016 +0100

    Merge pull request #1476 from prometheus/beorn7/makefile
    
    Use UTC for build timestamp

commit 6ba379e2563bfa44b8f2f0570f554dd904004ef4
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 8 17:47:17 2016 +0100

    Use UTC for build timestamp

commit d77d625ad35dd18eb807933b791fe56fb6c441fe
Merge: 167b836 84c421d
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 8 17:39:14 2016 +0100

    Merge branch 'master' into beorn7/storage6

commit 84c421da8ea12769eb7bfd8f5fb03ffb9b05db4f
Merge: eb915ec f2e3599
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Mar 8 16:24:55 2016 +0000

    Merge pull request #1475 from prometheus/fabxc/targetsort
    
    Sort exported targets

commit f2e359962c44edebd739f757d3b1294c10aacdac
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 8 17:12:27 2016 +0100

    Sort exported targets

commit eb915ec40f43be9352a0c270d5ab938b22bab142
Merge: 2f151d0 56fc9bd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 8 17:02:05 2016 +0100

    Merge pull request #1474 from prometheus/fabxc/spinfix
    
    Handle closed target provider channel

commit 56fc9bdff32a52179c75f7b525a9739cbe941acb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 8 15:49:03 2016 +0100

    Handle closed target provider channel
    
    This fixes the case where a target provider closes the update
    channel and exits before the context is canceled.
    This should only be true for the static provider but it's safer
    to generally handle this case.

commit 2f151d02eb2092ebdd84778944533ddb57b56103
Merge: 1bd4c92 7763bbd
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Mar 7 20:09:46 2016 -0500

    Merge pull request #1456 from prometheus/validate-alertmanager-url
    
    Validate alertmanager URL

commit 7763bbd99316681bca87930fdde0f1739a2a4d74
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Mar 3 12:19:35 2016 -0500

    Validate alertmanager URL

commit 167b83695cac83634ad61fb5214802af08e3452f
Merge: c13b1ec 0179538
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 8 00:20:44 2016 +0100

    Merge branch 'beorn7/storage5' into beorn7/storage6

commit 01795382c97943deb9484cf83f3488015df5b7e5
Merge: fc7de53 c01658e
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 8 00:20:13 2016 +0100

    Merge branch 'beorn7/storage4' into beorn7/storage5

commit c01658e20d0a89ad03afbe41dbd493e7d7f38afa
Merge: f7fc542 f138847
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 8 00:18:00 2016 +0100

    Merge branch 'beorn7/storage3' into beorn7/storage4

commit f138847d31740d39500dd82c9a35748de36ff410
Merge: 3d86130 1f30c8d
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 8 00:17:33 2016 +0100

    Merge branch 'beorn7/storage2' into beorn7/storage3

commit f7fc542db65adfb3c1ec273dd874a0265abe4fb4
Merge: 0ea5801 1bd4c92
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 8 00:14:00 2016 +0100

    Merge branch 'master' into beorn7/storage4
    
    Conflicts:
    	storage/local/persistence.go

commit 3d86130d8cd3e752df98840866df63ef744afccc
Merge: 8766f99 1bd4c92
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 7 23:39:12 2016 +0100

    Merge branch 'master' into beorn7/storage3

commit 1f30c8de8dc5adda3aef11895406f6a01626627b
Merge: 162f6fa 1bd4c92
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 7 23:38:42 2016 +0100

    Merge branch 'master' into beorn7/storage2

commit c13b1ecfe9144b8bcc62bfc7fe388c9da1ad30ab
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 7 20:23:14 2016 +0100

    Make chunk iterators more DRY
    
    This finally extracts all the common code of the two chunk iterators
    into one. Any future chunk encodings with fast access by index can use
    the same iterator by simply providing an indexAccessor. Other future
    chunk encodings without fast index access (like Gorilla-style) can
    still implement the chunkIterator interface as usual.

commit 32f280a3cd478622e6bf7092064844dda72137e4
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 7 19:50:13 2016 +0100

    Slim down the chunkIterator interface
    
    For one, remove unneeded methods.
    
    Then, instead of using a channel for all values, use a
    bufio.Scanner-like interface. This removes the need for creating a
    goroutine and avoids the (unnecessary) locking performed by channel
    sending and receiving.
    
    This will make it much easier to write new chunk implementations (like
    Gorilla-style encoding).

commit 1bd4c92e1f6110f8a511bfc51002fbce9ee98481
Merge: 6bbb4af b6fdb35
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Mar 7 17:22:48 2016 +0100

    Merge pull request #1457 from prometheus/beorn7/promtool
    
    Add a command to promtool that dumps metadata of heads.db

commit b6fdb355d749fc6c3081ef086503bcdbd2a35b7f
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 7 16:30:19 2016 +0100

    Move dump-heads into its own tool

commit f193f2b8ef0d9508210e8dbddf5903c4e09223d0
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 3 18:29:35 2016 +0100

    Add a command to promtool that dumps metadata of heads.db
    
    I needed this today for debugging. It can certainly be improved, but
    it's already quite helpful.
    
    I refactored the reading of heads.db files out of persistence, which
    is an improvement, too.
    
    I made minor changes to the cli package to allow outputting via the
    io.Writer interface.

commit 6bbb4af837c99f058e2d19f9d6ab7ec2c2c7741d
Merge: 2a2cc52 d44b836
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 7 15:46:18 2016 +0100

    Merge pull request #1465 from prometheus/beorn7/fix-test2
    
    Fix flaky file-sd test

commit d44b83690ee0678a663ec9517c0d31dc0ac708ad
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 7 15:39:18 2016 +0100

    Fix flaky file-sd test

commit 2a2cc52828085c61be5ec16cbbe1ea7e13933815
Merge: 5b9e85e 79a2ae2
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Mar 7 13:30:56 2016 +0100

    Merge pull request #1405 from prometheus/beorn7/storage
    
    Streamline series iterator creation

commit 5b9e85e5560dbeda36fe17332d7db630ddf80788
Merge: 6ceb7e7 ddc74f7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Mar 6 22:17:00 2016 +0100

    Merge pull request #1404 from prometheus/scraperef2
    
    Retrieval refactoring

commit 6ceb7e788759102afd5a82c88fae69663095fbcf
Merge: 8d2a73a 53777e7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Mar 5 08:57:18 2016 +0100

    Merge pull request #1463 from mischief/linuxisms
    
    scripts: drop -f from hostname, openbsd does not support it

commit 53777e7bc4ec174b698718798425d59931502741
Author: Nick Owens <mischief@offblast.org>
Date:   Fri Mar 4 19:59:28 2016 -0800

    scripts: drop -f from hostname, openbsd does not support it

commit 8d2a73aff0711dd21c240605fd05bb1b4318601f
Merge: 29e31dc 250344b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Mar 3 19:42:17 2016 +0100

    Merge pull request #1451 from pdbogen/origin/1446
    
    rewrite operator balancing to be recursive

commit 250344b3442efdaafa0aa1d25e343fafb92916a1
Author: Patrick Bogen <patrick@srcclr.com>
Date:   Thu Mar 3 09:46:50 2016 -0800

    use short variable assignment

commit 75a6b460ef714804817f4ba1740d69374521e202
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 3 13:29:39 2016 +0100

    Give TestEvictAndLoadChunkDescs more time to actually evict
    
    Obviously, it's really bad to depend on timing here. The proper fix
    would be to have something like WaitForIndexing for other things to
    wait for, too.
    
    For now, let's see if the wait time increase fixes the issue.

commit fc7de5374a2c3f4f07a24ba56ae3e3d3f6fa7c7d
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 3 13:15:02 2016 +0100

    Quarantine series upon problem writing to the series file
    
    This fixes https://github.com/prometheus/prometheus/issues/1059 , but
    not in the obvious way (simply not updating the persist watermark,
    because that's actually not that simple - we don't really know what
    has gone wrong exactly). As any errors relevant here are most likely
    caused by severe and unrecoverable problems with the series file,
    Using the now quarantine feature is the right step. We don't really
    have to be worried about any inconsistent state of the series because
    it will be removed for good ASAP. Another plus is that we don't have
    to declare the whole storage dirty anymore.

commit 29e31dc3c6b04dd4b6788f2ebc17d66b2f482be1
Merge: 7a0c0c3 d7889e6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Mar 3 09:22:56 2016 +0100

    Merge pull request #1452 from prometheus/fix-style-checker
    
    Detect code style violations in deeply nested files

commit d7889e61bbc2a9e11943feff2109e498a9503f04
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Mar 3 02:19:41 2016 -0500

    Detect code style violations in deeply nested files
    
    So far the style check did not recognize issues in files in deeply
    nested directories, e.g. retrieval/discovery/kubernetes/discovery.go.

commit 2062fbae0fbbd9f964d9c10ae08008cabb45fe39
Author: Patrick Bogen <patrick@srcclr.com>
Date:   Wed Mar 2 15:56:40 2016 -0800

    rewrite operator balancing to be recursive

commit 0ea5801e4766664016233451ddbff6f581822a1e
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 25 12:23:42 2016 +0100

    Handle errors caused by data corruption more gracefully
    
    This requires all the panic calls upon unexpected data to be converted
    into errors returned. This pollute the function signatures quite
    lot. Well, this is Go...
    
    The ideas behind this are the following:
    
    - panic only if it's a programming error. Data corruptions happen, and
      they are not programming errors.
    
    - If we detect a data corruption, we "quarantine" the series,
      essentially removing it from the database and putting its data into
      a separate directory for forensics.
    
    - Failure during writing to a series file is not considered corruption
      automatically. It will call setDirty, though, so that a
      crashrecovery upon the next restart will commence and check for
      that.
    
    - Series quarantining and setDirty calls are logged and counted in
      metrics, but are hidden from the user of the interfaces in
      interface.go, whith the notable exception of Append(). The reasoning
      is that we treat corruption by removing the corrupted series, i.e. a
      query for it will return no results on its next call anyway, so
      return no results right now. In the case of Append(), we want to
      tell the user that no data has been appended, though.
    
    Minor side effects:
    
    - Now consistently using filepath.* instead of path.*.
    
    - Introduced structured logging where I touched it. This makes things
      less consistent, but a complete change to structured logging would
      be out of scope for this PR.

commit 8766f990855b94b4292c0338ee01180c6bcb368d
Merge: b684099 162f6fa
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 2 23:02:06 2016 +0100

    Merge branch 'beorn7/storage2' into beorn7/storage3

commit 162f6fa6f638b06096f2598df2d81b12d6cdf873
Merge: ce58fd3 79a2ae2
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 2 23:01:26 2016 +0100

    Merge branch 'beorn7/storage' into beorn7/storage2

commit 79a2ae2d2e512b5339bb929fef779be8ede2365e
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 2 23:00:23 2016 +0100

    Add missing test file

commit 7a0c0c3ca2d987689c0daf3eb0c7c78d624d4f56
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 2 17:58:01 2016 +0100

    Remove noise from CHANGELOG

commit 1e7ce3ffdbd21ff31f21316ae9c567d3d48a78f7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 2 17:47:11 2016 +0100

    Bump version to 0.17.0

commit 2bfb86d77c1b71c5a3aed37c72a2b2b512615752
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 2 17:45:43 2016 +0100

    Update changelog for 0.17.0 release

commit b6840997a7ffbf74481dbec92927a8e563f7b648
Merge: 536e0bc ce58fd3
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 2 16:11:25 2016 +0100

    Merge branch 'beorn7/storage2' into beorn7/storage3

commit ce58fd357bb01a1b80eefb451770440351b6313d
Merge: 4b503ed 2581648
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 2 16:09:32 2016 +0100

    Merge branch 'beorn7/storage' into beorn7/storage2
    
    Conflicts:
    	storage/local/chunk.go
    	storage/local/interface.go

commit 2581648f70912f6af93a162b543e76749ce29b4a
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 2 13:45:17 2016 +0100

    Separate iterators by offset
    
    Add test that exposes the problem.

commit 6adf77e4112509fb71b253a6ae303914b21c9247
Merge: 95c9706 d89c254
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 2 12:25:19 2016 +0100

    Merge pull request #1447 from prometheus/fabxc/alertfix
    
    Make copying alerting state safer.

commit d89c2548499d50aaf78f4e28096a8645062d954b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 2 11:54:37 2016 +0100

    Make copying alerting state safer.
    
    This considers static labels in the equality of alerts to
    avoid falsely copying state from a different alert definition with
    the same name across reloads.
    
    To be safe, it also copies the state map rather than just its pointer
    so that remaining collisions disappear after one evaluation interval.

commit 95c9706d2dfdfc5145e48424eeea4b04c43bbb2c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 2 09:16:56 2016 +0100

    Fix missing comment period.

commit ddc74f712b05a26af1c7463fbb6003c78a53329b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Mar 2 09:10:20 2016 +0100

    Add sortable target list

commit 9ea2465b997cb751ec44cac54349f63818814735
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 2 01:13:27 2016 +0100

    Fix typo in lexer test.

commit ca31d3638294ad7b6a034ee9c0c151a8ce326b6b
Merge: 5b78fdd 907b138
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Mar 1 22:31:08 2016 +0000

    Merge pull request #1444 from prometheus/add-tests-for-string-parsing
    
    Add tests to specify the string escaping behavior

commit 907b1380a712ea7c703e25462fa9817551a79781
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Tue Mar 1 17:23:18 2016 -0500

    Add tests to specify the string escaping behavior

commit 5b78fdd6b7562ed4c690d6bfa6285074fec1aded
Merge: 671cc59 bfa8aaa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 1 20:14:52 2016 +0100

    Merge pull request #1439 from prometheus/fabxc/notifier
    
    Rename notification to notifier

commit 2c931950c664f304f6b7d3cc596758a736c9f50d
Merge: cf56e33 499f4af
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 1 17:16:43 2016 +0100

    Merge pull request #1441 from prometheus/scraperef9
    
    Next iteration of retrieval refactoring

commit 499f4af4aa109185410697d9d5a7f7e4c38d8044
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 1 14:49:57 2016 +0100

    Test target URL

commit 50c2f20756aa37afc75e5ccd2871a3238e0e2d8e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Feb 28 23:59:03 2016 +0100

    Add targetScraper tests

commit 1ede7b9d729af17f85565cddea41aaba5581d864
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Feb 28 20:23:26 2016 +0100

    Consolidate TargetStatus into Target.
    
    This commit simplifies the TargetHealth type and moves the target
    status into the target itself. This also removes a race where error
    and last scrape time could have been out of sync.

commit 2060a0a15b93fd2cb7e44d03edb4f0e0a6a0529f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Feb 28 20:03:44 2016 +0100

    Turn target group members into plain lists.
    
    As the scrape pool deduplicates targets now, it is no longer necessary
    to store a hash map for members of each group.

commit 0d7105abeeb7014e4d2496e76adbc3cedcda64d3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Feb 28 19:56:18 2016 +0100

    Remove scrape config from Target.
    
    This commit removes the scrapeConfig entirely from Target.
    All identity defining parameters are thus immutable now and the mutex
    can be removed..
    
    Target identity is now correctly defined by the labels and the full URL.
    This in particular includes URL parameters that are not specified in the
    label set.
    
    Fingerprint is also removed from hash to remove an unnecessary tight coupling
    to the common/model package.

commit 75681b691ac2834a8566df1ede6c7418394570b5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Feb 28 19:21:50 2016 +0100

    Extract HTTP client from Target.
    
    The HTTP client is the same across all targets with the same
    scrape configuration. Thus, this commit moves it into the scrape
    pool.

commit cf56e330303226ff8f578e9bc7d07462a9206be6
Merge: fbe251c 9bea27a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 1 14:04:27 2016 +0100

    Merge pull request #1429 from prometheus/scraperef7
    
    Next iteration of retrieval refactoring

commit 9bea27ae8a7425d56e17ad19d44b84a7b6cf43cf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Feb 28 09:51:02 2016 +0100

    Add scraping tests

commit 76a8c6160d4659f32d42a923d7f556ee69352f5a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 23 14:37:25 2016 +0100

    Deduplicate targets in scrape pool.
    
    With this commit the scrape pool deduplicates incoming
    targets before scraping them. This way multiple target providers
    can produce the same target but it will be scraped only once.

commit 84f74b9a840f375acbb95bb1259ba24a43269ca2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 23 13:34:24 2016 +0100

    Apply new scrape config on reload.
    
    This commit updates a target set's scrape configuration
    on reload. This will cause all running scrape loops to be
    stopped and started again with new parameters.

commit 02f635dc241f7de0cf99ee3af954bd2e764ec3a3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 23 12:06:08 2016 +0100

    Remove interval/timeout from Target internals

commit 775316f8d2fffe840b9fa7403a16eb40cd60bbea
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 23 11:56:09 2016 +0100

    Move appender construction from Target to scrapePool

commit fbe251c2df399b89bf87a11352ab26aff676d8d0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Feb 25 14:05:42 2016 +0100

    Fix scrape interval length calculation

commit 1a3253e8ede7fa55641ccb291bf99b08fcc97287
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Feb 25 13:58:46 2016 +0100

    Make scrape time unambigious.
    
    This commit changes the scraper interface to accept a timestamp
    so the reported timestamp by the caller and the timestamp
    attached to samples does not differ.

commit 2bb8ef99d1577082793cb32f45055dd128444faf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 23 10:58:16 2016 +0100

    Test scrape loop behavior.

commit c7bbe95597fe6d8aa67b16011056b850afb7f790
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 22 18:49:26 2016 +0100

    Remove outdated target tests

commit 05de8b7f8d43bc37b7198cad16e9b4760ba255ff
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 22 16:46:55 2016 +0100

    Extract target scraping into scrape loop.
    
    This commit factors out the scrape loop handling into
    its own data structure.
    For the transition it will be directly attached to the
    target.

commit cebba3efbb143d35a9ffdb01930cc648235beaa3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 22 12:42:11 2016 +0100

    Simplify and fix TargetManager reloading

commit da99366f85bb9acc758ecc4ff0eeec43ac0310c7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 22 10:54:01 2016 +0100

    Consolidate Target.Update into constructor.
    
    The Target.Update method is no longer needed.

commit d15adfc917b3d417980c6259c0c8f072f1f82082
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 19 22:54:51 2016 +0100

    Preserve target state across reloads.
    
    This commit moves Scraper handling into a separate scrapePool type.
    TargetSets only manage TargetProvider lifecycles and sync the
    retrieved updates to the scrapePool.
    
    TargetProviders are now expected to send a full initial target set
    within 5 seconds. The scrapePools preserve target state across reloads
    and only drop targets after the initial set was synced.

commit 5b30bdb610a8fe7019edbf23bfc10412309ca5b8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Feb 18 17:26:27 2016 +0100

    Change TargetProvider interface.
    
    This commit changes the TargetProvider interface to use a
    context.Context and send lists of TargetGroups, rather than
    single ones.

commit bb6dc3ff783463e0f9fdc915232b546cc0a116b3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Feb 18 12:32:36 2016 +0100

    Remove old tests

commit 5bfa4cdd46b9d2ff843f6ffe85e15fc87c614737
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 17 19:33:17 2016 +0100

    Simplify target update handling.
    
    We group providers by their scrape configuration. Each provider produces
    target groups with an unique identifier.
    
    On stopping a set of target providers we cancel the target providers,
    stop scraping the targets and wait for the scrapers to finish.
    
    On configuration reload all provider sets are stopped and new ones
    are created. This will make targets disappear briefly on configuration
    reload. Potentially scrapes are missed but due to the consistent
    scrape intervals implemented recently, the impact is minor.

commit 671cc59de7d66497dbfdc92556f3a933faa867fb
Merge: 42a64a7 e59b7c1
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Mar 1 12:27:48 2016 +0000

    Merge pull request #1440 from fabric8io/kubernetes-discovery
    
    Kubernetes SD: Fix node IP discovery

commit e59b7c15a3ced22b16a603c2dea9ec9f3634039d
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Mar 1 12:02:43 2016 +0000

    Kubernetes SD: Fix node IP discovery

commit bfa8aaa017275754664f332fa6cde57f09df7272
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 1 12:37:22 2016 +0100

    Rename notification to notifier

commit 42a64a7d0b3ebbbdec16298ca987547d90b8804c
Merge: e4d0ae9 1b3ea0e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 1 12:32:15 2016 +0100

    Merge pull request #1434 from igncp/master
    
    Fix function names in comments

commit 1b3ea0ea1b490539cbfe87e12d25d402c6190da1
Author: Ignacio Carbajo <icarbajop@gmail.com>
Date:   Mon Feb 29 21:58:32 2016 +0000

    Fix function names in comments

commit e4d0ae9b4efc0a2cef443ded1cb345955d4febab
Merge: 73399f8 33a50e6
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 29 16:46:33 2016 +0100

    Merge pull request #1432 from prometheus/beorn7/fix-deadlock
    
    Fix a deadlock

commit 536e0bc86b42f750699f2b2f551cf42b26d2ed99
Merge: c740789 33a50e6
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 29 16:37:16 2016 +0100

    Merge branch 'beorn7/fix-deadlock' into beorn7/storage3

commit 33a50e69f75e59612c7a5afb4d94bbe101bff7a2
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 29 16:33:22 2016 +0100

    Fix a deadlock
    
    Double acquisition of the RLock usually doesn't blow up, but if the
    write lock is called for between the two RLock's, we are deadlocked.
    
    This deadlock does not exist in release-0.17, BTW.

commit c740789ce3b80b80b2d5758ce5464f7ba51836d2
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 24 17:16:24 2016 +0100

    Improve predict_linear
    
    Fixes https://github.com/prometheus/prometheus/issues/1401
    
    This remove the last (and in fact bogus) use of BoundaryValues.
    
    Thus, a whole lot of unused (and arguably sub-optimal / ugly) code can
    be removed here, too.

commit 73399f826a11a2032c36a5346d176ae8d2d9edfe
Merge: a8c79f0 657d65d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 24 22:27:55 2016 +0100

    Merge pull request #1427 from prometheus/fix-scrape-timeout
    
    Remove invalid scrape timeout from example config.

commit 657d65d6d66920469bbb3c5718d241e769333d77
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 24 21:06:36 2016 +0100

    Remove invalid scrape timeout from example config.
    
    It can't be greater than the scrape interval. Let's just remove it.

commit 4b503ed9a55cd68b64f23191f25e879b036f6001
Merge: 53005c3 a8c79f0
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 24 14:03:49 2016 +0100

    Merge branch 'master' into beorn7/storage2

commit 059295332fb2f1b41be557f527fc1dfc2e473cd1
Merge: 28e9bbc a8c79f0
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 24 14:02:27 2016 +0100

    Merge remote-tracking branch 'origin/master' into beorn7/storage

commit 53005c3085951795be40c12b443fb366ac60a1a5
Merge: 41e44f6 28e9bbc
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 24 14:00:56 2016 +0100

    Merge branch 'beorn7/storage' into beorn7/storage2

commit 28e9bbc15f570c607ccffc09f7e89266f4de7247
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 24 13:58:34 2016 +0100

    Populate chunkDesc.chunkLastTime during checkpoint loading, too

commit a8c79f0a0cd4da0f18229804d3e9541b79b0c38d
Merge: e4e00b6 5eff37c
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Feb 23 23:07:44 2016 +0100

    Merge pull request #1422 from prometheus/release-0.17
    
    Merge more commits from 0.17.

commit 5eff37ccbeb24482dd325634cefca30c67858d77
Merge: 17bfe79 8fa1560
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Feb 23 22:25:27 2016 +0100

    Merge pull request #1421 from prometheus/beorn7/fix
    
    Fix a very special case of handling the checkpoint timer

commit 8fa1560e489eaa39eec31f2f930a49b9d443c230
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Feb 23 15:30:56 2016 +0100

    Fix a very special case of handling the checkpoint timer

commit 17bfe798eb3b05e6500e5219fb653fe97493ee46
Merge: 51aad63 b7e6651
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Feb 23 11:21:35 2016 +0100

    Merge pull request #1419 from prometheus/release-note-fixes
    
    Improve 0.17.0 changelog

commit b7e6651e06726354ff843aacc15caffe69c00063
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Feb 22 19:48:31 2016 -0500

    Improve 0.17.0 changelog
    
    * remove wrong release date until 0.17.0 gets actually released
    * fix wrong alertmanager version number
    * add example for regex anchor change

commit e4e00b6f249de9eb93a674cfd0eae6166604379a
Merge: 888c77c 0c537d6
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Feb 22 23:44:46 2016 +0000

    Merge pull request #1418 from igncp/patch-1
    
    Fix minor typo

commit 0c537d6af6b8a4a4d957c2a354812a7303618758
Author: Ignacio Carbajo <icarbajop@gmail.com>
Date:   Mon Feb 22 23:25:17 2016 +0000

    Fix minor typo

commit 41e44f6ab9f61c447f3232ce3d82b675b199910e
Merge: 454ecf3 888c77c
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 22 16:54:33 2016 +0100

    Merge branch 'master' into beorn7/storage2

commit 888c77cb0607bd6330d5093e1fc1dc7c3764ee00
Merge: d9eb624 fd5108b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 22 16:53:59 2016 +0100

    Merge pull request #1416 from prometheus/beorn7/fix-test
    
    Fix a targetmanager test

commit fd5108b038c4447b02a8f54dc9cf2a13854100d3
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 22 16:43:48 2016 +0100

    Fix a targetmanager test

commit d9eb624322a2ff8a1f31fda485d78bca3e239ab0
Merge: 04946af 51aad63
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 22 16:39:48 2016 +0100

    Merge pull request #1415 from prometheus/release-0.17
    
    Forward-merge release-0.17 into master

commit 51aad630b6f3c6430815baa74cc140d261f9bdb4
Merge: 667c221 4d1f7b4
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 22 16:09:19 2016 +0100

    Merge pull request #1414 from prometheus/beorn7/rushed-race
    
    Fix a race condition in calculatePersistenceUrgencyScore

commit 4d1f7b49b6d7429d88cedee612ff90f60c0f9b73
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 22 15:48:39 2016 +0100

    Fix a race condition in calculatePersistenceUrgencyScore

commit 04946afd0a81a05407bb666e22e52b4248e042f7
Merge: 209c4ad 6df1f49
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Feb 22 12:11:08 2016 +0000

    Merge pull request #1412 from prometheus/fingerprintfix
    
    Remove fullLabels method and fix target updating

commit 6df1f49c13aca37afca44f914c4b8f75e1b51790
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 22 13:06:30 2016 +0100

    Remove fullLabels method and fix target updating
    
    With recent changes to a Target's internal data representation
    updating by fullLabels() assigns the additional default
    instance label. This breaks target identity comparison and causes
    identical targets from service discovery to be constantly swapped.

commit 454ecf3f52818f2d8ecd4581eeea10b45d98b723
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 19 18:35:30 2016 +0100

    Rework the way ranges and instants are handled
    
    In a way, our instants were also ranges, just with the staleness delta
    as range length. They are no treated equally, just that in one case,
    the range length is set as range, in the other the staleness
    delta. However, there are "real" instants where start and and time of
    a query is the same. In those cases, we only want to return a single
    value (the one closest before or at the equal start and end time). If
    that value is the last sample in the series, odds are we have it
    already in the series object. In that case, there is no need to pin or
    load any chunks. A special singleSampleSeriesIterator is created for
    that. This should greatly speed up instant queries as they happen
    frequently for rule evaluations.

commit 209c4ad64fe7346aba9274da63c8729142396a7f
Merge: fce17b4 69ebf45
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Feb 21 10:35:00 2016 +0100

    Merge pull request #1410 from bluecmd/patch-1
    
    Allow custom ldflags for go build

commit 69ebf45649ebbefcd7f81697dd54480606f0fbee
Author: Christian Svensson <blue@cmd.nu>
Date:   Sat Feb 20 17:34:36 2016 +0100

    Allow custom ldflags for go build
    
    This allows users to use CGO and external linker when building Prometheus.

commit b876f8e6a5fe047b16cdc71c4eccd743b3369299
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 19 18:16:41 2016 +0100

    Move lastSamplePair method up to memorySeries
    
    This implies a slight change of behavior as only samples added to the
    respective instance of a memorySeries are returned. However, this is
    most likely anyway what we want.
    
    Following cases:
    
    - Server has been restarted: Given the time it takes to cleanly
      shutdown and start up a server, the series are now stale anyway. An
      improved staleness handling (still to be implemented) will be based
      on tracking if a given target is continuing to expose samples for a
      given time series. In that case, we need a full scrape cycle to
      decide about staleness. So again, it makes sense to consider
      everything stale directly after a server restart.
    
    - Series unarchived due to a read request: The series is definitely
      stale so we don't want to return anything anyway.
    
    - Freshly created time series or series unarchived because of a sample
      append: That happens because appending a sample is imminent. Before
      the fingerprint lock is released, the series will have received a
      sample, and lastSamplePair will always returned the expected value.

commit 1e13f89039a1b8c666a354ec941d9dfbc64b4d3f
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 19 16:46:11 2016 +0100

    Return SamplePair istead of *SamplePair consistently
    
    Formalize ZeroSamplePair as return value for non-existing samples.
    
    Change LastSamplePairForFingerprint to return a SamplePair (and not a
    pointer to it), which saves allocations in a potentially extremely
    frequent call.

commit d290340367e609d97b5b437a0be5e8f70de87515
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 19 12:24:29 2016 +0100

    Fix and improve chunkDesc locking

commit 0e202dacb41604f97d9de711bc1d35f717a1f675
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Feb 16 18:47:50 2016 +0100

    Streamline series iterator creation
    
    This will fix issue #1035 and will also help to make issue #1264 less
    bad.
    
    The fundamental problem in the current code:
    
    In the preload phase, we quite accurately determine which chunks will
    be used for the query being executed. However, in the subsequent step
    of creating series iterators, the created iterators are referencing
    _all_ in-memory chunks in their series, even the un-pinned ones. In
    iterator creation, we copy a pointer to each in-memory chunk of a
    series into the iterator. While this creates a certain amount of
    allocation churn, the worst thing about it is that copying the chunk
    pointer out of the chunkDesc requires a mutex acquisition. (Remember
    that the iterator will also reference un-pinned chunks, so we need to
    acquire the mutex to protect against concurrent eviction.) The worst
    case happens if a series doesn't even contain any relevant samples for
    the query time range. We notice that during preloading but then we
    will still create a series iterator for it. But even for series that
    do contain relevant samples, the overhead is quite bad for instant
    queries that retrieve a single sample from each series, but still go
    through all the effort of series iterator creation. All of that is
    particularly bad if a series has many in-memory chunks.
    
    This commit addresses the problem from two sides:
    
    First, it merges preloading and iterator creation into one step,
    i.e. the preload call returns an iterator for exactly the preloaded
    chunks.
    
    Second, the required mutex acquisition in chunkDesc has been greatly
    reduced. That was enabled by a side effect of the first step, which is
    that the iterator is only referencing pinned chunks, so there is no
    risk of concurrent eviction anymore, and chunks can be accessed
    without mutex acquisition.
    
    To simplify the code changes for the above, the long-planned change of
    ValueAtTime to ValueAtOrBefore time was performed at the same
    time. (It should have been done first, but it kind of accidentally
    happened while I was in the middle of writing the series iterator
    changes. Sorry for that.) So far, we actively filtered the up to two
    values that were returned by ValueAtTime, i.e. we invested work to
    retrieve up to two values, and then we invested more work to throw one
    of them away.
    
    The SeriesIterator.BoundaryValues method can be removed once #1401 is
    fixed. But I really didn't want to load even more changes into this
    PR.
    
    Benchmarks:
    
    The BenchmarkFuzz.* benchmarks run 83% faster (i.e. about six times
    faster) and allocate 95% fewer bytes. The reason for that is that the
    benchmark reads one sample after another from the time series and
    creates a new series iterator for each sample read.
    
    To find out how much these improvements matter in practice, I have
    mirrored a beefy Prometheus server at SoundCloud that suffers from
    both issues #1035 and #1264. To reach steady state that would be
    comparable, the server needs to run for 15d. So far, it has run for
    1d. The test server currently has only half as many memory time series
    and 60% of the memory chunks the main server has. The 90th percentile
    rule evaluation cycle time is ~11s on the main server and only ~3s on
    the test server. However, these numbers might get much closer over
    time.
    
    In addition to performance improvements, this commit removes about 150
    LOC.

commit fce17b41c575a520d1e9cdbd2ab4853d0a970a6a
Merge: cd85352 e62677d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 19 12:22:12 2016 +0100

    Merge pull request #1408 from prometheus/hostname
    
    Log argument parse errors

commit e62677d7ba17bf8c496aeec39cbd8ed4b10057c7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 19 12:18:19 2016 +0100

    Log argument parse errors
    
    Fixes #1407

commit cd85352fe120f99a29714e9fde61f2fddc0f8b2d
Merge: b447002 6a323b1
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Feb 17 22:58:05 2016 +0000

    Merge pull request #1403 from igncp/master
    
    Fix minor typo

commit 6a323b1e6d6c75525d067fb7cd30ae206661c4b3
Author: Ignacio Carbajo <icarbajop@gmail.com>
Date:   Wed Feb 17 22:52:44 2016 +0000

    Fix minor typo

commit b447002309ea2a1eed997f9f884c335bbdbb88a6
Merge: c24c5e6 825831e
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Feb 17 15:37:10 2016 +0000

    Merge pull request #1402 from prometheus/fabxc/target-identity
    
    Use fingerprint for target identity comparison

commit 825831e98ff75529f995323a419b792cf2700be4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 17 16:34:53 2016 +0100

    Use fingerprint for target identity comparison
    
    So far we were using the InstanceIdentifier to compare equality of targets.
    This is not always accurate, for example for the blackbox exporter where the
    actual target is in the parameter.

commit c24c5e6fb352d4f948cbd676b58abfced71244cf
Merge: 73e38c5 663a155
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 17 15:57:48 2016 +0100

    Merge pull request #1400 from prometheus/beorn7/instrumentation
    
    Fix the instrumentation fixes

commit 663a1550d09bd938f132055436e92fa417ace49a
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Feb 17 15:50:55 2016 +0100

    Fix the instrumentation fixes

commit 73e38c534a905897e2cbc0b99a40ef217e8b8ff8
Merge: 1f70345 6676712
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 16 15:11:09 2016 +0100

    Merge pull request #1398 from prometheus/scraperef2
    
    Handle scrape timeout on request.

commit 66767121ab5e5cdf12209d727551f8a80708ec73
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 16 11:44:42 2016 +0100

    Handle scrape timeout on request.
    
    For historic reasons we were enforcing a timeout directly
    via the TCP dialer. This is no longer necessary for quite a while now.
    Switching to context.Context will allow us to properly terminate
    requests on shutdown as well.

commit 1f70345d0c0706cfd0f6e6a6c537aaad10d132bd
Merge: a0078ec 293486c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 22:46:09 2016 +0100

    Merge pull request #1397 from prometheus/remove-old-scrapetime-setting
    
    Remove old superfluous calls to setLastScrape().

commit 293486c7b17a0455f3e33cf4d4c65382883ad644
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 15 22:40:56 2016 +0100

    Remove old superfluous calls to setLastScrape().
    
    This is called from within the scrape()->report() flow now.
    
    See https://github.com/prometheus/prometheus/pull/1394/files#r52945817

commit a0078ec84c9d2ab756bb17ec118c5c99b0d688b4
Merge: f110159 463dd3e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 21:19:40 2016 +0100

    Merge pull request #1394 from prometheus/scraperef2
    
    Refactor and test appender modifications

commit 463dd3ea06865e3e3c671f4e5ef7a97ad5f82ddd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 16:21:03 2016 +0100

    Refactor target scrape reporting.

commit f1101590eeb92e5a4773d266182ab123ef5ba163
Merge: cb86a43 cd28b88
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 17:26:34 2016 +0100

    Merge pull request #1395 from prometheus/fabxc/eof
    
    Fix wrong EOF error on successful target scraping

commit cd28b88b08de98b2cca24269742b1bc256eca1ff
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 17:23:04 2016 +0100

    Fix wrong EOF error on successful target scraping

commit cb86a4300b06526ef9bb84f36ddeffab4441f1d7
Merge: 65d226b fe7e91e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 16:52:03 2016 +0100

    Merge pull request #1393 from prometheus/scraperef
    
    Make scraping offset consistent.

commit 27d71b08d1e99a8395d0a0938433e2f554dabcad
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 16:10:29 2016 +0100

    Factor out appender wrapping

commit fe7e91e2ebd8d1af63d0d144eb759b77f4c6afe2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 15:22:57 2016 +0100

    Make scraping offset consistent.
    
    To evenly distribute scraping load we currently rely on random
    jittering. This commit hashes over the target's identity and calculates
    a consistent offset. This also ensures that scrape intervals
    are constantly spaced between config/target changes.

commit 65d226b17a6fec11fd8162860a0e8f9667e7bcf4
Merge: 7e41f45 37c709f
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Feb 15 13:21:17 2016 +0000

    Merge pull request #1392 from prometheus/scrapetimeout
    
    Fix global config YAML issues

commit 7e41f45fe7d5eed472110e5a158770471c63c755
Merge: b3fb91e ef3ab96
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 15 14:18:01 2016 +0100

    Merge pull request #1387 from prometheus/beorn7/storage
    
    Populate first and last time in the chunk descriptor earlier

commit 37c709f9171eec7b18b130a83ff36a08811d641e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 14:08:25 2016 +0100

    Fix global config YAML issues

commit ef3ab96111e05e3b96c869bdc3d92aae7f6fd904
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 11 17:36:13 2016 +0100

    Populate first and last time in the chunk descriptor earlier
    
    The First time is kind of trivial as we always know it when we create
    a new chunkDesc.
    
    The last time is only know when the chunk is closed, so we have to set
    it at that time.
    
    The change saves a lot of digging down into the chunk
    itself. Especially the last time is relative expensive as it involves
    the creation of an iterator. The first time access now doesn't require
    locking, which is also a nice gain.

commit b3fb91ec8763504cf904526c761bd5b00eced368
Merge: 938ebe7 44a5e86
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Feb 15 11:12:28 2016 +0000

    Merge pull request #1391 from prometheus/scrapetimeout
    
    Fix scrape timeout config checks

commit 44a5e860ed094273399e3f0510f8f923626ce20f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 11:08:49 2016 +0100

    Fix scrape timeout config checks

commit 938ebe78c240c6252a6aaa7e9916f2324f1867da
Merge: 70336c6 915a7c0
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Feb 15 10:19:45 2016 +0000

    Merge pull request #1390 from prometheus/scraperef
    
    Adjust labels on status page

commit 915a7c09a86bdbd2d81831b7709b0255bb22f155
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 10:49:50 2016 +0100

    Adjust labels on status page

commit 70336c6f5b1feff09e4ac08455d525f8aa37a3ba
Merge: 718098a a06bc75
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 10:47:03 2016 +0100

    Merge pull request #1385 from prometheus/scraperef
    
    Cleanup target internals

commit a06bc755195167b5cb891835594e27199a657f88
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Feb 15 10:31:38 2016 +0100

    Remove occurrences of 'base' labels

commit 718098a4df901deddb4f9ecdf408dd85aa899724
Merge: 738e6f4 829a029
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Feb 14 22:36:52 2016 +0000

    Merge pull request #1388 from prometheus/update-dns-meta-refs
    
    Update two more __meta_dns_srv_name references.

commit 829a029dda3320df1a16caaafb6d9755f2f43106
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun Feb 14 22:20:39 2016 +0100

    Update two more __meta_dns_srv_name references.
    
    Although they are only in examples/tests and don't affect anything, they
    could be confusing (the label has been renamed in the rest of the code a
    while ago).

commit 0d44248fb86eb991bc6c39f4270bd5ecb99afe2d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 12 15:43:48 2016 +0100

    Cleanup cluttered test data

commit 65eba080a076ff12a0aa6706a5a467d984d8421b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 12 15:43:27 2016 +0100

    Cleanup internal target data

commit 738e6f41d465b3e7684482740055cf3f42d0c512
Merge: abeeebe e26e4b6
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Feb 12 12:00:19 2016 +0000

    Merge pull request #1384 from prometheus/scraperef
    
    Restrict scrape timeout to interval length

commit e26e4b6e89e55cb30c76902e091b519e54b3feaa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 12 12:51:55 2016 +0100

    Restrict scrape timeout to interval length

commit abeeebeed43501a4a759049f8cc3e300685171fc
Merge: 90b9fae 9a3edea
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Feb 12 12:42:13 2016 +0100

    Merge pull request #1383 from prometheus/beorn7/race
    
    Remove race condition from TestRetentionCutoff

commit 9a3edea477ae1328ff06d3905afefb4389b861f3
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 12 01:46:18 2016 +0100

    Remove race condition from TestRetentionCutoff

commit 90b9fae638c0f1c36d06f5a79b929dfcd1a8c712
Merge: 83c5ef7 6946fb2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Feb 11 17:06:56 2016 +0100

    Merge pull request #1382 from prometheus/beorn7/vendoring
    
    Update common/expfmt vendoring

commit 6946fb2058311dec2a1122ccf66bb1c8d10ec070
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 11 16:08:29 2016 +0100

    Update common/expfmt vendoring

commit 83c5ef7c036abf52625d4c0cb151bbb1226b7b97
Merge: 1c1dcd0 9b6d696
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 10 08:31:11 2016 +0100

    Merge pull request #1380 from prometheus/fix-typos
    
    Fix various typos in comments.

commit 9b6d69610ad700d5305cc222e3fc06a9525e29c1
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 10 03:47:00 2016 +0100

    Fix various typos in comments.
    
    Helpfully reported by
    https://goreportcard.com/report/github.com/prometheus/prometheus :)

commit 1c1dcd0255acfa4cd83d365f3c90e35f53b4fb28
Merge: c0df1c7 3728b58
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 10 01:14:24 2016 +0100

    Merge pull request #1379 from prometheus/fix-target-init
    
    Fix target update error handling.

commit 3728b5872fabb6d618c08a2c005b6a8ab1a87406
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 8 21:26:00 2016 +0100

    Fix target update error handling.
    
    Fixes https://github.com/prometheus/prometheus/issues/1378

commit c0df1c7e8122602d07dd455ba443066cfebcea20
Merge: e3baa35 9d0112d
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Feb 8 14:09:14 2016 +0000

    Merge pull request #1376 from prometheus/without
    
    Add without aggregator modifier.

commit 9d0112d7cfe8c1c36c862f7c8bf77111c2ae04ff
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Feb 7 18:03:16 2016 +0000

    Add without aggregator modifier.
    
    This has the advantage that the user doesn't need
    to list all labels they want to keep (as with "by")
    but without having to worry about inconsistent labels
    as when there's only one time series (as with "keeping_common").
    
    Almost all aggregation should use this rather than the existing
    two options as it's much less error prone and easier to maintain
    due to not having to always add in "job" plus whatever other common
    job-level labels you have like "region".

commit e3baa35e9f3f29ec1128e8eec47064f18497cb7b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Feb 8 02:00:10 2016 +0100

    Fix typo in documentation/examples/kubernetes-rabbitmq/README.md

commit 7f6acef4d519f230a184160d2370056250fe0100
Merge: 328e1d7 73be7f6
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Feb 8 01:59:11 2016 +0100

    Merge pull request #1314 from katcipis/master
    
    Adding RabbitMQ deploy for kubernetes + prometheus integration

commit b7ef0b45e8e0b338eacd70650d696a71058d5ab6
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Feb 7 18:00:23 2016 +0000

    Break aggregation tests out. Add missing tests.

commit 667c2218162f563bc0b9e73774e7669a049c5bf4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 5 13:33:22 2016 +0100

    Bump version to 0.17.0rc2

commit e048816316ebee4cae4376d4f8bb288a74ed2144
Merge: d96dc7a 328e1d7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 5 13:30:56 2016 +0100

    Merge branch 'master' into release-0.17

commit 328e1d733ac78f9d9b81a11bf3bbc3d8e44bc283
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 5 11:30:31 2016 +0100

    Change `make` to `make build`
    
    For building from source as an end user running the tests is not necessary.

commit facabe254f2d4e12442ab9a37ece79c2a9d0d6a8
Merge: 2b9de9e f1f8317
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 5 11:28:20 2016 +0100

    Merge pull request #1373 from prometheus/fix-flapping-alert-detection
    
    Fix detection of flapping alerts

commit 2b9de9e8bc1b630c24e1019f8b85eca09e959f9d
Merge: 1756c08 211cb10
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 5 08:17:59 2016 +0100

    Merge pull request #1374 from prometheus/link-to-https
    
    Use https://prometheus.io

commit 211cb10f1343c72f796b0d17523d7f00b74d0f30
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Tue Feb 2 22:09:26 2016 -0500

    Use https://prometheus.io

commit f1f8317fa5a98410bb9c1705f91b47c4154679d0
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Feb 4 23:42:55 2016 -0500

    Fix detection of flapping alerts
    
    Alerts in the resolve retention period must be transitioned to the
    active state again when their condition is met.

commit 1756c0811c20760095e87391863b8322bba82546
Merge: 0dd3a23 0b02315
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Feb 4 17:02:59 2016 +0100

    Merge pull request #1370 from prometheus/pathjoin
    
    Sanitize POST URL for AM integration

commit 0b02315517d929b3da00606c005e6337b7e375eb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Feb 4 11:56:14 2016 +0100

    Sanitize POST URL for AM integration

commit 0dd3a23510b3ef695dd497da9104283da0e64483
Merge: 9ea3897 1f877f3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 3 12:13:49 2016 +0100

    Merge pull request #1365 from prometheus/appenderr
    
    Return error on sample appending

commit 1f877f3d2abc7d87e7cbfadeb7ca8c24ce8dc029
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 3 10:39:34 2016 +0100

    Fix deadlock, structure target logging

commit d0d2c38c68be373d6c6e3726083fb262175e152f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Feb 3 10:17:08 2016 +0100

    Fix tests for append API changes

commit 59f1e722df7242f665cdb28d337c8874b1e3f80e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 2 14:01:44 2016 +0100

    Return error on sample appending

commit 9ea3897ea7cb633cc0ba86b1f0998aab85926c4b
Merge: b555be8 ec08c9a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 1 15:10:13 2016 +0100

    Merge pull request #1354 from prometheus/beorn7/storage
    
    Rework the way to communicate backpressure (AKA suspended ingestion)

commit ec08c9a391a4fda86be6230ffd8a4832c47913e0
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Jan 27 19:07:46 2016 +0100

    Rework the way to communicate backpressure (AKA suspended ingestion)
    
    This gives up on the idea to communicate throuh the Append() call (by
    either not returning as it is now or returning an error as
    suggested/explored elsewhere). Here I have added a Throttled() call,
    which has the advantage that it can be called before a whole _batch_
    of Append()'s. Scrapes will happen completely or not at all. Same for
    rule group evaluations. That's a highly desired behavior (as discussed
    elsewhere). The code is even simpler now as the whole ingestion buffer
    could be removed.
    
    Logging of throttled mode has been streamlined and will create at most
    one message per minute.

commit b555be85e2d12b6f6ccd7b1ede6efedb85a727c3
Merge: d9f836e a7408bf
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Jan 29 19:19:25 2016 +0100

    Merge pull request #1357 from prometheus/beorn7/duration
    
    Unify duration parsing

commit a7408bfb471caa54fbe7ae6c228e1f0db8eae674
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Jan 29 15:23:11 2016 +0100

    Unify duration parsing
    
    It's actually happening in several places (and for flags, we use the
    standard Go time.Duration...). This at least reduces all our
    home-grown parsing to one place (in model).

commit cfc15cf103cada55de14b8fd2986c00e67b00c93
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Jan 29 15:30:57 2016 +0100

    Update common/model vendoring

commit d96dc7a4db5115c8f86f0638f1f7ada030e7a26a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jan 28 11:16:57 2016 +0100

    Changelog language fixes

commit 6583928a04998ce4bb95e594afcec67a9b375d27
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 27 17:37:40 2016 +0100

    Fix typos

commit b040827945d2c22bda62efeb970e6fc64fb26b67
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 27 16:09:38 2016 +0100

    Add changelog for 0.17.0

commit 999b1d23e0bcf437ee9450de8f6b1ab6deadcf45
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Oct 10 00:49:08 2015 +0200

    Add tarballs target to build release tarballs.

commit 00c8026a7e4b2c9b0722a5740183089343a67ce3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 27 15:59:17 2016 +0100

    Bump version to 0.17.0rc1

commit d9f836e5b8cd33b3a21ae98fdf18c2ca13283aaf
Merge: 2e29573 122d738
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 27 15:49:08 2016 +0100

    Merge pull request #1340 from prometheus/validate-externa-url
    
    Validate URL parameters

commit 2e295737709237133553a724c46896259829a8d0
Merge: d7f92a0 41a3947
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 27 02:50:03 2016 +0100

    Merge pull request #1348 from prometheus/notifytestfix
    
    Increase notification test timeouts

commit d7f92a012bd8eccb081109365de5588ba306895a
Merge: c1fdfc5 87ef24c
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jan 26 17:47:16 2016 +0100

    Merge pull request #1345 from prometheus/beorn7/storage2
    
    Fix multiple issues around chunks to persist.

commit 87ef24cd2588d3c9962c903472f6edd0b5930532
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Jan 26 17:29:33 2016 +0100

    Add instrumentation and refactor things around "rushed mode"

commit c1fdfc5a8b47be5367233239c40fd8fe489a3ed7
Merge: 9a4b7cc a693502
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 26 16:57:41 2016 +0100

    Merge pull request #1350 from prometheus/rulefix
    
    Remove old WITH clause in alert printing

commit a6935024e1e16615f7cb9975ffbf259cc745f3b1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 26 15:45:27 2016 +0100

    Remove old WITH clause in alert printing

commit 9a4b7cca1af174e74301ecaf7c931ba5e5d5cf84
Merge: 4dc8c4f 1ae23bf
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jan 26 12:52:29 2016 +0100

    Merge pull request #1347 from prometheus/support-options-method
    
    Handle OPTIONS HTTP requests correctly.

commit 1ae23bf5e9e4e922e89343d8584fca404b840346
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jan 26 01:32:46 2016 +0100

    Handle OPTIONS HTTP requests correctly.
    
    Fixes https://github.com/prometheus/prometheus/issues/1346

commit 41a39472a1ddffec90f94e0b5d42405553e46ed0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 25 18:31:54 2016 +0100

    Increase notification test timeouts

commit 4dc8c4f94ca59bbd348cc352d6ef81ee39717431
Merge: 3214cb9 1a91cd6
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Jan 25 13:40:08 2016 -0500

    Merge pull request #1344 from prometheus/consistent-error-message
    
    Rename matrix to range selector in external error messages

commit a2cd479058e8da3fc98679ba4d0ad6c2accb0c8e
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 25 19:33:51 2016 +0100

    Fix calculation of chunks to persist after restart
    
    Since we are not overestimating the number of chunks to persist
    anymore, this commit also adjusts the default value for
    -storage.local.memory-chunks. Update of documentation will follow.

commit 1a91cd6e098ff166527ef6890edaa22716047854
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Jan 25 13:22:37 2016 -0500

    Rename matrix to range selector in external error messages
    
    The documentation speaks about range vectors and range vector selectors.
    This change does not fix all issues, we might still expose the term
    "Matrix" in error messages using %T.

commit 972d94433a8caa214bf6fef5c6179b9af46cfd1c
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 25 18:44:43 2016 +0100

    Introduce a hysteresis for "rushed mode"
    
    "Rushed mode" is formerly known as "degraded mode", which is changed
    with this commit, too. The name "degraded" was very misleading.
    
    Also, switch into rushed mode if we have too many chunks in memory and
    an at least reasonable amount of chunks to persist so that speeding up
    persisting chunks can help.

commit 3214cb95295ccbaf8fd5311dcb2e72cf9116d3b2
Merge: 40ab0da 14796bd
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jan 25 18:58:04 2016 +0100

    Merge pull request #1342 from prometheus/beorn7/storage
    
    Streamline chunk writing

commit 14796bdb606fd3d91c7ad0d2bbdeba01acaef98c
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 25 18:57:51 2016 +0100

    Improve chunkMaxBatchSize doc comment

commit 40ab0da398249b8bfa9afbdbcfbd7c4072ab5124
Merge: 2f10845 411ca4d
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Jan 25 10:52:17 2016 -0500

    Merge pull request #1339 from prometheus/range-parsing
    
    Consolidate offset modifier parsing

commit 2f108452fcca21bbf1c2546dca3a062a736f8864
Merge: f50d90f 99b9611
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jan 25 16:46:02 2016 +0100

    Merge pull request #1341 from prometheus/beorn7/storage2
    
    Remove a race condition from TestRetentionCutoff

commit 582af1618cd64421e7dc530e9a3abfd6fbe3b9cf
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 25 16:36:36 2016 +0100

    Streamline chunk writing
    
    This helps to avoid allocations in the same way we were already doing
    it during reading.

commit 99b9611351fdbb183b42fe126d1d8f34da26f623
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 25 16:36:14 2016 +0100

    Remove a race condition from TestRetentionCutoff

commit f50d90f3aae29a45293cab07f308c309a560c887
Merge: e7b6a01 d1c3f5d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jan 25 12:24:15 2016 +0100

    Merge pull request #1336 from RichiH/security/go_1.5.3
    
    scripts/goenv.sh: Require Go 1.5.3

commit 122d73858db7b15aa7857c9bb8a5112643a53feb
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Mon Jan 25 00:30:04 2016 -0500

    Validate URL parameters

commit 411ca4dba1dcf51df47755a2769b96c8a7b70518
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Sun Jan 24 22:50:46 2016 -0500

    Consolidate offset modifier parsing
    
    Remove duplicated offset modifier parsing and ensure offset can only
    appear at the end of a selector statement.

commit 73be7f63bee5883739502208c0a4b14dfd07d514
Author: Tiago Katcipis <tiagokatcipis@gmail.com>
Date:   Sat Jan 23 16:38:24 2016 -0200

    Fix typos and moving example to the correct place

commit e7b6a01888f1b552e21a9ba68553e8a843fbbef7
Merge: 0e56181 13da34f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jan 22 12:24:52 2016 +0100

    Merge pull request #1333 from prometheus/vendorup
    
    Update common/model vendoring

commit 13da34f241dbd146d35a298065ec6ce68923becd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jan 22 12:16:39 2016 +0100

    Update common/model vendoring

commit 0e56181016208ef72190cb5f0d8471dbac899bbf
Merge: c56f352 364dd36
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Jan 21 16:15:13 2016 -0500

    Merge pull request #1332 from prometheus/license
    
    Add missing license files of vendored packages

commit 364dd36bde1c19d384eb7a6cdee4649493b90d32
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Jan 21 14:42:16 2016 -0500

    Add missing license files of vendored packages
    
    With the total optimized copy command. Assumes all vendored packages are
    checked out in $GOPATH.
    
        govendor list +v | awk '{print $2}' | while read dep; do echo $dep |
        cut -d/ -f1-3; done | uniq | while read dep; do find
        $GOPATH/src/$dep -name LICENSE -o -name NOTICE | grep -v vendor |
        sed "s;$GOPATH/src/;;"; done | while read license; do [ -f
        vendor/$license ] || cp $GOPATH/src/$license vendor/$license; done

commit c56f35274ef2f4c2fc3eb78afe67936a404fb5f0
Merge: b150c57 b0adfea
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jan 21 13:06:55 2016 +0100

    Merge pull request #1330 from prometheus/swapfix
    
    Fix swapped constants, improve instrumentation

commit b0adfea8d5e883cbab5c7e4113f8ea91f7cbc099
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jan 21 11:09:24 2016 +0100

    Fix swapped constants, improve instrumentation

commit b150c5768c016cda4126047ac2782e458a4a14d3
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jan 21 01:37:08 2016 +0100

    Add missing word in comment.

commit 86244db79946a9207a9a11306df13c66422b30fa
Merge: 0ecf8e9 9faa751
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 20 18:16:00 2016 +0100

    Merge pull request #1318 from fabric8io/kubernetes-discovery
    
    Kubernetes SD: Refactor to handle missing Kubernetes events

commit d1c3f5de25635780c0af14cc8508b46edf8013a5
Author: rih <rih@space.net>
Date:   Wed Jan 20 13:25:03 2016 +0100

    scripts/goenv.sh: Require Go 1.5.3

commit 0ecf8e98d14c225a5ad667c296ba60b179f2a503
Merge: 308d447 a8c38c3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jan 20 13:23:35 2016 +0100

    Merge pull request #1325 from prometheus/notifyfix
    
    Fix rule manager shutdown issues

commit 9faa7515c6603f1c4a7a7c83f3ba570678f138bb
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Fri Jan 15 12:36:55 2016 +0000

    Kubernetes SD: Refactor to handle missing Kubernetes events

commit 308d447cd7be885db3083cefe5e5159e10d126bc
Merge: 4a829e6 1d58c10
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 19 12:33:10 2016 +0100

    Merge pull request #1327 from prometheus/makefix
    
    Remove `assets` target from default `make` execution

commit 1d58c10b45109abe98ea78df84fdb5a800f94d41
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 18 18:24:25 2016 +0100

    Remove `assets` target from default `make` execution
    
    go-bindata constantly attempts to update timestamps even though
    the file data didn't change.
    
    Fixes #1326

commit a8c38c3ac5f9d41cd99e7a45c55fcf04c14321c8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 18 16:53:37 2016 +0100

    Don't log rule evaluation failure on shutdown

commit 7e1b39c682c27b10400f200cecf68a4dd2e4f169
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 18 16:47:31 2016 +0100

    Fix startup/teardown order, add documentation

commit 4a829e63a27fa8eee4a85cc37b5147b141bf3c21
Merge: 944b1f7 061fe2f
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jan 18 13:31:04 2016 +0000

    Merge pull request #1299 from PrFalken/master
    
    Support AirBnB's Smartstack Nerve client for SD

commit 061fe2f3647326db32e05d7ec348c14548e0e821
Author: Julien Dehee <julien.dehee@blablacar.com>
Date:   Sat Jan 9 23:34:32 2016 +0000

    Support AirBnB's Smartstack Nerve client for SD
    
    nerve's registration format differs from serverset. With this commit
    there is now a dedicated treecache file in util,
    and two separate files for serverset and nerve.
    
    Reference:
    https://github.com/airbnb/nerve

commit b7ae20d3d8e68c0b21ade98f18acce3e9b35c61c
Author: Tiago Katcipis <tiagokatcipis@gmail.com>
Date:   Sun Jan 17 21:35:51 2016 -0200

    fixing typos

commit 53fb6488491a99917cd7986563b8b25363c631bb
Author: Tiago Katcipis <tiagokatcipis@gmail.com>
Date:   Sun Jan 17 15:57:49 2016 -0200

    adding README to explain the example

commit bb4722d6b51afacd43174a5ca972993680ad2a77
Author: Tiago Katcipis <tiagokatcipis@gmail.com>
Date:   Tue Jan 12 20:59:37 2016 -0200

    Adding RabbitMQ example as mentioned on #1312

commit 944b1f7e842cf67bff97b276d4f8576312958249
Merge: cb381e0 d393434
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Tue Jan 12 17:01:30 2016 -0500

    Merge pull request #1313 from fabric8io/kubernetes-discovery
    
    Kubernetes Discovery: Ensure metrics path isn't overwritten in example relabeling

commit d3934345e94382ce949f3fe63e7cceaf0f0f4b21
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Jan 12 21:06:15 2016 +0000

    Kubernetes Discovery: Ensure metrics path isn't overwritten in example relabeling

commit cb381e0bceeb604a4e9d9d102e6d06f77a330887
Merge: 3c81843 7a5f019
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Jan 12 12:19:23 2016 +0000

    Merge pull request #1311 from prometheus/up-down
    
    Use up/down in UI for consistency with 'up' metric.

commit 7a5f019c402b4979992515633c2cc50a8088d761
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Jan 12 12:09:20 2016 +0000

    Use up/down in UI for consistency with 'up' metric.

commit 3c81843167398242701dbf428ee2982fd2fbe836
Merge: 7a012ea 3f4d22e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 12 12:42:09 2016 +0100

    Merge pull request #1310 from prometheus/beorn7/storage
    
    Update doc comment

commit 3f4d22e4c77a5aed85dd6fca079e4ecc5a90ca1a
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Jan 12 12:38:18 2016 +0100

    Update doc comment
    
    This should have gone into a previous commit, but I forgot to save
    this particular file.

commit 7a012ea611b376fcbca5bb176727e8965c74e146
Merge: 19e81f8 add2ebd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 12 12:17:38 2016 +0100

    Merge pull request #1306 from prometheus/beorn7/storage
    
    Tolerate the lost+found directory in the data directory

commit 19e81f81a0d91a22381ec7979db7ca6bbdb0495a
Merge: 6293f3a 6eee86d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 12 11:24:11 2016 +0100

    Merge pull request #1308 from prometheus/rulefix
    
    Fix hanging shutdown shortly after restart

commit 6eee86dce80e26160543aa75985036f581ff4226
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 12 10:52:40 2016 +0100

    Terminate rule groups during initial sleep
    
    When an evaluation group runs initially, it waits a deterministic
    amount of time. During that time it also has to accept
    a termination singnal so shutdown doesn't hang during the first
    evaluation iteration after a configuration reload.
    
    Fixes #1307

commit 26eb3ac2f87b20c6fbac2b13eac3f130e9fb70b7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 12 10:26:06 2016 +0100

    Don't skip recording rule errors

commit add2ebdd5691be5cf60f7a0b42c45858ff2b44f8
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 11 18:05:36 2016 +0100

    Tolerate the lost+found directory in the data directory

commit 6293f3a374313800afd58334ac078ced8f66d28f
Merge: 8c81289 4221c7d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jan 11 17:27:08 2016 +0100

    Merge pull request #1304 from prometheus/beorn7/storage
    
    Improve handling of series file truncation

commit 8c81289575c66fe87e807d245499118471293f22
Merge: 49fe948 cb117d8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 11 17:25:39 2016 +0100

    Merge pull request #1305 from prometheus/beorn7/storage2
    
    Add a series ops metric "purge_on_request"

commit cb117d8346f3a0275b4c9b92edf5f00d2db35fa1
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 11 17:22:16 2016 +0100

    Add a series ops metric "purge_on_request"
    
    It counts series deletions triggered via the API.

commit 4221c7de5c18679474c8d6220d4907370df7c321
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jan 11 16:42:10 2016 +0100

    Improve handling of series file truncation
    
    If only very few chunks are to be truncated from a very large series
    file, the rewrite of the file is a lorge overhead. With this change, a
    certain ratio of the file has to be dropped to make it happen. While
    only causing disk overhead at about the same ratio (by default 10%),
    it will cut down I/O by a lot in above scenario.

commit 49fe948b9a450cdfeb40fb5263713ccef7f7b0ed
Merge: e0efe75 8a67110
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 11 15:27:33 2016 +0100

    Merge pull request #1303 from prometheus/revac
    
    Revert autocomplete changes

commit 8a671100417a4626c61f172edd3d62ddd86e265a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 11 14:53:32 2016 +0100

    Revert autocomplete changes

commit e0efe75c2dc9dbe5b8a52c49f763db248f189b57
Merge: 37d28bf 7b6c3e5
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jan 11 13:01:35 2016 +0000

    Merge pull request #1302 from iksaif/master
    
    Use '.' instead of '=' to separate labels from their values in Graphite

commit 7b6c3e556ce3e69ef30638d6cc145bc90fa4bcc3
Author: Corentin Chary <c.chary@criteo.com>
Date:   Mon Jan 11 13:56:10 2016 +0100

    Use '.' instead of '=' to separate labels from their values in Graphite
    
    Using .label=value. was weird to use in Graphite and didn't bring much value.

commit 37d28bf91a7eb66dfdf9227d17e806dc5a191166
Merge: c445941 6b4a696
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 11 12:14:47 2016 +0100

    Merge pull request #1300 from prometheus/oldalerts
    
    Support old alerting rule syntax

commit 6b4a6962d26fff048027679742ad4f0a7b012e6c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 11 11:39:22 2016 +0100

    Support old alerting rule syntax

commit c44594185f5e69ac02fafe59d42969748134eb9b
Merge: c0474d5 37d80c4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jan 8 18:32:16 2016 +0100

    Merge pull request #1298 from prometheus/rulemgrfix
    
    Fix premature rule evaluation

commit 37d80c4b2592a34925c31eb05dae50f5b5049c8f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jan 8 17:51:22 2016 +0100

    Fix premature rule evaluation
    
    This commit prevents rule evaluation from starting until after
    the storage is ready.

commit c0474d5ffe605db69ac77f6669f13831c74789fa
Merge: adb3be4 c77c3a8
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Jan 8 15:34:16 2016 +0100

    Merge pull request #1295 from prometheus/beorn7/rate
    
    promql: Limit extrapolation of delta/rate/increase

commit c77c3a8c56cf72ffca212bd3d34c87cbf8bc772f
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Nov 28 21:13:41 2015 +0000

    promql: Limit extrapolation of delta/rate/increase
    
    The new implementation detects the start and end of a series by
    looking at the average sample interval within the range. If the first
    (last) sample in the range is more than 1.1*interval distant from the
    beginning (end) of the range, it is considered the first (last) sample
    of the series as a whole, and extrapolation is limited to half the
    interval (rather than all the way to the beginning (end) of the
    range). In addition, if the extrapolated starting point of a counter
    (where it is zero) is within the range, it is used as the starting
    point of the series.
    
    Fixes #581

commit adb3be4923d1ef48c1532dd515c9dfeae6419e32
Merge: aa3fff1 7da42ee
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jan 7 11:29:59 2016 +0100

    Merge pull request #1293 from RichiH/feature/remove_TODO
    
    main.go: Remove warning about external_labels

commit 7da42eee6ea0f529e09bf404ed7ebfa51a163c3b
Author: Richard Hartmann <rih@space.net>
Date:   Thu Jan 7 11:15:14 2016 +0100

    main.go: Remove warning about external_labels

commit aa3fff1e676118d691e3050419728d0f320c576e
Merge: a50b699 e7fb9d0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jan 7 10:42:22 2016 +0100

    Merge pull request #1291 from prometheus/style-check
    
    Let code format style errors fail CI

commit e7fb9d096b4b507305c8138bc1be1e1123e609ac
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Wed Jan 6 18:29:28 2016 -0500

    Let code format style errors fail CI

commit a50b6997088273e450f3ecfcafbdf03db447bf9a
Merge: b683581 89760dd
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Jan 6 12:47:40 2016 +0000

    Merge pull request #1290 from prometheus/max-nan
    
    Handle NaN for min/max.

commit 89760dd77d93fd6db5a3d685e5e2923c395dcf9f
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Jan 6 12:41:40 2016 +0000

    Handle NaN for min/max.
    
    Similar to topk and sort, prefer not returning NaN
    where possible.

commit b683581f8f86ed3b3dfc39a9b588d51fe0d37bd3
Merge: 0109300 544f3d6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jan 5 13:14:31 2016 +0100

    Merge pull request #1285 from prometheus/fix-rate-consoles
    
    All console expressions should use irate.

commit 544f3d6cee05ec0025e480f0f5e38c10a54b814b
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Jan 5 11:52:49 2016 +0000

    All console expressions should use irate.

commit 01093009630ddf1e25a04299c6726e50b63623f4
Merge: 329670e cadca0a
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jan 4 13:54:41 2016 +0000

    Merge pull request #1283 from prometheus/venup
    
    Upgrade common/log vendoring.

commit cadca0aa237b4559c6f03f8523f4a5ed4a40e0ee
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jan 4 14:48:35 2016 +0100

    Upgrade common/log vendoring.
    
    Fixes #1186

commit 329670e74398195a76a626154557e844e9160a6d
Merge: 55e85a8 87d1831
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jan 4 00:01:37 2016 +0000

    Merge pull request #1282 from prometheus/document-idb-pw
    
    Document INFLUXDB_PW env var in username flag

commit 87d1831f1258c168fac449b9f6804e59e2237cb4
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jan 4 00:18:41 2016 +0100

    Document INFLUXDB_PW env var in username flag
    
    Fixes https://github.com/prometheus/prometheus/issues/1281

commit 55e85a8c2e55faf6bf5910c0111bec96ec553c1e
Merge: 6028731 bac1f28
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Dec 31 15:01:42 2015 +0000

    Merge pull request #1279 from prometheus/sort
    
    Similar to topk/bottomk, have sort/sort_desc put NaN at end.

commit bac1f28cad24be969a5f3eb8f5c0aa0e833aba42
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Dec 30 14:06:51 2015 +0000

    Similar to topk/bottomk, have sort/sort_desc put NaN at end.
    
    This makes topk and bottomk consistent with the sorting functions,
    as per #1271.

commit 60287319d31efc294300f643511da36445259dca
Merge: 92c851f 4209ec6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 23 15:14:03 2015 +0100

    Merge pull request #1272 from prometheus/labelskw
    
    Change WITH keyword to LABELS

commit 4209ec6864e6b4152e0bc576b32c3a851b5f5027
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 23 14:54:02 2015 +0100

    Change WITH keyword to LABELS

commit 92c851f322bf1f171968d3c0bba764563d8f45d6
Merge: 27dd806 0cf3c6a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 23 12:36:00 2015 +0100

    Merge pull request #1266 from prometheus/ruels
    
    rules/ refactoring

commit 0cf3c6a9efe454d37861db2fbf990a03f8b6cf27
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 17 11:46:10 2015 +0100

    Add comments, rename a method

commit 27dd8065ca2244c38d8e34feded9e5f5fa246a23
Merge: e34f0fd 88ca823
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Dec 22 14:50:43 2015 +0000

    Merge pull request #1271 from prometheus/topk-nan
    
    Make topk/bottomk prefer returning real numbers over NaN.

commit 88ca82304ce95715bc95633cbc125f5ebb6a0dfd
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Dec 22 13:53:43 2015 +0000

    Make topk/bottomk prefer returning real numbers over NaN.

commit edf3e123f57c5e91c587e21ebd810e28b21fe2cf
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Dec 22 12:38:32 2015 +0000

    Move topk/bottomk tests from legacy.

commit bf6abac8f4051f7407fffc3b043dad702b1ef429
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Dec 15 19:46:03 2015 +0100

    Send resolved notifications

commit f69e668fc468dfa2feb13603237810b8d748d87e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Dec 15 13:15:07 2015 +0100

    Improve rules/ instrumentation
    
    This commit adds a counter for the total number of rule evaluations
    and standardizes the units to seconds.

commit 62075aa037495e8b14b580ec26ca567e64080566
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Dec 15 12:11:38 2015 +0100

    Reduce noisy no-alertmanager warning

commit 52e5224f5a4904da2dcd2c0c1658ec2de2d93893
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Dec 14 17:40:40 2015 +0100

    Refactor rules/ package

commit e4fabe135abb99b7ae085e937776611bd07de2ad
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Dec 14 12:00:44 2015 +0100

    Set StartsAt to time of first firing state

commit e34f0fd0b55bade14a19a050d24181977ff9b002
Merge: 5af6dda b35e25a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 16 14:05:53 2015 +0100

    Merge pull request #1268 from prometheus/fedfix
    
    Don't federate stale samples

commit b35e25a08229e52bb75152b327147eb81c5a0737
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Dec 16 13:45:44 2015 +0100

    Don't federate stale samples

commit 5af6dda58ccb29d4c0708a052e8b25defe6016d7
Merge: a8c0307 7c90db2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Dec 14 10:19:34 2015 +0100

    Merge pull request #1263 from prometheus/notify
    
    Annotations for alerting rules

commit 7c90db22ed2142d2657515d36e00f9101745adca
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 11 17:12:34 2015 +0100

    Use annotation based alerts in rules/
    
    This commit breaks the previously used alert format.

commit af3a6661ed56ccf7df5edf937e5f144a6e12c78a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 11 17:02:34 2015 +0100

    Implement new alerting rule syntax

commit a8c0307db47c5d2b015e07c632c0af8a3ac6a291
Merge: 6b7629b 2c8a96e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 11 15:43:48 2015 +0100

    Merge pull request #1262 from prometheus/notify
    
    Notification handler

commit 2c8a96ecdc50a55c9a67b3558c2ed13fc1fd3a5d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Dec 11 14:11:18 2015 +0100

    Adjust notification handler flags

commit e114ce0ff7a1ae06b24fdc479ffc7422074c1ebe
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 10 16:31:50 2015 +0100

    Refactor notification handler

commit 5635d6bd13f5f792714e9c6556f3fb8630fbde35
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 10 16:31:24 2015 +0100

    Vendor ctxhttp package

commit 6b7629be2710dedceb8e8fec5e51ce14aafa26ad
Merge: 3270fa6 83e0942
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Dec 10 10:43:57 2015 +0000

    Merge pull request #1242 from tommyulfsparre/watcher-fix
    
    Reduces watches in serverset

commit 3270fa6afede1796e429ea67eb042dc51f4af660
Merge: e1a8e74 e0f70ed
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Dec 10 10:25:20 2015 +0000

    Merge pull request #1260 from prometheus/validate
    
    Update common/{expfmt,model}

commit e0f70ed5ca6be7204baed191ea8f5dd64d5186ce
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Dec 10 11:19:04 2015 +0100

    Update common/{expfmt,model}
    
    Closes #1232

commit e1a8e74e0b856bb39e72417ed9cc708ab28dd70d
Merge: e3cf96c c12fb44
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Dec 8 11:25:56 2015 +0000

    Merge pull request #1257 from fabric8io/kubernetes-discovery
    
    Kubernetes SD: Use first TCP service port as target port & clean up example config

commit c12fb447b82e1eeddb64192e4f8ed36b53451c07
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Dec 8 10:29:40 2015 +0000

    Kubernetes SD: Use first TCP service port as target port & clean up
    example config
    
    Fixes #1256

commit 83e09422bf4a28cc898b18d571f33f221e6ea05f
Author: Tommy Ulfsparre <tommy@ulfsparre.se>
Date:   Mon Nov 16 07:25:54 2015 +0100

    skip already watched child nodes.

commit e3cf96c8fc3098543c98bc1e283e385773b30177
Merge: 953b3bf 29a69ee
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 30 18:47:46 2015 +0100

    Merge pull request #1248 from prometheus/panic
    
    Do not panic in Consul SD creation

commit 29a69eecb80ee5dab794abfba802bcf415b82b49
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 30 18:41:48 2015 +0100

    Do not panic in Consul SD creation

commit 953b3bf849b806c43afceacd7fa5131325adc030
Merge: aa5b35e 738af32
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Nov 29 16:00:56 2015 +0000

    Merge pull request #1244 from prometheus/template-missing-zero
    
    template: Use zero-values for missing values.

commit 738af32057cd52763673ed1962f52118474fd09a
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Nov 28 13:45:32 2015 +0000

    template: Use zero-values for missing values.
    
    Currently missing values will get the value <no value>
    rather than the empty string. Using the empty string is
    more consistent, and should be easier for users to deal with too.

commit aa5b35ed949634bc4219cb5769f77564e547adc9
Merge: de21676 5b53262
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Nov 27 00:05:34 2015 +0000

    Merge pull request #1231 from jamessanford/clamp_function
    
    promql: Add clamp function.

commit 5b53262b7af504dec13ffb585c80dd211438764b
Author: James Sanford <jsanfordgit@froop.com>
Date:   Thu Nov 19 16:42:35 2015 -0800

    promql: Add clamp_max/clamp_min functions.

commit de216766674138efee518f9d42486ac5bf28899b
Merge: 5f52ed3 042f18b
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Wed Nov 25 10:35:06 2015 +0000

    Merge pull request #1240 from fabric8io/kubernetes-discovery
    
    Kubernetes SD: Fix metrics path relabeling in example config

commit 042f18b07aa7b150eef7c484d0828b4d8d720969
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Wed Nov 25 10:27:11 2015 +0000

    Kubernetes SD: Fix metrics path relabeling in example config

commit 5f52ed32025f96560228607cf1f96e3d40a71dbc
Merge: 6c3a2ea 645feba
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 18 17:05:59 2015 +0100

    Merge pull request #1225 from fabric8io/kubernetes-discovery
    
    KubernetesSD: Create targets for services as well as service endpoints

commit 645feba8cf57aed70bf37abe65741e9b01f36934
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Wed Nov 18 14:24:30 2015 +0000

    KubernetesSD: Remove redundant defaults from example config

commit 2cca07381b8deff1db53f2a2633b207497c2093e
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Mon Nov 16 14:18:18 2015 +0000

    KubernetesSD: Create targets for services as well as service endpoints

commit 6c3a2eab7cfccf677f4281952f0076e0d6bb48d2
Merge: 489921f 4d1c929
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Nov 17 15:18:21 2015 +0100

    Merge pull request #1226 from prometheus/rlbldef
    
    Add new defaults for relabel configurations

commit 4d1c9296d59b432d207e57e83b26b0894ea79e4a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 16 13:16:13 2015 +0100

    Add new defaults for relabel configurations

commit 489921fe3b038821cf096536e699176bbc70bbdb
Merge: 7a6a063 a287264
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Nov 15 16:26:57 2015 +0000

    Merge pull request #1224 from prometheus/offset-print
    
    Print offsets in promql.

commit a2872649895a709316b5acef62f34bdb10864e42
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Nov 15 09:26:38 2015 +0000

    Print offsets in promql.

commit 7a6a0630d10afa0c0d5ea21ce018a67ff599345b
Merge: 6c49edf bf84faa
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Nov 12 09:12:17 2015 -0800

    Merge pull request #1213 from prometheus/fix-wrong-http-status-codes
    
    Return HTTP server error codes for execution errors

commit 6c49edfce2f8cf145475f1d05fd172a2287a1f82
Merge: bce5202 50079a8
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Nov 12 09:11:55 2015 -0800

    Merge pull request #1211 from prometheus/default-time-parameter
    
    Make time parameter optional in v1 query API

commit bce52023548f652a12148ed1535dadfcb471218a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Nov 12 02:54:14 2015 +0100

    Minor fixups to web/ui/README.md

commit bf84faa01042e126e849ef46588e1f6066b7d40b
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Wed Nov 11 14:00:54 2015 -0800

    Return HTTP server error codes for execution errors

commit 7cbd31f7b692247343b0ebf3d9eec80e49d1212a
Merge: a5461e1 69e6ac7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 11 23:49:04 2015 +0100

    Merge pull request #1212 from prometheus/uidev
    
    Document convenient development of UI files.

commit 50079a85a13a2da5f878ea999aadcc63780485fa
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Wed Nov 11 11:46:57 2015 -0800

    Make time parameter optional in v1 query API
    
    If no time paramter is provided, the current server timestamp is used.

commit 69e6ac735ec17ed3cd464d853deb9f73d0e4dc8c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 11 21:12:57 2015 +0100

    Document convenient development of UI files.

commit a5461e1ad756a46b95a94623f23258a40f0707df
Merge: 307d9fa 1901875
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 11 20:31:39 2015 +0100

    Merge pull request #1209 from samstarling/js-tidying
    
    Tidy up .js files based on static analysis from jshint

commit 19018755956174b1ac8ebbc0e76a4e41cadd1ccf
Author: Sam Starling <mail@samstarling.co.uk>
Date:   Wed Nov 11 20:04:37 2015 +0100

    Tidy up .js files based on static analysis from jshint

commit 307d9fad461e0e9912ae1213b468febafc8963e2
Merge: 75fdcf5 a542cc8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 11 18:02:16 2015 +0100

    Merge pull request #1208 from prometheus/assets
    
    Simplify asset handling

commit a542cc86096e1bad694e04d307301a807583dfc6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 11 16:31:09 2015 +0100

    Remove -web.use-local-assets

commit 57ca7108aacc75a16d8b5339ecb8c24dda2594ac
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 11 15:44:15 2015 +0100

    Enable debug generation of go-bindata, rename blob/ to ui/

commit 75fdcf56982f6d22a1b8f16711bb99f117ba3de6
Merge: 5b7411e a2e4439
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Nov 10 09:46:17 2015 +0100

    Merge pull request #1197 from iksaif/master
    
    Add support for remote storage on Graphite

commit a2e443908679c2d7c452195a3d178580cbd43a19
Author: Corentin Chary <corentin.chary@gmail.com>
Date:   Mon Nov 2 08:32:55 2015 +0100

    Add support for remote storage on Graphite
    
    Allows to use graphite over tcp or udp. Metrics labels
    and values are used to construct a valid Graphite path
    in a way that will allow us to eventually read them back
    and reconstruct the metrics.
    
    For example, this metric:
    
    model.Metric{
    	model.MetricNameLabel: "test:metric",
    	"testlabel":           "test:value",
    	"testlabel2":           "test:value",
    )
    
    Will become:
    
    test:metric.testlabel=test:value.testlabel2=test:value
    
    escape.go takes care of escaping values to match Graphite
    character set, it basically uses percent-encoding as a fallback
    wich will work pretty will in the graphite/grafana world.
    
    The remote storage module also has an optional 'prefix' parameter
    to prefix all metrics with a path (for example, 'prometheus.').
    
    Graphite URLs are simply in the form tcp://host:port or
    udp://host:port.

commit 5b7411e80a174668e02750b318287b957b3e006b
Merge: 5b5dc56 427bf29
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Nov 9 12:31:20 2015 +0100

    Merge pull request #1204 from prometheus/port-after-relabel
    
    Add in default port after relabelling.

commit 5b5dc5672a0150b4e193e6a3b52a200bcd1b85c7
Merge: 452220e 0c7edc5
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Nov 9 02:16:11 2015 +0100

    Merge pull request #1205 from prometheus/readme-fed
    
    Fix outdated federation feature statement

commit 0c7edc5a4e65bf43e4a54a4340f30885d5e33cd6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Nov 8 23:35:11 2015 +0100

    Fix outdated federation feature statement

commit 427bf29db129056a2000f765f1adabb39695229d
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Nov 8 11:42:18 2015 +0000

    Add in default port after relabelling.
    
    For the SNMP and blackbox exporters where
    the ports tends to not be 80/443 and indeed
    there may not be a port this makes the relabelling
    a bit simpler as you don't have to figure out this
    logic exists and strip off the :80.
    
    This is a breaking change for the example configs of
    those exporters.

commit 452220ec905b4f2f4b0e103e3b7a6bd786724d2c
Merge: 69dd9ec fd2bd81
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sat Nov 7 14:40:44 2015 +0000

    Merge pull request #1057 from prometheus/config-target
    
    Allow all instance labels in target groups

commit fd2bd81cd859da6fb696dff011bd26731b1f34f2
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Nov 7 14:25:51 2015 +0000

    Allow all instance labels in target groups
    
    With the blackbox exporter, the instance label will commonly
    be used for things other than hostnames so remove this restriction.
    https://example.com or https://example.com/probe/me are some examples.
    
    To prevent user error, check that urls aren't provided as targets
    when there's no relabelling that could potentically fix them.

commit 69dd9ecd23d0399343767811f521d712a76fe3bc
Merge: f34c0fc 33aab41
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 5 12:09:10 2015 +0100

    Merge pull request #1201 from prometheus/re
    
    Anchor regexes in vector matching

commit 33aab4169c7754db38b5a88cbfe19b703e6cbf36
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 5 11:23:43 2015 +0100

    Anchor regexes in vector matching
    
    This commit makes the regex behavior of vector matching consistent with
    configuration and label_replace() by anchoring it.
    
    Fixes #1200

commit f34c0fc81eb88d307958275ffd4b409c4fa66d7d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Nov 5 10:34:29 2015 +0100

    Update version on master branch

commit 9cad147265a3212f7369bd5e7721ed687b1b760b
Merge: a2072d6 d14d242
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Nov 4 13:02:51 2015 +0100

    Merge pull request #1172 from federicobaldo/ec2_sd_improvements
    
    Minor improvements to ec2 service discovery

commit d14d2429ea1d7c5e83ae644efe0bf89c10743821
Author: Federico Baldo <federico.baldo@eurotech.com>
Date:   Tue Oct 20 13:36:53 2015 +0100

    Minor improvements to ec2 sd:
    
    1. static credentials replaced with defaults.DefaultChainCredentials.
    This change ensures that credentials are sourced form all possible
    providers available with the aws sdk,           in the following order:
    env variables, shared awsconfig file in user folder, ec2 instance role.
    
    2. Added a few labels: AvailabilityZone, PublicDns, VpcId (if
    available), SubnetId (if in Vpc)

commit a2072d617da7cb9886678a709aa0812e38cac5f7
Merge: 4b2bcce 384bd15
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Nov 1 20:23:13 2015 +0000

    Merge pull request #1195 from lyda/blackbox-console-squashed
    
    Add blackbox console.

commit 384bd15bfcb20966a385d4d4d27bf2302436b4c8
Author: Kevin Lyda <kevin@ie.suberic.net>
Date:   Sun Nov 1 20:06:52 2015 +0000

    Add blackbox console.

commit 4b2bccece9042c09aa1b1f1015632794d04db51e
Merge: 1b2c44b 9efacf0
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Oct 30 16:10:08 2015 +0100

    Merge pull request #1192 from prometheus/no-hack
    
    Remove Hacktoberfest

commit 9efacf081b1f17070a227e5886770d91ad1ffe7f
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Oct 30 13:11:27 2015 +0000

    Remove Hacktoberfest
    
    It's almost at an end, so we can remove this.

commit 1b2c44b1c9605c08c2b2070799200cf40c5f3181
Merge: b3b1df9 9107f58
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Oct 26 12:44:42 2015 +0000

    Merge pull request #1183 from prometheus/vendor
    
    Update vendoring

commit 9107f583aa2c1b4eee7dc42df25d57d86c7917c1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Oct 26 13:38:57 2015 +0100

    Update vendoring

commit b3b1df92f33a85281d51b5018d14d75d079684e9
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 26 02:21:39 2015 +0100

    Update Julius's email address in AUTHORS.md

commit cae354c6a71d42ab857ade72bce4cb93e44d0c49
Merge: cf7fda4 a635f54
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Oct 25 19:44:29 2015 +0100

    Merge pull request #1181 from prometheus/fix-range-autocomplete
    
    Don't autocomplete metrics in range specifications.

commit a635f5451e2f16efcf09f5cc0679ba81e64ea683
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun Oct 25 19:36:28 2015 +0100

    Don't autocomplete metrics in range specifications.

commit cf7fda4371f14d830b9a23b7ef828d755789db69
Merge: f2a8261 21a7b94
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 24 21:38:46 2015 +0200

    Merge pull request #1180 from prometheus/logup
    
    Upgrade common/log vendoring

commit 21a7b94d6c9e49eb0404077de0f6a5a46179d75b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 24 20:35:00 2015 +0200

    Upgrade common/log vendoring

commit f2a8261cdb9ce1d81934ad697b326fe67ac4023a
Merge: 8d12868 104803e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 24 20:32:25 2015 +0200

    Merge pull request #1177 from fabric8io/kubernetes-discovery
    
    Kubernetes SD authentication options cleanup

commit 104803e74efd7eb10d64345c1c01e209f21c580f
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Sat Oct 24 19:29:58 2015 +0100

    Kubernetes SD: Cleanup example config label regexps

commit 8d128685cfc6f52b97bf804fd9a3a3921d806f26
Merge: 1b206ef 180da1b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 24 17:37:49 2015 +0200

    Merge pull request #1179 from prometheus/tlsconf
    
    Add overflow check in TLS config

commit 180da1ba653574bbe2fa4ad8bfd9d9e65f4a64eb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 24 17:12:34 2015 +0200

    Add overflow check in TLS config

commit 87940ec213c72067b3546441219f3e41a62ebf7f
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Sat Oct 24 14:41:14 2015 +0100

    Kubernetes SD: Rename `masters` to `api_servers` in config

commit 7ff5cc66ea4571e4c48ca8dad3aff049b3b5d554
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Fri Oct 23 16:47:10 2015 +0100

    Kubernetes SD authentication options cleanup

commit 1b206efdb950d9c53c5dfb90f0d10f6727e1a489
Merge: 2a1d7ca ee600cf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 23 16:50:30 2015 +0200

    Merge pull request #1175 from prometheus/format-web-asset
    
    Format web/blob/files.go after generation

commit ee600cf9496a6eba3bc8f09a9b48030c7005811c
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Oct 23 02:51:29 2015 -0400

    Format web/blob/files.go after generation

commit 2a1d7ca33f04a30657230ee69ac97c07edfaf2fb
Merge: 93753a0 0296034
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Oct 22 14:13:18 2015 +0100

    Merge pull request #1174 from lyda/humanizeTimestamp
    
    Add a humanizeTimestamp to prom.lib.

commit 02960343bb5fbb71acf9fd2f0f82603d812e2ce4
Author: Kevin Lyda <kevin@ie.suberic.net>
Date:   Thu Oct 22 13:57:22 2015 +0100

    Add a humanizeTimestamp to prom.lib.

commit 93753a0500f7f37563216a0d7977836850560d44
Merge: f70f998 f99ef14
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Wed Oct 21 01:28:40 2015 -0400

    Merge pull request #1173 from claushellsing/patch-1
    
    Update CHANGELOG.md

commit f99ef14d7bf5bd83df8f42618fc402aed9f7acd0
Author: Rainer Eli <claushellsing@gmail.com>
Date:   Tue Oct 20 23:25:24 2015 -0600

    Update CHANGELOG.md
    
    Small typo fix

commit f70f99869663bd4b434d31fe7be40fdabf59355e
Merge: 51e8bad b0da6e2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 16 13:45:33 2015 +0200

    Merge pull request #1170 from prometheus/rel0.16.1
    
    Add changelog for 0.16.1

commit b0da6e2d3e8e417c9f19105521793e067661c965
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 16 13:40:12 2015 +0200

    Add changelog for 0.16.1

commit 51e8badc7ff14c72d478cc11e1cf675be579bccb
Merge: e4229ea c369611
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 16 12:28:56 2015 +0200

    Merge pull request #1159 from prometheus/scalar-bool
    
    promql: Remove scalar/scalar comparisons.

commit e4229ea6ca6ec9bf3267720be9b4012861f31b92
Merge: 5a0ce51 41a7217
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Oct 16 08:53:25 2015 +0200

    Merge pull request #1166 from prometheus/fix-source-building-docs
    
    Fix and improve build-from-source instructions.

commit 41a72179862740f31aa877e466a6f2202ebc0ded
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 15 22:33:59 2015 +0200

    Fix and improve build-from-source instructions.
    
    Fixes https://github.com/prometheus/prometheus/issues/1165

commit 5a0ce511dc445865fef94fd64ffea9900aa0f9dc
Merge: 28ba85c c27400d
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 15 22:16:40 2015 +0200

    Merge pull request #907 from prometheus/better-autocomplete
    
    Enable autocomplete anywhere in expression.

commit c27400de21f86a168ec8c7c7df0b068eab25eca5
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 20 20:29:40 2015 +0200

    Recompile web assets for autocomplete change.

commit 15c58c0f3ea575b855135977e590c6918e8ba9e5
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 20 20:24:08 2015 +0200

    Enable autocomplete anywhere in expression.
    
    This enables metric name autocompletion for every word in an expression,
    not just the very first one. It would be great to also support all
    language keywords during autocompletion in the future.

commit 28ba85c37abb9c241c7d2aefdca1f3728c73df95
Merge: bbdfb10 ea9a173
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Oct 13 15:00:52 2015 -0400

    Merge pull request #1162 from fabric8io/kubernetes-discovery
    
    Kubernetes SD: Use node name as instance label

commit ea9a173008f27d929005d0c598c93acfc146eaf2
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Mon Oct 12 21:26:09 2015 +0100

    Kubernetes SD: Use node name as instance label

commit c36961130b08624a2f51a7e0cc2d4abc35864cb4
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Oct 10 16:19:14 2015 +0100

    promql: Remove scalar/scalar comparisons.
    
    This change is breaking, use the 'bool' modifier for such comprisons.
    
    After this change all comparisons without 'bool' will filter, and all
    comparisons with 'bool' will return 0/1. This makes the language more
    consistent and orthogonal, and ultimately easier to learn and use.
    
    If we ever figure out sane semantics for filtering scalar/scalar
    comparisons we can add them in, which will most likely come out of how
    the new vector() function is used.

commit bbdfb10da17b74ce3bb4e4a7f845baf83d7754f1
Merge: 58e0862 5740a8f
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sat Oct 10 21:24:16 2015 +0100

    Merge pull request #1158 from prometheus/delta
    
    promql: Remove deprecated 2nd argument to delta()

commit 58e08622e87d2c2eaeaf1a67e57c22bb25629f64
Merge: 965a71d f148179
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 10 22:16:01 2015 +0200

    Merge pull request #1160 from prometheus/escape-regex
    
    consoles: Escape regexes.

commit f148179ef78c717c79904b7bd2b0598d7c6392ac
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Oct 10 17:05:04 2015 +0100

    consoles: Escape regexes.
    
    With the new string handling, some regexes need escaping.

commit 5740a8fadee4171b9964b8ac026124b249147ebc
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sat Oct 10 15:41:23 2015 +0100

    promql: Remove deprecated 2nd argument to delta()
    
    This change is breaking, use increase() instead.
    
    I'm not cleaning up the function in this PR, as my solution to #581 will
    rewrite and simplify increase/rate/delta.

commit 965a71dc4dbcd3a9d0f5ca1b9a03b2be73869ef1
Merge: dcb8ba4 f08abdb
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sat Oct 10 08:05:05 2015 +0100

    Merge pull request #1155 from prometheus/irate
    
    promql: Add irate() function

commit dcb8ba4c68e90ae6e825effbc8076aefb91d29af
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Oct 9 22:49:17 2015 +0200

    Correct date of 0.16.0 release in CHANGELOG.md

commit f08abdb48bf44b4922751da7c148c6f5a78846fb
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Oct 9 17:58:43 2015 +0100

    promql: Add irate() function
    
    irate is a rate function that only looks at the most
    recent two data points, and calucaltes a per-second value
    from that. This produces much more granular graphs for
    fast moving data, and works sanely across many scrape intervals.
    
    It doesn't do so well for slowly moving data.

commit ae5b642d452ddd3f952fc7e3e54e9d5e26dcacc6
Merge: 288964e 31e6234
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Oct 9 22:34:40 2015 +0200

    Merge pull request #1156 from prometheus/0.16.0
    
    Cut Prometheus 0.16.0.

commit 31e623485c66c0b271a0c09dae3094938711313a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 8 21:12:21 2015 +0200

    Cut Prometheus 0.16.0.

commit 288964eeaf58b352c6ed7d3dc255f7dcec9d89f5
Merge: 0088aa4 d88aea7
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Oct 9 18:21:51 2015 +0200

    Merge pull request #1151 from prometheus/fix-sd-source-handling
    
    Fix SD mechanism source prefix handling.

commit d88aea7e6fdfd7a6ecf1e9a7ff2e6c0d964788b5
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 8 18:06:58 2015 +0200

    Fix SD mechanism source prefix handling.
    
    The prefixed target provider changed a pointerized target group that was
    reused in the wrapped target provider, causing an ever-increasing chain
    of source prefixes in target groups from the Consul target provider.
    
    We now make this bug generally impossible by switching the target group
    channel from pointer to value type and thus ensuring that target groups
    are copied before being passed on to other parts of the system.
    
    I tried to not let the depointerization leak too far outside of the
    channel handling (both upstream and downstream) because I tried that
    initially and caused some nasty bugs, which I want to minimize.
    
    Fixes https://github.com/prometheus/prometheus/issues/1083

commit 0088aa4d451cdd90cf79061ac9984d4d75b390ee
Merge: dec9fc9 46c5260
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 8 20:51:18 2015 +0200

    Merge pull request #1132 from prometheus/fix-quoting-and-escaping
    
    Support escape sequences in strings and add raw strings

commit dec9fc9c32b1f5de8be9fc67deec74b8ff8e5142
Merge: 9cba38c 60cf401
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 8 19:27:06 2015 +0200

    Merge pull request #1148 from prometheus/fix-serverset-multiple-paths
    
    Fix watching multiple Zookeeper paths in serverset SD.

commit 46c52607611992aeee631a1e19f053d886ca34d4
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 30 21:27:08 2015 +0200

    Support escape sequences in strings and add raw strings.
    
    This adapts some functionality from the Go standard library for string
    literal lexing and unquoting/unescaping.
    
    The following string types are now supported:
    
    Double- or single-quoted strings:
    
      These support all escape sequences that Go supports in double-quoted
      string literals. The difference is that Prometheus also has
      single-quoted strings (instead of single-quoted runes in Go). Raw
      newlines are not allowed.
    
    Backtick-quoted raw strings:
    
      Strings quoted in backticks are treated as raw strings just like in Go
      and may contain raw newlines and other special characters directly.
    
    Fixes https://github.com/prometheus/prometheus/issues/1122
    Fixes https://github.com/prometheus/prometheus/issues/1121

commit 9cba38c6dab3287e5a18e29faf2e311f68f5b14e
Merge: be8b83f 1ddf752
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 8 16:50:34 2015 +0200

    Merge pull request #1150 from prometheus/kerckhoff-principle
    
    config: Don't hide username, it's not secret.

commit 1ddf75240d15d6bbc3d06ee27aa025ae86a0d599
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Oct 8 15:13:21 2015 +0100

    config: Don't hide username, it's not secret.
    
    Usernames are not generally considered to be secrets,
    and treating them as secrets may lead to confusion
    as to how secure they are. Obscuring them also makes
    debugging harder.

commit be8b83f48f2178eb3c28633b5c868e6875fbbc31
Merge: 5ebef5c 5ba5a31
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Oct 8 10:12:43 2015 +0200

    Merge pull request #1085 from mjibson/elb
    
    Add SD for Amazon EC2 instances

commit 5ba5a31e1293d5db64cc87bd197018890f0ba7d6
Author: Matt Jibson <matt.jibson@gmail.com>
Date:   Wed Sep 16 16:05:04 2015 -0400

    vendor EC2 dependencies

commit dcb4856d72a1d52fdc4b990c0dae0d9efd1b27ed
Author: Matt Jibson <matt.jibson@gmail.com>
Date:   Mon Sep 21 14:49:19 2015 -0400

    Add SD for Amazon EC2 instances

commit 60cf4015a4a6e86e2f990d41b7d40faff4709386
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Oct 6 15:47:34 2015 +0200

    Fix watching multiple Zookeeper paths in serverset SD.
    
    Fix https://github.com/prometheus/prometheus/issues/1137

commit 5ebef5c025e491ea49fe6f15e0d82b3845146c88
Merge: 3e48226 189416c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Oct 6 00:10:33 2015 +0200

    Merge pull request #1144 from roymiloh/master
    
    Remove duplicated bootstrap js on the graph template

commit 3e48226e7b67bd50213982ce63278d802de32178
Merge: b0aa877 c3adc9a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Oct 6 00:09:14 2015 +0200

    Merge pull request #1145 from prometheus/feder
    
    consoles: Remove federation example.

commit c3adc9a393d515910e015a58f5a4c79f87b86387
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Oct 5 21:15:01 2015 +0100

    consoles: Remove federation example.
    
    Now that federation is a 1st class feature, there's
    no reason to keep this around.

commit 189416cb34c59995c7c660b992caf9f477f24507
Author: Roy Miloh <rmiloh@gmail.com>
Date:   Mon Oct 5 22:50:16 2015 +0300

    Remove duplicated bootstrap js on the graph template, it's already included on the base template.

commit b0aa8778684af28577940e7f579ada35270421f6
Merge: 91436b2 e3b6ec9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 3 14:10:57 2015 +0200

    Merge pull request #1141 from prometheus/log
    
    Switch to common/log

commit e3b6ec97847d5c3aed5bf373929941b1165aedab
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Oct 3 10:21:43 2015 +0200

    Switch to common/log

commit 91436b2974e44f10ec7bfd6d3158a8f58176ad29
Merge: 5caa70e 94f4430
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Oct 2 22:40:58 2015 +0100

    Merge pull request #1140 from thachmai/master
    
    Fix example prometheus.yml to use "external_labels" instead of "labels"

commit 94f4430ff31a68da85b315ce03e77bdb9d038f06
Author: Thach MAI <thachmai@gmail.com>
Date:   Fri Oct 2 23:00:10 2015 +0200

    Fix example prometheus.yml to use "external_labels" instead of "labels".

commit 5caa70ee28c63f8dbe9f36a5090d5c72bfa9cdaa
Merge: d025fcd 4b209aa
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Oct 2 17:09:09 2015 +0100

    Merge pull request #1138 from prometheus/brian-brazil-patch-1
    
    Mention hactoberfest

commit 4b209aa3848b2c89cdbccf308217e4484328767a
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Oct 2 16:56:04 2015 +0100

    Mention Hacktoberfest
    
    As DigitalOcean is linking to this page, direct users to the project list from here.

commit d025fcd4e26eaa58c3c5b540633c100b5b0d27fe
Merge: ea7c077 3008a35
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 1 15:36:11 2015 +0200

    Merge pull request #1133 from prometheus/escape-string-values
    
    HTML-escape string return values in web UI.

commit 3008a35c04e297928977ee1bfb4a7a4bc42eda02
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 1 13:16:49 2015 +0200

    HTML-escape string return values in web UI.
    
    Querying for the string literal "<script>alert(1)</script>" would alert
    otherwise.

commit 7e86cd1ef4ecb45c6e5e343046f0a67c8de50dc6
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 30 21:27:21 2015 +0200

    Add Unquote() strutil function.

commit ea7c077e815a8c20d010d681ba4892bf0017a501
Merge: e1b9146 f4e1f6e
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 30 17:30:59 2015 +0200

    Merge pull request #1131 from prometheus/fix-node-disk-mountpoint
    
    Rename label 'filesystem'->'mountpoint' in node-cpu console.

commit f4e1f6e3b997dcce782f691f1964f4b2577911e4
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 30 17:25:59 2015 +0200

    Rename label 'filesystem'->'mountpoint' in node-cpu console.
    
    The label name has been changed in the node exporter.

commit e1b9146c3831996939c25a4ef17e374631fae82a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 30 16:40:29 2015 +0200

    Add missing 'g'

commit 24ff06b1459e120f9bea2980e1db6f80bf8e4c7e
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 30 16:39:06 2015 +0200

    CHANGELOG.md formatting fixes for 0.16.0rc2 entry

commit e7c60c2b1d6eb6665c09873f353972afae094582
Merge: db382b4 85ac8d0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 30 16:33:24 2015 +0200

    Merge pull request #1130 from prometheus/rc
    
    Cut release 0.16.0rc2

commit 85ac8d0e5de953a9800034908018188cad7320f6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 30 16:28:25 2015 +0200

    Cut release 0.16.0rc2

commit db382b4570bd7ca3135ead21914d5538b7f5a3e5
Merge: 4dbb3ab dac26ce
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 30 11:53:50 2015 +0200

    Merge pull request #1129 from prometheus/rename-global-labels
    
    Rename global "labels" config option to "external_labels".

commit 4dbb3abfeceb835e89e359991887320e1ab01343
Merge: bf4e4a8 1976dfe
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 29 20:56:51 2015 +0200

    Merge pull request #1127 from fabric8io/kubernetes-discovery
    
    Add Kubernetes namespace & name labels to example config

commit dac26cef71dfcc25b3cadd8d9f3fe7b7122243f0
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 29 17:51:03 2015 +0200

    Rename global "labels" config option to "external_labels".

commit 1976dfe63432c5d55d2f386c8bbe8b11de8e3f89
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Sep 29 12:55:08 2015 +0100

    Add Kubernetes namespace & name labels to example config

commit bf4e4a8ff07e62c6e4afd384e7610868cc13f805
Merge: a88ed8c 0d61605
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 29 12:34:48 2015 +0200

    Merge pull request #1125 from fabric8io/kubernetes-discovery
    
    Kubernetes SD example: separate out cluster level components & services

commit 0d61605526c7d9b58033abce57596359a93c6be8
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Sep 29 09:38:58 2015 +0100

    Kubernetes SD example: separate out cluster level components & services

commit e26fc5e73c553456e699ecd886c198612af97942
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Tue Sep 29 08:59:35 2015 +0100

    Kubernetes SD config tidy & add labelmap action example

commit a88ed8c2ffdf5606038b62362971e42f59a80625
Merge: e91d85b e633b1d
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Sep 29 08:23:39 2015 +0100

    Merge pull request #1123 from keegancsmith/k8s-example
    
    Move InCluster auth in kubernetes example config

commit e633b1dc8db42324fecaf1483a2339552e753d42
Author: Keegan Carruthers-Smith <keegan.csmith@gmail.com>
Date:   Tue Sep 29 09:02:01 2015 +0200

    Move InCluster auth in kubernetes example config
    
    CA and Bearer Token are config of `kubernetes_sd_configs`, not the
    `scrape_config`. Also updated misleading top-level comment and removed
    unnecessary global config.

commit e91d85b498117f079d99e8305d7b995560ef650f
Merge: 097d810 99e8fff
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Sep 28 12:31:26 2015 +0200

    Merge pull request #1116 from prometheus/fix-tm-done
    
    Fix target manager CPU busyloop caused by bad done-channel handling.

commit 99e8fff8723959b84ad6f41d69d61b6345e813d2
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 25 18:41:37 2015 +0200

    Fix target manager CPU busyloop caused by bad done-channel handling.
    
    Unfortunately this isn't nicely testable, as it's timing-dependent and
    one would have to detect a stray goroutine doing a CPU busyloop...
    
    Fixes https://github.com/prometheus/prometheus/issues/1114

commit 097d810f37024418333ff86d4e6879c00ead4553
Merge: 19d9e36 ba6688b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 28 09:57:16 2015 +0200

    Merge pull request #1120 from prometheus/flaky-test
    
    retrieval: Reduce flakiness of TestTargetRunScraperScrapes

commit ba6688bfcecaeaa85b63e82c0e8ac12d922f0cc2
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Sep 28 08:34:54 2015 +0100

    retrieval: Reduce flakiness of TestTargetRunScraperScrapes

commit 19d9e3609ba7590a51e4afea04944020ff676cfe
Merge: 656b2e2 b035692
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sat Sep 26 17:29:11 2015 +0100

    Merge pull request #1118 from prometheus/params-lost
    
    retrieval: Add URL parameters to fullLabels too

commit b03569267ebfb79ed8a79a754299818afcf98168
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Sep 25 21:51:49 2015 +0100

    retrieval: Add URL parameters to fullLabels too
    
    Move all the special cases into one map, rather than
    spreading the logic around.

commit 656b2e21099d59c4deefc8fab75ec9ffc8c3fbdb
Merge: 666eafc 398bbf9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 24 17:15:40 2015 +0200

    Merge pull request #1113 from prometheus/router
    
    Switch to common/route package

commit 398bbf906b417bfb685c42084d9ef7dc218edf55
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 24 17:07:11 2015 +0200

    Switch to common/route package

commit 666eafc23b44f887d9cdba7d6db346276b541642
Merge: 21979c4 0179bbf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 23 13:59:24 2015 +0200

    Merge pull request #1108 from prometheus/fix-prefixed-redirect
    
    Fix / -> /graph redirect when using a path prefix.

commit 0179bbfe031a54e67a40e9e259effd0c69c2f0a6
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 22 15:32:21 2015 +0200

    Fix / -> /graph redirect when using a path prefix.

commit 21979c4b95cb38e4bbe621d7ec147fcdd1028925
Merge: 8a40f1b 653ff71
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Sep 23 10:25:04 2015 +0100

    Merge pull request #1112 from prometheus/flaky-tests
    
    promql: Reduce flakiness of concurrency test

commit 653ff71f1f28430b9bfc9dd04663ed494fe49ee0
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Sep 23 10:06:51 2015 +0100

    promql: Reduce flakiness of concurrency test

commit 8a40f1b7e39993c82b40864e530d984bd4220e71
Merge: c6b88bc 5025892
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 23 10:57:11 2015 +0200

    Merge pull request #1111 from prometheus/flaky-tests
    
    Retrieval: Show error message for failed test scrape

commit 50258929ac9287f7d06dc132a89ba4e72e2ef92a
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Sep 23 09:24:50 2015 +0100

    Retrieval: Show error message for failed test scrape
    
    This is flaky, and I suspect it was due the to I/O timeout that I've
    already fixed. In case that wasn't it, display the error should it
    happen again.

commit c6b88bc3d38b091b276d2a5a294f264678d68f03
Merge: 8af1d7a 4bc39dc
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Sep 23 09:04:22 2015 +0100

    Merge pull request #1110 from prometheus/flaky-tests
    
    retrieval: Reduce flakiness of TestTargetManagerChan

commit 4bc39dc60e7eac88a775a9732ad937a75ed41931
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Sep 23 08:53:55 2015 +0100

    retrieval: Reduce flakiness of TestTargetManagerChan
    
    This will increase test time by a few hundred ms,
    this is the 2nd most common cause of flakiness.

commit 8af1d7a6d29e9c96bf5603307b4de2dfb27b2a53
Merge: cac6eea 93145b9
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Sep 23 07:37:39 2015 +0100

    Merge pull request #1109 from prometheus/flaky-tests
    
    retrieval: Reduce flakiness of target tests

commit 93145b960a5c7bb859aa65b950d23f7e0dc74b07
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Sep 22 17:58:42 2015 +0100

    retrieval: Reduce flakiness of target tests
    
    Bump timeouts of tests where we don't want I/O timeouts.
    
    Adjust the full channel test to be much more reliable,
    by reducing the ingestion timeout from 1ms to 0.

commit cac6eea43493092668bf09e666a3bdf267a610c0
Merge: a8126c9 1ce89a4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 22 14:55:31 2015 +0200

    Merge pull request #1105 from prometheus/consulnil
    
    Fix nil panic on consul error

commit a8126c9be107d5d1176d860c3693bd0979546078
Merge: ef176e5 3271528
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 22 13:22:00 2015 +0200

    Merge pull request #1107 from prometheus/expfmt
    
    Update expfmt.NewDecoder usage

commit 327152862c739e27bf3396bec56e09e9ca575069
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Sep 19 11:49:40 2015 +0200

    Update expfmt.NewDecoder usage

commit 1ce89a4a0b1be58e3bf4dbcd1b7ec3d695ac36a2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 22 09:04:31 2015 +0200

    Fix nil panic on consul error

commit ef176e5a9b744b1923cb3991d00ff46d984603b9
Merge: cf12e89 0e99fa6
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Sep 21 22:11:53 2015 +0200

    Merge pull request #1102 from mjibson/allow-labelmap
    
    Allow labelmap action

commit 0e99fa6c46d92089ee8f93192234cef3aa345157
Author: Matt Jibson <matt.jibson@gmail.com>
Date:   Mon Sep 21 15:41:19 2015 -0400

    Allow labelmap action

commit cf12e890a68dbfd6d84e5230c0bf3f926926f78f
Merge: 7c0a496 ca63c05
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Sep 21 13:40:29 2015 +0200

    Merge pull request #1098 from prometheus/fix-direct-access-of-protobuf-fields
    
    Fix creation of protobuf fields

commit 7c0a4961ed2f779f03674f7459c4fcc0ea2bba5a
Merge: 171f507 28c2f9e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Sep 19 12:40:40 2015 +0200

    Merge pull request #1097 from prometheus/makefile
    
    Add vetting to default make target

commit 28c2f9e4ffd4b9cd995c07cbe5d3e35280f766bd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 18 17:03:26 2015 +0200

    Fix phony targets and log asset generation

commit ca63c05b4e44c06aee7c4369a583c6fbb800ab49
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Sep 18 19:00:53 2015 +0200

    Fix creation of protobuf fields

commit 171f50706a1c126f5e656f4a143875a7c2084d22
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 18 16:51:53 2015 +0200

    Fix unkeyed field errors.

commit 36ec8ba460457c46cb9b652a357108b904a3cedc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 18 16:50:13 2015 +0200

    Fix missing return on error

commit e005f939fdfdd9776989e96039242356293ed68a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 18 16:49:32 2015 +0200

    Fix scalar construction in function

commit 7ea867b4c9940c399b02785f63fde1009e97fa49
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 18 13:10:02 2015 +0200

    Add vector() function to CHANGELOG.md.

commit 4c7c367a4b0b8328ea5c51dfb70daf2ae5493080
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 18 12:26:56 2015 +0200

    Fix date of 0.16.0rc1 release in CHANGELOG.md.

commit cb02af5747bcc83e354fe68a88b58f1a91b335c3
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 18 12:19:27 2015 +0200

    Fix trailing space in Makefile.

commit 678c90ea82c3aa3c638e4652a0cb0ac9a300eb16
Merge: dbb66d7 7f29ee3
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 18 12:16:17 2015 +0200

    Merge pull request #1096 from prometheus/cut-0.16.0
    
    Cut Prometheus 0.16.0rc1.

commit 7f29ee36dd50e296302fd9c9e3241e157bbcd535
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 11 17:29:25 2015 +0200

    Cut Prometheus 0.16.0rc1.

commit dbb66d79abedfb68f6f8db8a12fc31b84551da1a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 18 10:38:26 2015 +0200

    Fix missing go version in build tags

commit ac9554539c7c9334e2b8dc4c78339f5326be1752
Merge: 54147b3 c8a092e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 18 10:29:57 2015 +0200

    Merge pull request #1092 from prometheus/makefile
    
    Native go building

commit c8a092ebcce5c1cc285067dd46e3e92d743a287b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 18 09:34:17 2015 +0200

    Add goenv script and fix Docker

commit ad644740768a9a316774fa1019150fa3a2400b44
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 18:20:38 2015 +0200

    Update Readme for new Makefile

commit 54147b3ea5558c3f449d3c119c4eaf6880bdfa57
Merge: 1cc3a0a 3773ffe
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 18:46:26 2015 +0200

    Merge pull request #1094 from prometheus/pkgignore
    
    Remove .pkgignore file

commit 1cc3a0a5842eaff6df4bdf0e622d4632f982fbb8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 18:31:56 2015 +0200

    Add newline to vendor.js after upstream fix

commit 3773ffeed5f33c91aea7f67e72561e93d0e366ae
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 18:27:26 2015 +0200

    Remove .pkgignore file

commit 92ffeadb7ba00e36e22164160596f36c4265eec8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 17:53:15 2015 +0200

    Move assets generation to top level make file

commit 5b3a62f88dc04ffaae5a3e6321457221d9e46e23
Merge: aef3bb8 4876e92
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 17:35:41 2015 +0200

    Merge pull request #1093 from prometheus/vendor
    
    Upgrade expfmt vendoring

commit 5127963e93f04a1efc12bc88bc6c12ae2fbe448a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 16 16:42:38 2015 +0200

    Replace Makefile with simpler setup

commit 4876e9201473c809e476a3a60c5b71767dc39870
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 17:20:08 2015 +0200

    Upgrade expfmt vendoring

commit aef3bb8651dfd65ce6d1fddbfc5abdbb8c10d9d7
Merge: fd26b5b d85cee0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 17:15:01 2015 +0200

    Merge pull request #1091 from prometheus/compress
    
    Remove compression from web interface

commit fd26b5b0b36683ede6dcffab11a88be187145353
Merge: 568c2c4 704d723
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 17:09:36 2015 +0200

    Merge branch 'master' of github.com:prometheus/prometheus

commit 568c2c4d99cdd25cc61db44286d5d94b5da9832d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 17:09:01 2015 +0200

    Bump travis go version

commit d85cee027766442faaf16c7715c79d6c32fc789d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 16:33:14 2015 +0200

    Remove compression from web interface

commit 704d72334cbd0c642dbe268c4db919393b8c2751
Merge: c42035a f8a25f6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 15:09:30 2015 +0200

    Merge pull request #1090 from prometheus/compress
    
    Apply HTTP handler compression everywhere

commit f8a25f6af7febe8bb0ef570e32e17602f341fae0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 17 14:49:50 2015 +0200

    Apply HTTP handler compression everywhere

commit c42035abff5edf8c075473c3208022fd779abe4f
Merge: 681eebf 24d0d91
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Sep 17 11:28:07 2015 +0200

    Merge pull request #1089 from prometheus/more-verbose-external-url-help
    
    Make -web.external-url help string more verbose.

commit 24d0d9190ec3952fdaf9e5485f7f70ccdb41c663
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 16 20:35:23 2015 +0200

    Make -web.external-url help string more verbose.

commit 681eebfaee776f77c56f568fe2a90fbfac30abcd
Merge: eca41f5 eeb1da3
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 16 17:40:22 2015 +0200

    Merge pull request #1087 from prometheus/fix-influxdb
    
    Fix InfluxDB write support to work with InfluxDB 0.9.x.

commit eeb1da36ac685dc09fa2980954fc331cc362f459
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 16 16:22:13 2015 +0200

    Fix InfluxDB write support to work with InfluxDB 0.9.x.
    
    Because the InfluxDB client library currently pulls in multiple MBs of
    unnecessary dependencies, I have modified and cut up the vendored
    version to only pull in the few pieces that are actually needed.
    
    On InfluxDB's side, this dependency issue is tracked in:
    
    https://github.com/influxdb/influxdb/issues/3447
    
    Hopefully, it will be resolved soon.
    
    If a password is needed for InfluxDB, it may be supplied via the
    INFLUXDB_PW environment variable.

commit 5f77fce5787f2138e1b762ca85bab4657bac337b
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 16 16:22:18 2015 +0200

    Improve remote storage queue manager metrics.

commit eca41f53191fb755ec940a5f66fd9b77c33ea2e2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 16 14:33:12 2015 +0200

    Run gofmt

commit 9e5b317c0d1895c5a411796c9f0f9d128c05cb1c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 16 12:03:09 2015 +0200

    Move vendor file to new location

commit f35382ddfb509781898facfe882bf1dae783e2ea
Merge: 6561897 468d2eb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 15 15:44:57 2015 +0200

    Merge pull request #1069 from prometheus/vendor
    
    Vendoring with govendor

commit 468d2eb60ee687bc14e64c544ada84319d0a60c1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 10 16:17:51 2015 +0200

    Vendoring via govendor

commit e88eb9f1642e6a104507fc872412622dddf0fa2f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 10 14:15:56 2015 +0200

    Remove Godeps

commit 65618978533d517a6feeb5abeb47fa9a545c0483
Merge: fa793d9 22d3a43
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Sep 14 21:23:12 2015 +0200

    Merge pull request #1084 from prometheus/beorn7/storage
    
    Increase waiting time in TestEvictAndLoadChunkDescs

commit 22d3a4311ae081d3a05888410527d0f4da0b3705
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Sep 14 21:09:46 2015 +0200

    Increase waiting time in TestEvictAndLoadChunkDescs
    
    The test had become flaky with Go1.5.
    
    Theory here is that with Go1.5.x, sleeping for 10ms might not be
    enough to wake up another goroutine, possibly because it is used for
    GC. 50ms should always be enough due to GC pause guarantees with the
    new GC.

commit fa793d917e3a2b38de323630af0d456de3dc058b
Merge: 3476304 ce7f31e
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Sep 14 13:00:47 2015 +0100

    Merge pull request #1080 from prometheus/query-timeout-test
    
    promql: Bump sleep in query timeout test

commit ce7f31e03c0722fdfbffcd93e60f5acb4010977f
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Sep 14 11:28:27 2015 +0100

    promql: Bump sleep in query timeout test
    
    This test is flaky, I'm presuming the time.AfterFunc
    call is being delayed so the evaluation isn't getting
    cancelled.

commit 347630431c7f422070caa2034f899f6a54d5180a
Merge: 29de4ee af51346
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Sep 14 12:37:26 2015 +0200

    Merge pull request #1077 from prometheus/cleanups
    
    Fix some dead code, missing error checks, shadowings.

commit af513468ebe0ed39c53e0531095699ad557b1e87
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun Sep 13 01:06:40 2015 +0200

    Fix some dead code, missing error checks, shadowings.
    
    I applied
    https://medium.com/@jgautheron/quality-pipeline-for-go-projects-497e34d6567
    and was greeted with a deluge of warnings, most of which were not
    applicable or really fixable realistically. These are some of the first
    ones I decided to fix.

commit 29de4ee2b0f2eb59b526b31fbbce37758369eda0
Merge: 896928a 9b38264
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Sep 13 14:14:20 2015 +0100

    Merge pull request #1078 from prometheus/whats-our-vector-victor
    
    Remove optional vector() 2nd argument

commit 9b382647b5c9d1fe8ccefb92fdbba06e508d10ef
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Sep 13 09:13:22 2015 +0100

    Remove optional vector() 2nd argument

commit 896928ad00ef203a5f9c6d264daf3c3fa03de4a7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Sep 12 09:02:34 2015 +0200

    Fix redirect path

commit d7b21f2fdb056fb0707cf887abf9f3dee98eced2
Merge: a1617d9 87b1d47
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Sep 12 08:44:54 2015 +0200

    Merge pull request #1039 from prometheus/startpage
    
    Change UI start page

commit 87b1d47e2bbbdb15999c44e751f82ca88df90b70
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 28 10:53:13 2015 +0200

    Change UI start page

commit a1617d90f4a12888af0bbd5d5e4375ef4a2af8c9
Merge: bae9816 69f5fa0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Sep 12 08:36:13 2015 +0200

    Merge pull request #1073 from prometheus/whats-our-vector-victor
    
    promql: Add vector function.

commit bae981683446f226b551c1d45dd27dc0983978db
Merge: b2c6378 af58d78
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 11 21:11:43 2015 +0200

    Merge branch 'master' of github.com:prometheus/prometheus

commit b2c6378aaef0eb7569d81ac3518270ec9d36f885
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 11 21:11:22 2015 +0200

    Fix go1.5 compile flag warnings

commit af58d784fd286390cb213b9aac0120d3b07c5cc3
Merge: 2c3c1ba d73c8a4
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 11 17:36:52 2015 +0200

    Merge pull request #1076 from prometheus/remove-config-change-notice
    
    Remove notice about 0.14.x config file format change.

commit d73c8a4f0b23bb4178a4520beba0ba5ed1f236f5
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 11 16:43:04 2015 +0200

    Remove notice about 0.14.x config file format change.

commit 2c3c1ba69fb450f97732f7756cc54660291f9655
Merge: e7c1db4 daeccdd
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Sep 11 16:06:41 2015 +0200

    Merge pull request #1075 from prometheus/beorn7/storage
    
    Fix DropMetricsForFingerprints

commit daeccdd0e94f4265a31be0c9576bb449de475b6c
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Sep 11 15:47:23 2015 +0200

    Fix DropMetricsForFingerprints
    
    It now deletes the series file also for archived series.
    
    Also, fix a naming error in a doc comment.

commit e7c1db42f39e096e847e1f936783a2ff44a77586
Merge: d6ed1df 7ef9399
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 11 14:47:01 2015 +0200

    Merge pull request #1072 from fabric8io/kubernetes-discovery
    
    Clean up kubernetes http response bodies

commit 69f5fa0c1ea7dd0ade8fe694d753780ad125c175
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Sep 11 12:09:34 2015 +0100

    promql: Add vector function.
    
    Currently the only way to convert a scalar to a vector is to
    use absent(), which isn't very clean. This adds a vector()
    function that's the inverse of scalar() and lets your optionally
    set labels.
    
    Example usage would be
    vector(time() % 86400) < 3600
    to filter to only the first hour of the day.

commit 7ef9399920e7bef68f4299dc75fc923d629ab727
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Fri Sep 11 11:44:28 2015 +0100

    Clean up kubernetes http response bodies

commit d6ed1df4fba92c213e7f51dc9c56ba004f480a63
Merge: 66f376f 9fb65a9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Sep 11 00:30:54 2015 +0200

    Merge pull request #1070 from amorken/forgotten-close
    
    Close HTTP connections on HTTP errors too.

commit 9fb65a91af5ce5f0a17931530112c023dbdfd406
Author: Anders Daljord Morken <anders.morken@cxense.com>
Date:   Thu Sep 10 22:32:40 2015 +0200

    Close HTTP connections on HTTP errors too.
    
    Move defer resp.Body.Close() up to make sure it's called even when the
    HTTP request returns something other than 200 or Decoder construction
    fails. This avoids leaking and eventually running out of file descriptors.

commit 66f376f75a4ffb61870f9edd7c021d9740163371
Merge: 6e39380 8456b7e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 10 12:19:33 2015 +0200

    Merge pull request #1068 from prometheus/go1.5.1
    
    Use go1.5.1

commit 8456b7e12fe1a7ae72c2f11c329d94ba0c9adf2f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 10 12:10:12 2015 +0200

    Use go1.5.1

commit 6e393807c3e8b50b6269b0fba56542b93bb43455
Merge: 9a70ee7 6d3e054
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Sep 10 12:03:11 2015 +0200

    Merge pull request #1066 from prometheus/fix-bool
    
    Fix bool modifier in recording rules and printing.

commit 6d3e05469211e0896efebf593cfd3af9003fa364
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Sep 10 01:37:05 2015 +0200

    Fix bool modifier in recording rules and printing.
    
    Fixes https://github.com/prometheus/prometheus/issues/1065

commit 9a70ee752e36bc570f57674e579f4aeb400f6396
Merge: 58c32f8 ec04ba3
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 9 15:28:27 2015 +0200

    Merge pull request #1063 from fabric8io/kubernetes-discovery
    
    Kubernetes SD config check

commit ec04ba38a2672786f69455b735fd43e6d06afa90
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Wed Sep 9 13:08:05 2015 +0100

    Kubernetes SD config check

commit 58c32f84ce771139cb7d39433af8f69167ab6a39
Merge: ffc5142 a1574aa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 9 11:24:29 2015 +0200

    Merge pull request #1055 from fabric8io/kubernetes-discovery
    
    Move TLS options to scrape config

commit a1574aa2b35190a532808cad49290db0226ca486
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Mon Sep 7 00:07:44 2015 +0100

    Move TLS options to scrape config
    
    Fixes #1013, fixes #989

commit ffc5142c5437094a81fc1fbce5aa3a6e858f9bcf
Merge: 011faf9 6774a73
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Sep 7 19:57:16 2015 +0200

    Merge pull request #1058 from prometheus/check-errors
    
    Fix error checking and logging around checkpointing.

commit 6774a73878a453ad51eb61cbe2f74fef5bce9491
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Sep 7 18:08:23 2015 +0200

    Fix error checking and logging around checkpointing.

commit 011faf90571a1056195cc3c489788143b3ba26bc
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Sep 7 19:15:28 2015 +0200

    Fix typo in comment.

commit 09c353c2726cfd0b27e45c2ef4612d333da18422
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 7 15:12:42 2015 +0200

    Change mail address

commit e298463fd6eb81ceba8b6888bbb4c81ec359b605
Merge: 1ef5ed0 1a3ee28
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Sep 7 15:08:14 2015 +0200

    Merge pull request #1053 from prometheus/diag
    
    Update architecture diagram

commit 1a3ee28cd261c31833201f4de88da75166407624
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Sep 6 10:28:51 2015 +0200

    Point README to new architecture diagram

commit e761f0d664e7eaf8d2dafc70d57cace40f41b27d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Sep 6 10:25:07 2015 +0200

    Update architecture diagram

commit 1ef5ed0cf21830fd5044ad760f6d7d0b003ba64e
Merge: b7b7b2e eb7416e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Sep 6 20:09:46 2015 +0200

    Merge pull request #1048 from xperimental/fix/marathon-config
    
    Fix parsing Marathon SD config

commit eb7416e71ffa029ea7521a53b7e7f1f9f7976e3f
Author: Robert Jacob <robert.jacob@holidaycheck.com>
Date:   Wed Sep 2 15:08:37 2015 +0200

    Fix missing unmarshal for Marathon SD config.

commit b7b7b2e8837552b127088daf7e41120e4c36483a
Merge: d839980 d7a7fd4
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Sep 4 14:58:11 2015 +0200

    Merge pull request #1050 from fabric8io/kubernetes-discovery
    
    Kubernetes SD improvements

commit d7a7fd4589b7cf20daccf82c41aaadf47f10777f
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Thu Sep 3 10:47:09 2015 +0100

    Kubernetes SD improvements
    
    * Support multiple masters with retries against each master as required.
    * Scrape masters' metrics.
    * Add role meta label for node/service/master to make it easier for relabeling.

commit d839980fcb3c44db7f90b6238e9b238aba34baae
Merge: 9ec11b1 8fa719f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 3 16:52:59 2015 +0200

    Merge pull request #1051 from prometheus/globallabels
    
    Change global label handling

commit 8fa719f778a68c2ca2d9be810a9bbcbe85e2a227
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 3 13:44:03 2015 +0200

    Attach global labels to remote storage samples

commit 5fed076a76596170cd68694b56099abaf2d7600d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 1 22:17:02 2015 +0200

    Attach global labels to outgoing alerts.

commit 9bbd9264e2e0eac3894fb7137c3a0bc099cb2a41
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 1 18:47:48 2015 +0200

    Add global labels to federation

commit 9ec11b1847b712c33bad90fdbf8db1c7f200f4f2
Merge: bc89b98 29e8dc2
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Sep 3 15:08:38 2015 +0100

    Merge pull request #1049 from prometheus/bool-nofilter
    
    promql: Add 'bool' modifier to comparison functions

commit bc89b98a7da38e443f4eb3ae6bb9244ede3c2454
Merge: e3d8090 e2b9798
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 3 14:22:16 2015 +0200

    Merge branch 'master' of github.com:prometheus/prometheus

commit e3d809024c0f51e017cb17399d2bd172a6290111
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Sep 3 14:19:26 2015 +0200

    Change email address

commit cc1a2a20619dcfede66117d3993ea1f7cd0e9509
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 1 17:49:09 2015 +0200

    Remove attachment of global labels upon ingestion

commit e2b979868bcfcfdd0f28febc9dd406b8c2d1d33a
Merge: 4459265 b2cb637
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Sep 2 19:16:26 2015 +0200

    Merge pull request #1047 from swsnider/upstreamed
    
    Add an exported counter to track configuration reloads

commit b2cb637f97a7e049c1f057bc56f6981211b8b509
Author: Silas Snider <swsnider@apple.com>
Date:   Tue Sep 1 10:18:39 2015 -0700

    Add instrumentation around configuration reloads.
    
    This commit enables automation (and alerting) around attempts to update prometheus
    server configuration automatically.

commit 29e8dc2c492559db67bdd994bfd1ab67b4e05d23
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Sep 2 14:51:44 2015 +0100

    promql: Add 'bool' modifier to comparison functions
    
    When doing comparison operations on vectors, filtering
    sometimes gets in the way and you have to go to a fair bit of
    effort to workaround it in order to always return a result.
    The 'bool' modifier instead of filtering returns 0/1 depending
    on the result of the compairson.
    
    This is also a prerequisite to removing plain scalar/scalar comparisons,
    as it maintains the current behaviour under a new syntax.

commit 44592657391baa70b9de4187a78d460bbf511fca
Merge: ebf417a 58780a8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 1 18:06:40 2015 +0200

    Merge branch 'master' of github.com:prometheus/prometheus

commit ebf417a2827c9ffdb798ea757d46ca3d5c6252c0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Sep 1 18:06:22 2015 +0200

    Fix map initialization

commit 58780a8c797ae140f8f8c57feac1841e2d81ae98
Merge: 4c90168 61c42c8
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 1 17:50:36 2015 +0200

    Merge pull request #1045 from prometheus/anchored-label-replace
    
    Change relabel_replace() to do full-string matches.

commit 4c9016813062c91176f9c54cb413dad8c927f599
Merge: dfbda8f f63a899
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 1 17:14:23 2015 +0200

    Merge pull request #1044 from prometheus/config-anchored-regexes
    
    Change config regexes to full-string matches.

commit 61c42c8da09c848fd500d5379d4330127efe533b
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 1 15:35:20 2015 +0200

    Change relabel_replace() to do full-string matches.
    
    THIS IS A BREAKING CHANGE.
    
    Fixes part of https://github.com/prometheus/prometheus/issues/996

commit f63a899744b54ed212914aa943e57fc80f2f2f55
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 1 15:05:14 2015 +0200

    Change config regexes to full-string matches.
    
    This anchors all regular expressions entered via the config to match a
    full string vs. a substring.
    
    THIS IS A BREAKING CHANGE!
    
    Fixes part of https://github.com/prometheus/prometheus/issues/996

commit dfbda8fd3f842ac5afd76accb2a3d5074f9ad29e
Merge: bfdd474 e1dacc5
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 31 12:28:51 2015 +0200

    Merge pull request #1041 from Dieterbe/fix-fanout-comment
    
    fix comment.

commit e1dacc56e6d1aa93b3abfb4108804ead43099200
Author: Dieter Plaetinck <dieter@plaetinck.be>
Date:   Sun Aug 30 16:26:46 2015 +0200

    fix comment.
    
    the sample doesn't get appended to the list of sampleappenders.

commit bfdd4742023005d52f2625516e8b8c930825d179
Merge: facf60e 542da67
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 28 15:53:24 2015 +0200

    Merge pull request #1040 from prometheus/fixfilesd
    
    Fix draining of file watcher events

commit 542da6774e40a815fb02bf423e0f9b4b0c947d49
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 28 12:15:46 2015 +0200

    Fix draining of file watcher events

commit facf60e0331977bc9245d54c0c1b6fee6df335b6
Merge: 4d196fe 4abf54b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 27 16:42:10 2015 +0200

    Merge pull request #1033 from dln/serverset-shard
    
    serverset discovery: extract shard number from serverset data

commit 4abf54b747d6003217a7303aa37b49275135bf70
Author: Daniel Lundin <daniel.lundin@dice.se>
Date:   Wed Aug 26 16:53:37 2015 +0200

    serverset: extract shard number from serverset data

commit 4d196fea6b95812ddb1c998cb8025ee48430b6eb
Merge: 9bca707 3bcdb2b
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Aug 26 16:56:16 2015 +0100

    Merge pull request #1032 from prometheus/scalar-metric
    
    rules: Allow for setting labels on LHS on scalars

commit 3bcdb2bbbac646478d2e24a1583e6e05eb0e5933
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Aug 26 11:19:44 2015 +0100

    rules: Allow for setting labels on LHS on scalars

commit 9bca70710ba09cb92e45ba69601b4b8dcafb1bc3
Merge: 29eaa8c da2499d
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 26 17:47:01 2015 +0200

    Merge pull request #1034 from prometheus/fix-pprof
    
    Add POST handler for /debug to fix CPU profiling.

commit da2499d5a5de661292de129832aef67dfbc42385
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 26 17:42:25 2015 +0200

    Add POST handler for /debug to fix CPU profiling.
    
    `go tool pprof` sends a POST request to enable CPU profiling, so we also
    need to handle that method.

commit 29eaa8c7cff7cca959356e6a21819bd2a3afcb74
Merge: 744d5d5 3fd5826
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 26 13:25:00 2015 +0200

    Merge pull request #1030 from prometheus/fix-flakey-filesd
    
    Fix flakey FileSD test.

commit 3fd5826589a8d8cd22aa19622fcc4eb6590636d5
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 26 02:58:59 2015 +0200

    Fix flakey FileSD test.
    
    When the test ends, all files matching the watcher's glob are removed
    via defer. In that moment, the draining goroutine may still be running
    and then detect no files matching the configured glob just before the
    test exits.
    
    This is now solved by waiting for the draining goroutine to finish
    before leaving the test function and thus causing the deferred file
    removal.

commit 744d5d5a7aff6d734ed6cbc9e767c361c41250a5
Merge: 78f5a93 963ad82
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 26 12:50:18 2015 +0200

    Merge pull request #1029 from prometheus/vet-fixes
    
    Fix "go vet" errors.

commit 78f5a93ea6d1edca15811f25e435e0d489187d0b
Merge: 6664b77 995d3b8
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 26 12:50:03 2015 +0200

    Merge pull request #1028 from prometheus/lint-fixes
    
    Fix most golint warnings.

commit 995d3b831d2ed57454c8dddce370e270dd035a74
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 24 15:07:27 2015 +0200

    Fix most golint warnings.
    
    This is with `golint -min_confidence=0.5`.
    
    I left several lint warnings untouched because they were either
    incorrect or I felt it was better not to change them at the moment.

commit 963ad82dcb95fe94cd24edc5d190590202cfbc06
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 26 02:04:01 2015 +0200

    Fix "go vet" errors.
    
    I ignored all errors of the type "composite literal uses unkeyed
    fields". Most of them are wrong because of
    https://github.com/golang/go/issues/9171.

commit 6664b77f363f2d77a552733cb2d1bd367051189f
Merge: 077a753 01834fa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 25 17:47:55 2015 +0200

    Merge pull request #1021 from prometheus/appenders
    
    move metric modifications into SampleAppenders

commit 077a753e6b1ad87928a2d89e9c646f01ee96e40c
Merge: a2d117c fb585e4
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 25 16:11:07 2015 +0200

    Merge pull request #1006 from prometheus/true-values
    
    promql: Remove interpolation of vector values.

commit 01834fa528abbe380a89141ba31cfca90f1da4c4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 21 23:34:51 2015 +0200

    Move metric modifications into SampleAppenders

commit a2d117c677d1aa2b58f44ec8332f48c97dd0e7cf
Merge: 3394fb8 d6b8da8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 25 13:55:56 2015 +0200

    Merge pull request #1025 from prometheus/model
    
    Migrate promql to common/model

commit d6b8da8d433dee6712a10eaaca6f6a453e67e230
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 24 18:04:41 2015 +0200

    Switch promql types to common/model

commit e0615953527b4c4481bd635455ca1524752beffd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 24 18:04:26 2015 +0200

    Move COWMetric into storage/metric package

commit ad8e8f9f245d87f0e58b0d1fc2124f62310df7a0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 24 18:26:17 2015 +0200

    Upgrade common vendoring

commit 3394fb874561e74737facba2e5944c9331f0fd8c
Merge: d6d88f8 a09d896
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 25 00:19:49 2015 +0200

    Merge pull request #1026 from prometheus/format
    
    Do a make format run

commit a09d896cbfa5685764076af345747bc1f871cccb
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Mon Aug 24 18:32:48 2015 +0100

    Do a make format run

commit d6d88f89504f2f871871a114d1126d5b25082534
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 24 19:19:21 2015 +0200

    Add missing license headers

commit fb585e4591355ccc3471a70270e1ae96b41bf2e9
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Aug 18 17:06:22 2015 +0100

    promql: Remove interpolation of vector values.
    
    The current behaviour produces values that are not
    from rules or scrapes. So if for example I have
    a boolean 0/1 it can be returned as 0.2344589. This
    prevents a number of advanced use cases, introduces
    race conditions and can produce misleading graphs.

commit 9cf123d2f0ddc035de2daf1ad32c56e1e39f78dc
Merge: 25a8bd5 fdf0d06
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Aug 24 17:02:00 2015 +0100

    Merge pull request #1020 from prometheus/alert-templates-type
    
    Cast value to float, as that's what the console templates expect.

commit fdf0d0642ef0c70999f0bf5d26312318874cefb6
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Aug 21 16:45:56 2015 +0100

    Cast value to float, as that's what the console templates expect.

commit 25a8bd50a5ae76e2f59acb733a39175a5be13127
Merge: 8769a75 d36a7f4
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 24 17:14:56 2015 +0200

    Merge pull request #1024 from prometheus/fix-updatetargets-busyloop
    
    Fix busylooping in case of no target providers.

commit d36a7f4e6ff7687f02b6ff0d0de4aae0685409b9
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 24 16:42:28 2015 +0200

    Fix busylooping in case of no target providers.
    
    merge() closes the channel that handleUpdates() reads from when there
    are zero configured target providers in the configuration. In that case,
    the for-select loop in handleUpdates() entered a busy loop. It should
    exit when the upstream channel is closed.

commit 8769a7518365ec4f2cadf19a7a69cfabd0febdda
Merge: 3a0145c 1535ef1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 24 12:59:19 2015 +0200

    Merge pull request #1023 from prometheus/model
    
    More type cleanup

commit 1535ef1457562f047442a55a9a7a49dc491f40c3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Aug 22 14:52:35 2015 +0200

    Replace metric.SamplePair with model.SamplePair

commit c9d396f47679eaeeb4a8aa22e7c12667402f7b76
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Aug 22 13:32:13 2015 +0200

    Replace metric.LabelPair with model.LabelPair

commit 3a0145c09e0f6adbb080027cf7f93eac9c74d926
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Aug 22 09:47:57 2015 +0200

    Reenable blocked appending tests

commit 438e232c9b4fba210b803cdb7eddfe82e5e3aee3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Aug 22 09:42:45 2015 +0200

    Fix grouping of import blocks

commit 6d0f58dcf3092dfb5a052ec212ac0dc999df963e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 21 23:01:08 2015 +0200

    sanitize scrape health recording code

commit 1a7f7013598ca0e727b03f238bd2ce144c536238
Merge: a7c248e 25bf5fd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 21 18:07:32 2015 +0200

    Merge pull request #1018 from prometheus/fabxc/model
    
    Switch to common/{model,expfmt}

commit 25bf5fdaf57748c8522f718480396d0a01f0cc3a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 21 17:44:24 2015 +0200

    Timeout sample appends

commit 47aa0d536cb4736427862fc15569188e1a66f1de
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 21 13:16:50 2015 +0200

    Use common/expfmt in federation

commit 11a577fcd054066f1e4ab3da6f2d8b38132d97b6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 20 19:02:29 2015 +0200

    Switch to common/expfmt for extraction

commit f237b0e2daca8c6cdbf90a46d3cd3fd54c587d3b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 20 17:51:40 2015 +0200

    Vendor common/expfmt package

commit 306e8468a0e9294d301711c187e215a7ea7b1fc8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 20 17:18:46 2015 +0200

    Switch from client_golang/model to common/model

commit 7a6d12a44ca9f4c621a29160954dc7e51946b832
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 20 17:18:26 2015 +0200

    Vendor common/model package

commit a7c248e3b1c1dfcb624c08b25eb3e60e29b065b0
Merge: 725a507 274e9d6
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Aug 21 13:15:06 2015 +0200

    Merge pull request #1017 from prometheus/crash-on-web-error
    
    Exit when web server encounters a startup error

commit 725a50720694635d1956d17c4a76ae0112035568
Merge: ac0be60 6cb519f
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Aug 21 09:36:18 2015 +0100

    Merge pull request #1019 from mrwacky42/add-consul-service-id
    
    Add Consul ServiceID to the discovery meta labels.

commit 6cb519fe8247343fb991a1bd629300d1ff29161f
Author: Sharif Nassar <snassar@bottlenose.com>
Date:   Thu Aug 20 10:35:38 2015 -0700

    Add Consul ServiceID to the discovery meta labels.

commit 274e9d6955aba7f7dc520d9452b1e903f1d80f12
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Aug 20 18:23:57 2015 +0200

    Exit when web server encounters a startup error

commit ac0be60bb91a52981c46126d56ba8ac8168a80af
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 20 13:03:56 2015 +0200

    Add license headers

commit 296f551418b782503fdec1953dc52dc3daaaa1c1
Merge: 6a713ee e6a6747
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Aug 19 22:10:49 2015 +0100

    Merge pull request #1014 from prometheus/scalar-rules
    
    rules: Allow recorded rules expressions to be scalars.

commit e6a67476c299b904797d0d2534df112d06aa454b
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Aug 19 21:09:00 2015 +0100

    rules: Allow recorded rules expressions to be scalars.
    
    This is useful if you want to build up a constant metric,
    such as a set of alert thresholds that vary by label value.

commit 6a713eedca6f6b2414db6a9c84ca2345aca3511b
Merge: b615efb cdf38ab
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 19 17:21:11 2015 +0200

    Merge pull request #1012 from laushinka/master
    
    Log runtime errors during query evaluation instead of panicking.

commit cdf38ab93ae6d243f1f109c189f9ba24d8dceccc
Author: Laurie Malau <laurie.malau@gmail.com>
Date:   Wed Aug 19 15:28:53 2015 +0200

    Log runtime errors during query evaluation instead of panicking.

commit b615efbf2132a57588e9a99dea97e3d497453b52
Merge: 2b0c153 863bbd2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 19 16:31:38 2015 +0200

    Merge pull request #1011 from prometheus/fabxc/travis
    
    simplify travis

commit 863bbd2be47eb1d2dbb2fb8f969436f664883f76
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 19 16:08:55 2015 +0200

    simplify travis

commit 2b0c153288fae8ed8fac6d816dee78393e871f5a
Merge: 832ae14 27ed874
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 18 16:01:36 2015 +0200

    Merge pull request #998 from prometheus/label-replace
    
    Implement label_replace().

commit 832ae147e00aed5d05b749e926fc8aa717631471
Merge: 0f5022c e880073
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 18 14:59:07 2015 +0200

    Merge pull request #1000 from prometheus/remove-silencing-link
    
    Remove broken alert silencing links.

commit e88007306cb58a877acda3016d31e4cba88b1c97
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 18 14:48:57 2015 +0200

    Remove broken alert silencing links.
    
    Let's remove the silencing links until we actually have support for that.
    A silencing link shouldn't only redirect to Alertmanager, but also open a
    silencing dialog for the respective alert name or active alert element.

commit 0f5022c09148b020381c9acb529958204df0203b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 18 14:37:28 2015 +0200

    Add missing Kubernetes doc strings

commit 27ed87435823dcadd8e49bdd3f8f7a3bc0ef0c34
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 17 23:25:53 2015 +0200

    Implement label_replace()
    
    Implements part of https://github.com/prometheus/prometheus/issues/959.

commit 205d3914093dd93b6722f8544db7abc05eefae93
Merge: b4adf27 f592740
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 18 12:01:53 2015 +0200

    Merge pull request #999 from prometheus/fabxc/spinfix
    
    Only exit static target provider on done

commit f592740bac72582f3372b01fb8b5243bcc51cd69
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 18 11:51:53 2015 +0200

    Only exit static target provider on done

commit b4adf2723d7a11023df2f9c2ca5bb40d09404a23
Merge: d0a9096 48e461f
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 18 01:09:24 2015 +0200

    Merge pull request #994 from robbiet480/consul-datacenter-name
    
    Pass through current agent Consul datacenter name

commit 48e461f7db5f46821db0944160b24038f53e7204
Author: Robbie Trencheny <me@robbiet.us>
Date:   Sun Aug 16 15:02:02 2015 -0700

    Pass through current agent Consul datacenter name
    
    Instead of only filling __meta_consul_dc when datacenter is set in
    consul_sd_config this change fills the label based on what the agent
    reports it's current data center is, if datacenter isn't manually set,
    otherwise it uses whatever datacenter was set to.

commit d0a90964c1c4a29e84e0f610b63ad73f2ff1f05a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 17 19:51:12 2015 +0200

    Fix license header

commit eabbdc6603ed946a0f4f3afb8901e64b22d8446c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 17 19:49:10 2015 +0200

    Add missing license headers

commit 47a96bff1a1945da3f7f61895340e6841288361a
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 17 15:05:06 2015 +0200

    Update constant names in comments.

commit f65ef1ed10be016b4860ad547441aef7359bc035
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 17 14:26:53 2015 +0200

    Fix wording in shutdown warning.

commit 79eb208d0f22d8f8a6590531410588f735ab5ef0
Merge: 6096773 e1d5eb5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 17 12:17:37 2015 +0200

    Merge pull request #995 from prometheus/relabel-replace
    
    retrieval: Don't include unmatched source of regex in replacement.

commit e1d5eb52f2524d10e370fc5c65528ec4fc484326
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Aug 16 23:39:39 2015 +0100

    retrieval: Don't include unmatched source of regex in replacement.
    
    ReplaceAllString only replaces the matching part of the regex,
    the unmatched bits around it are left in place. This is not the
    expected or desired behaviour as the replacement string should
    be everything.
    
    This may break users dependant on this behaviour, but
    what they're doing is still possible.

commit 60967736fa4d918fd430c95a6d8dd62a226aaca8
Merge: 4ee8801 139f27b
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Sun Aug 16 14:08:29 2015 +0100

    Merge pull request #993 from prometheus/fabxc/filesd_interval
    
    Increase default retry interval for file SD

commit 139f27bf8a86ca7e80212befceffec90f137144b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Aug 16 14:56:26 2015 +0200

    Increase default retry interval for file SD
    
    The automatic refresh is a safety mechanism in case
    file watches fail. As they seem to be working well the
    interval can be increased.

commit 4ee88017f300369b5c2619256fe7e7c1d1e89db2
Merge: d8f5da9 0ec7144
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Aug 16 12:00:02 2015 +0200

    Merge pull request #992 from prometheus/term-docs
    
    Storage: Tell users how to avoid crash recovery.

commit 0ec71442cdb6a79a48dad52503fc2143ddcf4682
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Aug 16 10:42:31 2015 +0100

    Storage: Tell users how to avoid crash recovery.
    
    If users see the crash recovery error, the chances are
    they aren't shutting down Prometheus correctly. Telling
    them how to do so will help them debug and fix the problem.

commit d8f5da91523090940a643dada39e5c314fea62ef
Merge: 9b9ff66 3c6dd16
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 17:46:45 2015 +0200

    Merge pull request #990 from prometheus/fabxc/allconsul
    
    Scrape all services on empty services list.

commit 3c6dd161d738bc75a4e32b44282fe576a5085e9c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 17:39:41 2015 +0200

    Scrape all services on empty services list.

commit 9b9ff6621283b894acf46907f35c2000311b14c9
Merge: b1e60e5 f269943
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 16:38:16 2015 +0200

    Merge pull request #977 from prometheus/fabxc/target-dedup
    
    Improve target discovery pipeline

commit b1e60e58eca6d93cdc0811b31647b254c55d72ed
Merge: 9e9f88b 18c0f34
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 16:35:17 2015 +0200

    Merge pull request #988 from prometheus/fabxc/fixreload
    
    Fix loop-reloading on shutdown

commit 18c0f347a39d8c82a7517b3eae23e62c4b7534cc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 16:29:34 2015 +0200

    Fix loop-reloading on shutdown

commit 9e9f88b5ce4d02dbad7d7465a5cc02b1ff62f227
Merge: 15b4115 8fa9ec2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 15:38:27 2015 +0200

    Merge pull request #987 from prometheus/fabxc/marathonfix
    
    Add application labels as meta labels

commit 8fa9ec278be58bf1f9ae7a5128f85a248d9d6361
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 14:24:31 2015 +0200

    Add application labels as meta labels
    
    Removes built-in conditional scraping based on application's
    'prometheus' label.

commit f269943950874e3cfe52dc13a74fe50361575147
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 13:04:23 2015 +0200

    Adjust Kubernetes SD to pipeline changes

commit 4e84b86510e3adf2b1ae2e184aba593afb9e5ad9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 10 16:44:32 2015 +0200

    Improve target discovery pipeline
    
    Replace the TargetProvider Stop method with done channels
    that ensure properly broadcasted shutdown of the whole pipeline.

commit 15b4115a25862337cba94b65770bb17b7303c54a
Merge: 7f9a8de 625374e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 14 12:07:15 2015 +0200

    Merge pull request #986 from prometheus/fabxc/tpdoc
    
    Clarify docs of TargetProvider

commit 625374ee363d096b6f45968e9065ac258ac1e31a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 13 20:38:25 2015 +0200

    Clarify docs of TargetProvider

commit 7f9a8ded2b2cba3a769c2f611ca5ce9e81344c92
Merge: b964da4 f7e3722
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 13 17:58:17 2015 +0200

    Merge pull request #984 from prometheus/fabxc/dnssd
    
    Rename __meta_dns_srv_name to __meta_dns_name

commit f7e3722388b8986bd928382c6fa26f63a8a18c30
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 13 15:24:58 2015 +0200

    Rename __meta_dns_srv_name to __meta_dns_name
    
    This is change potentially breaking relabeling rules.

commit b964da4b75a589a6ded82becf9c456d1ac79b25d
Merge: 24e9172 923f811
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 13 15:08:32 2015 +0200

    Merge pull request #905 from fabric8io/kubernetes-discovery
    
    Kubernetes discovery

commit 24e91720ad9050a13e7f8056d99fa78dfb48d9d1
Merge: 4070232 4e70a0a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 13 14:36:59 2015 +0200

    Merge pull request #980 from prometheus/map-labels
    
    Retrieval: Add relabel action to map labels names with a regex.

commit 4e70a0a14e33ceb40c95bac15ca42458b341ea75
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Wed Aug 12 10:21:20 2015 +0100

    Retrieval: Add relabel action to map label names with a regex.
    
    The intended use case is where a user has tags/labels coming
    from metadata in Kubernetes or EC2, and wants to make
    some subset of them into target labels.

commit 4070232802fa7beeceae5a89d19df263a31582d3
Merge: 697347f 43449b0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 13 11:46:45 2015 +0200

    Merge pull request #983 from prometheus/tmp-hash
    
    config: Update tests/examples to use __tmp_

commit 43449b0581bbc87c88eb9676f86371f3dde1879b
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Thu Aug 13 10:39:21 2015 +0100

    config: Update tests/examples to use __tmp_

commit 923f8111d4ac6e6324d80d516d43e8d70f5715b0
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Sat Jul 18 22:23:58 2015 +0100

    Initial Kubernetes discovery
    
    Fixes #904

commit 697347ffafe96bdfcea3576cf5c67e26022453a1
Merge: b5861b0 caaa3de
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Aug 13 10:24:04 2015 +0100

    Merge pull request #982 from miekg/hashmod-md5
    
    Make HashMod use md5 instead of fnv

commit caaa3de4ff62a117ba286cd1ec19b54a6c84f393
Author: Miek Gieben <miek@improbable.io>
Date:   Wed Aug 12 15:44:42 2015 +0100

    Make HashMod use MD5 instead of FNV
    
    MD5 will will distribute the inputs more uniformly over the output
    space than FNV; leading to more evenly balanced load when using HashMod.

commit b5861b02aca916543df66d3b6436a30907249a12
Merge: a860582 eb82a4b
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Tue Aug 11 23:55:08 2015 +0100

    Merge pull request #978 from prometheus/name-list
    
    web: Support multiple names for console graphs.

commit eb82a4b9485ca8eabe42e04c6f5c2a3c7152ead2
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Aug 11 20:03:20 2015 +0100

    web: Support multiple names for console graphs.

commit a8605825a0af7d97c232a9135ba478954d0666e9
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Aug 11 20:02:03 2015 +0100

    Rollback, meant to send a PR

commit 1ad449d2335850080ddfcab92e55f591e776371a
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Tue Aug 11 19:59:00 2015 +0100

    web: Support multiple names for console graphs.

commit 3c941b9e813e5dec38df3d0c9b0c5356ca775099
Merge: cdcfada fa929a8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 11 18:06:30 2015 +0200

    Merge pull request #976 from JanBerktold/web_reload
    
    Allow reloading via webhandler

commit fa929a8345123b59f68dcad6a733edaeb3f567f6
Author: Jan Berktold <janberktold@aol.com>
Date:   Tue Aug 11 12:26:41 2015 +0200

    Change /reload to /-/reload & and fix channel type

commit 2bf7048dbb1a60e36b0e41fc3a7ad58ecb3a8c4e
Author: Jan Berktold <janberktold@aol.com>
Date:   Tue Aug 11 09:08:17 2015 +0200

    Add reload handler to web

commit cdcfada2ac3a37f82e1b071400fa7c7ac181b97a
Merge: 5e9ece4 73f1cc8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 10 19:43:42 2015 +0200

    Merge pull request #965 from prometheus/fabxc/relpath
    
    Resolve relative paths on configuration loading

commit 5e9ece46d5e1f54f8af035b502a85a5c1474499b
Merge: c672973 690b5f1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 10 15:13:47 2015 +0200

    Merge pull request #975 from prometheus/fabxc/single-query
    
    Remove multi-statement queries

commit 690b5f1575e2f592d96d9018a95067c5da419b6a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 10 14:21:24 2015 +0200

    Remove multi-statement queries
    
    This commit removes the possibility to have multi-statement queries
    which had no full support anyway. This makes the caller responsible
    for multi-statement semantics.
    Multiple tests are no longer timing-dependent.

commit 73f1cc807d2aace53e804dab7e6122da0ad40587
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 5 18:30:37 2015 +0200

    Check token and cert file existence in promtool

commit c67297378898ccd3934648bc4a63842bfe5b4ef9
Merge: 54202bc 0138d37
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 10 11:31:33 2015 +0200

    Merge pull request #970 from prometheus/fabxc/target-src
    
    Improve unique target group sources.

commit 0138d37458567f63b20436d6bf3ac13e9ce4f8b7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Aug 7 13:18:19 2015 +0200

    Improve unique target group sources.
    
    Include position of same SD mechanisms within the same scrape configuration.
    Move unique prefixing out of SD implementations and target manager into
    its own interface.

commit 54202bc5a8326fcb04f4eafdf53b610a46053d5d
Merge: 747e770 4d0f974
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 10 01:43:37 2015 +0200

    Merge pull request #902 from xperimental/feature/marathon-discovery
    
    retrieval/discovery: Service discovery using marathon API

commit 4d0f974c420c6c2b961e2c92426a3362e019b559
Author: Robert Jacob <robert.jacob@holidaycheck.com>
Date:   Thu Jul 16 14:02:07 2015 +0200

    Add service discovery using Marathon API.

commit 747e7709c6a43075c80f175be20152deda1168db
Merge: 9fa7eeb 5a21b33
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 10 00:13:59 2015 +0200

    Merge pull request #974 from prometheus/fabxc/authors
    
    Update Authors

commit 5a21b334d888abc523c028708738cf160237ee9a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 10 00:11:12 2015 +0200

    Update Authors

commit 9fa7eeb0957b8a8b94e4a529179b2005f2143e19
Merge: 113ac96 20ad403
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Aug 9 23:55:28 2015 +0200

    Merge pull request #973 from laushinka/master
    
    Don't warn about equal timestamps during append.

commit 20ad403587f425fb509f39dcf45445afb0908f6b
Author: Laurie Malau <laurie.malau@gmail.com>
Date:   Sun Aug 9 22:43:31 2015 +0200

    Don't warn/increment metric upon equal timestamps during append.
    
    Perhaps it would be even better to still warn in case the sample value has
    changed but the timestamps are equal, but we don't have efficient access
    to the last value.

commit 113ac96a71a0154e3d5ef75a2edc813af1c2e4ac
Merge: e2a63d9 7810448
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Aug 8 15:11:52 2015 +0200

    Merge pull request #943 from wrouesnel/scrape_config_httpproxy
    
    [RFC] Add http_proxy parameter to allow specifying per-job HTTP proxy servers

commit 7810448dbe204fa968c1b336564fc0df3ce7500e
Author: Will Rouesnel <w.rouesnel@gmail.com>
Date:   Fri Aug 7 02:12:55 2015 +1000

    Add proxy_url parameter to allow specifying per-job HTTP proxy servers
    
    Allow scrape_configs to have an optional proxy_url option which specifies
    a proxy to be used for all connections to hosts in that config.
    
    Internally this modifies the various client functions to take a *url.URL pointer
    which currently must point to an HTTP proxy (but has been left open-ended to
    allow the url format to be extended to support others, such as maybe SOCKS if
    needed).

commit e2a63d900daf92d96c60fa9ebfdd8522f7825ad7
Merge: a2d3826 992c47b
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Aug 7 16:43:18 2015 +0100

    Merge pull request #971 from prometheus/prom-console
    
    Add console template for Prometheus itself

commit 992c47b2c7580cb2767a357bd3fbb244616b5c28
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Fri Aug 7 16:09:16 2015 +0100

    Add console template for Prometheus itself

commit a2d382627a567d043387dcd6facaaa97c1c52b93
Merge: e324910 da4c50a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Aug 6 14:15:01 2015 +0200

    Merge pull request #967 from fabric8io/relabelable-scheme
    
    Make scheme relabelable via discovery

commit da4c50a6cf3e33dd84f8f9751aec685ccacce4ae
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Thu Aug 6 12:00:33 2015 +0100

    Make scheme relabelable via discovery

commit 7a67472fc168e49bd589b7d7292d6d28f9e10c94
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Aug 5 18:04:34 2015 +0200

    Resolve relative paths on configuration loading
    
    This moves the concern of resolving the files relative to the config
    file into the configuration loading itself.
    It also fixes #921 which did not load the cert and token files relatively.

commit e324910ff2709dc62cf13e11ea1f2469ee4e26ed
Merge: abb26fb d6a80c2
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 5 16:40:51 2015 +0200

    Merge pull request #936 from prometheus/predict
    
    promql: Add support for predict(my_timeseries[1h], 2h)

commit d6a80c2b76b606f91d9dcada8a22129336d62323
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Tue Jul 28 12:30:57 2015 +0100

    promql: Add support for predict_linear(my_timeseries[1h], 7200)
    
    This will give a prediction for the value of my_timeseries in 2 hours,
    based on the last hour of data.

commit abb26fb72d6d36b4eb1119107c9b31d5067c2b86
Merge: e46e93d 52cf6b3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 4 18:23:39 2015 +0200

    Merge pull request #921 from jimmidyson/target-auth-options
    
    Configuration options for bearer tokens, client certs & CA certs

commit 52cf6b3e6ea08e5013e6bef42b0f59e8124e0b7f
Author: Jimmi Dyson <jimmidyson@gmail.com>
Date:   Wed Jul 22 16:48:22 2015 +0100

    Configuration options for bearer tokens, client certs & CA certs
    
    Fixes #918, fixes #917

commit e46e93dcba0e651d786ebefb7be16998c4c802dc
Merge: c322422 579fdf6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 4 16:44:34 2015 +0200

    Merge pull request #962 from prometheus/fabxc/un-vec
    
    Implement unary expression for vector types.

commit 579fdf65e20d93b8fbd95531bec0cef8b106da5c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Aug 4 14:57:34 2015 +0200

    Implement unary expression for vector types.
    
    Closes #956

commit c322422412447a6f190dd013aa2b78a70e5a69e3
Merge: 2983a9a adf1097
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 3 16:48:20 2015 +0200

    Merge pull request #954 from prometheus/fabxc/fuzz-fix
    
    Add missing check for nil expression

commit adf109795c175251fcc7a32667378e0246da1862
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 3 12:53:31 2015 +0200

    forbid unexpected (runtime) errors in parse tests

commit c20e25f71814924f2820c42a6333e78e9765bdef
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Aug 3 12:28:40 2015 +0200

    Add missing check for nil expression

commit 2983a9ad76dff2ebbb85a032db444f44a7392a35
Merge: ba24948 a0f0b82
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Aug 3 11:01:14 2015 +0100

    Merge pull request #952 from prometheus/promql-test
    
    promql: Test errors aren't always ParseErr

commit a0f0b823485b1475d26d617f94791a2a94e6f5cc
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Aug 2 23:26:21 2015 +0100

    promql: Test errors aren't always ParseErr

commit ba24948ec7ce024a6979c4ff59c60e82c6b012c5
Merge: de848f7 11375a5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Aug 2 22:47:25 2015 +0200

    Merge pull request #950 from prometheus/snmp-consoles
    
    Add SNMP consoles

commit de848f7e1afcd09511baca757b303dc2bc8039cb
Merge: a5483a4 5279d50
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Aug 2 17:23:35 2015 +0200

    Merge pull request #949 from prometheus/fabxc/pql-rt
    
    Handle parser runtime panics gracefully

commit 11375a5be94d6d53003844b415dc6664e6c91927
Author: Brian Brazil <brian.brazil@robustperception.io>
Date:   Sun Aug 2 15:41:15 2015 +0100

    Add SNMP consoles

commit 5279d50d92c7259b1a20e6978f871827bbdfcbe1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Aug 2 13:37:42 2015 +0200

    Handle parser runtime panics gracefully

commit a5483a43d21e7466682ae6363f96c58d1e1afb55
Merge: adf7f16 1fa0b0f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 31 18:35:26 2015 +0200

    Merge pull request #948 from Marmelatze/consul_port
    
    consul port label

commit 1fa0b0f253ef5dba3315bceddf30040896579757
Author: Florian Pfitzer <pfitzer@w3p.cc>
Date:   Fri Jul 31 16:18:25 2015 +0000

    fix consul port label

commit adf7f16d1ac3fda6266d327cfe3b361142bd416a
Merge: 9be9b98 d8875d1
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Jul 31 11:01:45 2015 +0100

    Merge pull request #934 from prometheus/query-params
    
    Retrieval: Make it possible to relabel query params

commit d8875d17d888cb6c63f1cd15174599acfe3d8fc9
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Sun Jul 5 20:25:45 2015 +0100

    Retrieval: Make it possible to relabel query params
    
    This only allows relabelling the first value
    for a given parameter, this should be sufficient in practice.

commit 9be9b98dcc935cf47e5183961ef6d01a4111589e
Merge: 6e7d743 0441518
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jul 30 22:38:12 2015 +0200

    Merge pull request #947 from keatonrow/add-anchors-to-status-h2s
    
    Add IDs to H2 tags to allow anchored linking

commit 0441518a71983e51354b03add92649566746b801
Author: Dan Williams <me@deedubs.com>
Date:   Thu Jul 30 15:39:05 2015 -0400

    Add IDs to H2 tags to allow anchored linking
    
    Allow sharing links directly to areas of the status page f.e. http://prometheus.internal/#config/

commit 6e7d743cd420dd0584c4024f3d2530706b771548
Merge: 17eebbc 9ab340e
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Jul 30 16:01:47 2015 +0200

    Merge pull request #946 from prometheus/add-sd-dns-a
    
    Add support for A record based DNS SD

commit 9ab340e95e644044340693a31593439226842521
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Jul 30 10:56:48 2015 +0200

    Add support for A record based DNS SD
    
    If using A records, the user needs to specify "port" and set "type" to
    "A".

commit 17eebbc3b4dc534d87120ba6685f3f44212fb644
Merge: 0d393de 4e4b468
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jul 29 02:21:24 2015 +0200

    Merge pull request #942 from prometheus/fix-unicode-digits
    
    Fix lexer bug treating non-Latin Unicode digits as digits.

commit 4e4b468fba981d40bac03a9d58c15ae29b2a4f3f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 29 02:11:13 2015 +0200

    Fix lexer bug treating non-Latin Unicode digits as digits.
    
    Fixes https://github.com/prometheus/prometheus/issues/939

commit 0d393de63be49f1d3930f4541d69f3d62b8a3c03
Merge: 64349aa 3a5c0f3
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jul 28 18:20:28 2015 +0200

    Merge pull request #938 from robey/master
    
    create a unix-style tarball with a nested folder

commit 3a5c0f30c171b7cbb3e6a3c4074fe9cc1fb5f566
Author: Robey Pointer <robeypointer@gmail.com>
Date:   Tue Jul 28 08:52:41 2015 -0700

    create a unix-style tarball with a nested folder

commit 64349aade284846cb194be184b1b180fca629a7c
Merge: 05225a5 89bfe61
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 27 17:53:33 2015 +0200

    Merge pull request #933 from prometheus/cut-0.15.1
    
    Cut Prometheus version 0.15.1.

commit 89bfe616d0e30fd790e7823a61ab718758030129
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 27 17:11:35 2015 +0200

    Cut Prometheus version 0.15.1.

commit 05225a538ae850860194958efd6633f1da015202
Merge: beae7b6 33b7895
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 27 17:50:46 2015 +0200

    Merge pull request #932 from prometheus/update-deps
    
    Update vendored dependencies.

commit 33b78954810360eba88aaf0c11f873c03ed399b5
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 27 17:48:37 2015 +0200

    Update vendored dependencies.

commit beae7b6afb42351685189ce94c95732b176e2102
Merge: a48ce1e 5a58e87
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 27 11:45:52 2015 +0200

    Merge pull request #929 from prometheus/override-arch
    
    Allow overriding GOARCH and GOOS in Makefile.INCLUDE.

commit 5a58e876c335c005064fe57eb6a15b5b09bf7c60
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 27 11:38:30 2015 +0200

    Allow overriding GOARCH and GOOS in Makefile.INCLUDE.
    
    This allows building binaries for different target architectures and
    OSes.

commit a48ce1edb7a44696a2a3862f55e14341194cec33
Merge: a59b7ac 517badc
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Jul 25 01:31:54 2015 +0200

    Merge pull request #927 from prometheus/fix-matchers
    
    Only do regex lookups when there was no equality match.

commit 517badc21d12b62a7e8d1b4d54d855205afd8878
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jul 23 22:46:13 2015 +0200

    Only do regex lookups when there was no equality match.
    
    For the label matching index-based preselection phase, don't do an OR
    between equality and non-equality matchers. Execute only one of the two
    (with equality matchers preferred when present).
    
    Fixes https://github.com/prometheus/prometheus/issues/924

commit a59b7ac7f863e2fdb1b05596f94a8889abeeb815
Merge: 7cd82c3 b54315c
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Jul 22 19:18:12 2015 +0200

    Merge pull request #913 from prometheus/beorn7/release
    
    Cut release 0.15.0

commit b54315c30c9f63194c9fa72501dfc48113710121
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Jul 21 18:49:36 2015 +0200

    Cut release 0.15.0
    
    No changes to 0.15.0rc3.
    
    Only consolidated the CHANGELOG.md.

commit 7cd82c3f3241feb958a0ba95683ece6ec32d0c48
Merge: 6ee7eb7 9286fe5
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jul 22 19:04:05 2015 +0200

    Merge pull request #922 from brian-brazil/ne-mountpoint
    
    Update node disk console for new filesystem labels.

commit 6ee7eb79aeca1d8e2364e5bd2a48c8df85bdda84
Merge: 31fdb85 645f677
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Jul 22 18:52:15 2015 +0200

    Merge pull request #920 from prometheus/beorn7/sd
    
    Add Consul ServicePort and ServiceAddress to the meta labels.

commit 9286fe55dd9dd19325a14250402455f1655f948b
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Jul 22 17:20:14 2015 +0100

    Update node disk console for new filesystem labels.

commit 645f6772e5f0670760540eb01ea11d4978269556
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Jul 22 16:09:52 2015 +0200

    Add Consul Address, ServicePort, and ServiceAddress to the meta labels.
    
    In setups where the ServiceAddress is the relevant address for
    scraping, users can relabel the `__address__` label to ServiceAddress
    + ":" + ServicePort.
    
    This needs to be documented, of course. Will do once this is LGTM'd.

commit 31fdb85d2cbbcdb3f09ee885ae54d5a94befc2e4
Merge: 276dbf8 9d98910
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Jul 22 14:48:32 2015 +0200

    Merge pull request #919 from prometheus/revert-consul-service-address
    
    Revert "Use Consul ServiceAddress instead of Address when set"

commit 276dbf8a5d2444337263e70373f46cfde7fe5ffe
Merge: d437fce c5c7f92
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Jul 22 14:39:43 2015 +0200

    Merge pull request #915 from prometheus/fix-pprof
    
    Fix /debug/pprof endpoint with new web router.

commit 9d98910fca035a8573b43c0654248dffafd16170
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 22 13:04:08 2015 +0200

    Revert "Use Consul ServiceAddress instead of Address when set"
    
    This reverts commit 0ac7e7217e28dd165787b80219f6085c8d97f814.
    
    See discussion on https://github.com/prometheus/prometheus/pull/812 for
    reasoning. While fixing one use case, it breaks others, and we need a
    more generic way of handling this.

commit c5c7f9296016deedc5fef69858973040d4b10c47
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 22 00:27:55 2015 +0200

    Fix /debug/pprof endpoint with new web router.
    
    This got broken in
    https://github.com/prometheus/prometheus/commit/78047326b487fcfccb25fbaaa2fb5c13397ad97b
    since it stopped using the DefaultServeMux.
    
    This approach will defer pprof requests to the DefaultServeMux, which
    may or may not have pprof enabled (in Prometheus, it gets it included in
    main.go). An alternative approach would be to duplicate the four lines in
    https://golang.org/src/net/http/pprof/pprof.go#L62. When choosing that
    approach though, we would not automatically gain any new endpoints added
    by net/http/pprof or other /debug endpoints in the future.

commit d437fce2998067613dd461ba8f952fe64ef7cfdb
Merge: 5a3712f 54be7ca
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jul 20 15:04:26 2015 +0200

    Merge pull request #906 from prometheus/beorn7/release
    
    Cut 0.15.0rc3

commit 54be7cabd777504b8652ddb8847523cc762bbf0e
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jul 20 14:04:40 2015 +0200

    Cut 0.15.0rc3

commit 5a3712fe1bf760c4c6ddb9a88b2c3b70b3e92bcd
Merge: b4aa96c 187fe4e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Jul 18 08:05:55 2015 +0200

    Merge pull request #903 from prometheus/fabxc/cfgnil
    
    Fix empty configuration file cases

commit 187fe4e3d31f0ecaa0d7a386940acb3dcbf4e005
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 17 19:58:34 2015 +0200

    Fix missing defaults for empty global config blocks

commit 2a53b107c18e97d6240e2e94ac63fae18e0c4277
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 17 16:12:33 2015 +0200

    Fix missing defaults in empty configurations

commit b4aa96c58a68022ab170749675b50e76f144be66
Merge: 0924e7c ceec110
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 17 00:23:59 2015 +0200

    Merge pull request #901 from gesellix/patch-1
    
    Update email address

commit ceec1105419fe2360510ac0147be79ea6efcb9fc
Author: Tobias Gesellchen <tobias@gesellix.de>
Date:   Fri Jul 17 00:17:29 2015 +0200

    Update email address
    
    ... since the old is not valid anymore (will refuse to accept mails).

commit 0924e7c830afbd3406ac1486f90efac9db0c5aa5
Merge: 742efb4 62b4e89
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 16 23:34:25 2015 +0200

    Merge pull request #900 from prometheus/fabxc/scalar
    
    Restore legacy API scalar format

commit 62b4e89b39957de6c863ec7ea479d8da454ff2d4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 16 19:27:56 2015 +0200

    Restore legacy API scalar format

commit 742efb453892d83a656b8c448c92f29ac690e7ce
Merge: c5d8730 b590c74
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jul 16 16:26:35 2015 +0200

    Merge pull request #898 from prometheus/beorn7/release
    
    Cut release 0.15.0rc2

commit b590c748cedf692329c5080138abb33e4c4eef48
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jul 16 16:23:43 2015 +0200

    Cut release 0.15.0rc2

commit c5d873015057c4a8c27f4ce263600f81964744b5
Merge: 82e2fd8 699946b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jul 16 15:55:48 2015 +0200

    Merge pull request #880 from prometheus/beorn7/fix
    
    Fix the storage corruption bug.

commit 699946bf326fb5c668b0801207b66e7a0d28b7e8
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Jul 7 01:10:14 2015 +0200

    Fix chunk desc loading.
    
    If all samples in consecutive chunks have the same timestamp, the way
    we used to load chunks will fail. With this change, the persist
    watermark is used to load the right amount of chunkDescs from disk.
    
    This bug is a possible reason for the rare storage corruption we have
    observed.

commit 4203849c92f56dcd5250a8244412adebe63aa7bf
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Jul 15 19:53:15 2015 +0200

    Test chunkDesc eviction and loading

commit 82e2fd856679f3d07883fc8665ccb50cedc42437
Merge: 0834bd0 37e12df
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jul 16 12:55:40 2015 +0200

    Merge pull request #889 from prometheus/monotonicity
    
    Ensure timestamp monotonicity within a series.

commit 37e12df9ff773174fdff91ca148ae081f58f1889
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jul 16 12:48:33 2015 +0200

    Improve TestAppendOutOfOrder

commit 502aa9ded553f2b59f55e26db08374c1cc1d25d8
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Jul 16 12:25:32 2015 +0200

    Use Has instead of Get for existence test.

commit ff08f0b6fe1c2c9010537bd3b9acf051744f91bb
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jul 13 21:12:27 2015 +0200

    storage: ensure timestamp monotonicity within series.
    
    Fixes https://github.com/prometheus/prometheus/issues/481
    
    While doing so, clean up and fix a few other things:
    
    - Fix `go vet` warnings (@fabxc to blame ;).
    
    - Fix a racey problem with unarchiving: Whenever we unarchive a
      series, we essentially want to do something with it. However, until
      we have done something with it, it appears like a series that is
      ready to be archived or even purged. So e.g. it would be ignored
      during checkpointing. With this fix, we always load the chunkDescs
      upon unarchiving. This is wasteful if we only want to add a new
      sample to an archived time series, but the (presumably more common)
      case where we access an archived time series in a query doesn't
      become more expensive.
    
    - The change above streamlined the getOrCreateSeries ond
      newMemorySeries flow. Also, the modTime is now always set correctly.
    
    - Fix the leveldb-backed implementation of KeyValueStore.Delete. It
      had the wrong behavior of still returning true, nil if a
      non-existing key has been passed in.

commit 0834bd03b5973a60f86c5cf10a1d44a32480c9a3
Merge: 1c25247 435fc72
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 14 14:50:26 2015 +0200

    Merge pull request #892 from prometheus/fabxc/cfgfix
    
    config: add overflow detection for serverset config

commit 435fc7234fe01ee53b19aa1baeef067964715163
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jul 14 02:46:00 2015 +0200

    config: add overflow detection for serverset config

commit 1c25247a75c2d8c687cbef40ca8842513fb9e87c
Merge: 87b9813 acbc2b8
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 13 12:58:13 2015 +0200

    Merge pull request #890 from prometheus/fix-float-conversions
    
    storage: Fix float->uint conversions on some compilers.

commit acbc2b8cb6e2144697c39d018600ee1cbe1133b0
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 13 11:19:11 2015 +0200

    storage: Fix float->uint conversions on some compilers.
    
    See https://github.com/prometheus/prometheus/issues/887, which will at
    least be partially fixed by this.
    
    From the spec https://golang.org/ref/spec#Conversions:
    
    "In all non-constant conversions involving floating-point or complex
    values, if the result type cannot represent the value the conversion
    succeeds but the result value is implementation-dependent."
    
    This ended up setting the converted values to 0 on Debian's Go 1.4.2
    compiler, at least on 32-bit Debians.

commit 87b9813be440341c2bc52f0221bc48ff21dc6c35
Merge: 8b53ffb 7b5a29f
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Fri Jul 10 10:38:30 2015 +0100

    Merge pull request #883 from brian-brazil/fix-menu
    
    web: Fix regression in .Path

commit 7b5a29fc8fdddd8d8469dd7f549f33ad414e4dfc
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Jul 8 15:14:57 2015 +0100

    web: Fix regression in .Path
    
    .Path is documented as removing /consoles/,
    recent changes added in a leading / which broke
    the provided console templates menu system.

commit 8b53ffb0bea31b658ecc7524a5fd76ae4b684941
Merge: b0efbf8 d53cc79
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 9 18:20:04 2015 -0600

    Merge pull request #885 from prometheus/fabxc/retrace
    
    retrieval: avoid race conditions

commit b0efbf8c98fe83387098d5ffcbb5886e03c9a358
Merge: a5093e0 9e59997
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 9 16:46:15 2015 -0600

    Merge pull request #886 from prometheus/fabxc/fixui
    
    web/js: fix display error for vectors in console

commit 9e599976c44054708e854fbd3cf3b3dc4c8afc41
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 10 00:43:43 2015 +0200

    web/js: fix display error for vectors in console

commit a5093e08a05124a5a44bef35a89b147c08f1fb23
Merge: 1d6d39a 6b3c7de
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jul 8 18:03:54 2015 -0600

    Merge pull request #882 from prometheus/export-buildinfo
    
    Export build information as metric.

commit d53cc7935d9935df9a008bb2e310c426a81d3b41
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 8 21:27:52 2015 +0200

    retrieval: avoid race conditions

commit 6b3c7de72765cc9fbb1efc9210b46c839f4afcd1
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jul 7 23:29:59 2015 -0600

    Export build information as metric.
    
    There is more build information that could be put into labels, but
    Version, Revision, and Branch seemed like the right level of detail to
    me.

commit 1d6d39a9ede692278332e9b8546a38e120a714e3
Merge: aea9061 2b025c0
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Jul 7 13:07:38 2015 -0700

    Merge pull request #881 from sdurrheimer/glibc
    
    New dockerfile using alpine-glibc base image and make

commit 2b025c0f4940630bc00482e43196dcba5e65d747
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Sat Jun 20 15:14:08 2015 +0200

    New dockerfile using alpine-glibc base image and make

commit aea906123d5517653c6d1429c7296733131849a6
Merge: 86474f3 b55a71a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jul 7 00:18:26 2015 +0200

    Merge pull request #879 from prometheus/beorn7/makefile
    
    Fix the race condition targets in the Makefile.

commit b55a71a30c1954538cd6cd372cd6a4a6d2c4f3ec
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jul 6 22:26:41 2015 +0200

    Fix the race condition targets in the Makefile.
    
    Remove race_condition_run as the original run target has been removed, too.
    
    Fix the race_condition_binary target.

commit 86474f3b0e63695ca88fc332101c763a039228b2
Merge: f515559 02e0683
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 6 18:35:14 2015 +0200

    Merge pull request #876 from prometheus/fabxc/authhide
    
    config: hide authentication credentials in String() output

commit 02e06839f2e11570e979611de7b79aa376964f0c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 6 14:25:20 2015 +0200

    config: hide authentication credentials in String() output

commit f515559a965c4fc3d313be9c227c4c38ed14d752
Merge: 92c2016 75ba840
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 6 13:46:10 2015 +0200

    Merge pull request #872 from prometheus/fabxc/vecfix
    
    promql: marshal sample pairs to JSON tuples.

commit 75ba840d882e8ccc630fa8d93d136295b9df1b55
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 6 10:24:50 2015 +0200

    web/js: adjust Javascript to new response format

commit 3d67d759350e22ba87ca7b4441dcd561182a0378
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jul 6 10:14:59 2015 +0200

    promql: implement JSON array format for scalar and string

commit 834cec44cfd0e4d88b12648eafc48afb9b96264b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 2 19:12:34 2015 +0200

    httputil: remove non-general helper functions

commit 77e898322142adfff29d039e22da44647b6ed3d9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 2 19:12:04 2015 +0200

    promql: add MarshalJSON method for SamplePair

commit 92c20168c4ff257bfe0e51e701a63ad531babb1a
Merge: d4f1402 7e615dc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 3 16:15:16 2015 +0200

    Merge pull request #874 from prometheus/fabxc/cfgfix
    
    resolve rule files relative to config file.

commit d4f14024440239f629cf7cdcfc49068b5bc13460
Merge: fd7b4ca 0f57b40
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jul 3 15:24:05 2015 +0200

    Merge pull request #873 from prometheus/global-url-tests
    
    Add tests for "globalURL" template function.

commit 7e615dcdf00566dae16bf981165c7c4ffabf35d3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 3 14:53:02 2015 +0200

    cmd/promtool: resolve rule files relative to config file

commit feb8a0350399d73415f91bb3a1cb40351af2973b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jul 3 14:48:22 2015 +0200

    rules: load rule files relative to a base dir

commit 0f57b403a97224a1cdf84d6a6f33cda31d6e355d
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jul 3 14:47:52 2015 +0200

    Add tests for "globalURL" template function.

commit fd7b4cae4323ab543db4e5527656cb5b2494623a
Merge: 8510076 fcff35b
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jul 3 14:39:39 2015 +0200

    Merge pull request #864 from prometheus/configurable-scheme
    
    Consolidate external reachability flags into one.

commit fcff35b43e83f908963f289a660b619673a4ff11
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 30 14:38:01 2015 +0200

    Consolidate external reachability flags into one.
    
    Besides fixing https://github.com/prometheus/prometheus/issues/805 by
    making the entire externally reachable server URL configurable, this
    adds tests for the "globalURL" template function and makes it easier to
    test other such functions in the future.
    
    This breaks the `web.Hostname` flag (and introduces `web.external-url`).
    This flag is likely only used by few users, so I hope that's
    justifiable.
    
    Fixes https://github.com/prometheus/prometheus/issues/805

commit 85100767f75a5866527150fae271e9a3c8ea66a8
Merge: 78f4da8 8f904d6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 2 14:21:35 2015 +0200

    Merge pull request #870 from prometheus/fabxc/ctype
    
    api/v1: fix response format tests

commit 8f904d6a544aeb1e3d7048b8c3bb69661c41b59d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jul 2 10:37:19 2015 +0200

    api/v1: fix response format tests

commit 78f4da8bf109e1d0baf889fb23605b9e40532bee
Merge: 6b3d79c 016e004
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jul 2 14:06:07 2015 +0200

    Merge pull request #859 from sdurrheimer/circleci
    
    Add circleci yaml for Dockerfile test build

commit 6b3d79cfce958800b63fdbd78c235047747c03bf
Merge: 293f380 b36fa7a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 1 22:49:32 2015 +0200

    Merge pull request #868 from prometheus/fabxc/ctype
    
    api/v1: fix Content-Type in response

commit b36fa7ad6127c6957181f3cb8fa7fad7237358f3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jul 1 22:47:25 2015 +0200

    api/v1: fix Content-Type in response

commit 293f3808fb6d23bf793551daa252e737f2111c05
Merge: 049a106 3d268d6
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Jul 1 14:06:23 2015 +0100

    Merge pull request #866 from brian-brazil/zk-no-node
    
    retrieval: Handle serverset node not existing.

commit 3d268d681e28df5c51484042481db2c40e09411d
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Jul 1 13:53:39 2015 +0100

    retrieval: Handle serverset node not existing.
    
    This stops configuration loading hanging if
    the Znode doesn't exist, and retries until the
    node does exist.

commit 049a10682162ab82de7c5fafa46e5a49886f6813
Merge: 1e61b5e f06cf66
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 30 18:53:07 2015 +0200

    Merge pull request #863 from prometheus/fabxc/alertstate
    
    Preserve alert state, cleanup rules/

commit f06cf664e1e213ef6a17e7bb49dfb2b8b764fb46
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 30 11:51:05 2015 +0200

    rules: cleanup alerting test

commit 9bd4f6d0177e2c3ed7da3ae05140678bc93a3bef
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 12:07:53 2015 +0200

    rules: preserve alert state across reloads.

commit 4625485b843165029ad669834859f99ef863db1b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 30 11:18:07 2015 +0200

    rules: move rules*.go contents to manager*.go

commit 016e00441f1e2eeb3274e75cebc5f0f7b98c6c65
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Fri Jun 26 09:16:59 2015 +0200

    Add circleci yaml for Dockerfile test build

commit 1e61b5e0cf9ebffd543ed2fc9d6c2d439624d23e
Merge: edc7331 b201725
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 26 01:49:38 2015 +0200

    Merge pull request #858 from prometheus/fabxc/rmtfix
    
    cmd/prometheus: fix remote storage fanout

commit b201725d1c3391615aabb455095b16af1042394c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 26 01:32:44 2015 +0200

    cmd/prometheus: fix remote storage fanout

commit edc73318ebabea1247c5116af4a175e11e53aab6
Merge: ab7473b fed2fcb
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 26 00:16:09 2015 +0200

    Merge pull request #857 from prometheus/container-builds
    
    Enable container-based Travis builds.

commit fed2fcbe2500d190cb58801d877fbf637598009f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jun 26 00:14:13 2015 +0200

    Enable container-based Travis builds.
    
    See:
    
    http://docs.travis-ci.com/user/workers/container-based-infrastructure/
    
    Apparently disabling sudo is all that's needed.

commit ab7473b970830fb520a79d4f486a11e881c9c3e8
Merge: 5176a48 785736c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 21:13:18 2015 +0200

    Merge pull request #856 from sdurrheimer/fix-dockerfile
    
    Fix Dockerfile with the removal of tools/rulechecker

commit 785736c7424a0c3c294579c68eb11314f5ee3802
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Thu Jun 25 20:59:55 2015 +0200

    Fix Dockerfile with the removal of tools/rulechecker

commit 5176a480e6326635ad4a8ab76a2f7a10bb52bd55
Merge: 21aec6e 9ad71e5
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 25 19:20:19 2015 +0200

    Merge pull request #855 from prometheus/cut-0.15.0
    
    Cut Prometheus 0.15.0rc1.

commit 9ad71e5bbee9aa0363729eb094de680ae69bafbe
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 24 16:58:36 2015 +0200

    Cut Prometheus 0.15.0rc1.

commit 21aec6e437e354097fac263dae2c40e2edd51692
Merge: 8887f1e 6e61fd3
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 25 19:13:59 2015 +0200

    Merge pull request #854 from prometheus/fabxc/rulecheckerkill0r
    
    tools/rulechecker: bye bye

commit 6e61fd3e96e710b2453aa66af37c53f5c3000f28
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 19:11:49 2015 +0200

    tools/rulechecker: bye bye

commit 8887f1e1a26fb11556d36af8686204e3bbe58a0f
Merge: e701bdc 5250704
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 25 18:59:01 2015 +0200

    Merge pull request #853 from prometheus/fabxc/help
    
    cmd/prometheus: improve help output

commit 525070419ba1bc4f0719a0c57b6d73f95c6bcfb2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 18:47:14 2015 +0200

    cmd/prometheus: improve help output

commit e701bdc4349fcc7adca420a8653ece0e8813fcf5
Merge: 2294545 4db3eeb
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 25 18:05:32 2015 +0200

    Merge pull request #852 from prometheus/fabxc/graph
    
    web: generate embedded assets.

commit 22945455ac0d4a1e982ffdd01c4f5eadb9589b75
Merge: 080e067 bcc8101
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 17:27:19 2015 +0200

    Merge pull request #851 from prometheus/fabxc/promtool
    
    cmd/promtool: fix missing builddate in version info

commit 4db3eeb0542648bf17e31c2406b3ef9e7733c1d6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 17:26:26 2015 +0200

    web: generate embedded assets.

commit 080e067601357417b2196b70dd5db8fda8cc68e0
Merge: a8f117b c292979
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 17:23:52 2015 +0200

    Merge pull request #832 from prometheus/fabxc/target-test
    
    retrieval: double timeout in target scrape test.

commit bcc8101d9e01fb8e4b68ed84c5224a9588af5823
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 17:21:24 2015 +0200

    cmd/promtool: fix missing builddate in version info

commit a8f117b02dc9c1496d8b4d3261b07776a3709c85
Merge: c1d37bc cf2a7a7
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 25 15:14:01 2015 +0200

    Merge pull request #849 from prometheus/use-api-v1
    
    Use v1 API for querying.

commit cf2a7a7ca94a9410fa2dbd756953069c612e8f93
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 25 12:42:18 2015 +0200

    Use v1 API for querying.
    
    Also remove hidden input fields that are not used anymore, because the
    query params are now passed as JSON to the AJAX function. This also has
    the wonderful side effect that we're no longer sending all the other
    non-hidden fields along to the query endpoints anymore.

commit c1d37bc55bdab4960dbce1efe79ed1914120d817
Merge: ef4ba84 749ae45
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 14:07:45 2015 +0200

    Merge pull request #843 from prometheus/fabxc/runbook
    
    promql: add runbook to alert statement.

commit ef4ba843a2756f0206e48380489df56ef3f58045
Merge: 689ed79 70d7a98
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 25 13:46:09 2015 +0200

    Merge pull request #848 from prometheus/fabxc/apifix
    
    promql: add json tags, fix query constructor.

commit 70d7a987a7e703034bef95a3564ef4acff4096b9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 13:44:05 2015 +0200

    promql: add json tags, fix query constructor.

commit 749ae450c5bd4427f7ad98b10d8e8cb61d7be998
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 24 19:27:09 2015 +0200

    promql: add runbook to alert statement.
    
    This commit adds the RUNBOOK keyword to alert statements. The field
    is optional and expected to be a link.

commit 689ed7978fcc089687df5a78ee54d51d1604a112
Merge: 52859b8 7f85b9b
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 25 12:25:45 2015 +0200

    Merge pull request #845 from prometheus/fabxc/apifix
    
    promql: add MarshalJSON method for ExprType.

commit 7f85b9b2153053030824e2ab5f72f3044c064621
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 25 12:01:26 2015 +0200

    promql: add MarshalJSON method for ExprType.

commit 52859b803348cbf70189e6ab07df5c09bd123d9b
Merge: 2677d7b 682f949
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Jun 24 21:40:10 2015 +0100

    Merge pull request #836 from prometheus/shard
    
    Add 'hashmod' relabel action.

commit 682f949ab1e15f63daed02182bd9f09cd4914cd8
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Wed Jun 24 08:07:17 2015 +0100

    Add 'hashmod' relabel action.
    
    This takes the modulus of a hash of some labels.
    Combined with a keep relabel action, this allows
    for sharding of targets across multiple prometheus
    servers.

commit 2677d7b99a0a5e3562257969aeded35c1e1a4fe3
Merge: 9607b8b 23862c9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 24 17:58:59 2015 +0200

    Merge pull request #842 from prometheus/fabxc/consulcfg
    
    retrieval/discovery: refresh services in Consul to recover from missing events

commit 9607b8bbdb7baee8fa2015b42f61ee6c07b4f746
Merge: 32a7708 c7039c3
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 24 17:55:01 2015 +0200

    Merge pull request #840 from prometheus/fix-scrape-errors-ui
    
    Fix blown-up scrape error display in web UI.

commit 32a77085e0e20b0106f31571b69f7164469e1309
Merge: 3fcd26b bc1c789
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 24 17:53:12 2015 +0200

    Merge pull request #841 from prometheus/fix-cors-perms
    
    Disallow cross-origin DELETE and POST requests.

commit 23862c92c4430afec3012f70cecdd8afdd79fa95
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 24 17:46:11 2015 +0200

    retrieval/discovery: refresh services in Consul to recover from missing events.

commit bc1c789babe9f395b41f39a15e726f7427de3dfe
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 24 17:26:49 2015 +0200

    Disallow cross-origin DELETE and POST requests.

commit 3fcd26b3283cb33f085cc20fd6a0e8609d7625d8
Merge: 364003c 4319b06
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 24 17:24:05 2015 +0200

    Merge pull request #838 from prometheus/fabxc/consulcfg
    
    config: add omitempty for consul SD config.

commit c7039c3a73e405edcbf6a3694f0cf6ecf46ba27c
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 24 17:22:16 2015 +0200

    Fix blown-up scrape error display in web UI.

commit 4319b06dd219a140db1f10779d42bd7d914c7e07
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 24 16:22:52 2015 +0200

    config: add omitempty for consul SD config.

commit 364003c4443dbd1174ed7a08a59275e0c9e6a0af
Merge: 3e811ad 535a7f2
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 24 15:41:36 2015 +0200

    Merge pull request #837 from prometheus/update-web
    
    Update web/blog/files.go with new web content.

commit 535a7f2640e3122c6b692ba3569144caa73bfbb3
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 24 15:26:01 2015 +0200

    Update web/blog/files.go with new web content.

commit 3e811ad7a4c72393a080f0ff9bcd246aaed2eb34
Merge: 30fc04b 23e7745
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 24 09:53:47 2015 +0200

    Merge pull request #827 from prometheus/fabxc/rmt-cleanup
    
    main: cleanup initialization of remote storage.

commit 30fc04b240c105062c80855130c3a72c748a94a2
Merge: 0e383b0 c69b733
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 24 00:04:02 2015 +0200

    Merge pull request #834 from prometheus/improve-dockerfile-deps
    
    Simplify Go dependency handling in Dockerfile.

commit c69b7339568fd7ab900b55663ce3c51ed5cf5376
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jun 23 23:58:09 2015 +0200

    Simplify Go dependency handling in Dockerfile.
    
    Also, put quotes around the GOPATH in the Makefile for safety in case of
    spaces, etc.

commit 0e383b0b9f4ff029789f130964a4f18184200418
Merge: f149389 c813eee
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 23 23:38:41 2015 +0200

    Merge pull request #833 from prometheus/remove-go-get
    
    Remove unused GO_GET from Makefile.INCLUDE.

commit c813eee4572da69b6be89bd137be28e1031aeb20
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jun 23 22:57:41 2015 +0200

    Remove unused GO_GET from Makefile.INCLUDE.

commit c292979374b112caf8542c13064ebe49b96ab6e7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 21:59:55 2015 +0200

    retrieval: double timeout in target scrape test.

commit f149389d291c948aa2b9505ac6fd6402eb566acd
Merge: 9d7fa93 7ec1595
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 21:57:43 2015 +0200

    Merge pull request #828 from prometheus/fabxc/cfgout
    
    config: show original input on String()

commit 9d7fa930cea53f6e3f8b90648a3f0d845f43d79c
Merge: cc18191 bbc8b84
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 23 21:26:56 2015 +0200

    Merge pull request #831 from prometheus/fix-time-utc
    
    Switch human-readable times to UTC.

commit bbc8b8490ed41a5c718512181ed03e3223f98c24
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 23 21:15:32 2015 +0200

    Switch human-readable times to UTC.
    
    This fixes https://github.com/prometheus/prometheus/issues/829

commit 7ec15956e489889e54af289f5b48f6d1dedded69
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 19:40:44 2015 +0200

    config: show original input on String()

commit cc18191b5e5a7f6fe8fc95e11c8de43c98d47b77
Merge: 7d08505 d868264
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 23 19:03:14 2015 +0200

    Merge pull request #826 from prometheus/alerting-ui-improvements
    
    Use TemplateExpander for main pages, improve alerting UI

commit d868264bb883835cbbf7f4c3c17c0442e1d6f576
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 23 17:46:57 2015 +0200

    Improve UI of /alerts page.
    
    Changes to the UI:
    - "Active Since" timestamps are now human-readable.
    - Alerting rules are now pretty-printed better.
    - Labels are no longer just strings, but alert bubbles (like we do on
      the status page for base labels).
    - Alert states and target health states are now capitalized in the
      presentation layer rather than at the source.

commit 23e77450ff146b4fcbfad2da667fec9b01a7f454
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 18:04:04 2015 +0200

    main: cleanup initialization of remote storage.

commit d7ea0397d42cea1221a60ff95006466f55c99acc
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 23 17:46:50 2015 +0200

    Use templates.TemplateExpander for all page templates.
    
    This will allow us to use all of our shiny templating functions in the
    main page templates as well.

commit 7d0850571d5abcb4c09b98dc9adb31c8e1a3e759
Merge: e18bc94 8c196c1
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jun 23 17:07:48 2015 +0200

    Merge pull request #825 from prometheus/beorn7/doc
    
    Minor doc fixes.

commit 8c196c10282dcc777beed9f0765223467c8ebf13
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Jun 23 15:58:43 2015 +0200

    Minor doc fixes.

commit e18bc9498016baea525c3091da22ff593048a575
Merge: 37dea6a 53b9d59
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 14:17:28 2015 +0200

    Merge pull request #786 from prometheus/fabxc/federate
    
    web: add basic federation support

commit 53b9d5917dce9dedeff9351e900d75d41a6f0b00
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 22 22:57:32 2015 +0200

    web: improve target URL handling and display.

commit 6bfb4549a689cfbd68d348dd0acb98d1dad0903b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 22 22:50:47 2015 +0200

    storage: add LastSamplePairForFingerprint method

commit 39a82549633c3d1b499697cdac1ee758b54b6dbb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 22 22:46:55 2015 +0200

    web: add basic federation support.
    
    This commit adds a federation handler on /federate. It accepts `match[]`
    query parameters containing vector selectors. Their intersection determines
    the in-memory metrics that are returned in the same way as the
    /metrics endpoint does (modulo sorting).

commit dc7d27ab9a2813ece3b9feac9e71301084d51348
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 22 22:35:19 2015 +0200

    retrieval: add honor label handling and parametrized querying.
    
    This commit adds the honor_labels and params arguments to the scrape
    config. This allows to specify query parameters used by the scrapers
    and handling scraped labels with precedence.

commit 37dea6a2512534fe42e683dd6eea184733de9813
Merge: 07347aa 6885ec8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 12:08:15 2015 +0200

    Merge pull request #824 from prometheus/fabxc/gitignore
    
    git: ignore promtool, be less strict about config files.

commit 6885ec8ef9a38844b5f597b77165182e7a9f5c1a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 11:53:00 2015 +0200

    git: ignore promtool, be less strict about config files.

commit 07347aa1d9ae9aa02a372661652e8b9bdfe95f44
Merge: 618a9d1 024139b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 08:37:49 2015 +0200

    Merge pull request #823 from prometheus/fabxc/rdme
    
    general README update

commit 024139be00f4ee1bb554b00f6b3be6a898707ce8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 23 00:35:04 2015 +0200

    readme: remove tools that are no longer required

commit 618a9d15f244ef08dd337f961795ed66e7afbf39
Merge: ccbc801 9016917
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jun 22 18:19:28 2015 +0200

    Merge pull request #821 from prometheus/beorn7/fix
    
    Increment dirty counter only if setDirty(true) is called.

commit 9016917d1cfb8c8da2e170805376ea568fef7be5
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Jun 22 18:12:55 2015 +0200

    Increment dirty counter only if setDirty(true) is called.
    
    Currently, we increment the counter even if setDirty(false) is called,
    which sets the storage clean.

commit ccbc801d19d415a4e8a485bbbe397f6d85851b64
Merge: 1eff186 d27e45c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 22 16:40:09 2015 +0200

    Merge pull request #816 from prometheus/fabxc/promctl
    
    Create promtool command

commit d27e45cc74112c41a5b41aff4a7e61256ad31d28
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 18 12:21:53 2015 +0200

    make: add promtool to build and tarball targets.

commit 890c1a7e74c4209a9473a127b79c7af0218f991e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 18 11:13:28 2015 +0200

    cmd/promtool: add promtool command.
    
    The promtool command should bundle multiple commands that help
    in maintaining a running Prometheus server.

commit 1eff186555832e457292d75bd40d5d6e1ad36f69
Merge: 6d99e3b 5b91ea9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 22 15:45:50 2015 +0200

    Merge pull request #810 from prometheus/fabxc/lmatch
    
    Match empty labels.

commit 5b91ea9b36281e0cc04ea5f0f8cd9b3fe04d3083
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 18:25:31 2015 +0200

    storage: improve label matching and allow unset matching.
    
    Matching of empty labels now also matches metrics where the label
    was not explicitly set to the empty string.

commit 46df1fd5eafa29efe2ced344b6275c1cd5c9d9e7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 22 12:02:03 2015 +0200

    storage/local: add benchmark for label matching.

commit 94cd321be1754bd417223797704d785b3ec9f765
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 18:34:41 2015 +0200

    promql: error if all label matchers are empty.

commit 6d99e3b3f750a624ae125e3aa4cd058024a23b38
Merge: 3ef44a9 166365f
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun Jun 21 20:29:50 2015 +0200

    Merge pull request #819 from sdurrheimer/master
    
    Fix Dockerfile with the recent changes

commit 166365f4f0a616c2649aad5f6abd1ba4c189fa21
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Sun Jun 21 19:53:09 2015 +0200

    Fix Dockerfile with the recent changes

commit 1b5ceb570a73cbb16d3edd80aa4f9f36554a6864
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 18 11:33:45 2015 +0200

    util/cli: create CLI utility package

commit 3ef44a9c9e8da96772ee3720493017a91fe2973b
Merge: b4dfbf8 4d17118
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 18 19:27:16 2015 +0200

    Merge pull request #817 from prometheus/fix-consoles-link-to-prometheus-root
    
    Fix consoles "Prometheus" link to point to /

commit 4d1711804aeac2f1581c0336e7f2505bf2024264
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Jun 18 19:25:19 2015 +0200

    Fix consoles "Prometheus" link to point to /

commit b4dfbf89a84858d7bfb3b842695164ab877bac10
Merge: 459d18c f97db8d
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 18 13:54:57 2015 +0200

    Merge pull request #815 from prometheus/fabxc/fix-date
    
    cmd/prometheus: fix version output

commit f97db8d4e5e033a7268068b264441622624713e9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 18 12:33:39 2015 +0200

    cmd/prometheus: fix version output

commit 459d18cf18edc9ebba54ce89cb2e22ee4b21de1c
Merge: 2bf7e1a 0ac7e72
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 17 20:10:52 2015 +0200

    Merge pull request #812 from Marmelatze/consul_services
    
    Use Consul ServiceAddress instead of Address when set

commit 0ac7e7217e28dd165787b80219f6085c8d97f814
Author: Florian Pfitzer <pfitzer@w3p.cc>
Date:   Tue Jun 16 17:29:45 2015 +0200

    Use Consul ServiceAddress instead of Address when set

commit 2bf7e1ac98407708ad97b4e9c933c1834c2179d8
Merge: a79cffc 1198010
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 17 14:58:39 2015 +0200

    Merge pull request #811 from prometheus/fabxc/version
    
    Move version info to its own package and add version endpoint.

commit 119801027fce010a038db24a7d480e5e1b8c4c11
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 16 14:57:30 2015 +0200

    web: expose a version information endpoint

commit a79cffcc44b91b6b4c951d351af5f212026c9d2e
Merge: 95bd64c 4d89524
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Jun 17 10:54:16 2015 +0100

    Merge pull request #784 from brian-brazil/serverset
    
    Add basic support for Zookeeper Serversets for SD

commit 39edc2df7ae5ca17627dee78c165f97e14b94ad5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 12:23:02 2015 +0200

    version: move version information into separate package.
    
    Version information is determined at build-time and thus there is
    no need to pass it down from main. In its own package it can
    be used from various other packages.

commit 4d895242f903ebc37be0e46c7c5a9689fccc674c
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jun 9 12:25:30 2015 +0100

    Add support for Zookeeper Serversets for SD.
    
    It can discover an entire tree of serversets, or just one.

commit 95bd64c770b34171905059ba28a87a63c4efa424
Merge: 330ed7b af52579
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 15 21:38:05 2015 +0200

    Merge pull request #806 from metcalfc/fix_609
    
    Handle building without git.

commit af52579189f48c3f2c83d3a115f5873c7328291f
Author: Chad Metcalf <metcalfc@gmail.com>
Date:   Sun Jun 14 13:03:07 2015 -0700

    Handle building without git.
    
    Resolves #609 by removing two dependencies on git.
      - Use the Makefile to find the current directory.
      - In the case of building from an archive fall back to fixed REV
    and BRANCH values.

commit 330ed7b9f25c10a7fee43c0ea62da9984de0e573
Merge: 7b302f1 f10effc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 21:04:28 2015 +0200

    Merge pull request #809 from prometheus/update-make-format
    
    Update file exclusion list for `make format`.

commit 7b302f1a5921bd1193912552b05f5876c9c77069
Merge: 689ef7f 31325c1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 19:01:47 2015 +0200

    Merge pull request #808 from prometheus/fabxc/ref-main
    
    refactor main, flag handling, and web package

commit 31325c1fd0524843a54bf418cd8ac7dff0727fad
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 12:59:55 2015 +0200

    make: adjust to new main location.

commit 85d7c7640ac24ab7f62c53ba848bd66f1b32a14e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 12:50:53 2015 +0200

    web: remove flags, refactor handlers

commit a0b3aaa55191ec2e4a30d3cfce6ca02d3617c1a1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 13:03:17 2015 +0200

    notification: remove flags

commit b105e26f4d1bb64e2025a211c1251782f6790aa8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 12:49:28 2015 +0200

    storage: remove global flags

commit fe301d7946498a416073cdbf06ca8611c93b8d6f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 12:49:11 2015 +0200

    promql: remove global flags

commit de66e32a4d7a04151b0d12df5383ed0bb0e224da
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 15 12:36:32 2015 +0200

    cmd/prometheus: create new main package.

commit f10effceb1b996ddbf3ab2dc18ec4e76ff1d7f2f
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 15 16:29:21 2015 +0200

    Update file exclusion list for `make format`.

commit 689ef7f6788bf6e8e9e5315a29f57d8dae7c15d0
Merge: 5da5ea3 0dbae36
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jun 15 12:05:31 2015 +0100

    Merge pull request #803 from prometheus/relabel-scrapes
    
    Allow ingested metrics to be relabeled.

commit 5da5ea3ee2091eb3dfc1aca815f9c4c2630fa8f6
Merge: 58ceae8 27ef542
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Jun 13 17:39:25 2015 +0200

    Merge pull request #804 from prometheus/blob-fmt
    
    Web: Format files.go when it is built.

commit 27ef54263e93cdbcd37b27f27717455294db77ac
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Sat Jun 13 15:27:08 2015 +0100

    Web: Format files.go when it is built.
    
    This will avoid unrelated changes appearing
    when you do a make fmt

commit 0dbae36d36099a061d86d3484bc2ca50bc665a50
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Fri Jun 12 22:16:13 2015 +0100

    Allow ingested metrics to be relabeled.
    
    The main purpose of this is to allow for blacklisting
    of expensive metrics as a tactical option.
    It could also find uses for renaming and removing labels
    from federation.

commit 58ceae82bc06217895e13f0a150e7fae67932168
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Fri Jun 12 22:12:26 2015 +0100

    Revert "Allow ingested metrics to be relabeled."
    
    This reverts commit f2f26ca08fa5c284d869ce8691c9a7123673605e.
    
    Was accidentally pushed to master instead of a branch for PR.

commit f2f26ca08fa5c284d869ce8691c9a7123673605e
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Fri Jun 12 22:06:30 2015 +0100

    Allow ingested metrics to be relabeled.
    
    The main purpose of this is to allow for blacklisting
    of expensive metrics as a tactical option.
    It could also find uses for renaming and removing labels
    from federation.

commit 5e50addc87ccf32b2266d3078a48f5159a59ede6
Merge: 3c6c80d f61ffb4
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 18:22:49 2015 +0200

    Merge pull request #801 from sdurrheimer/master
    
    Fix Dockerfile with recent embed-static.sh/go-bindata change

commit f61ffb4fc01a90ebac5861d525c9320231d34a36
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Fri Jun 12 18:19:25 2015 +0200

    Fix Dockerfile with recent embed-static.sh/go-bindata change

commit 3c6c80d1791906883e6691e630653aecd5f80e55
Merge: 395a0b3 b9b20fd
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 18:03:44 2015 +0200

    Merge pull request #800 from prometheus/pad-data-range
    
    Always show selected range, regardless of returned data.

commit b9b20fd80e36e0ae5fe83f82f1b96b4c482e8b94
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 17:20:02 2015 +0200

    Always show selected range, regardless of returned data.

commit 395a0b3b11a84b9a7c0245d0e6e628b5808f4109
Merge: 6247bd5 8bb578c
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 17:03:54 2015 +0200

    Merge pull request #799 from prometheus/multiline-expr-input
    
    Change expression input field to multi-line textarea.

commit 8bb578c1fed1261398d60bb6ea8a41e2b6ef93fc
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 16:46:22 2015 +0200

    Change expression input field to multi-line textarea.
    
    Also, rearrange and clean up some things to make this work.
    The textarea starts as a single line, but auto-expands when entering
    multiple lines (e.g. via Shift+Enter). Pressing just "Enter" still
    executes the expression.

commit 6247bd5a5a6278247e5261da7a5b17f5ea21f74b
Merge: 3ec2e23 4b43e82
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 15:46:43 2015 +0200

    Merge pull request #798 from miekg/hup-signal-handing
    
    Start HUP signal handler earlier

commit 4b43e825f4cbae5c93829abbf4ad4cefb4b0c0cd
Author: Miek Gieben <miek@improbable.io>
Date:   Fri Jun 12 14:45:02 2015 +0100

    Rename block to hupReady
    
    Remove the write to the channel as per comments.

commit d8651302fcec02bc46a648a09aba610189629604
Author: Miek Gieben <miek@improbable.io>
Date:   Fri Jun 12 13:48:06 2015 +0100

    Start HUP signal handler earlier
    
    When prometheus starts up and is recovering its state it will not handle
    SIGHUPs. If it receives those during this phase it will exit. The change
    here makes prometheus ignore SIGHUPs until it is ready to handle them.
    
    Note this is only done for SIGHUP because that signal is used for
    trigger a config reload and a such something could already be sending
    these signals as part of a config update.

commit 3ec2e2323dd0a413d1e29f67a6bb1ef06f23f709
Merge: 1e59167 8d304d9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 12 15:21:55 2015 +0200

    Merge pull request #793 from prometheus/fabxc/make
    
    make: do not call go-bindata on building.

commit 1e59167d484d604e6fe0031a02d72ff610c5d149
Merge: 9013319 5e2d1c1
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 15:11:10 2015 +0200

    Merge pull request #797 from prometheus/keep-common
    
    Deprecate `keeping_extra`, rename it to `keep_common`.

commit 9013319d3acaf0645e00189e7588f9f5260ef352
Merge: 0542733 116e6df
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 12 14:59:13 2015 +0200

    Merge pull request #796 from prometheus/fabxc/cfg-err
    
    config: raise error on unknown config parameters

commit 5e2d1c1464752ac662164bdc5f191493292f0dae
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 14:21:01 2015 +0200

    Deprecate `keeping_extra`, rename it to `keep_common`.
    
    `keep_common` is more in line with the function name
    `drop_common_labels()` terminology-wise, and also more in line with
    `group_left`/`group_right` (no `...ing` verb suffix).
    
    We could also go the full way and call it `keep_common_labels`. That
    would have the benefit of being even more consistent with the function
    `drop_common_labels()` and would be more explanatory, but it also seems
    quite long.

commit 0542733964988250827603eff8f442180faeb9d8
Merge: 6bb5e3f e7659f9
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 12 14:05:05 2015 +0200

    Merge pull request #795 from prometheus/fabxc/promql-print
    
    Fix print bug, remove DotGraph methods

commit 116e6df0965abe74d1ff69491e1f0da71dac6075
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 12 13:39:59 2015 +0200

    config: raise error on unknown config parameters.
    
    The YAML parser ignores additional parameters on unmarshaling. This causes
    frequent confusion with bad configs that pass parsing.
    These changes raise errors on additional parameters.

commit 3a24a7779d9abe968dfd2ff1425edd13d3338dc9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 12 13:39:12 2015 +0200

    config: extend and format config example/test.

commit e7659f908cb7a06a0e0df1e0bcea5f25c74636c1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 12 09:44:21 2015 +0200

    promql: remove DotGraph methods from nodes.

commit c716d8a47b35786077d508ba6abb741458671963
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 12 09:42:36 2015 +0200

    promql: fix aggregation expression String() method.
    
    Fixes #794.

commit 8d304d95e57d41ddb2b97c8de843273dec01d86d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 12 00:00:54 2015 +0200

    make: do not call go-bindata on building.

commit 6bb5e3f8cd3a1ff09c1979ff09f59808f4c36709
Merge: ae2bff4 c32ae22
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 11 23:59:51 2015 +0200

    Merge pull request #792 from prometheus/fabxc/range-fix
    
    promql: fix missing metric in range results.

commit c32ae221193c60c6366be9928e4cc4778296c234
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 11 23:50:53 2015 +0200

    promql: fix missing metric in range results.

commit ae2bff45eaa26068a823620672e7e92c127938ef
Merge: 723e070 bd47e15
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 11 15:44:00 2015 +0200

    Merge pull request #790 from prometheus/ignore-data-dir
    
    Add "data" directory to .gitignore.

commit bd47e159d9d7c61514e77e95f56441a3f9e0893a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 11 15:38:54 2015 +0200

    Add "data" directory to .gitignore.

commit 723e070867c05169031cb54a8bb5c73d0ba5282c
Merge: bc09484 39aa66e
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 11 15:33:57 2015 +0200

    Merge pull request #789 from prometheus/change-storage-path-default
    
    Place storage under working directory by default.

commit 39aa66e46e894aeb7cf7de4dc310ca9409d6df11
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 11 15:24:24 2015 +0200

    Place storage under working directory by default.

commit bc09484608909a18ef7cafbb063a36a9acc16878
Merge: 70e0be6 4585505
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 11 14:49:39 2015 +0200

    Merge pull request #788 from prometheus/fabxc/cfg-re
    
    config: error on missing regex in relabel config.

commit 70e0be62957f3052b785568eb0a59b5fff70c322
Merge: 92a0af3 7bb7e56
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 11 14:06:04 2015 +0200

    Merge pull request #783 from prometheus/fabxc/api-v1-ext
    
    /series endpoints for API v1 and scalar range queries

commit 92a0af37e4c4866a78958443fb1c8f17c8b9a3a0
Merge: db4df06 a081c94
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 11 13:04:47 2015 +0200

    Merge pull request #782 from smyrman/master
    
    Make Prometheus build on Windows (without make).

commit 7bb7e565a4f5d65ecc0bace3c64cffc5bd3bc2fa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 9 16:09:31 2015 +0200

    web/api: add GET and DELETE /series endpoints

commit 0acd44b0e33f30c09d90128c10ab3752cb6b9fb9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 10 19:36:43 2015 +0200

    promql: expose ParseMetric and ParseMetricSelector

commit 458550560c7a21e8fced14fd2689a8bf2c8fba94
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 10 23:40:39 2015 +0200

    config: error on missing regex in relabel config.
    
    Fixes issue #787.

commit a081c9436bd7b94952f7567543c61930c661a45d
Author: Sindre Myren <smyrman@gmail.com>
Date:   Mon Jun 8 23:37:25 2015 +0000

    Building without a Makefile (on Windows)
    
    Main changes:
    
    - Switched to using `go-bindata` in place of `scripts/embed-static.sh`.
    - Support for building Prometheus without a `Makefile`.
    - Minor typo fix to make Prometheus build on Windows (without Makefiles).
    
    Please note that this does not mean that prometheus will work on Windows.
    There are still failing tests!

commit 7be94ce96216f60459eaf1fb85190b3c6a20822b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 9 13:44:49 2015 +0200

    web/api: improve errors, add tests

commit cb10ceac18d9ccbea160533a48c3701e9997c29f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 9 12:52:27 2015 +0200

    promql: allow scalar expressions in range queries, improve errors.
    
    These changes allow to do range queries over scalar expressions.
    Errors on bad types for range queries are now raised on query creation
    rather than evaluation.

commit db4df06414c2c602bd60bf28f4ec0242d11949f3
Merge: ae01a53 75b0b74
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 8 23:13:49 2015 +0200

    Merge pull request #781 from prometheus/fabxc/api-v1-ext
    
    Replace /metrics/names with /label/:name/values endpoint.

commit 75b0b7420ec095a8c95f639f5a53d42ed923bd6b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 8 21:19:52 2015 +0200

    web/api: replace /metrics/names with /label/:name/values endpoint.

commit 535c002f79185b282da5fe0929338ee7c53865d0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 8 21:08:06 2015 +0200

    util/route: add WithParam function.

commit ae01a5366da78650182bb6d035368c2e6c289bcf
Merge: 8d8de7a 5b71391
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 8 19:14:25 2015 +0200

    Merge pull request #774 from prometheus/fabxc/api-v1
    
    Initial API v1 implementation

commit 5b713911e3ece7252c981d7bf5eebb0bd7323585
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 4 18:24:04 2015 +0200

    web/api: enable running API legacy and v1 in parallel

commit 8d8de7adbc65472a54c32def9ed991b7a2d26223
Merge: b5fe2e9 adf6850
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 8 16:23:54 2015 +0200

    Merge pull request #780 from prometheus/improve-target-label-ui
    
    Improve display of target labels on status page.

commit b5fe2e9afea940fa10f67cf40ab302ec107c3e3e
Merge: 51653e7 f6c33a2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 8 16:22:06 2015 +0200

    Merge pull request #773 from prometheus/fabxc/simple-cfg
    
    config: simplify default config handling.

commit adf6850853197651c46bf1b1dd9f92cd31666537
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 8 16:10:48 2015 +0200

    Improve display of target labels on status page.
    
    Instead of a "{...}"-style list, show key/value pairs as Bootstrap
    labels.

commit f6c33a234744f7598354bfe1106a50def51aff79
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Jun 7 17:40:22 2015 +0200

    config: prevent overwrite of DefaultGlobalConfig

commit 51653e789069f97345f43c49e56a5b896e4736b2
Merge: 1047fcf 5e13880
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 8 15:12:47 2015 +0200

    Merge pull request #779 from prometheus/fabxc/rule-cleanup
    
    rule cleanup

commit 1047fcfc6ef52619467f0a7f0c4e9a163498b8f9
Merge: ea8099a b8b1d3c
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jun 8 12:24:16 2015 +0100

    Merge pull request #776 from prometheus/relabel-debug
    
    Web: Add pre-relabel labels to status page.

commit b8b1d3cbac4a00d679d05d587c1979385dc17dd6
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Fri Jun 5 21:42:39 2015 +0100

    Web: Add pre-relabel labels to status page.
    
    Figuring out what's going on with the new service discovery
    and labels is difficult. Add a popover with the labels
    to the target table to make things simpler, and help
    discovery of potentially useful labels.

commit ea8099a1d26a09d1acaffa11b9e0a74629ab2e09
Merge: b5f571f db3367e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 8 11:59:25 2015 +0200

    Merge pull request #778 from prometheus/fabxc/lname-re
    
    config: ensure correct labelname in JSON target group.

commit ab9c98acac9f22a84fbb8ecfbc0adcfd0b3188c3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 4 18:07:57 2015 +0200

    web/api: add initial API v1 implementation.

commit 5e13880201698df931d81bf86451e8071c8c9162
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 25 21:16:32 2015 +0200

    General cleanup of rules.

commit 75c920c95e57497d2ac534b60b157e5da317ec59
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 25 20:52:00 2015 +0200

    Remove DotGraph method from Rule interface

commit 83d07516e8aa69f95b3e451979574a328335cae0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 25 20:43:24 2015 +0200

    Remove EvalRaw methods from Rule interface

commit db3367e83f680a426b134515ab04305d1facf597
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Jun 6 09:55:22 2015 +0200

    config: ensure correct labelname in JSON target group.

commit 0af1cff8af871389a5967ebab07295ee6c354127
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 4 17:03:12 2015 +0200

    config: simplify default config handling.

commit b5f571fb6e8daccf9615b1acf1f508c15b5f120f
Merge: 7943aa8 8214b4e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 5 19:19:29 2015 +0200

    Merge pull request #775 from prometheus/fabxc/tag-sep
    
    retrieval/discovery: surround __meta_consul_tags value with tag seperators.

commit 8214b4ee78f6d40a708b74bad2b0e016a110f94f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 5 18:41:34 2015 +0200

    retrieval/discovery: surround __meta_consul_tags value with tag seperators.

commit 7943aa834c4d8b3a365839cd21de092d8c7720da
Merge: f344ecb 183be62
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Jun 5 12:42:30 2015 +0200

    Merge pull request #772 from prometheus/fabxc/dur-panic
    
    util/strutil: do not panic on wrong duration unit.

commit 03b737322e02e9db23f784cf917b1554cd7a75a5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 4 18:09:20 2015 +0200

    promql: expose storage and query engine for tests

commit 319068a7a6ebadae1f3569cf4f471b46e7d333fa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 4 18:21:24 2015 +0200

    promql: fix parsing ambiguity for serial repetitions

commit 183be62f2a2882c229dc00427a9dc09c23fb8319
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Jun 4 12:02:26 2015 +0200

    util/strutil: do not panic on wrong duration unit.

commit f344ecba5999cd8b619bc03b3cf4aa8d5af99bd8
Merge: f61afc0 e88e5f6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 3 16:43:49 2015 +0200

    Merge pull request #764 from prometheus/fabxc/ws-cleanup
    
    New router with prefixing and contexts + cleanup

commit f61afc0f11b17f70b53e87f503750deb80db71d8
Merge: 3247052 0d36606
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 3 16:40:46 2015 +0200

    Merge pull request #769 from prometheus/update-authors
    
    Update AUTHORS.md and put fabxc into maintainers.

commit 0d3660692447c2c6a632eddc9165164d1a7f69bb
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jun 3 15:49:30 2015 +0200

    Update AUTHORS.md and put fabxc into maintainers.

commit e88e5f680b54c6f13f86a59c6c6ee539fee5ff2d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 3 08:38:50 2015 +0200

    web: simplify prefix handling using util/route package.

commit 6c24114a7b7c2a03313037399bd19ed1a328481a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Jun 3 08:36:15 2015 +0200

    util/route: create route package.
    
    The route package is a thin wrapper around github.com/julienschmidt/httprouter.
    It brings the interface back to http.Handler and embedds params in a context.
    The new router comes with prefixing support.

commit 1024900218c4b48c070f7060732d85ad484d8931
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 15:42:37 2015 +0200

    Godeps: add github.com/julienschmidt/httprouter

commit 78047326b487fcfccb25fbaaa2fb5c13397ad97b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 13:07:46 2015 +0200

    web: cleanup initialization of web service.

commit 324705256330829ad53503eac636e6a40bfb067f
Merge: 4e65fde 280d11d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 20:31:35 2015 +0200

    Merge pull request #768 from fabxc/fabxc/rule-err
    
    main: exit on invalid rule files on startup.

commit 4e65fdedfbac5c3d5149089f068c0f28c5aa4f69
Merge: bc574a0 17c4c8e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 20:19:36 2015 +0200

    Merge pull request #765 from prometheus/fabxc/cfg-tags
    
    config: fix json/yaml tag inconsistencies.

commit bc574a0d937338be1573f5332b58dae147f270af
Merge: 867f2ac c60e338
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 20:19:20 2015 +0200

    Merge pull request #767 from prometheus/fabxc/cr-fix
    
    promql: fix lexing of \r as whitespaces

commit 280d11dca8206b3b6594777b0982bba2819a483d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 18:44:41 2015 +0200

    main: exit on invalid rule files on startup.

commit c60e3387efbd23cf4d0cbe87216fad1ff78ab298
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 18:33:49 2015 +0200

    promql: fix lexing of \r as whitespaces

commit 17c4c8ed95c966997d925adaabeb8d678362b1cb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 18:13:01 2015 +0200

    config: fix json/yaml tag inconsistencies.

commit 867f2ac979e3c44545012948a9a8362a50bb66d8
Merge: 93de548 5c6c0e2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 13:24:12 2015 +0200

    Merge pull request #762 from prometheus/0.14.1
    
    0.14.1

commit 93de548320c2018ecdcd2777dd1a9daf1344e784
Merge: 67e7741 5d5c387
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Jun 2 10:00:14 2015 +0200

    Merge pull request #763 from joonas/joonas/fix_scrape_interval_default
    
    Restore default ScrapeInterval of 1 minute instead of 10 seconds

commit 5d5c3878edc9c9441e0bcbd074affb86dd1f3e10
Author: Joonas Bergius <joonas@digitalocean.com>
Date:   Mon Jun 1 22:41:33 2015 -0400

    Restore default ScrapeInterval of 1 minute instead of 10 seconds

commit 5c6c0e2faad8cb0bf02f720b39bd1ee685f6446a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 27 17:41:57 2015 +0200

    Add storage method to delete time series

commit 0de6edbdfc64b94e7700acb5f15ec3fb891f127e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 29 13:30:30 2015 +0200

    Move pkg/ to util/

commit 027d8968d57463924146fd57c6057d0d00e0f492
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 22:03:34 2015 +0200

    Move embed-static.sh into scripts folder

commit 02717e6fdee6965b3dc46d0e2ac80c4b194fe258
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 21:51:44 2015 +0200

    Remove generic set type

commit dbc0d30e3e68b0e2b2e89d699e96bb67f15978f4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 21:33:48 2015 +0200

    Move string functionality to pkg/strutil

commit f45a5cab605ef4bb1e157e4e27abd73c57bfa088
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 21:22:08 2015 +0200

    Move templates package to pkg/template

commit ccf51b132e24191fe14d49392429ef5993ba42b7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 21:14:34 2015 +0200

    Move stats package to pkg/stats

commit dfaf31a1da7b868394fff482fe2ba076b9472b03
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 21:11:48 2015 +0200

    Move web/httputils to pkg/httputil and add DeadlineClient to it

commit 2317b001d0d965ac44dd46a92bf18fc57140acd0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 21:00:12 2015 +0200

    Move flock package to pkg/flock

commit 3c8fbf1e15c8f4d6e81eca2c3a23547e2c5393d7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 20:58:38 2015 +0200

    Move test package to pkg/testutil

commit c44ac7bc26f205a03eb5c71b2cff31d1878f27d7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 07:36:21 2015 +0200

    Load rule files from entire directories

commit ed6572fc0cf1d5ca59d47c1dd5752908c3ec837a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 28 03:12:42 2015 +0200

    Fix typos

commit 67e77411ba30b1b0ce0989c85b6684fb3adef430
Merge: d96a007 31c9c5d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 1 20:31:45 2015 +0200

    Merge pull request #761 from prometheus/fabxc/vendor
    
    Update client_golang dependency to 0.6.0

commit 31c9c5d324ac20dc935793087e35ca4d31f90c82
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 1 19:28:17 2015 +0200

    Update client_golang dependency to 0.6.0

commit d96a007e7f355dd77821ef0e09c756913b297d9a
Merge: b8b9a6a 6dde527
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 1 18:44:32 2015 +0200

    Merge pull request #759 from prometheus/fabxc/cut
    
    Cut 0.14.0.

commit 6dde527ee08cbe9defd7e77e3cc439eeeddf33c0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 1 18:19:04 2015 +0200

    Cut 0.14.0.

commit b8b9a6a472c143b43c91dc589465d8da42d759ba
Merge: cf65f2d cf64bbe
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Jun 1 18:38:25 2015 +0200

    Merge pull request #760 from prometheus/config-change-notice
    
    Add links to configuration change notice.

commit cf64bbe1ce89876fdf9cfed973496d23f8748224
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 1 18:36:11 2015 +0200

    Add links to configuration change notice.

commit cf65f2df0abccc62a2686a126781b99c0ddfc596
Merge: b0a1ca0 75e8b48
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Mon Jun 1 14:13:53 2015 +0100

    Merge pull request #751 from prometheus/alert-json-case
    
    Change case of alert json to initial lower letter.

commit b0a1ca02f1e212bb9e86d5f6789f0b60c9cd0707
Merge: 5e12eab 09fcf50
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 1 13:38:28 2015 +0200

    Merge pull request #755 from prometheus/noslash-pathprefix
    
    Fix slash position in MustBuildServerURL().

commit 5e12eab0da665a4c173e16c0bdcdfb581974c0b0
Merge: a10c083 c4b84d3
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 1 13:12:55 2015 +0200

    Merge pull request #756 from StephanErb/prometheus.yml
    
    Fix reference to example configuration file

commit c4b84d328a9a285ebf1b8a5678030818521e0dd1
Author: Stephan Erb <github@stephanerb.eu>
Date:   Mon Jun 1 13:05:48 2015 +0200

    Fix reference to example configuration file

commit 09fcf505f5d923198471eada1346e5e81a7f9ee0
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 1 12:54:19 2015 +0200

    Fix slash position in MustBuildServerURL().

commit a10c0834466f257afe9b89522681e1fc952c57b2
Merge: d7b471f d7c015c
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 1 12:44:04 2015 +0200

    Merge pull request #754 from prometheus/noslash-pathprefix
    
    Convert pathPrefix to not have trailing slash.

commit d7c015c14994d5657d7e00d9759d076adf1749c2
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 1 12:23:13 2015 +0200

    Convert pathPrefix to not have trailing slash.

commit 75e8b48c874c7b88ab81abfe1215f52483b02e26
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Sat May 30 14:35:51 2015 +0100

    Change case of alert json to initial lower letter.
    
    This is more in line with common practice,
    and with the webhook in alertmanager this will
    be more directly exposed to users.

commit d7b471f3cc3147f8f0a94f60ab6e4394bdf1d373
Merge: a4f1792 507e10c
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri May 29 14:46:08 2015 +0200

    Merge pull request #748 from prometheus/fabxc/cut
    
    Cut 0.14.0rc3

commit 507e10c929f59bc6e7a3c97f8deddc3c5c70a4cc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 29 14:37:33 2015 +0200

    Cut 0.14.0rc3

commit a4f179230a19d04b8155127c2012377843949b6a
Merge: 8fdea33 e9b344a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 27 19:57:15 2015 +0200

    Merge pull request #744 from prometheus/fabxc/fix-labels
    
    Fix discarding of labels in file target groups

commit e9b344abeed649b1b5eb985a223bb90ba41038a2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 27 18:32:21 2015 +0200

    Fix discarding of labels in file target groups

commit 8fdea33c30436b7600ba830bdce76dae9f2b75aa
Merge: 078efa6 8b7e5f9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 27 18:43:54 2015 +0200

    Merge pull request #739 from prometheus/fabxc/reload-hangup
    
    Stop holding TargetManager lock when stopping components.

commit 078efa6e6aa1e7c024a7b829fcd3429fed179736
Merge: 550ed0e aff01e2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 27 13:26:48 2015 +0200

    Merge pull request #738 from prometheus/fabxc/retention-cutoff
    
    Limit retrievable samples to retention window.

commit aff01e29c35684c4fee3fd0c411580920ef7f35e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 27 11:24:56 2015 +0200

    Limit retrievable samples to retention window.
    
    The storage does not delete data immediately after the retention period.
    We don't want to retrieve this data as it causes artifacts.

commit 8b7e5f91849194ca428d15bf72744b2ce0e40f42
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 27 12:32:39 2015 +0200

    Stop holding TargetManager lock when stopping components.
    
    TargetProviders may flush some last changes to the target manager
    before actually stopping. To properly read those form the channel
    the target manager must not be locked while stopping a provider.

commit 550ed0ea0959fc7e7fe1244862c0df2bbf5de588
Merge: 7b53048 f34de49
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 27 01:20:44 2015 +0200

    Merge pull request #732 from prometheus/area
    
    Add increase() function, to replace delta(..., 1).

commit f34de493d5cb0e3f1e4d38b5748520d7dad4d906
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Sun May 24 19:48:56 2015 +0100

    Add increase() function, to replace delta(..., 1).
    
    This calculates how much a counter increases over
    a given period of time, which is the area under the curve
    of it's rate.
    
    increase(x[5m]) is equivilent to rate(x[5m]) * 300.

commit 7b5304850de30508dc88b93efe69f7f80c5ebe5a
Merge: c00334d d44a89c
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 26 19:59:51 2015 +0200

    Merge pull request #737 from prometheus/change-function
    
    Implement changes() function.

commit d44a89c6e824f584b60b8255bf7dfe3db00ad637
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 26 19:01:34 2015 +0200

    Implement changes() function.
    
    changes() takes a range vector and returns the number of times a value
    has changed in the given time window for each time series as an instant
    vector.

commit c00334d560dde52a10c41f365cf30c5e5a5357c6
Merge: f45aed7 6f33ed9
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 26 17:59:49 2015 +0200

    Merge pull request #736 from prometheus/counter-reset
    
    Add resets() function to count counter resets.

commit 6f33ed9e5923562cd8056dcc40084eb24b45a4e4
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 26 17:47:52 2015 +0200

    Add resets() function to count counter resets.
    
    resets() returns for every range vector element how many counter
    resets there have been in the specified range.

commit f45aed7bea4d2a1083404b33d8f09e8b6c6f8a62
Merge: 97c0c01 0edf4ec
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 22:41:49 2015 +0200

    Merge pull request #731 from prometheus/fabxc/cut-rc2
    
    Cut v0.14.0rc2

commit 0edf4ec0726340911db628bf00ebdc272b567011
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 22:33:38 2015 +0200

    Cut v0.14.0rc2

commit 97c0c01b406fc3970475fc139b632bd8e4db3af3
Merge: 87f0932 ff53d10
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat May 23 22:25:43 2015 +0200

    Merge pull request #729 from prometheus/fix-double-slash
    
    Fix double slash in GeneratorURL sent to alertmanager.

commit 87f0932e97c9e89a2bd8d0eb9301171b810f4901
Merge: 4fa96f9 efb39cf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 22:18:30 2015 +0200

    Merge pull request #730 from prometheus/fabxc/file-sd-test
    
    Fix file SD test

commit 4fa96f9e82369d4c938c220abbf36ac1f3a3c3d1
Merge: a92134a 8eda04f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 21:31:42 2015 +0200

    Merge pull request #728 from prometheus/fabxc/testlog
    
    Remove logging output from test runs

commit 8eda04fbf172354f7586260a77f651e96ccfb4db
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 17:53:55 2015 +0200

    Remove logging output from test runs

commit efb39cfd4e840aa4bf57511ad25c6ab635858653
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 21:20:39 2015 +0200

    Fix file SD test

commit ff53d10849165f5ec1de673bf4446bd663ac276b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat May 23 19:16:35 2015 +0200

    Fix double slash in GeneratorURL sent to alertmanager.
    
    Fixes https://github.com/prometheus/prometheus/issues/722

commit a92134a947db10c003877d91497e22b64ccfccff
Merge: 837ffce 6e31953
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 16:50:47 2015 +0200

    Merge pull request #724 from prometheus/fabxc/storage-startup
    
    Read from indexing queue during crash recovery.

commit 837ffcea290fd1ce5da229d79b17db1b795cad3a
Merge: c86f5fd fcd33bb
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat May 23 16:16:26 2015 +0200

    Merge pull request #726 from prometheus/improve-redirections
    
    Improve web redirection and 404 behavior.

commit 6e319532cf47030d80ff7908545c570cd08f9f17
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 12:03:14 2015 +0200

    Read from indexing queue during crash recovery.
    
    Change #704 introduced a regression that started reading the queue only
    after potential crash recovery. When more than the queue capacity was
    indexed, Prometheus deadlocked.

commit c86f5fdfd1f09f99a4d3a4eef07c34d5711ed5e2
Merge: acd2df7 dbcb3d9
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sat May 23 14:39:03 2015 +0200

    Merge pull request #727 from prometheus/beorn7/fingerprint
    
    Use an RW lock to checkpoint fingerprint mappings.

commit dbcb3d9333df2989f8eb5f07a773a4dcb80ae53f
Author: beorn7 <beorn@soundcloud.com>
Date:   Sat May 23 14:05:05 2015 +0200

    Use an RW lock to checkpoint fingerprint mappings.
    
    This has to be backported to 0.13.x.

commit acd2df750711b85e978b078ecf0e15ebe1b8459b
Merge: bab1ae3 b7eb105
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat May 23 13:15:46 2015 +0200

    Merge pull request #725 from prometheus/fabxc/testflags
    
    Remove test flags in help output

commit bab1ae3a4855f66656df04d025589d277676d2ea
Merge: db2a0e1 84d42f4
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat May 23 13:05:58 2015 +0200

    Merge pull request #717 from gesellix/add-hostname-flag
    
    allow to override the default os.Hostname() when creating PrometheusURLs

commit 84d42f48e55c09836d2efd0c558af60c4d3f9f7a
Author: Tobias Gesellchen <tobias.gesellchen@hypoport.de>
Date:   Fri May 22 12:29:33 2015 +0200

    allow to override the default os.Hostname() when creating PrometheusURLs

commit fcd33bbfd8e4aa7a110bce18b8380a450efbc85a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat May 23 12:12:45 2015 +0200

    Improve web redirection and 404 behavior.
    
    Previously we redirected any non-existent path to the root (or path
    prefix).
    
    The new behavior:
    
    With no path prefix:
    
    - "" -> "/"
    - "/biz" -> 404
    
    With path prefix of "/foo/bar":
    
    - "" -> "/foo/bar/"
    - "/" -> "/foo/bar/"
    - "/foo/bar" -> "/foo/bar/"
    - "/biz" -> /foo/bar/biz"
      (anything not starting with the path prefix gets the prefix prepended)
    - "/foo/bar/biz" -> 404

commit b7eb105ffa4db3251ca564f40d8e9e08e5eb0da8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 12:23:33 2015 +0200

    Remove test flags in help output

commit db2a0e17c54efe99d9b8fef1bec19b9858b1a845
Merge: 52ef225 b29b4f1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 11:42:20 2015 +0200

    Merge pull request #723 from prometheus/fabxc/gitign
    
    Ignore YAML files

commit b29b4f1ee9fb8c826162fcbc02456894aef0ee2b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 23 11:20:14 2015 +0200

    Ignore YAML files

commit 52ef225b83e10a2ccb16fea3337185233fa33074
Merge: 25ce5f8 6a2983c
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri May 22 18:09:17 2015 +0200

    Merge pull request #720 from prometheus/update-docker-file-yml-change
    
    Rename refs to prometheus.conf -> prometheus.yml and remove logtostderr flag

commit 6a2983c615f96f8c80c031e2405700cb2fc648cd
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri May 22 17:08:27 2015 +0200

    Rename refs to prometheus.conf -> prometheus.yml

commit 25ce5f8667335c52d032e286cc6857f2fc0e1db6
Merge: 52c401a a722956
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 22 14:10:24 2015 +0200

    Merge pull request #719 from prometheus/update-vendoring
    
    Update all vendored dependency to latest versions.

commit 52c401a4a338a65c6f4e6bc607ef61ba6a512904
Merge: 9268bf9 d989415
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri May 22 13:49:12 2015 +0200

    Merge pull request #718 from prometheus/beorn7/doc
    
    Update README.md.

commit a7229565e67c738bb8db26b4d03a4f0e8063213d
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri May 22 13:45:14 2015 +0200

    Update all vendored dependency to latest versions.

commit d989415c422d0af8725e0ca87d2ac38e384cd90c
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri May 22 13:31:59 2015 +0200

    Update README.md.

commit 9268bf9d36e22867c7321e094c48640c471787fc
Merge: 388a08b 1b96163
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 21 21:54:06 2015 +0200

    Merge pull request #715 from prometheus/fabxc/0.14.0-rc1
    
    Cut 0.14.0-rc1

commit 1b96163b4e66e5ba602d6d31aff9436d500c7b6f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 21 21:02:09 2015 +0200

    Cut 0.14.0rc1

commit 388a08bd5e84a20e4a7c990519f71a4d4db99168
Merge: c44e7cd 3b9ab54
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu May 21 18:48:38 2015 +0200

    Merge pull request #714 from prometheus/beorn7/instrumentation
    
    Add metrics to count inconsistencies and fp collisions.

commit 3b9ab546e64ac4353de2b6ee026886e5893064ca
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu May 21 17:50:06 2015 +0200

    Add metrics to count inconsistencies and fp collisions.

commit c44e7cd10560ffea7024e3f890261c123968b469
Merge: a19e6b3 3b9c421
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu May 21 13:48:52 2015 +0200

    Merge pull request #706 from prometheus/beorn7/persistence2
    
    Improve iterator performance.

commit a19e6b39d07b760d3f54f59a405b9925554fec84
Merge: d4bd339 112a778
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu May 21 11:52:42 2015 +0200

    Merge pull request #713 from prometheus/fabxc/atomic_align
    
    Align int64s for atomic operations

commit 112a778922f1570e8928f8e977f8bab90d59b347
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 21 01:37:04 2015 +0200

    Align int64s for atomic operations

commit d4bd3397ae4666ce47e4e6524b05baf11f0f261d
Merge: 7227b02 223eaf2
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 20 23:02:14 2015 +0200

    Merge pull request #712 from prometheus/fabxc/def_cfg_file
    
    Change default config file name

commit 7227b02413a436e5a9e81a08f767cc4c15a5484a
Merge: 572b280 267fd34
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 20 22:01:07 2015 +0200

    Merge pull request #711 from prometheus/new-logging
    
    Switch Prometheus to use github.com/prometheus/log.

commit 223eaf2ca326dcaa8209689297ad13cfd07253d5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 20 19:24:27 2015 +0200

    Change default config file name

commit 3b9c421a6935fe703397cc1ee72eda3ccef82244
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed May 20 19:13:06 2015 +0200

    Weed out all the [Gg]et* method names.
    
    The only exception is getNumChunksToPersist to avoid naming the struct
    member numChunksToPersist in a weird way.

commit 267fd341564d5c29755ead159a2106faf056c4f2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed May 20 18:10:29 2015 +0200

    Switch Prometheus to use github.com/prometheus/log.
    
    This change is conceptually very simple, although the diff is large. It
    switches logging from "github.com/golang/glog" to
    "github.com/prometheus/log", while not actually changing any log
    messages. V(1)-style logging has been changed to be log.Debug*().

commit 572b280cf013b9c30f896275e3eb734d6f23613e
Merge: 6586b15 9c0908f
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 20 17:42:30 2015 +0200

    Merge pull request #710 from prometheus/fix-godeps-json
    
    Remove extra trailing commas in Godeps.json.

commit 9c0908fabb71f4949f1e3a61b813deb77c1a4e37
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed May 20 17:03:30 2015 +0200

    Remove extra trailing commas in Godeps.json.

commit 81b190bf45a63a796f88183e976d0a4e0b3eb472
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon May 4 20:16:01 2015 +0200

    Remove locking from series iterator. Cache chunk iterators.

commit cd5574bf8a6e758e9df98aa30a7e3f72b2bc7a54
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 14 13:46:38 2015 +0200

    Make chunk and series iterators more efficient.

commit f79c694be53ae907069b6670677562711bec0f69
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue May 19 19:12:01 2015 +0200

    Add benchmarks for series iterator methods.

commit 6586b15367b46e1983840a53c697e2523af40807
Merge: 8c1c840 f59a449
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed May 20 16:13:15 2015 +0200

    Merge pull request #709 from prometheus/fabxc/storage_test_fix
    
    Fix storage test

commit f59a449a2429f252805c5ca50afa0d02276270d7
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 20 16:12:07 2015 +0200

    Fix storage test

commit 8c1c840429f73cf03b95eb44a3f7326fd22bcb02
Merge: 7af85f9 e2ed921
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 20 15:56:35 2015 +0200

    Merge pull request #708 from prometheus/fabxc/servdisc
    
    Service discovery and more

commit e2ed9215057b486f874a7e8512fcbb6b940aca42
Merge: 984c2ae 7af85f9
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 20 14:12:34 2015 +0200

    Merge branch 'master' into fabxc/servdisc

commit 7af85f980c7a79c5ebccc04d65589a0fd67dbe8d
Merge: b503628 80986e0
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 20 13:55:28 2015 +0200

    Merge pull request #707 from abraithwaite/source-tar-build
    
    Makefile: allow building from source without git

commit 984c2ae6eaa411984ad0959c4bc9ef49381a2aa9
Merge: ea62fce 7143dff
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 20 12:43:17 2015 +0200

    Merge pull request #698 from prometheus/fabxc/consul_sd
    
    Add initial implementation for SD via Consul.

commit 7143dff02fd1493e5b7859b665d9fafd452edf1c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 14 13:32:27 2015 +0200

    Add initial implementation for SD via Consul.
    
    This commit adds service discovery using Consul's HTTP API and watches
    (long polling) to retrieve target updates.

commit b0c181dc0db9c6ba041224d43cc90e7c71bd1927
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 14 13:32:11 2015 +0200

    Add Consul SD configuration.

commit ab4e3ee594e0361c51c2b17f0d0c38ad142be4af
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 13 23:43:18 2015 +0200

    Add consul api package to godeps.

commit ea62fce5f133a385d68455b69ce5443aacea6e1b
Merge: a703241 ff832d2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 20 11:28:30 2015 +0200

    Merge pull request #705 from prometheus/fabxc/file_label
    
    Attach __meta_filepath label to file SD targets.

commit 80986e0dda68e0f71c5c488431e0b3514545f9f9
Author: Alan Braithwaite <asbraithwaite@gmail.com>
Date:   Tue May 19 22:50:04 2015 -0700

    Makefile: allow building from source without git
    
    This allows for building from a source tarball/zip using
    VERSION=$VERSION make build

commit a703241bf8fb792f2bfe893b6675264538ecf704
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 19 18:12:58 2015 +0200

    Adjust example config to naming changes

commit a216b1cb2748b47eedbedce3597af7c2c9a7935d
Merge: ec9c51a 5d3024f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 19 16:50:05 2015 +0200

    Merge pull request #704 from prometheus/fabxc/cfg_check
    
    Clean storage shutdown on startup errors, require initial config

commit ff832d2e0306d521712975814cc693580ad70dd0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 19 15:24:26 2015 +0200

    Attach __meta_filepath label to file SD targets.

commit ec9c51ab98d882fb642d7477594ade59dcb1d2b2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 19 15:38:51 2015 +0200

    Fix old template naming

commit 5d3024fd3ed97747d477fca23e7e77f7509f001b
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 19 14:38:50 2015 +0200

    Restructure component initialization

commit d8440d75f13a09109735d6f69320bf77dc87ef6a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 18 19:26:28 2015 +0200

    Do not start storage processing before Start() is called.

commit b503628545ed0695a782c053a61399a95a7fb495
Merge: ac4d63b 3e914a8
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 19 13:16:34 2015 +0200

    Merge pull request #702 from mtanda/fix_graph_link
    
    Fix graph links when "web.path-prefix" option is set

commit 198c68045def14dddce658e97a59c29035ef5777
Merge: 2843ff6 8de5061
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 19 12:15:36 2015 +0200

    Merge pull request #703 from prometheus/fabxc/testtime
    
    Increase target test wait times

commit 8de50619f170203e21f1ed3d5bd9ba6e80fefaee
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 19 11:30:42 2015 +0200

    Increase target test wait times
    
    On slow systems such as Travis CI occasionally the tests fail
    because the wait times are too short.

commit 2843ff6a0dd110ade8a04fa31d3e063aaed340dc
Merge: 9ca4786 385919a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 19 10:19:05 2015 +0200

    Merge pull request #701 from prometheus/fabxc/decouple
    
    Avoid inter-component blocking if ingestion/scraping blocks

commit 3e914a8cb1054a499a282201f3da1770211c70cf
Author: Mitsuhiro Tanda <mitsuhiro.tanda@gmail.com>
Date:   Tue May 19 02:44:40 2015 +0900

    fix graph links with path prefix

commit ac4d63b833fb9e74927b5515528c200754407cf9
Merge: 30b346a 0d3012a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 18 19:22:48 2015 +0200

    Merge pull request #689 from prometheus/fabxc/qltest
    
    Add basic testing language, migrate tests

commit 385919a65a284c340fa471a75f23a6746555199d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 18 13:14:41 2015 +0200

    Avoid inter-component blocking if ingestion/scraping blocks.
    
    Appending to the storage can block for a long time. Timing out
    scrapes can also cause longer blocks. This commit avoids that those
    blocks affect other compnents than the target itself.
    Also the Target interface was removed.

commit 0d3012a60556e25261fc7eea5ab5e043fabd2f9e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 13:41:57 2015 +0200

    Migrate matrix tests, remove old test files.

commit 71ef7ab405532a5ff185c7bc102dda23c5351458
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 13:33:17 2015 +0200

    Migrate remaining vector evaluation tests to new testing language.

commit 3c22eded97e8b87cc9ebf178e187b8e72472befc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 12:25:03 2015 +0200

    Migrate literal tests to testing language.

commit eba07a7d3d43ff9b95998cde072c98e57e17cb13
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 12:21:24 2015 +0200

    Migrate histogram tests to test language.

commit 03094eff04a3d860fb0d8c8cfed88ae7fd011ec4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 12:00:28 2015 +0200

    Migrate parsing error tests.
    
    The promql_test checks failure of various bad syntaxed queries.
    Those are moved into the parser tests as the new testing language
    only deals with valid queries.

commit 63219647385ce111c36453d620edb18c37ba05f5
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 11 15:56:35 2015 +0200

    Add parsing and execution of new test format.
    
    This commit adds a new test structure that parses and executes
    the new testing language.

commit a236c0145777bea02cbd1a168fb62ae2585cd725
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 11 14:04:53 2015 +0200

    Add time series description parsing.
    
    This commit adds parsing of time series description to the exisiting
    query language parser. Time series descriptions are defined by a
    metric followed by a sequence of values.

commit d122749b393f195a7ac4d26532c61872a3e3110c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 10:39:10 2015 +0200

    Enhance lexer testing output

commit 30b346a430f69de07e20a26abbd89a34ac216deb
Merge: 4234a45 ce487f7
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon May 18 15:11:18 2015 +0100

    Merge pull request #700 from prometheus/fabxc/binops
    
    Improve vector binops evaluation.

commit 1a2d57b45ca6986c5c298407731044c356c91115
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 18 12:16:25 2015 +0200

    Move template functionality out of target.
    
    The target implementation and interface contain methods only serving a
    specific purpose of the templates. They were moved to the template
    as they operate on more fundamental target data.

commit dbc08d390e38fefc98e8be84b7088e5b7a4fc81f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 18 11:13:13 2015 +0200

    Move target status data into its own object

commit ce487f763efd73398b767c5625b4b5265ef001e3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 16 16:35:52 2015 +0200

    Simplify vector binary evaluation logic

commit 8a109e061b4815b778129ab2e4b877e9e02a9228
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 16 14:00:11 2015 +0200

    Extract OR operation into own eval method.

commit 2c3e9e2e8723bf0edb4e82e89c344b1e17bbeef2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat May 16 13:33:03 2015 +0200

    Extract AND operation into own eval method.

commit 9ca47869ed54832228e6891751b5b950217d63e2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 15 14:54:29 2015 +0200

    Provide full SD configs to discovery constructors.
    
    Some SD configs may have many options. To be readable and consistent, make
    all discovery constructors receive the full config rather than the separate
    arguments.

commit 93548a8882966f5b699d9f87029de0bb963d8a3a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 13 12:03:31 2015 +0200

    Add initial file based service discovery.
    
    This commits adds file based service discovery which reads target
    groups from specified files. It detects changes based on file watches
    and regular refreshes.

commit 36016cb308f4881cfd1ea5399de0611940a1b7c2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 13 11:48:39 2015 +0200

    Add fsnotify to godeps.

commit 3b21c7037af2183f61ceb8e7c3e83deaaa490491
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 13 11:28:04 2015 +0200

    Add file SD to configuration.

commit d5aa012fd01318c7319499cf40f783d2c3adff06
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 15 12:47:50 2015 +0200

    Make HTTP basic auth configurable for scrape targets.

commit 92493603c4112a25353dad1cedc12ca1fcdf9e45
Merge: 3b0777f bb540fd
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 13 23:04:35 2015 +0200

    Merge pull request #694 from prometheus/fabxc/cfg_reload
    
    Implement config reloading on SIGHUP

commit bb540fd9fdd6cffcddf811cf66510a690419b22d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 16:52:56 2015 +0200

    Implement config reloading on SIGHUP.
    
    With this commit, sending SIGHUP to the Prometheus process will reload
    and apply the configuration file. The different components attempt
    to handle failing changes gracefully.

commit 3b0777ff8436bb91e4e3b66e7d6d0eccb3276564
Merge: 1f2209b 4234a45
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 15:46:16 2015 +0200

    Merge branch 'master' into fabxc/servdisc

commit 4234a45d2e1d27dc12ffb61452f44cd4ea874f76
Merge: 921f4f2 8ea94eb
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 12:25:22 2015 +0200

    Merge pull request #693 from prometheus/fabxc/preload_timeout
    
    Check context before each preloading.

commit 8ea94ebb580612a21efaee6a344c110f59c659ce
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 12 12:03:30 2015 +0200

    Check context before each preloading.

commit 1f2209b1597083e4e498636cc17088a10b00dff3
Merge: e020b91 8608712
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 11 18:20:29 2015 +0200

    Merge pull request #680 from prometheus/fabxc/sd_yamlcfg
    
    Switch config to YAML format.

commit 86087120ddc8b75a2fbbf54549cd41fc682af68c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 7 16:47:18 2015 +0200

    Replace example config with new YAML format.

commit 921f4f22caf636ceb78ff714f0bd287f22ccc901
Merge: 2e8a506 43b41c5
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon May 11 18:09:58 2015 +0200

    Merge pull request #690 from prometheus/beorn7/release
    
    Cut 0.13.3.

commit 43b41c56ce469cdaa94447541693578c5ec16a91
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon May 11 17:55:42 2015 +0200

    Cut 0.13.3.

commit 2e8a50649b6907c0c0fc7da33710b1d4b1bed411
Merge: 9fe533e d1a9365
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon May 11 17:15:43 2015 +0200

    Merge pull request #682 from prometheus/beorn7/fingerprint
    
    The desperately awaited collision detection.

commit d1a93655a1fbd4a858964d2580d75f476e4457d0
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon May 11 17:15:30 2015 +0200

    Fix typo.

commit 9fe533e4338959a21b4047b59685ee9fbab9c0f2
Merge: 870ad3e 969c231
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon May 11 12:25:33 2015 +0200

    Merge pull request #688 from prometheus/fabxc/qltest
    
    Make parser more strict about identifiers, extract number parsing

commit 969c23119127f237006f8a3bd0160b282db2c616
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 11 11:45:23 2015 +0200

    Make parser more strict about identifiers, extract number parsing

commit 870ad3e32e4ff98749bd1745c93c3f4148a04c7d
Merge: 1b3d3b4 e04d05d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 11 09:39:19 2015 +0200

    Merge pull request #687 from prometheus/fabxc/tmpl_query
    
    Do implicit conversion in template queries.

commit e04d05d8b3cc42db1651395817907c1dc6584667
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon May 11 09:12:28 2015 +0200

    Do implicit conversion in template queries.

commit 7c6466d476c48e43fed92943751dd56d74d82e39
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri May 8 18:10:56 2015 +0200

    Reserve only ~1M FPs for the mapping.
    
    That reduces the chance of having a fingerprint in the reserved area.

commit 1b3d3b4d5cdd09978f3348617df8f8728c5db278
Merge: b404ad5 8707c54
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri May 8 16:49:53 2015 +0200

    Merge pull request #685 from prometheus/fabxc/quptes
    
    Fix single quote parsing, add tests

commit 8707c54508a85de382359672d38e9000aecf589a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 8 16:43:02 2015 +0200

    Fix single quote parsing, add tests

commit ac75dc2812f692eea527c084620ed93be031c0c9
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri May 8 16:36:46 2015 +0200

    Avoid archive lookup for known mapped FPs.

commit ed810b45bf73a40c3c486e5e2417c64bc8daffaf
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri May 8 13:35:39 2015 +0200

    Improvements after review.

commit c36e0e05f12287b82741b7702dc1fd4838bd2d2e
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu May 7 18:58:14 2015 +0200

    Add crash recovery of fingerprint mappings.

commit 2235cec175eb471a2b5789f8ccb31821cf24498e
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed May 6 16:53:12 2015 +0200

    Handle fingerprint collisions.

commit 5fbde88919eceb18dc5ebbc2696b3da237073af8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 7 10:55:03 2015 +0200

    Switch config to YAML format.

commit b404ad5c91ff4858338d4890dbdbecf7b88b943e
Merge: 2579606 0dc8f3c
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu May 7 12:28:25 2015 +0200

    Merge pull request #678 from prometheus/remove-rules-target
    
    Remove obsolete "rules" target from main Makefile.

commit 0dc8f3cb04aa4dccf949353e06f26d7792955444
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu May 7 11:59:06 2015 +0200

    Remove obsolete "rules" target from main Makefile.

commit 2579606e77121f8021e123056fb3fdd06790c1e6
Merge: 498b85f 1dd0b77
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu May 7 11:39:26 2015 +0200

    Merge pull request #676 from prometheus/fabxc/promql
    
    Query/rules refactoring

commit 66ecc420ef3301042a3245a630f3f6dc137727a6
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu May 7 11:06:27 2015 +0200

    Add gopkg.in/yaml.v2 godep.

commit 1dd0b772cbef5c9025c9250da5572a1afeaa142d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 6 13:21:28 2015 +0200

    Fix missing Godep entry.

commit eeca323d24d6180817e7c11f6083f794b8f816e6
Merge: b365947 498b85f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 6 13:04:54 2015 +0200

    Merge branch 'master' into promql

commit 498b85f05f2113ca009cd9f80512c714ab935b39
Merge: f4d90a1 bb141fd
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed May 6 12:24:06 2015 +0200

    Merge pull request #673 from prometheus/beorn7/fingerprint
    
    Use FastFingerprint where appropriate.

commit bb141fd3db2a485bdca5935907a82453f3b79c96
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed May 6 12:14:05 2015 +0200

    Updated vendoring.
    
    This pulls in the required changes in client_golang.

commit 9820e5fe9984ac18540e8a28eab9d3813d348df3
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue May 5 18:17:51 2015 +0200

    Use FastFingerprint where appropriate.

commit b365947bc433147317f91b707d859789438d05bf
Merge: d59d1cb 9ab1f6c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed May 6 11:36:33 2015 +0200

    Merge pull request #666 from prometheus/fabxc/pql/gate
    
    Limit maximum number of concurrent queries.

commit 9ab1f6c690940187b227cdd6ec591349abf0f5aa
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 1 00:49:19 2015 +0200

    Limit maximum number of concurrent queries.
    
    A high number of concurrent queries can slow each other down
    so that none of them is reasonbly responsive. This commit limits
    the number of queries being concurrently executed.

commit f4d90a105ecefce579c9c598fc50301c9a084803
Merge: 874ff19 36023ed
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 6 11:11:07 2015 +0200

    Merge pull request #672 from prometheus/release-0.13.2
    
    Release 0.13.2

commit 36023ed2138f2309dc002998bebbf139db5952f8
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue May 5 20:29:23 2015 +0200

    Cut 0.13.2

commit 874ff194c415b8f75d198ac2343ba372af428d31
Merge: b8fa0a9 ab3e08e
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 6 10:27:17 2015 +0200

    Merge pull request #671 from prometheus/add-rule-checker-to-archive
    
    Include tools/rule_checker/rule_checker in tarball

commit e020b9160334e0222d99532a26b1468e8351e078
Merge: d108366 8f75ff0
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue May 5 19:10:36 2015 +0200

    Merge pull request #669 from prometheus/fabxc/sd_warn
    
    Add warning about config changes.

commit ab3e08e070a1ecf936832e380bc0817fef840802
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue May 5 18:24:57 2015 +0200

    Add rule_checker and console templates to archive

commit 8f75ff0513d4a68948a98e4b5930a189bd1fd7ae
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue May 5 14:04:41 2015 +0200

    Add warning about config changes.

commit d59d1cb2c1be4c3d8649eaec9ad9b2a4d700d2d3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri May 1 17:58:58 2015 +0200

    Fix Error() methods.

commit d108366cd6ade675e3da5be95372f317369b3570
Merge: cb35b7d b5a8f7b
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 30 23:58:10 2015 +0200

    Merge pull request #662 from prometheus/fabxc/sd_cfg
    
    Cleanup, test, and document config.

commit b8fa0a9f8dc845af86fc9c590db04394a37dbbcf
Merge: 44d2f7c e5f92d3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 30 23:54:09 2015 +0200

    Merge pull request #665 from chkno/master
    
    Fix storage/local tests for 32-bit systems

commit e5f92d35fec1ad8702becd2a8dd2dae5a479c709
Author: Scott Worley <scottworley@scottworley.com>
Date:   Thu Apr 30 14:19:48 2015 -0700

    Fix storage/local tests for 32-bit systems

commit 44d2f7c9ba92bd50ba181b03b2e05757edc2177c
Merge: fb3b464 049b8ea
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 30 21:50:17 2015 +0200

    Merge pull request #664 from fabxc/gitignore
    
    Add *.rules to ignored files.

commit 049b8eaafb33d8322cf33b97c5082c424b86324d
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 30 21:40:27 2015 +0200

    Add *.rules to ignored files.

commit b5a8f7b8fabe5a2b5213347c3006612fc52265b1
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 30 21:15:18 2015 +0200

    Cleanup, test, and document config.

commit cb35b7d0e7392df0cea57d72324236d4b28f5217
Merge: e668b36 945c49a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 30 19:43:15 2015 +0200

    Merge pull request #657 from prometheus/fabxc/sd_relabel
    
    Add relabelling to target management.

commit 945c49a2dd869dd332e96f3b4b3a9ae20d9154ff
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 29 00:08:58 2015 +0200

    Add relabelling to target management.
    
    This commit adds a relabelling stage on the set of base
    labels from which a target is created. It allows to drop
    targets and rewrite any regular or internal label.

commit 6649306e6394dad91be62dcccad235cf2f07167d
Merge: adba3b4 279831c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 30 13:31:13 2015 +0200

    Merge pull request #660 from prometheus/fabxc/pql/parse-errs
    
    Fix and improve parsing error output.

commit 279831cdf125e37dc56131bb9d6ccd5ca56a10a0
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 29 16:35:18 2015 +0200

    Fix and improve parsing error output.

commit adba3b4daa6c8918068340ea82f84307fe2b0fbd
Merge: 8d7c479 fe93517
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 29 22:55:53 2015 +0200

    Merge pull request #661 from prometheus/fabxc/pql/rule-stmts
    
    Stop routing rule statements through the engine.

commit fe935179cdc6ef415d581aa06e4e5405a5cac09f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 29 11:08:56 2015 +0200

    Stop routing rule statements through the engine.

commit 8d7c479fed5f310a031aed413be48d461036d1f6
Merge: 43e291e 479891c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 29 16:54:21 2015 +0200

    Merge pull request #658 from prometheus/fabxc/pql/rules-manager
    
    Rename RuleManager to Manager, remove interface.

commit 43e291e978f0fed44f0f8894d1c487510297127e
Merge: 95fbe51 25cdff3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 29 16:50:15 2015 +0200

    Merge pull request #659 from prometheus/fabxc/pql/parse-err
    
    Remove `name` arg from `Parse*` functions, enhance parsing errors.

commit 479891c9be688e35de03f2db4619eeceeacaed68
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 29 10:26:49 2015 +0200

    Rename RuleManager to Manager, remove interface.
    
    This commits renames the RuleManager to Manager as the package
    name is 'rules' now. The unused layer of abstraction of the
    RuleManager interface is removed.

commit 25cdff3527ae3bc382c02cbf33b1e4358e2a71f3
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 29 11:36:41 2015 +0200

    Remove `name` arg from `Parse*` functions, enhance parsing errors.

commit e668b361bcfc2bc576dd33a4a87416953ce6aaa6
Merge: dad766e 0b619b4
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 29 00:02:50 2015 +0200

    Merge pull request #654 from prometheus/fabxc/sd_cfg
    
    Change JobConfig to ScrapeConfig.

commit 0b619b46d678f586f84b89cdd95e1fa10b024adf
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 25 12:59:05 2015 +0200

    Change JobConfig to ScrapeConfig.
    
    This commit changes the configuration interface from job configs to scrape
    configs. This includes allowing multiple ways of target definition at once
    and moving DNS SD to its own config message. DNS SD can now contain multiple
    DNS names per configured discovery.

commit 95fbe51c5091aa74a4963aa718e2a63d719e1a18
Merge: 555b630 3ca11bc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 28 17:56:49 2015 +0200

    Merge pull request #655 from prometheus/fabxc/promql_3
    
    Switch Prometheus to promql package.

commit 3ca11bcaf58685d3994d6f643fff57075cbed595
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 30 19:43:19 2015 +0200

    Switch Prometheus to promql package.
    
    This commit removes all functionality from rules/ that is now handled in
    promql/.
    All parts of Prometheus are changed to use the promql/ package.

commit 555b630b52abe2aed7c75405b97de8b3f6fa710e
Merge: 089f019 5602328
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 28 14:23:19 2015 +0200

    Merge pull request #650 from prometheus/fabxc/promql_2
    
    Refactor query evaluation.

commit 5602328c7ce724d9d0fb395147771f4fedabcb2f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 30 19:13:36 2015 +0200

    Refactor query evaluation.
    
    This copies the evaluation logic from the current rules/ package.
    The new engine handles the execution process from query string to final result.
    It provides query timeout and cancellation and general flexibility for
    future changes.
    
    functions.go: Add evaluation implementation. Slight changes to in/out data but
    	not to the processing logic.
    quantile.go: No changes.
    analyzer.go: No changes.
    engine.go: Actually new part. Mainly consists of evaluation methods
    	which were not changed.
    setup_test.go: Copy of rules/helpers_test.go to setup test storage.
    promql_test.go: Copy of rules/rules_test.go.

commit dad766e7947f5c8a337c2b3e5ec19cc0ef73f496
Merge: 9042b4f 5015c2a
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 27 18:30:33 2015 +0200

    Merge pull request #645 from fabxc/fabxc/sd
    
     Make target manager source based.

commit fb3b464f7db90559053876761410ec1f478c6179
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Apr 24 17:29:42 2015 +0200

    Write rule_checker to /bin/rule_checker

commit 166f492a0e322edf6441ab925d3c26cf0d9c5715
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Apr 24 16:12:31 2015 +0200

    Remove /etc/prometheus from volume definition

commit 2bb3efc69d8797909d520286d9a7b6566119db9e
Merge: 16920f4 af99960
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Apr 24 16:07:03 2015 +0200

    Merge pull request #649 from sdurrheimer/master
    
    Small size docker image refactoring

commit 5015c2a0e8f4f63cd949f1aa2bb4eba0b382189f
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 20 12:24:25 2015 +0200

    Make target manager source based.
    
    This commit shifts responsibility for maintaining targets from providers and
    pools to the target manager. Target groups have a source name that identifies
    them for updates.

commit af99960974d2d75d8fe04a6650ae8cb579b5f559
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Thu Apr 23 21:15:23 2015 +0200

    Small size docker image refactoring
    
    Signed-off-by: Steve Durrheimer <s.durrheimer@gmail.com>

commit 089f019660dfb9eb459103727d67003d5fb4b311
Merge: 54f5c52 32b7595
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Thu Apr 23 16:10:56 2015 +0200

    Merge pull request #639 from fabxc/fabxc/promql_1
    
    Create promql package with lexer/parser.

commit 32b7595c4771b193b5869f5a97f935e404f16e30
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 30 18:12:51 2015 +0200

    Create promql package with lexer/parser.
    
    This commit creates a (so far unused) package. It contains the a custom
    lexer/parser for the query language.
    
    ast.go: New AST that interacts well with the parser.
    lex.go: Custom lexer (new).
    lex_test.go: Lexer tests (new).
    parse.go: Custom parser (new).
    parse_test.go: Parser tests (new).
    functions.go: Changed function type, dummies for parser testing (barely changed/dummies).
    printer.go: Adapted from rules/ and adjusted to new AST (mostly unchanged, few additions).

commit 16920f46667062cc03348220a665480811670790
Merge: fa42ed0 a0c8b9a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 23 14:24:11 2015 +0200

    Merge pull request #648 from cesanta/cesanta
    
    Make prepare{Instant,Range}Query public

commit a0c8b9abbed1e648936084d2d2d8c08717480275
Author: rojer <rojer@rojer.me>
Date:   Thu Apr 23 11:52:08 2015 +0100

    Make Prepare{Instant,Range}Query public
    
    Useful for embedding the query engine.

commit 9042b4f0813a7f7e71fec21e0f8ff786af3e5bbf
Merge: fa42ed0 4f8673a
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Apr 20 01:59:29 2015 +0200

    Merge pull request #644 from fabxc/fabxc/sdprep

commit 4f8673aa883438f3283627be12b6b781c0436f60
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sun Apr 19 08:39:33 2015 +0200

    Simplify update sync for targets, format config fixtures.

commit fa42ed0e7e4636a231f818b1b353af673e5e9830
Merge: e681a57 6c1689f
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 17 17:11:15 2015 +0200

    Merge pull request #642 from brian-brazil/sort-nan
    
    Sort NaN as the lowest value.

commit 6c1689f0c64c4580501c604970dded23d0de9572
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Apr 17 15:49:17 2015 +0100

    Sort NaN as the lowest value.
    
    Currently it ends up in a random position.

commit e681a57d73eb3c68c2458c582bfcb8c0dae58dd1
Merge: f35e5b5 c3a2b63
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 17 01:36:44 2015 +0200

    Merge pull request #641 from prometheus/stddev
    
    Add stddev and stdvar aggregation functions.

commit c3a2b63fe926d5bbf054a2900af7d14c798405ed
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Fri Apr 17 00:12:04 2015 +0100

    Add stddev and stdvar aggregation functions.
    
    This adds the population standard deviation and
    variance as aggregation functions, useful for
    spotting how many standard deviations some samples
    are from the mean.

commit f35e5b54cc2cab3a7dbf686369c5e94386bd6f8f
Merge: 54f5c52 74aed55
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 17 00:23:33 2015 +0200

    Merge pull request #640 from prometheus/pow
    
    Add square root function

commit 74aed55e558408d494eca517aebad05b60b25684
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Thu Apr 16 23:19:04 2015 +0100

    Add square root function

commit 54f5c524e511d96770f8b0f2353c11bc6401f3ee
Merge: ad7ef40 0280d74
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 15 14:14:04 2015 +0200

    Merge pull request #637 from fabxc/fix/scrape_timeout
    
    Fix scrape timeout in config.

commit 0280d74167b14cf17992765284e9ac9f4948611e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Wed Apr 15 13:46:27 2015 +0200

    Fix scrape timeout in config.
    
    The scrape timeout helper was wrapping the scrape interval.

commit ad7ef406d3ce050b1c60ac7c3279e66b0b08734b
Merge: defcafb a052d32
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Apr 14 16:11:24 2015 +0200

    Merge pull request #635 from prometheus/beorn7/persistence
    
    Improve chunk and chunkDesc loading.

commit defcafb33c7685c0dbb336322c15064b7c179bb2
Merge: c44c81e 77ddbad
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Apr 14 13:42:49 2015 +0200

    Merge pull request #636 from sdurrheimer/master
    
    Dockerfile improvements

commit a052d326095e6d7af2a587c5b65c7763c2a4c50e
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 14 10:49:43 2015 +0200

    Comment improvement.

commit 66fc61f9b77776cd4234c302f192508ce744dbf5
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Apr 14 10:43:09 2015 +0200

    Make bufPool a member of the persistence struct.

commit 77ddbad97fdf4c6e5e740216f96d1823f9c6dcce
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Tue Apr 14 10:01:28 2015 +0200

    Duplicated packages already present in inherited images (mercurial => buildpack-deps:jessie-scm, gcc => golang:1.4)
    
    Signed-off-by: Steve Durrheimer <s.durrheimer@gmail.com>

commit 5a284257f06e8c9be4648aed4e8a7b80b2310025
Author: Steve Durrheimer <s.durrheimer@gmail.com>
Date:   Tue Apr 14 09:36:34 2015 +0200

    Better package cache cleanup
    
    Signed-off-by: Steve Durrheimer <s.durrheimer@gmail.com>

commit b02d900e6117dddda68916a84671681f22365309
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Apr 13 20:20:26 2015 +0200

    Improve chunk and chunkDesc loading.
    
    Also, clean up some things in the code (especially introduction of the
    chunkLenWithHeader constant to avoid the same expression all over the place).
    
    Benchmark results:
    
    BEFORE
    BenchmarkLoadChunksSequentially     5000            283580 ns/op          152143 B/op        312 allocs/op
    BenchmarkLoadChunksRandomly        20000             82936 ns/op           39310 B/op         99 allocs/op
    BenchmarkLoadChunkDescs            10000            110833 ns/op           15092 B/op        345 allocs/op
    
    AFTER
    BenchmarkLoadChunksSequentially    10000            146785 ns/op          152285 B/op        315 allocs/op
    BenchmarkLoadChunksRandomly        20000             67598 ns/op           39438 B/op        103 allocs/op
    BenchmarkLoadChunkDescs            20000             99631 ns/op           12636 B/op        192 allocs/op
    
    Note that everything is obviously loaded from the page cache (as the
    benchmark runs thousands of times with very small series files). In a
    real-world scenario, I expect a larger impact, as the disk operations
    will more often actually hit the disk. To load ~50 sequential chunks,
    this reduces the iops from 100 seeks and 100 reads to 1 seek and 1
    read.

commit c563398c68ca619a7e10fe0db95dd5e63f8b2c37
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Apr 13 16:59:52 2015 +0200

    Remove obsolete debug message.

commit c44c81ebb07ba5afee08f75a921616c1adfd600e
Merge: 15cd8b3 36184f3
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sun Apr 12 01:34:50 2015 +0200

    Merge pull request #634 from fabxc/fix/dns-error
    
    Show correct error on wrong DNS response.

commit 36184f3530a590f66fbc104fadf73773ad8bedc2
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Apr 11 16:14:38 2015 +0200

    Show correct error on wrong DNS response.

commit 15cd8b31349b314a9ab489ce40ecc5de384ed201
Merge: 04a078f f81cbb0
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Apr 10 14:57:52 2015 +0200

    Merge pull request #633 from prometheus/beorn7/doc
    
    Add warning about tarballs.

commit f81cbb00c623a14ae750e1ee0751f0ba2cf2e4e6
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Apr 10 13:53:32 2015 +0200

    Add warning about tarballs.

commit 04a078f5d4813e51d02fdb1ce8c17243de1f241b
Merge: dc8c9a3 54fc50e
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Apr 9 16:41:06 2015 +0200

    Merge pull request #631 from prometheus/beorn7/release
    
    Cut 0.13.1.

commit 54fc50e58c8fa2110994312004597d65efef33e0
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 9 16:36:04 2015 +0200

    Cut 0.13.1.

commit dc8c9a37ceb0a6601b5d25d3d3eaec4600817f80
Merge: 49d67fc c5fa0b9
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Apr 9 16:31:15 2015 +0200

    Merge pull request #630 from prometheus/beorn7/persistence
    
    Fix the case where a series in memory has 0 chunks, but chunks on disk.

commit c5fa0b90c3d2ea0e750e71df60e49b06706e1948
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 9 15:57:11 2015 +0200

    Fix the case where a series in memory has 0 chunks, but chunks on disk.
    
    This is actually completely normal for a freshly unarchived series.
    
    Test added to expose.

commit 49d67fc834c11066e2a87b003e6efb898d0bd287
Merge: 2d7d1a3 7d71d35
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Wed Apr 8 17:51:29 2015 -0400

    Merge pull request #629 from prometheus/improve-usage-formatting
    
    Improve readability of usage text

commit 7d71d354fd127f8c23fa63a195a88aa4333ea6fe
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Wed Apr 8 17:36:15 2015 -0400

    Remove special listing of config.file in usage
    
    The -config.file parameter isn't required or any more special than the
    other flags. In order to avoid confusion, this change removes the
    special mention again. Instead, the error message if a config file
    couldn't be loaded is changed to mention the flag name.

commit 35a44509fbaac759ee4d837fa3b7623182cb38f9
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Wed Apr 8 17:02:22 2015 -0400

    Improve readability of usage text
    
    Separates flag and description by a newline to make it easier to read
    the flags with long descriptions.

commit 2d7d1a34b6abbf948df275b2393b5d225a31b2f4
Merge: 7991b4b cb1650b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Apr 8 18:51:43 2015 +0200

    Merge pull request #628 from prometheus/beorn7/release
    
    Update vendoring and release 0.13.0.

commit cb1650b5a9aac5eff05e5b30f3b43b960c1fd5a5
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Apr 8 18:40:14 2015 +0200

    Cut v0.13.0.

commit 191c728152d2b10c3c9415a8b99918464e5d508c
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Apr 8 18:24:23 2015 +0200

    Update vendoring.

commit 7991b4be51f4af89f7524c3889e651a4f3663cd6
Merge: e1b5f18 c012ca6
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Apr 8 13:50:27 2015 +0200

    Merge pull request #627 from fabxc/flag_grouping
    
    Make help output readable.

commit c012ca6039290f7f26db11c4a78df9f4d5d60257
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Apr 7 18:51:45 2015 +0200

    Make help output readable.
    
    This commit increases the usability by grouping flags based on their
    first dot-separated group. Long flag descriptions are broken into lines
    printed with indentation.

commit e1b5f18deedfb94cde5b33895d71d40b506c374e
Merge: d8e515e 6f5f33b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Apr 7 17:19:35 2015 +0200

    Merge pull request #626 from quinox/fix-625
    
    #625 Fix incorrect consoles URL

commit d8e515e9cb9f0f6654007f4fe79eed575bab5186
Merge: 059ab93 593e565
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Apr 7 13:23:06 2015 +0200

    Merge pull request #617 from prometheus/influxdb-write-support
    
    Add experimental InfluxDB write support.

commit 6f5f33bd4df825454668bed326223755537c1786
Author: Ceesjan Luiten <ceesjan@ytec.nl>
Date:   Mon Apr 6 17:30:13 2015 +0200

    #625 Fix incorrect consoles URL

commit 059ab9383f9decf39d106a6c95899e925ef7b1c5
Merge: 440d5df 0e18784
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 2 20:49:21 2015 +0200

    Merge pull request #614 from quinox/master
    
    Make all URLs absolute to support proxies

commit 0e18784c643bb07c18d48f994fed0540b40d671f
Author: Ceesjan Luiten <ceesjan@ytec.nl>
Date:   Tue Mar 24 22:04:38 2015 +0100

    Make all paths absolute to support proxies

commit 593e565688daeca559edcbe276e46c70ac578605
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 2 20:20:00 2015 +0200

    Allow writing to InfluxDB/OpenTSDB at the same time.

commit 440d5df6e2e2f8771d5df5c7a0dd24471bc30ac0
Merge: 621ac10 4a452b4
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Apr 2 14:30:06 2015 +0200

    Merge pull request #621 from prometheus/beorn7/release
    
    Cut release 0.13.0rc2.

commit 4a452b42748563a2f07813cd87a2fe19fba528b5
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Apr 2 14:25:02 2015 +0200

    Cut release 0.13.0rc2.

commit 621ac10060a432e13480239495ce2c555d6cd13e
Merge: 9f198cc 3035b8b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Apr 2 14:09:27 2015 +0200

    Merge pull request #620 from prometheus/beorn7/persistence
    
    Adaptively reduce the wait time for memory series maintenance.

commit 3035b8bfdd5f0d80703e31b13d9308fc23645014
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Apr 1 17:52:03 2015 +0200

    Adaptively reduce the wait time for memory series maintenance.
    
    This will make in-memory series maintenance the faster the more chunks
    are waiting for persistence.

commit 9f198cc7b532f424b2cdd28f3f12480de455e195
Merge: b456240 c4e762a
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 1 16:36:56 2015 +0200

    Merge pull request #619 from fabxc/fabxc/rule_checker
    
    Increase the usability of the rule_checker CLI.

commit c4e762adbf6ee7f8fd24af8dc584a64d14974a7e
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 31 16:19:27 2015 +0200

    Increase the usability of the rule_checker CLI.
    
    This commit allows to invoke the rule_checker with a chain of
    filepaths as arguments. If no paths are provided it reads from standard
    input.
    The -rule-file flag remains for backward-compatibility.
    On processing errors the return code is now 1. For bad arguments
    the return code is now 2.

commit 61fb688dd99e1548d88e2be9779d25e26da69370
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Mar 30 02:42:04 2015 +0200

    Add experimental InfluxDB write support.

commit b456240c468bf22f7b02fb66fb740e514e9d3fda
Merge: 52d89b2 5aae273
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 30 20:18:03 2015 +0200

    Merge pull request #612 from prometheus/strip-am-url-slash
    
    Strip trailing slash in alertmanager URL.

commit 52d89b2173e4be1ac0f462ccd70353eff7b8e502
Merge: 7793651 941f585
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 28 20:27:56 2015 +0100

    Merge pull request #616 from brian-brazil/yotta-infinity
    
    Avoid +InfYs and similar, just display +Inf.

commit 7793651b7dd3fe6efa20113c3a1fdf688893440b
Merge: b841ae4 188aec0
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 28 20:24:35 2015 +0100

    Merge pull request #615 from prometheus/api-tests
    
    Add initial HTTP API tests.

commit 941f585164d69b32738ee18b9c1ab7ec728930c9
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Sat Mar 28 18:51:41 2015 +0000

    Avoid +InfYs and similar, just display +Inf.

commit b841ae41cd1e5cecc852aeee859ac143c0299f6b
Merge: 3f2686d fbc44d8
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sat Mar 28 11:56:17 2015 +0100

    Merge pull request #604 from prometheus/beorn7/benchmark
    
    Add benchmark for loading chunks and chunk descs.

commit 188aec0e6d94e7d6c407cf00ec48da14b2bcfe0b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Mar 27 23:45:11 2015 +0100

    Remove now-unused utility.Time type.

commit 33702da8a8f28a4738e92c5ae97b1f749ac8def2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Mar 27 23:43:47 2015 +0100

    Use simple Now() func in API instead of utility.Time.

commit a5a553f1dac028065e27f4de4e435f0d925c4143
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 27 21:27:27 2015 +0100

    Add initial HTTP API tests.
    
    This covers the /query (instant query) endpoint for now. Others to
    follow.

commit 3f2686d0b3f6891508bc4422581a70cb50394017
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 27 18:51:13 2015 +0100

    Remove unused fields from MetricsService.

commit c8a6b73bff9035859a93c8ef0abecb094ba7bbb6
Merge: af832f7 c9b76de
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 27 18:31:51 2015 +0100

    Merge pull request #606 from prometheus/custom-instant-timestamps
    
    Allow custom timestamps in instant query API.

commit c9b76def4ca5f5e7450b22e6c00a750b2e3c920c
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 27 16:48:03 2015 +0100

    Report all query API HTTP errors in JSON format.

commit af832f7641f0cbbf68a671d5136c7dba77a0bed9
Merge: ca94e09 cd82bcf
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 26 18:19:58 2015 +0100

    Merge pull request #613 from prometheus/version-0.13.0rc1
    
    Cut Prometheus 0.13.0rc1.

commit cd82bcff34a1e5fa04aa6e0c063bf0ab55eaca7c
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 24 17:59:55 2015 +0100

    Cut Prometheus 0.13.0rc1.

commit 5aae27302669bd4cf95b0f01f67d2a870f107ea5
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 23 19:17:42 2015 +0100

    Strip trailing slash in alertmanager URL.
    
    Fixes https://github.com/prometheus/prometheus/issues/607

commit ca94e09a2339154482890c7199c669a9b1c0ebf6
Merge: 9426864 ea8a12d
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 23 00:25:34 2015 +0100

    Merge pull request #610 from prometheus/fix-html-escaping
    
    HTML-escape label values in Rickshaw hover-detail.

commit ea8a12db59dd0247dbc6be1b72d155a534fa67b9
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Mar 22 23:47:00 2015 +0100

    Also fix label HTML-escaping in console graphs.

commit 8f6ef04d70ebf1697b313e05da6dd6a9abe2d5bf
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Mar 22 21:59:14 2015 +0100

    HTML-escape label values in Rickshaw hover-detail.

commit df314ead849d7a66a9ef5c79918c459e7811fc6c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Mar 21 17:54:30 2015 +0100

    Remove unnecessary "else" branch in query API.

commit a68b880c2728795d8f818b0c3aa941cb471b1911
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Mar 21 17:50:45 2015 +0100

    Add tests for new timestamp/duration functions.
    
    ...and fix the first bugs in them where they truncate precision below a
    second.

commit cb816ea14aa43361027024b9b7c5865beec2398d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Mar 21 16:58:45 2015 +0100

    Improve timestamp/duration parsing in query API.
    
    Don't handle `0` as a special timestamp value for "now" anymore, except
    in the `QueryRange()` case, where existing API consumers still expect
    `0` to mean "now".
    
    Also, properly return errors now for malformed timestamp/duration
    float values.

commit 8a4acefd66275ecc51878f7dc3f054dae1c21f86
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Mar 20 23:10:58 2015 +0100

    Allow custom timestamps in instant query API.

commit c78436d707276aba0cda318c78a88613c67b82e1
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Mar 20 23:10:26 2015 +0100

    Remove unused API time dependency injection.

commit fbc44d8f957e1f73a7ee014a8445f0fc8bf34585
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 19 19:28:21 2015 +0100

    Add benchmark for loading chunks and chunk descs.

commit 942686427d981914d6f4360e6a4f09b6c9d60919
Merge: bf5fc72 a3bd2f6
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 19 17:56:55 2015 +0100

    Merge pull request #596 from prometheus/beorn7/ingestion-tweaks
    
    Remove the ingestion channel.

commit bf5fc720d30c199dbd92eefddd6eb6d8246b3ee7
Merge: 3c473c6 1d8fc7d
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 19 17:56:46 2015 +0100

    Merge pull request #589 from prometheus/beorn7/persistence
    
    Redesign series maintenance and chunk persistence.

commit a3bd2f6eb81f2b15a6080afb1f5000a88ac160a1
Merge: a075900 5440422
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 19 17:56:03 2015 +0100

    Merge pull request #601 from prometheus/beorn7/rename-persist-queue
    
    Rename persist queue len/cap to num/max chunks to persist.

commit 5440422bcaadb1927970af45b6d4f9b1598ed123
Merge: da7c046 6a21f73
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 19 17:55:37 2015 +0100

    Merge pull request #603 from prometheus/beorn7/storage-resilience
    
    Increase resilience of the storage against data corruption.

commit 6a21f73898d20c1911ae19ea947b8f736b77b07b
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 19 17:54:59 2015 +0100

    Fixes after review.

commit 51d35f4481714958f012855cfaee362fb1b5bc23
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 19 17:06:16 2015 +0100

    Instrument series maintenance durations.

commit 3c473c635be2cb93ea5bb60b57e1350c00aab7a8
Merge: b68ecdd 6fa510d
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 19 16:55:54 2015 +0100

    Merge pull request #600 from prometheus/fix-special-graph-values
    
    More fixes around special values in graphs.

commit 12ae6e920397c12ce501ed982bf561fe70350611
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 19 15:41:50 2015 +0100

    Increase resilience of the storage against data corruption - step 4.
    
    Step 4: Add a configurable sync'ing of series files after modification.

commit 11bd9ce1bdd1b9122b7230ae3c111c62309fcd00
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 19 12:59:26 2015 +0100

    Increase resilience of the storage against data corruption - step 3.
    
    Step 3: Remember the mtime of series files and make use of it to
    detect series files that are not the one the checkpoint thinks they
    are.

commit 6fa510d6fada68cb5e363d2f59c06ceb2d7d041e
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Mar 16 22:50:35 2015 +0100

    More fixes around special values in graphs.

commit e25cca823c4e3321623f2157ea3926757f7651ca
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 19 12:03:09 2015 +0100

    Increase resilience of the storage against data corruption - step 2.
    
    Step 2: Add a flag -storage.local.pedantic-checks to check every
    series file.
    
    Also, remove countPersistedHeadChunks channel, which is unused.

commit 3d8d8928befefd8452e966d7584e20196367d8a4
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 18 19:58:47 2015 +0100

    Increase resilience of the storage against data corruption - step 1.
    
    Step 1: Admit the problem by turning the various "panic"s into logged
    errors, followed by marking the persistence as dirty.

commit da7c0461c6948ca7640dfe779caa213e15cfb1a6
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 18 19:36:41 2015 +0100

    Rename persist queue len/cap to num/max chunks to persist.
    
    Remove deprecated flag storage.incoming-samples-queue-capacity.

commit a075900f9a98d114d542fc8f34a016c8a23f805e
Merge: fa1935a 1d8fc7d
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 18 19:09:31 2015 +0100

    Merge branch 'beorn7/persistence' into beorn7/ingestion-tweaks

commit 1d8fc7d56f0d947efda5cf20c98dd1f535aa0ac8
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 18 19:09:07 2015 +0100

    Change minor things after code review.

commit 1a86dd38930af586c68784ce789c7ce67bbe9bdc
Merge: 3f81622 b68ecdd
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 18 18:57:55 2015 +0100

    Merge branch 'master' into beorn7/persistence

commit fa1935a64476a8d1fb419b39b603453cad82ab6a
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 18 18:53:43 2015 +0100

    Remove /api/targets call and do not show job and instance labels on status.
    
    /api/targets was undocumented and never used and also broken.
    
    Showing instance and job labels on the status page (next to targets)
    does not make sense as those labels are set in an obvious way.
    
    Also add a doc comment to TargetStateToClass.

commit b68ecdd451d4faf2b4eaf2ed8051308a90362238
Merge: 36531b5 624f27f
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 16 19:42:56 2015 +0100

    Merge pull request #599 from fabxc/fabxc/logexp
    
    Add ln, log2, log10 and exp functions

commit 624f27f4b6f10baa88aa7c78a3ddd35fd2cd8717
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Mon Mar 16 15:57:47 2015 +0100

    Add ln, log2, log10 and exp functions to the query language.

commit 3f81622628e96c904235498523df0120afbbcd75
Merge: 0056eae 36531b5
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 16 15:21:31 2015 +0100

    Merge branch 'master' into beorn7/persistence

commit 36531b52783cbd9b519bad02ddd699e26485af36
Merge: 60c7748 5bea942
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Mar 16 14:53:58 2015 +0100

    Merge pull request #593 from prometheus/beorn7/chunk-encoding
    
    Improve various things around chunk encoding.

commit 60c7748a179541304e4c43f073e019d7aad9c7bd
Merge: 6b0ef50 b265102
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 16 14:52:45 2015 +0100

    Merge pull request #598 from prometheus/binop-special-float-values
    
    Fix special value handling in division and modulo.

commit b2651027fcb5b713e9d79ce52b0eee82674431a0
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 16 14:23:03 2015 +0100

    Fix special value handling in division and modulo.
    
    This fixes https://github.com/prometheus/prometheus/issues/597

commit be11cb2b07a1f196e31f07538036e4d7d2b5f3b3
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Mar 15 03:36:15 2015 +0100

    Remove the sample ingestion channel.
    
    The one central sample ingestion channel has caused a variety of
    trouble. This commit removes it. Targets and rule evaluation call an
    Append method directly now. To incorporate multiple storage backends
    (like OpenTSDB), storage.Tee forks the Append into two different
    appenders.
    
    Note that the tsdb queue manager had its own queue anyway. It was a
    queue after a queue... Much queue, so overhead...
    
    Targets have their own little buffer (implemented as a channel) to
    avoid stalling during an http scrape. But a new scrape will only be
    started once the old one is fully ingested.
    
    The contraption of three pipelined ingesters was removed. A Target is
    an ingester itself now. Despite more logic in Target, things should be
    less confusing now.
    
    Also, remove lint and vet warnings in ast.go.

commit 0056eaeb4f42d9360752378049d92d2d0101a07a
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 9 02:33:10 2015 +0100

    Redesign series maintenance and chunk persistence.

commit 5bea942d8e2cc4e8730510332980275cd983a21a
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Mar 13 15:49:07 2015 +0100

    Improve various things around chunk encoding.
    
    A number of mostly minor things:
    
    - Rename chunk type -> chunk encoding.
    
    - After all, do not carry around the chunk encoding to all parts of
      the system, but just have one place where the encoding for new
      chunks is set based on the flag. The new approach has caveats as
      well, but the polution of so many method signatures is worse.
    
    - Use the default chunk encoding for new chunks of existing
      series. (Previously, only new _series_ would get chunks with the
      default encoding.)
    
    - Use an enum for chunk encoding. (But keep the version number for the
      flag, for reasons discussed previously.)
    
    - Add encoding() to the chunk interface (so that a chunk knows its own
      encoding - no need to have that in a different top-level function).
    
    - Got rid of newFollowUpChunk (which would keep the existing encoding
      for all chunks of a time series). Now only use newChunk(), which
      will create a chunk encoding according to the flag.
    
    - Simplified transcodeAndAdd.
    
    - Reordered methods of deltaEncodedChunk and doubleDeltaEncoded chunk
      to match the order in the chunk interface.
    
    - Only transcode if the chunk is not yet half full. If more than half
      full, add a new chunk instead.

commit 6b0ef506f375702895fdb4aded45aca32aa9b601
Merge: c63dfbf 91da12a
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 14 03:29:58 2015 +0100

    Merge pull request #595 from prometheus/show-special-values-as-gaps
    
    Show special float values as gaps.

commit 91da12ad6ad84c333aac895028812894ffcf49a8
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Mar 13 21:08:22 2015 +0100

    Show special float values as gaps.

commit c63dfbfab575f95ac534df17a0cff7fe794ca740
Merge: d797546 33ef2e4
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Mar 13 16:14:15 2015 +0100

    Merge pull request #592 from prometheus/beorn7/fix
    
    Remove hopelessly outdated tutorial.

commit 33ef2e411b033cca1d67c74d81976c2da628a06a
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Mar 13 15:50:02 2015 +0100

    Remove hopelessly outdated tutorial.

commit d797546b2d209140e98c0fd55aa393c82bdb223e
Merge: 7de2cf2 9ecf935
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 11 23:39:07 2015 +0100

    Merge pull request #590 from prometheus/beorn7/fix
    
    Sync the checkpoints.

commit 9ecf93526dbcacb973b6be42441437e909a104e0
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 11 19:10:51 2015 +0100

    Sync the checkpoints.
    
    Because that's what should be done with checkpoints.

commit 7de2cf2fcecd125534c903c3670cb8e595e27d36
Merge: afa7375 18efed7
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 11 18:45:14 2015 +0100

    Merge pull request #588 from prometheus/update-vendoring
    
    Update vendored client_golang to 0.3.2.

commit 18efed761b62725469887eb5a1422faf6ae635b6
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Mar 11 18:19:03 2015 +0100

    Update vendored client_golang to 0.3.2.
    
    For the Prometheus server, this fixes a bug where rules with a
    right-hand-side that had a metric name would not correctly replace that
    metric name with the left-hand side's rule name.

commit afa7375d365d75d6d8311be506253d3dae3997b2
Merge: d4ef509 853f971
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 11 17:18:57 2015 +0100

    Merge pull request #587 from prometheus/beorn7/chunk-encoding
    
    Actually use double-delta encoding for transcoding. :-o

commit 853f9715405dab736f1aef5fec60cf16523feb59
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 11 16:52:58 2015 +0100

    Actually use double-delta encoding for transcoding. :-o

commit d4ef509b0f4b808133cce7222cb202273854f253
Merge: a9cbcf4 66e768f
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sat Mar 7 23:57:47 2015 +0100

    Merge pull request #579 from prometheus/beorn7/chunk-encoding
    
    Implement double-delta encoded chunks.

commit a9cbcf442d1ceb011cfce7143b09ae142693edfb
Merge: c0b71b2 52ce359
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 7 23:55:45 2015 +0100

    Merge pull request #583 from prometheus/nicer-target-health
    
    Nicer formatting of target health table on /status.

commit 52ce3599c9b5f43cc3e8ab12d6aa561288caeab4
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Mar 7 22:27:39 2015 +0100

    Nicer formatting of target health table on /status.

commit c0b71b2b6ebfccc46082a0017f53871757dc3911
Merge: 38ab8cc 140eede
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 7 23:32:30 2015 +0100

    Merge pull request #582 from prometheus/rename-unreachable
    
    Rename UNREACHABLE to UNHEALTHY.

commit 140eede5e074cef668b4a3157a35023223fad6f2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Mar 7 21:50:02 2015 +0100

    Rename UNREACHABLE to UNHEALTHY.
    
    The current wording suggests that a target is not reachable at all,
    although it might also get set when the target was reachable, but there
    was some other error during the scrape (invalid headers or invalid
    scrape content). UNHEALTHY is a more general wording that includes all
    these cases.
    
    For consistency, ALIVE is also renamed to HEALTHY.

commit 66e768f05e3dd9c0d42bfb66cb98b984981947d1
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Mar 6 17:04:07 2015 +0100

    Improve docstring for chunk type flag.

commit 23ba8a5516fb180644d6c6559750781430392237
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Mar 6 16:03:03 2015 +0100

    Make floats exact again.
    
    This should do the right thing for the old delta chunks, too.

commit a8d4f8af9a3b65ddabe0498f78b2f8c59701a775
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Mar 6 12:53:00 2015 +0100

    Improve minor things after review.
    
    The problem of float precision will be addressed in the next commit.

commit 13fcf1ddbcc987bedf72dfc03b587d38f62421a3
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 4 13:40:18 2015 +0100

    Implement double-delta encoded chunks.

commit 38ab8cc39b074cc5253c5648592ef150968cf0eb
Merge: 9376e05 cbe9234
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Mar 5 14:36:53 2015 +0100

    Merge pull request #580 from prometheus/beorn7/fix
    
    Fix embed-static.sh.

commit cbe92347efc14888ff6fd21a2de22d59d7dbce7e
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Mar 5 14:26:19 2015 +0100

    Fix embed-static.sh.
    
    Some versions of the cd command print out the directory they have
    changed into.

commit 9376e0520f623e8e3fd220948a1be2e158101d03
Merge: 9219aab 5ed8f6c
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 4 20:37:17 2015 +0100

    Merge pull request #578 from prometheus/beorn7/fix
    
    Update persistQueueLength after chunks were persisted.

commit 9219aab87bae3d5957ecf0eac3ed53e8c2b7c106
Merge: 5101c58 3d423b7
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 4 18:51:17 2015 +0100

    Merge pull request #577 from josephwilk/patch-1
    
    typo

commit 5ed8f6c205f70fb0cbb650e5bd413c6f9d0889af
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 4 18:46:16 2015 +0100

    Update persistQueueLength after chunks were persisted.

commit 3d423b7864adc42a959f2c7b4319adbda3eee116
Author: Joseph Wilk <joe@josephwilk.net>
Date:   Wed Mar 4 17:54:48 2015 +0100

    typo

commit 5101c58f6c28c32f13e989015aa871de52fb13a7
Merge: 55dcb55 b986220
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 4 17:00:02 2015 +0100

    Merge pull request #576 from prometheus/beorn7/license-cleanup
    
    Add license files left out by godep.

commit b98622094ff1dd456c97a6b0b6b2a08fc112d65a
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 4 15:48:51 2015 +0100

    Add license files left out by godep.
    
    As it looks, `godep update ...` will preserve the files.
    
    Obviously, if you blow away everything and run a `godep save ...` from
    scratch, those files will be missing again. A `godep save` to add new
    dependencies without blowing away the `Godeps` directory should work
    fine, though.

commit 55dcb55498b43bafe94915a4de7907d6d66b4427
Merge: ecf3449 34396f7
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 4 13:58:57 2015 +0100

    Merge pull request #575 from prometheus/beorn7/release
    
    Cut 0.12.0.

commit 34396f75ea6fba2a429d8ba43f23bbb6fb49ebfb
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 4 13:50:58 2015 +0100

    Cut 0.12.0.

commit 5ed3bf2e4bfb1e6f0ee13dd86516d4c6fb18c7bf
Author: beorn7 <beorn@soundcloud.com>
Date:   Wed Mar 4 13:42:00 2015 +0100

    Update vendoring of client_golang to 0.3.1.

commit ecf3449222e181b07a31a97997f725b5b38b1a1c
Merge: 0a1678b 6874377
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Mar 4 13:02:02 2015 +0100

    Merge pull request #574 from tomprince/patch-1
    
    Use docker volume to store metric data

commit 6874377e9b8921bcede9876eb45492346ef71053
Author: Tom Prince <tom.prince@twistedmatrix.com>
Date:   Tue Mar 3 16:34:35 2015 -0700

    Use docker volume to store metric data

commit 0a1678b5f1e52a77c50ecb022011877580b17f1c
Merge: 9382906 0167083
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Mar 3 19:00:38 2015 +0100

    Merge pull request #573 from prometheus/beorn7/fingerprint
    
    The big and scary fingerprint update.

commit 0167083da61f3ae4122d7989290e46012adf5927
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 3 18:59:39 2015 +0100

    Improvements after review.

commit a18cb29fa8e021571700f1dd3fed1ff13c0792ed
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 3 18:33:39 2015 +0100

    Update vendored client_golang to v0.3.0.

commit 9e85ab0eef4b972301dbfceaf6bced0beabef587
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Mar 3 17:31:49 2015 +0100

    Apply the new signature/fingerprinting functions from client_golang.
    
    This requires the new version of client_golang (vendoring will follow
    in the next commit), which changes the fingerprinting for
    clientmodel.Metric.

commit ebac14eff3b7c0ff993fe1a77874dc7686ff02cd
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Mar 2 20:02:37 2015 +0100

    Add version guard to persistence.

commit 938290624b9d76db4cd3f7bcd77c29157e7588ac
Merge: 0b5dd24 182de6b
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 3 13:43:49 2015 +0100

    Merge pull request #572 from fabxc/fabxc/unary_fix
    
    Fix unary +/- expressions.

commit 182de6b99f39d28d62f79f7497729c7534ecb6fc
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 3 12:16:46 2015 +0100

    Fix unary +/- expressions.
    
    Unary expressions cause parsing errors if they are done in the lexer
    by tokenizing them into the number.
    This fix moves unary expressions to the parser.

commit 0b5dd24fd221342a3f24158405ddda479dee66d5
Merge: cce2f30 6f75407
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 3 13:05:57 2015 +0100

    Merge pull request #554 from fabxc/fabxc/or
    
    or operation and vector matching opts implemented

commit 6f754073d58fd268da8fd7e68d79598c6c31199c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Mar 3 10:58:28 2015 +0100

    Add OR operation and vector matching options.
    
    This commits implements the OR operation between two vectors.
    Vector matching using the ON clause is added to limit the set of
    labels that define a match between two elements. Group modifiers
    (GROUP_LEFT/GROUP_RIGHT) to request many-to-one matching are added.

commit cce2f30a8bd410b53ea3fe774e9d261752cb3ddb
Merge: ae832c9 0ac931a
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 2 13:05:21 2015 +0100

    Merge pull request #567 from prometheus/floats
    
    Support scientific notation and special float values.

commit 0ac931aed1769cbb7aae0765d712db45abca4304
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Mar 1 22:49:06 2015 +0100

    Also support parsing float formats like "2.".

commit c2ab54e9a6e4d4564efdd0521bed920a50e4bc96
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Mar 1 19:18:33 2015 +0100

    Support scientific notation and special float values.
    
    This adds support for scientific notation in the expression language, as
    well as for all possible literal forms of +Inf/-Inf/NaN.
    
    TODO: Keep enough state in the parser/lexer to distinguish contexts in
    which "Inf", "NaN", etc. should be parsed as a number vs. parsed as a
    label name. Currently, foo{nan="bar"} would be a syntax error. However,
    that is an existing bug for all our reserved words. E.g. foo{sum="bar"}
    is a syntax error as well. This should be fixed separately.

commit ae832c9e6308b7d8aaeb45cff49fffa0ac665341
Merge: 795704f 927bb55
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Feb 27 15:19:43 2015 +0100

    Merge pull request #566 from prometheus/beorn7/makefile
    
    Upgrade to go1.4.2.

commit 795704f0df0cd9d2a324d24617015dbd9545a98e
Merge: 8288931 4bff5d2
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Feb 27 14:52:37 2015 +0100

    Merge pull request #565 from fabxc/fabxc/labelmatcher_test
    
    Tests for retrieving fingerprints for label matchers added.

commit 4bff5d29bf1fa151c4d72caa79a90082809b322c
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Fri Feb 27 14:41:43 2015 +0100

    Add tests for retrieving fingerprints for label matchers.
    
    This checks for the basic behaviour of GetFingerprintsForLabelMatchers, that is, whether the different matcher types filter the correct fingerprints and intersections are correct.

commit 927bb55c3d3423bbf92b95ed42dda05846171d82
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 27 14:28:04 2015 +0100

    Upgrade to go1.4.2.

commit 82889319c9e2ba7b2c1ff9ee15ce1ce176a46b54
Merge: 32f7825 e9b90c4
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Feb 27 13:33:35 2015 +0100

    Merge pull request #564 from prometheus/beorn7/release
    
    Cut release 0.11.1

commit 32f7825c3511c351e3e753889195faef7a46e70b
Merge: 78cf64b 9299102
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Feb 27 13:17:55 2015 +0100

    Merge pull request #563 from prometheus/beorn7/fix
    
    Some minor tweaks and bug fixes.

commit e9b90c4ebd5c9d3a7129c614201ba89cfaf11aa0
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 27 11:47:43 2015 +0100

    Cut release 0.11.1.

commit 92991026bb83020f09bc1eee212bfc6daaabd41f
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 27 02:21:12 2015 +0100

    Fix chunkDescsTotal count in case of errors.
    
    Only increment the counter if we actually add the memory series to the
    fingerprintToSeries map.

commit 1db7589081f7428c4f6df29810486b57befddf61
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 27 00:53:52 2015 +0100

    Reduce the capacity of countPersistedHeadChunks.
    
    The capacity is basically how many persisted head chunks we will count
    at most while doing other things, in particular checkpointing. To
    limit the amount of already counted head chunks, keep this number low,
    otherwise we will easily checkpoint too often if checkpoints take long
    anyway.

commit 78cf64bf1d34ae9cf3614be1840b99fc8737467e
Merge: db49fd9 93edd93
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Feb 27 00:10:12 2015 +0100

    Merge pull request #560 from brian-brazil/almost-human
    
    Better handling of edge conditions in humanizeDuration

commit 9406afad723a966c58bc1bb993e80e591324ebc4
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 27 00:06:16 2015 +0100

    Do not double-count non-persisted head chunks on loading.

commit dbc22b972ce8d2d6c12a9c8e6a43004bdeefc943
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 26 23:40:35 2015 +0100

    Check last time in head chunk for head chunk timeout, not first.

commit db49fd965f371cfc1c61606fcc001e3faa9a64d0
Merge: f8cb25e f74f7f2
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Feb 26 22:49:25 2015 +0100

    Merge pull request #562 from prometheus/beorn7/vendoring
    
    Update vendoring.

commit f74f7f2fb17881ce9d3fb4ad0323772065b2514f
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 26 22:08:45 2015 +0100

    Re-rewrite import paths.
    
    Another run of 'godep save' fixed the import path.
    
    So you first have to run 'godep update <packages>' and then a 'godep save'.
    
    Let's see if this satisfies Travis.

commit 08acf744f7e75b07e9e6fc98effde01c8f508074
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 26 19:24:17 2015 +0100

    Update client_golang.

commit 784176d572e0b693e82dfce479423da826d89aa6
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 26 19:15:56 2015 +0100

    Update vendoring.

commit f8cb25e9329a0e1583e280a77730a0866288e914
Merge: 041aa59 edd716e
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Feb 26 19:25:57 2015 +0100

    Merge pull request #559 from prometheus/beorn7/fix
    
    Fix the embarrassing bug introduced in commit 0851945.

commit edd716e63c42e14cc6f4a35c5e1acb69b0d20184
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 26 15:19:44 2015 +0100

    Fix the embarrassing bug introduced in commit 0851945.
    
    In that commit, the 'maintainSeries' call was accidentally removed.
    
    This commit refactors things a bit so that there is now a clean
    'maintainMemorySeries' and a 'maintainArchivedSeries' call.
    
    Straighten the nomenclature a bit (consistently use 'drop' for
    chunks and 'purge' for series/metrics).
    
    Remove the annoying 'Completed maintenance sweep through archived
    fingerprints' message if there were no archived fingerprints to do
    maintenance on.

commit 93edd930a64d5993df13f40b635c39be02c711fb
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Feb 26 17:17:04 2015 +0000

    Better handling of edge conditions in humanizeDuration

commit 041aa59623397c6d083443233c3302c5504a7062
Merge: 136cf66 5f8d7a9
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 23 20:21:59 2015 +0100

    Merge pull request #553 from prometheus/beorn7/release
    
    Version 0.11.0!

commit 5f8d7a9dbd86a707995f747b93c9fb16474ebaa4
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 23 18:26:51 2015 +0100

    Cut release 0.11.0.

commit a4f6edf496e24ec1bca8a31a3373d46b8596b0ed
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 23 18:11:42 2015 +0100

    Vendor client_golang v0.2.0.

commit 136cf661b7d1e1970704707d10211bb8b89b2f05
Merge: 03191cf 1a61bca
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 23 15:30:24 2015 +0100

    Merge pull request #545 from prometheus/beorn7/quantile
    
    Add the histogram_quantile function.

commit 1a61bcae07d5e4c7fcdac53053f917f04d424a72
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 23 15:29:26 2015 +0100

    Fix plural of 'histogram'.
    
    Actually, 'histogram' is Ancient Greek and 3rd declension... ;-)

commit 03191cfc8e85d54630beab63ad3f8d26006e49cb
Merge: 452c889 8a47f8a
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 23 12:42:22 2015 +0100

    Merge pull request #550 from atombender/fix_makefile
    
    Makefile: Calculate $(GOROOT), etc. relative to Makefile

commit 8a47f8a44d98b93c540ea0cf9516fa2ea154b5fa
Author: Alexander Staubo <alex@bengler.no>
Date:   Sun Feb 22 22:30:10 2015 -0500

    Makefile: Calculate $(GOROOT), etc. relative to Makefile instead of using $(PWD), which is not always available (eg., in debuild).

commit 9827e1ccec54810874899759ca3522146982caa4
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Feb 22 00:39:50 2015 +0100

    Update vendoring of client_golang.

commit 17443d288bcf7b0d704ccc3ad1759fd938a8e433
Author: beorn7 <beorn@soundcloud.com>
Date:   Sun Feb 22 00:25:02 2015 +0100

    Avoid copying of the COWMetric if we already have the metric available.

commit 9e7c3e3bcd5767e64848e94c91458d978ab3f5b7
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 19 19:56:45 2015 +0100

    Add the histogram_quantile function.
    
    Since we are now getting really deep into floating point calculation,
    the tests had to take into account the precision loss. Since the rule
    tests are based on direct line matching in the output, implementing
    the "almost equal" semantics was pretty cumbersome, but here we are.

commit 452c88964ac918deae65157465c70ce545bce96d
Merge: 79834ed 42601ac
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Feb 21 17:55:26 2015 +0100

    Merge pull request #546 from prometheus/fix-label-grouping
    
    Fix aggregation grouping key calculation.

commit 42601acfdeda9422d6941f29efddcdb84acc8dff
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Feb 21 17:45:47 2015 +0100

    Replace labelsToKey() with metric Fingerprint (fixes grouping bug).

commit 7fefccd92996688f9c1582762c497b699166541c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Feb 21 17:19:13 2015 +0100

    Write() directly into hash and use model.SeparatorByte.

commit 645cf57bed9f9edb52d6ee72b5380788b3e057d7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Feb 21 14:05:50 2015 +0100

    Fix aggregation grouping key calculation.

commit 79834edcb5dea3cffc5552e2210d00820ab9d4c5
Merge: 79bf5a2 0d0bb3c
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Feb 20 17:34:04 2015 +0100

    Merge pull request #544 from q3k/feature/hide-instance-auth
    
    Hide HTTP auth parts from instance label

commit 0d0bb3c030dcadd0c16091842c4b2de44ef7cd47
Author: Sergiusz 'q3k' Bazański <q3k@q3k.org>
Date:   Fri Feb 20 16:21:13 2015 +0100

    Change instance identifiers to be host:port
    
    This changes the PublicURL function into InstanceIdentifier, which now
    returns a simple <host>:<port> string instead of a full URL.

commit bb69a3d2843061c3f6728f6e29a13d73730d3457
Author: Sergiusz 'q3k' Bazański <q3k@q3k.org>
Date:   Thu Feb 19 18:58:47 2015 +0100

    Hide HTTP auth parts from URL
    
    This  instroduces an extra function in the Target interface (PublicURL)
    which is used to populate the instance field in scraped metrics.

commit 79bf5a278eb1b556cdc84d106a869bb866556898
Merge: 2dd70b8 05a746b
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Thu Feb 19 11:19:44 2015 +0000

    Merge pull request #543 from kormat/cpucount
    
    Add cpu count to rhs table on node cpu console

commit 05a746bf953cd93bbae9a42e288559ab60e6255b
Author: Stephen Shirley <kormat@gmail.com>
Date:   Thu Feb 19 11:06:23 2015 +0100

    Add cpu count to rhs table
    
    Also fix formatting of bounded values to be more readable.

commit 2dd70b8c1312c64f0bc4fcd3b9cd23891c66ad58
Merge: c069c0d 5adcec3
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 19 00:23:39 2015 +0100

    Merge pull request #542 from prometheus/I-cant-believe-its-not-federation
    
    Proof of concept for federation via console templates.

commit 5adcec301837580de5fd05a8b75714661ec24d66
Author: Brian Brazil <brian.brazil@gmail.com>
Date:   Wed Feb 18 22:57:20 2015 +0000

    Proof of concept for federation via console templates.
    
    This exposes samples via the console templates in the
    text exposition format, which the parser will fall back to.
    
    This is not a proper federation solution, but should tide us
    over for now. Extenions could include passing in a query or queries in
    the url parameters.

commit c069c0dafa0de1c002583e2090cd51d4904ace98
Merge: 40b0a1a 15b2b5a
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 18 14:48:56 2015 +0100

    Merge pull request #536 from prometheus/offset
    
    Implement offset operator.

commit 40b0a1ac0d3ce9c79db805d1a3a3453c505629ab
Merge: 79a4a6d fbcbb6a
Author: Brian Brazil <brian-brazil@users.noreply.github.com>
Date:   Wed Feb 18 10:36:08 2015 +0000

    Merge pull request #537 from kormat/master
    
    Fix available memory calculation.

commit fbcbb6a6350cbae56d42cd95be53d6e08932d96d
Author: Stephen Shirley <kormat@gmail.com>
Date:   Wed Feb 18 11:26:29 2015 +0100

    Fix available memory calculation.
    
    Also account for buffers, making the value match the output of free(1)

commit 15b2b5aa664af29268ce281ab921f9e4e92741d4
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 18 02:56:40 2015 +0100

    Add tests for invalid uses of "offset".

commit 67e20acc6c138dd7851384fc905588f904f65a84
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 18 02:44:55 2015 +0100

    Lower-case some package-internal names.

commit 72d7b325a1e4eca096f12fc1a0ca861048cfc071
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 18 02:30:41 2015 +0100

    Implement offset operator.
    
    This allows changing the time offset for individual instant and range
    vectors in a query.
    
    For example, this returns the value of `foo` 5 minutes in the past
    relative to the current query evaluation time:
    
        foo offset 5m
    
    Note that the `offset` modifier always needs to follow the selector
    immediately. I.e. the following would be correct:
    
        sum(foo offset 5m) // GOOD.
    
    While the following would be *incorrect*:
    
        sum(foo) offset 5m // INVALID.
    
    The same works for range vectors. This returns the 5-minutes-rate that
    `foo` had a week ago:
    
        rate(foo[5m] offset 1w)
    
    This change touches the following components:
    
    * Lexer/parser: additions to correctly parse the new `offset`/`OFFSET`
      keyword.
    * AST: vector and matrix nodes now have an additional `offset` field.
      This is used during their evaluation to adjust query and result times
      appropriately.
    * Query analyzer: now works on separate sets of ranges and instants per
      offset. Isolating different offsets from each other completely in this
      way keeps the preloading code relatively simple.
    
    No storage engine changes were needed by this change.
    
    The rules tests have been changed to not probe the internal
    implementation details of the query analyzer anymore (how many instants
    and ranges have been preloaded). This would also become too cumbersome
    to test with the new model, and measuring the result of the query should
    be sufficient.
    
    This fixes https://github.com/prometheus/prometheus/issues/529
    This fixed https://github.com/prometheus/promdash/issues/201

commit 79a4a6d8e8cc4d98bf292339830e629a6be7a7bf
Merge: b0c8b56 af91fb8
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Feb 17 17:31:00 2015 +0100

    Merge pull request #532 from prometheus/beorn7/ingestion-tweaks
    
    Improve persisting chunks to disk.

commit b0c8b56603c54a2cf5063a2e1fde12967618d5d3
Merge: 4d135b8 13048b7
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Feb 17 17:17:45 2015 +0100

    Merge pull request #527 from prometheus/nogodep-build
    
    Copy vendored deps manually instead of using Godeps.

commit af91fb8e31cbb28ea3c3cad818fc912818d47de1
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 13 20:08:52 2015 +0100

    Improve persisting chunks to disk.
    
    This is done by bucketing chunks by fingerprint. If the persisting to
    disk falls behind, more and more chunks are in the queue. As soon as
    there are "double hits", we will now persist both chunks in one go,
    doubling the disk throughput (assuming it is limited by disk
    seeks). Should even more pile up so that we end wit "triple hits", we
    will persist those first, and so on.
    
    Even if we have millions of time series, this will still help,
    assuming not all of them are growing with the same speed. Series that
    get many samples and/or are not very compressable will accumulate
    chunks faster, and they will soon get double- or triple-writes.
    
    To improve the chance of double writes,
    -storage.local.persistence-queue-capacity could be set to a higher
    value. However, that will slow down shutdown a lot (as the queue has
    to be worked through). So we leave it to the user to set it to a
    really high value. A more fundamental solution would be to checkpoint
    not only head chunks, but also chunks still in the persist queue. That
    would be quite complicated for a rather limited use-case (running many
    time series with high ingestion rate on slow spinning disks).

commit 13048b7468b75b4bdb8a75be54dfd4a24b03131a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Feb 17 02:06:14 2015 +0100

    Simplify GOPATH/dependency setup.

commit 464524fa44a21bcfaef969f7bb5e12fdb4d1061d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Feb 17 02:05:17 2015 +0100

    Make config/Makefile use user Go installation.
    
    Otherwise it will fail to "go get" the "github.com/golang/protobuf"
    package because its dir already exists in the vendored packages,
    but the copy isn't a git repository.

commit 5643587cc95d45bf3e5e4d0835ef98dafb687163
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Feb 17 02:02:26 2015 +0100

    Also vendor Prometheus-internal deps and update existing ones.

commit b85c72bc50bcc3b8728be409100f19b39d077f79
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Feb 16 23:38:35 2015 +0100

    Get rid of unnecessary tabs in Makefile.INCLUDE.

commit 740a99a9accb7796355814acb8468dc49ce73429
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Feb 15 13:54:43 2015 +0100

    Remove Google Code files, add GitHub files for protobuf lib.

commit af627bb2b986b9afac54689ce1360054f337e0e2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Feb 13 20:24:17 2015 +0100

    Copy vendored deps manually instead of using Godeps.
    
    We were using Godep incorrectly (cloning repos from the internet during
    build time instead of including Godeps/_workspace in the GOPATH via
    "godep go"). However, to avoid even having to fetch "godeps" from the
    internet during build, this now just copies the vendored files into the
    GOPATH.
    
    Also, the protocol buffer library moved from Google Code to GitHub,
    which is reflected in these updates.
    
    This fixes https://github.com/prometheus/prometheus/issues/525

commit 4d135b8b366cb3775c07cd89bd861b81d0675cd3
Merge: 0ae2c1f 5917a04
Author: juliusv <julius@soundcloud.com>
Date:   Mon Feb 16 20:27:49 2015 +0100

    Merge pull request #530 from prometheus/fix-mac-build
    
    Fix embedded files generation on OS X.

commit 5917a0455420c4cb29524c7205d88d48adc293ca
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 16 14:44:28 2015 +0100

    Fix embedded files generation on OS X.

commit 0ae2c1fc1820668972c0446f3a977a9e5c586058
Merge: 498e1b5 8cb2c80
Author: juliusv <julius@soundcloud.com>
Date:   Fri Feb 13 17:55:31 2015 +0100

    Merge pull request #526 from prometheus/lightening-embedding
    
    Dramatically decrease resources for file embedding.

commit 8cb2c802a07043ac2708061f8be1e6e6ea45577b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Feb 13 14:46:20 2015 +0100

    Dramatically decrease resources for file embedding.
    
    This dramatically decreases the needed time and memory for building the
    blob files. The memory numbers are measured via the
    memory.max_usage_in_bytes value from cgroups.
    
    * generating files.go:
    OLD: 466MB   19s
    NEW:  80MB    1s
    
    * building files.go:
    OLD: 1210MB  2.25s
    NEW:    7MB  0.05s

commit 498e1b5154859b0cd20035891ce49812aa6d78f0
Merge: 3d0fb51 e22f26b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Feb 13 14:49:16 2015 +0100

    Merge pull request #524 from prometheus/beorn7/ingestion-tweaks
    
    Improve performance of ingestion.

commit e22f26bc5876c7c8e5f72cce1e939da92aa3b69e
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 13 14:26:54 2015 +0100

    Move to a queue model for appending samples after all.
    
    Starting a goroutine takes 1-2µs on my laptop. From the "numbers every
    Go programmer should know", I had 300ns for a channel send in my
    mind. Turns out, on my laptop, it takes only 60ns. That's fast enough
    to warrant the machinery of yet another channel with a fixed set of
    worker goroutines feeding from it. The number chosen (8 for now) is
    low enough to not really afflict a measurable overhead (a big
    Prometheus server has >1000 goroutines running), but high enough to
    not make sample ingestion a bottleneck.

commit fe518fdb28659dbfaf8c151e16c6414324b28325
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 13 12:12:07 2015 +0100

    Simplify AppendSamples by allowing it to be goroutine-unsafe.

commit 8a1c195b5435fd1a6ed1d9fec63e7b2e03081d8c
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 12 19:47:24 2015 +0100

    Move emptiness check to the receivers.

commit 5d3cd65a5d80df2db85d9081bcb4cc612ce36510
Author: beorn7 <beorn@soundcloud.com>
Date:   Thu Feb 12 17:23:42 2015 +0100

    Improve performance of ingestion.
    
    - Parallelize AppendSamples as much as possible without breaking the
      contract about temporal order.
    
    - Allocate more fingerprint locker slots.
    
    - Do not run early checkpoints if we are behind on chunk persistence.
    
    - Increase fpMinWaitDuration to give the disk more time for more
      important things.
    
    Also, switch math.MaxInt64 and math.MinInt64 to the new constants.

commit 3d0fb516482986d166868c37c7b3cbacdb221069
Merge: fd9ee9b ddc065b
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Feb 11 11:21:56 2015 +0100

    Merge pull request #521 from sammcj/patch-1
    
    Clean fetched package cache

commit ddc065b9433013867f4da4bd787d00d7a7959b32
Author: Sam <sammcj@users.noreply.github.com>
Date:   Wed Feb 11 11:23:35 2015 +1100

    Clean fetched package cache
    
    To further reduce image size

commit fd9ee9b0099d82a1019b04329f3952905480dd68
Merge: 5a4fe40 11b3c23
Author: juliusv <julius@soundcloud.com>
Date:   Tue Feb 10 14:59:13 2015 +0100

    Merge pull request #518 from prometheus/beorn7/ingestion-tweaks
    
    Next try to deal with backed-up ingestion.

commit 11b3c2387c32448f4c57b1fc045e1b54ddd24c95
Author: beorn7 <beorn@soundcloud.com>
Date:   Tue Feb 10 14:49:01 2015 +0100

    Improvements after review.
    
    - Increase samplesQueueCapacity.
    
    - Improve docstring for the above.
    
    - Accept a short waiting period for the ingest channel to become
      ready. This should depend on the http timeout, but 100ms is probably
      good enough to cushion bursts bigger than samplesQueueCapacity,
      while it is unlikely that anybody ever will set an HTTP timeout
      similarly short.

commit 0f191629c6ab6ad049433ebaba019a99978922d8
Author: beorn7 <beorn@soundcloud.com>
Date:   Mon Feb 9 17:32:47 2015 +0100

    Next try to deal with backed-up ingestion.
    
    This is now not even trying to throttle in a benign way, but creates a
    fully-fledged error. Advantage: It shows up very visible on the status
    page. Disadvantage: The server does not really adjusts to a lower
    scraping rate. However, if your ingestion backs up, you are in a very
    irregulare state, I'd say it _should_ be considered an error and not
    dealt with in a more graceful way.
    
    In different news: I'll work on optimizing ingestion so that we will
    not as easily run into that situation in the first place.

commit 5a4fe403ffa759845f075b91bf0794450b0217ba
Merge: af41042 0229a89
Author: juliusv <julius@soundcloud.com>
Date:   Mon Feb 9 13:17:28 2015 +0100

    Merge pull request #514 from prometheus/fix-graph-js-errors
    
    Fix graph JS glitches and simplify graphing code.

commit af410426de893caed8663cdacdeb13381e3e0685
Merge: ab55188 989bc86
Author: juliusv <julius@soundcloud.com>
Date:   Mon Feb 9 12:25:00 2015 +0100

    Merge pull request #517 from prometheus/flag-cleanup
    
    Make flag names consistent across projects.

commit 989bc86bcbec4f06c484241fc7cf855fae0c1391
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Feb 8 23:29:57 2015 +0100

    Make flag names consistent across projects.

commit ab551888a281df01d6d1da0c00be00a130b1123a
Merge: 4e6a807 655dffe
Author: juliusv <julius@soundcloud.com>
Date:   Sat Feb 7 16:59:58 2015 +0100

    Merge pull request #516 from prometheus/grobie/help-href
    
    Update help URL

commit 655dffe393346bc77bfb9c4d29cf2d600a4b2301
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Sat Feb 7 05:10:12 2015 -0500

    Update help URL

commit 0229a89925413112fcfce43e4c1bb688dff5594d
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Feb 6 16:20:46 2015 +0100

    Fix graph JS glitches and simplify graphing code.
    
    - original series data is saved so it can be re-transformed after
      Rickshaw's stacking modified the series data
    
    - always reconstruct graphs from scratch instead of updating the
      settings of an existing one (simplification)
    
    - always wipe and recreate all graph-related DOM elements completely so
      that no left-over event handlers cause background event handlers

commit 4e6a807bde49d179796a28e8d6028900b45f9efe
Merge: 1c9b3c4 16a1a6d
Author: juliusv <julius@soundcloud.com>
Date:   Fri Feb 6 18:39:10 2015 +0100

    Merge pull request #513 from prometheus/beorn7/ingestion-tweaks
    
    Ingestion tweaks

commit 16a1a6d32426265d37dbf0428c9fccb6d690fb09
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 6 18:30:33 2015 +0100

    Add another check for stopped scraper.

commit 5678a869245e54b44201e99cebb54042e7c74eac
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 6 16:44:56 2015 +0100

    Throttle scraping if a scrape took longer than the configured interval.
    
    The simple algorithm applied here will increase the actual interval
    incrementally, whenever and as long as the scrape itself takes longer
    than the configured interval. Once it takes shorter again, the actual
    interval will iteratively decrease again.

commit 1c9b3c4c457ca11569e9346fc6da160027e58d60
Merge: 198ac95 0e8c0b6
Author: juliusv <julius@soundcloud.com>
Date:   Fri Feb 6 15:21:21 2015 +0100

    Merge pull request #511 from prometheus/remove-custom-flip
    
    Remove custom hover flip code. Fixed upstream.

commit 0e8c0b67ad38955cc416c97fa24ed5dbd5b4e5f3
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Feb 6 15:02:13 2015 +0100

    Remove custom hover flip code. Fixed upstream.

commit d2ab49c396223629f710921301e020f70477dfda
Author: beorn7 <beorn@soundcloud.com>
Date:   Fri Feb 6 14:54:53 2015 +0100

    Make the persist queue length configurable.
    
    Also, set a much higher default value.
    
    Chunk persist requests can be quite spiky. If you collect a large
    number of time series that are very similar, they will tend to finish
    up a chunk at about the same time. There is no reason we need to back
    up scraping just because of that. The rationale of the new default
    value is "1/8 of the chunks in memory".

commit 198ac9538bb77deae40112e0bb033252b0e9bc7b
Merge: 6e29664 517a731
Author: juliusv <julius@soundcloud.com>
Date:   Fri Feb 6 11:00:03 2015 +0100

    Merge pull request #510 from prometheus/unlimited-autocomplete
    
    Show unlimited number of metrics in autocomplete.

commit 517a731ebf790309a6e70d6dbd13b0676076b582
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Feb 6 02:03:08 2015 +0100

    Show unlimited number of metrics in autocomplete.

commit 6e296648ed99ad2bf16cb5bc1984f860503973f6
Merge: 0d6c958 60271d5
Author: juliusv <julius@soundcloud.com>
Date:   Thu Feb 5 18:15:52 2015 +0100

    Merge pull request #508 from brian-brazil/round
    
    Change the 2nd argument of round to toNearest.

commit 60271d58bf06687f2dc23764526f4c1291cde6a6
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Feb 5 16:06:35 2015 +0000

    Change the 2nd argument of round to toNearest.
    
    This is more useful if you want get a multiple of 2 or 5, while
    still working for .001.

commit 0d6c9588476a54a3aa3fef5cdb216c919968af1d
Merge: 8261352 d9ff2f7
Author: juliusv <julius@soundcloud.com>
Date:   Thu Feb 5 16:48:18 2015 +0100

    Merge pull request #507 from prometheus/i686-build
    
    Fix Go download path for i686 architecture.

commit d9ff2f7edba652a6d68b7175b4b8eeb0509bedc5
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 5 16:03:49 2015 +0100

    Fix Go download path for FreeBSD.

commit 753113f21a827e437bd34e3f3ee276df156f972a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 5 16:03:45 2015 +0100

    Fix Go download path for x86-based architectures.
    
    This fixes https://github.com/prometheus/prometheus/issues/503.

commit 82613527f3c0dce7e5c85a88c71ce299c9add283
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 5 15:14:05 2015 +0100

    Remove unnecessary float64() conversion in round().

commit 982923f0c42de246d61f321b219bcc0bde11954f
Merge: 9e6b3bc 8fdacbd
Author: juliusv <julius@soundcloud.com>
Date:   Wed Feb 4 17:23:27 2015 +0100

    Merge pull request #502 from mmikulicic/floor_ceil
    
    Add floor, ceil and round functions. Closes #402

commit 8fdacbdf178eabc446c05d5038b28e148dc0225a
Author: Marko Mikulicic <mkm@cesanta.com>
Date:   Wed Feb 4 12:24:00 2015 +0100

    Add floor, ceil and round functions. Closes #402

commit 9e6b3bcefa87f242013650985c05dbeb692c08ac
Merge: 199a94b fa1e900
Author: juliusv <julius@soundcloud.com>
Date:   Tue Feb 3 13:51:47 2015 +0100

    Merge pull request #498 from fabxc/feature/query_timeout
    
    Implement query timeouts

commit fa1e90003b9e05c697b4fb425f276968d06ff5b8
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Tue Feb 3 08:04:27 2015 +0100

    Query timeout added.
    
    This is related to #454. Queries now timeout after a duration set by
    the -query.timeout flag. The TotalEvalTimer is now started/stopped
    inside any of the ast.Eval* functions.

commit 199a94b619db08c0caa63b1d07e8c874fce56802
Merge: 63a7982 b3978fe
Author: juliusv <julius@soundcloud.com>
Date:   Tue Feb 3 00:29:43 2015 +0100

    Merge pull request #501 from prometheus/fix-d3-version
    
    Fix Rickshaw/D3 version mismatch.

commit b3978fe869f9cd5247ed7024ccfbf5a8d085b994
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 2 22:57:47 2015 +0100

    Fix Rickshaw/D3 version mismatch.
    
    When Rickshaw was updated to 1.5.1 in
    https://github.com/prometheus/prometheus/commit/fd43daf82ed9a6926e98a9fef51f2bd954763960,
    the Rickshaw upstream package now contained 3 different D3 files:
    
    d3.min.js
    d3.v2.js
    d3.v3.js
    
    For details on why that is, see
    https://groups.google.com/forum/#!topic/d3-js/lXQgKA7mtEw
    
    For the 1.5.1 Rickshaw to work properly (being able to format dates with
    D3 without causing a JS error), it needs d3.v2.js or d3.v3.js, not the
    d3.min.js one. I chose to update us to d3.v3.js now, since that is the
    most recent and minified version, and I didn't see any problems with it
    (also, the current Rickshaw examples are using that D3 version).
    
    Currently, displaying graphs with a range >14d is broken. This fixes
    that.

commit 63a79821fce78285a6a91363859da1c2646dbfe0
Merge: 3012de7 f568bbc
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Feb 2 13:37:51 2015 +0100

    Merge pull request #499 from prometheus/beorn7/makefile
    
    Improve comments about embedding.

commit f568bbc19ff2f94504c5369dfed7a7a516fd1b9b
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Mon Feb 2 12:37:39 2015 +0100

    Improve comments about embedding.

commit 3012de7f5e7a8dee18589727d825e0a5183ce06e
Merge: 522e4cd 9412b29
Author: juliusv <julius@soundcloud.com>
Date:   Sun Feb 1 14:04:21 2015 +0100

    Merge pull request #497 from prometheus/remove-persist-error-labels
    
    Remove labels on persist error counter.

commit 9412b296d5f9464cd46a4d628d2248c3477b1265
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Feb 1 12:47:51 2015 +0100

    Remove labels on persist error counter.
    
    This fixes https://github.com/prometheus/prometheus/issues/496

commit 522e4cdd3aab63cf0ccad5a55d27c55410ccabf0
Merge: 75422f5 bd4d04f
Author: juliusv <julius@soundcloud.com>
Date:   Sat Jan 31 23:25:11 2015 +0100

    Merge pull request #495 from fabxc/master
    
    Use https:// GOURL

commit bd4d04f37179e8a6f800f7b07014f8547a30f822
Author: Fabian Reinartz <fab.reinartz@gmail.com>
Date:   Sat Jan 31 23:17:56 2015 +0100

    Use https:// GOURL

commit 75422f53062a671c6ab258906ddf4d4fbe5366f1
Merge: dc610f1 5f4acea
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sat Jan 31 00:40:41 2015 +0100

    Merge pull request #492 from prometheus/beorn7/makefile
    
    Ignore GOBIN in Makefiles.

commit 5f4acea7e9f7bc7e72f26cf9a2adc2e7a87f8384
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Fri Jan 30 16:52:35 2015 +0100

    Ignore GOBIN in Makefiles.

commit dc610f1eefc1ccfef372bc770c93704793754d97
Merge: 6f825a7 7d26488
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 30 12:47:23 2015 +0100

    Merge pull request #491 from brian-brazil/but-wait-theres-more
    
    Add cassandra console.

commit 7d2648804df9efcc2a34c2759ce57828384de1e2
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Jan 30 11:27:52 2015 +0000

    Add cassandra console.
    
    Add a template for standard up/total, cpu and memory via standard exports.

commit 6f825a7eb4080aef00d75ecd7f918040235d39c0
Merge: 5f27629 edadba3
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Jan 30 10:49:26 2015 +0100

    Merge pull request #487 from prometheus/simplify-web-makefile
    
    Simplify web/blob build

commit edadba3b253985990e9b45725b64f0b8faeec94e
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Jan 29 19:12:32 2015 -0500

    Merge web/blob/Makefile into web/Makefile
    
    While the recent commit 7e5745f solved the issue of having an
    independent blob-stamp file, which was possible to become out of
    sync with the necessary web/blob/files.go file, this change further
    simplifies the setup by merging the two Makefile.
    The only purpose of web/Makefile was to call targets in
    web/blob/Makefile. As all dependencies for blob/files.go are
    outside of the blob/ directory, the separation isn't logically
    necessary.

commit 5f27629985520bc4dce469d66308db7c922e080c
Merge: 4e0d2f9 26e22e6
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jan 29 17:00:57 2015 +0100

    Merge pull request #489 from prometheus/beorn7/get-some-todos-done
    
    Beorn7/get some todos done

commit 26e22e6ad65651dc2f963f1f122a68c4218e1a97
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 29 15:05:10 2015 +0100

    Fix rule manager shutdown.

commit 3948e2a7f8f53e11fe1bc519fd68f7c30d7eaa71
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 29 14:52:12 2015 +0100

    Move lost files to an "orphaned" directory.
    
    Previously, those were simply deleted. The orphaned files can now be
    used for forensics if needed.

commit c24bfdf701c1df4ac91bc9a03824a7723a64502e
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 29 13:12:01 2015 +0100

    Move crash related code into separate file.
    
    persistence.go is way too long anyway, and a lot of code is just crash
    recovery, which is not important to understand the normal operation.
    
    Also, remove unused `exists` function.

commit ab386d1f5d15d517e8b1be559b7873340f38cf92
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 29 13:04:54 2015 +0100

    Declare storage.local.index-cache-size.* default values as tweaked.

commit 73f6dc4d44e32f814105a8abca9fffd7b6080edf
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 29 12:57:50 2015 +0100

    Make KeyValueStore.Delete report if the key to delete was found.
    
    Previously, it would return an error instead. Now we can distinguish
    the cases 'error while deleting known key' vs. 'key not in index'
    without testing for leveldb-internal kinds of errors.

commit 4e0d2f9820851acb99c6ff2162a109a8ff6b0ea4
Merge: 861ba15 44b5843
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jan 28 19:56:12 2015 +0100

    Merge pull request #486 from prometheus/docker-fix-console-path
    
    Set console paths correctly

commit 44b5843518c9cf1a3b6b58105af41d49db605c2b
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Jan 28 19:52:32 2015 +0100

    Set console paths correctly

commit 861ba15f38c3841de8d8763370624f6655f9ffee
Merge: f5a0f7f 822738e
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jan 27 14:55:14 2015 +0100

    Merge pull request #475 from mssola/master
    
    Fixed the link of the Travis build status image.

commit 822738e5b8423fb38179df44b698fb748b5e1c9f
Author: Miquel Sabaté <mikisabate@gmail.com>
Date:   Tue Jan 27 14:43:46 2015 +0100

    Fixed the link of the Travis build status image.

commit f5a0f7fa185dae2c772a5847a7aac9ba33b545f9
Merge: 855f20a a804cac
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 26 15:54:01 2015 +0100

    Merge pull request #472 from prometheus/beorn7/release
    
    Cut release 0.10.0.

commit a804cacc87225824f388ee820c5ca6b04e4c8aef
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Mon Jan 26 15:52:34 2015 +0100

    Also update VERSION file.

commit 5ef1385ce28f881928f4f1747fe4893a88895d08
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Mon Jan 26 15:35:57 2015 +0100

    Cut release 0.10.0.

commit 855f20a4d335972032e7328562adc769e097c39d
Merge: 50351b7 05ba9ab
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jan 26 15:24:15 2015 +0100

    Merge pull request #470 from prometheus/beorn7/slim-static-assets
    
    Slim down the files we embed into the binary.

commit 50351b78f7228fd253309480fde99466df2a8853
Merge: 23f9279 3fc354c
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 26 15:22:45 2015 +0100

    Merge pull request #471 from prometheus/beorn7/update-help-link
    
    Update help link.

commit 05ba9ab2f3d4fe864f4b5d28997add189ee510ad
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Mon Jan 26 15:21:21 2015 +0100

    Also update prom.lib.

commit 3fc354c4cec5e2c8a61667d5013e052bc570ada6
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Mon Jan 26 15:18:43 2015 +0100

    Update help link.

commit 7e5745fe0eb400d3fbcbedc9adc5552273a6c7f6
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Mon Jan 26 15:10:27 2015 +0100

    Slim down the files we embed into the binary.
    
    - Use only the minified versions of bootstrap.
    
    - Do not embed non-minified bootstrap files and bootstrap map files.
    
    - Simplify the 'blob-stamp' Makefile contraption.

commit 23f9279b9dc26e2e74c4abc15588b5542e5b35b5
Merge: 34d0f99 2c8d324
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jan 26 14:16:25 2015 +0100

    Merge pull request #469 from prometheus/beorn7/persistence
    
    Remove check that did not check anything.

commit 2c8d324ca4d87f17b2139b070cc2b6fc3f8688da
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Mon Jan 26 13:48:24 2015 +0100

    Remove check that did not check anything.

commit 34d0f99ded6c3b950f6934b328d6ae637c1b7b46
Merge: 4d3a513 f2f80a7
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 26 13:24:34 2015 +0100

    Merge pull request #467 from brian-brazil/more-consoles
    
    Fix to show graphs.

commit 4d3a51353c218fab36e2be546db2e6b210528674
Merge: f7e3da5 d4374a9
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 26 13:13:28 2015 +0100

    Merge pull request #466 from prometheus/change-json
    
    More efficient JSON format.

commit d4374a92657dfedf9344e5997634f7795a91a8fa
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jan 20 15:13:49 2015 +0100

    More efficient JSON query result format.
    
    This depends on https://github.com/prometheus/client_golang/pull/51.
    
    For vectors, the result format looks like this:
    
    ```json
    {
       "version": 1,
       "type" : "vector",
       "value" : [
          {
             "timestamp" : 1421765411.045,
             "value" : "65.475000",
             "metric" : {
                "quantile" : "0.5",
                "instance" : "http://localhost:9090/metrics",
                "job" : "prometheus",
                "__name__" : "http_request_duration_microseconds",
                "handler" : "/static/",
                "method" : "get",
                "code" : "304"
             }
          },
          {
             "timestamp" : 1421765411.045,
             "value" : "5826.339000",
             "metric" : {
                "quantile" : "0.9",
                "instance" : "http://localhost:9090/metrics",
                "job" : "prometheus",
                "__name__" : "http_request_duration_microseconds",
                "handler" : "prometheus",
                "method" : "get",
                "code" : "200"
             }
          },
          /* ... */
       ]
    }
    ```
    
    For matrices, it looks like this:
    
    ```json
    {
       "version": 1,
       "type" : "matrix",
       "value" : [
          {
             "metric" : {
                "quantile" : "0.99",
                "instance" : "http://localhost:9090/metrics",
                "job" : "prometheus",
                "__name__" : "http_request_duration_microseconds",
                "handler" : "/static/",
                "method" : "get",
                "code" : "200"
             },
             "values" : [
                [
                   1421765547.659,
                   "29162.953000"
                ],
                [
                   1421765548.659,
                   "29162.953000"
                ],
                [
                   1421765549.659,
                   "29162.953000"
                ],
                /* ... */
             ]
          }
       ]
    }
    ```

commit f7e3da54884723926db0d3322f4c76dc3b13e66d
Merge: f071850 2b07cd3
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 26 12:28:49 2015 +0100

    Merge pull request #468 from brian-brazil/fix-multi-graph
    
    Keep total counter outside out loop.

commit 2b07cd387545e3f34ba6b7dca41331e4e4e81580
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Mon Jan 26 10:51:38 2015 +0000

    Keep total counter outside out loop.
    
    This was causing only the last expression to be graphed.

commit f2f80a7064fee651b4387f2d0fc88f0374bf2bda
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Mon Jan 26 09:59:56 2015 +0000

    Fix to show graphs.

commit f071850e41629af62a4aaad622cb8b03c6e19535
Merge: 6181a90 e3c375b
Author: juliusv <julius@soundcloud.com>
Date:   Sun Jan 25 18:00:40 2015 +0100

    Merge pull request #465 from brian-brazil/more-consoles
    
    Add consoles for haproxy and cloudwatch.

commit e3c375b9b055e353e4662c8d26e82c2f848e19d4
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Jan 23 17:40:48 2015 +0000

    Add consoles for haproxy and cloudwatch.
    
    Only display jobs in the LHS if they're present.

commit 6181a909537b40b9a8bc3d01628807c1c6a39bc4
Merge: 815503e 6b03b8b
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Jan 23 16:21:43 2015 +0100

    Merge pull request #464 from prometheus/beorn7/release
    
    Prometheus version 0.9.0.

commit 6b03b8bc5640de780c4521365df8d780d39241f9
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Fri Jan 23 16:13:01 2015 +0100

    Prometheus version 0.9.0.

commit 815503e0bbf0a1d2abd1e6bef4caa6cddbbb0762
Merge: 01f2bc4 a31730e
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 23 16:07:43 2015 +0100

    Merge pull request #461 from brian-brazil/delta-deriv
    
    Remove 2nd argument from delta. Add a deriv() function.

commit a31730e88bc7d3490346c40ebc3ce2d8032d0ced
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jan 22 11:52:30 2015 +0000

    Make 2nd arg to delta optional. Add a deriv() function.
    
    The 2nd isCounter argument to delta is ugly, make it optional as the first step
    of deprecating it. This will makes delta only ever applied to gauges.
    
    Add a deriv function to calculate the least squares
    slope of a gauge. This is more useful for prediction than delta,
    as it isn't as heavily influenced by outliers at the boundaries.

commit 01f2bc4ee73663aa41f291f00641ec7bc0e2cd04
Merge: 5f5e4d7 cf28c2e
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 23 14:54:23 2015 +0100

    Merge pull request #463 from prometheus/beorn7/release
    
    Change autogenerated protobuf code.

commit cf28c2efbbf1749e03fb8ab0fd8841910f3f7e67
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Fri Jan 23 14:44:30 2015 +0100

    Change autogenerated protobuf code.

commit 5f5e4d76bd65420611c17b5d2bad3451cc2495de
Merge: f5d6187 e4b4cac
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 22 18:15:16 2015 +0100

    Merge pull request #462 from brian-brazil/godeps-format
    
    Exclude Godeps from make format

commit e4b4cac2123650e4fa97e1399f6dfc4ffd68d371
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jan 22 17:12:19 2015 +0000

    Exclude Godeps from make format

commit f5d6187bba5b8e8d956227bab52d5a824968fe5c
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 22 15:27:50 2015 +0100

    Prometheus version 0.9.0rc5.

commit 351a1eb96ba1fda8deb3726f18bfd079555858b9
Merge: 727cfd7 2d8bfa0
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 22 15:24:58 2015 +0100

    Merge pull request #457 from brian-brazil/bootstrap3
    
    Adjust for bootstrap3. Remove long lists from LHS menu.

commit 2d8bfa0cedd4102926f8c54692d6c6e89e1e9e95
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jan 22 10:39:41 2015 +0000

    Adjust for bootstrap3. Remove long lists from LHS menu.
    
    Put in a table on the node page instead.

commit 727cfd7b60c62f62bc7197de0d904c5a7a2aae1d
Merge: f541390 87d19b9
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jan 22 15:10:51 2015 +0100

    Merge pull request #460 from prometheus/beorn7/license-cleanup
    
    Update CONTRIBUTING.md.

commit f541390dfbd504fde9acbd7c684a3e889e19c2f3
Merge: edc91cb 2c8fdcb
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jan 22 15:10:08 2015 +0100

    Merge pull request #459 from prometheus/beorn7/fix-deadlock
    
    Remove a deadlock during shutdown.

commit 87d19b94fcc8095e0e59290200177bcbb4f7ebff
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 22 15:02:18 2015 +0100

    Update CONTRIBUTING.md.

commit 2c8fdcbc233cf2bf9f09e94ca195aaa0197877d3
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 22 14:42:15 2015 +0100

    Remove a deadlock during shutdown.
    
    If queries are still running when the shutdown is initiated, they will
    finish _during_ the shutdown. In that case, they might request chunk
    eviction upon unpinning their pinned chunks. That might completely
    fill the evict request queue _after_ draining it during storage
    shutdown. If that ever happens (which is the case if there are _many_
    queries still running during shutdown), the affected queries will be
    stuck while keeping a fingerprint locked. The checkpointing can then
    not process that fingerprint (or one that shares the same lock). And
    then we are deadlocked.

commit edc91cbabbbcc2f75076fafa346eef515a395308
Merge: a22968d 5483521
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Thu Jan 22 14:32:37 2015 +0100

    Merge pull request #456 from prometheus/beorn7/license-cleanup
    
    Clean up license issues.

commit 5483521c4889e70658898099c005309e3d0c235b
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Thu Jan 22 14:12:26 2015 +0100

    Tweak AUTHORS.

commit a22968dba9499779cb4df7a2e5f13dc4db89a54a
Merge: 39d2014 8ada636
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 22 14:01:12 2015 +0100

    Merge pull request #458 from prometheus/fix-input-alignment-safari
    
    Add floats to align inputs, and clear the float on the parent.

commit 8ada6360ef7c92b9f85d7d14269205b72023148f
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Thu Jan 22 13:27:35 2015 +0100

    Add floats to align inputs, and clear the float on the parent.

commit 5859b74f1bb19cd3121e766f06ed762509571232
Author: Bjoern Rabenstein <beorn@soundcloud.com>
Date:   Wed Jan 21 20:07:45 2015 +0100

    Clean up license issues.
    
    - Move CONTRIBUTORS.md to the more common AUTHORS.
    - Added the required NOTICE file.
    - Changed "Prometheus Team" to "The Prometheus Authors".
    - Reverted the erroneous changes to the Apache License.

commit 39d20140c88de16570c7c8f26b3be6ca30860a43
Merge: cefa3c7 b09453a
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Jan 21 19:09:49 2015 +0100

    Merge pull request #452 from prometheus/beorn7/client_golang-adjustments
    
    Adjust to new client_golang API.

commit b09453af1df93646bd1250a5a5ab4164ee665fd8
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jan 21 15:42:25 2015 +0100

    Adjust to new client_golang API.

commit cefa3c7900f48c8cf5d18c2ffe70a01656f69645
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jan 20 17:21:04 2015 +0100

    Add build status badge to README.md title.

commit 4133020de1e54c6b2c843c130a6dc362699817e0
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jan 20 16:43:23 2015 +0100

    Align graph controls with graph edge.

commit 25148e55c6304a2420e24ea9b62962d26e4199ed
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jan 20 15:15:37 2015 +0100

    Prometheus version 0.9.0rc4.

commit 0b1029a7ea986996d28a80af18c220b3ac5b61a0
Merge: e6a1ac8 12a99ab
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 19 16:20:46 2015 +0100

    Merge pull request #443 from prometheus/bootstrap3
    
    Bootstrap3 conversion

commit e6a1ac8f124b7e6beabe47ebcdb464a46ee55a2e
Merge: ebcd32c f298af5
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Jan 19 14:32:46 2015 +0100

    Merge pull request #450 from prometheus/beorn7/double-start-protection
    
    Add double-start protection.

commit f298af5756c0ca1d5b5d01e12642911f890da3cf
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Jan 19 14:31:16 2015 +0100

    Use named returns in flock.New.

commit 12a99ab5b44566ecd37e84522b53c2aa528d2c51
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jan 19 14:27:07 2015 +0100

    Some more UI/JS fixes/cleanups.

commit 013c22ca01cf81764da16ac30845f54520d95c21
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jan 19 14:15:37 2015 +0100

    Adjust input group margins for more equal spacing.

commit ebcd32c04e1f293cc0550f0ebb81a0f0a7f28606
Merge: 7ca2930 8a7289c
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 19 13:58:47 2015 +0100

    Merge pull request #448 from prometheus/rework-dockerfile
    
    Rework dockerfile

commit 170da9460d60313639c4727dfd4cce019828e369
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jan 19 13:33:56 2015 +0100

    Focus/typeahead fix.

commit d96d4933d9f8a8429fcc7bd6637dd4c0be895ef0
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jan 14 17:56:03 2015 +0100

    Complete Bootstrap 3 conversion.
    
    - use the autocomplete plugin from
      https://github.com/bassjobsen/Bootstrap-3-Typeahead
    - use native Bootstrap tabs
    - make everything look much nicer (hopefully)
    - other minor fixes/additions

commit 8a7289ce55390765c074df8a7fb633c16e5055e1
Author: Johannes 'fish' Ziemke <fish@freigeist.org>
Date:   Mon Jan 12 15:15:26 2015 +0100

    Use golang base image and not make
    
    Instead of using make to install all dependencies, this uses the golang
    base image. This way those common base layers can be shared across other
    golang based images.
    This also stops using the Makefile to install the dependencies because
    we would have to install all dependencies everytime something changes.
    
    Change-Id: I5e143cc4ec3e5c9027ec4912be12297e704ffff5

commit baca6faa1c86381f3203d84700c5cb5075c86c60
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jan 14 16:52:09 2015 +0100

    Add double-start protection.
    
    This mimics the locking leveldb is performing anyway. Advantages of
    doing it separately:
    
    - Should we ever replace the leveldb implementation by one without
      double-start protection, we are still good.
    
    - In contrast to leveldb, the new code creates a meaningful error
      message.

commit ff5eeb49fa9ce4b87769ca8593c291c3124a2db4
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jan 14 15:09:58 2015 +0100

    Fix datepicker timezone issues.

commit 7ca29308e6c494c0b2fe41f23ee76ae03b0ed532
Merge: e0a90d3 3b4e5e8
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Jan 13 18:48:54 2015 +0100

    Merge pull request #449 from prometheus/beorn7/fix-partitioning-by-outcome
    
    Adjust the partitioning by outcome.

commit 3b4e5e8be62a7aa873778d0f805185eb46eb7db2
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Jan 13 18:47:51 2015 +0100

    Improve help string.

commit ae70eac97d7b389aea1acfdc24d2883d7d37cdec
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Jan 13 18:33:35 2015 +0100

    Adjust the partitioning by outcome.

commit 97ad5d3d1ba9df55c5cf7a53fe94efc883871f23
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Mon Jan 12 16:37:25 2015 +0100

    Update jquery and jquery-ui.

commit 5cd8030c37639e81b7e91ae2220aa3786d66ba3d
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Mon Jan 12 16:37:13 2015 +0100

    Include bootstrap.js.min

commit 7b8fd9c7a51e79dd6c928d1fcf0c6af0ab657c41
Author: Johannes 'fish' Ziemke <fish@freigeist.org>
Date:   Mon Jan 12 15:05:36 2015 +0100

    Read version from VERSION file
    
    Change-Id: Idfbe2dbe6cb8cd90c6c728dca7d10ff580c7b9d6

commit 8d7581d8c416ec08ccabb63a513e8f5e6936a394
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Mon Jan 12 14:26:09 2015 +0100

    Add datetimepicker css.

commit 0529e3fcfa2a2f561709f0e56556927af4bf4e67
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Mon Jan 12 14:18:28 2015 +0100

    Use datetimepicker.

commit e0a90d3da5b8836408d657a448d9ba825caafd0d
Merge: 3836fc0 a6e320a
Author: juliusv <julius@soundcloud.com>
Date:   Sun Jan 11 22:31:45 2015 +0100

    Merge pull request #446 from prometheus/fix-dockerfile
    
    Installing gcc as rule_checker and procfs dependency

commit a6e320a88ca5a32db9a706bd7c5401eb78fef95c
Author: Johannes 'fish' Ziemke <fish@freigeist.org>
Date:   Fri Dec 26 19:48:32 2014 +0100

    Installing gcc as rule_checker and procfs dep
    
    Change-Id: I370e9192a6bfd9275dd6f4b4c0f35c6675cfb75f

commit 2d5c2c5726132209c5580f21c380b9db494a4b56
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Fri Jan 9 14:27:58 2015 +0100

    style rickshaw legend

commit 3814daac489bdd3c5ed176d060a8ee97d1126f73
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Fri Jan 9 14:23:09 2015 +0100

    Make Loadtime/ Resolution info look nicer.

commit 071d98f3d0556269ff79f8299cd0357c5dba80f3
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Fri Jan 9 14:23:00 2015 +0100

    Square corners

commit 7b9bf8d3e5df2886aa6c2fa60443117079376393
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Fri Jan 9 14:12:52 2015 +0100

    Query header.

commit 46f7bd2820dd2d3ad52a0408bd33a8fb39df459d
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Fri Jan 9 13:55:01 2015 +0100

    graph controls

commit 3836fc01d198e2d965d87fe717cd472d3d37ffef
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jan 9 13:11:03 2015 +0100

    Prometheus version 0.9.0rc3.

commit 5201cbf3c6ce57f997cf723e1383f2d7e796988c
Merge: a6bc42b cc1f2b6
Author: stuart nelson <stuartnelson3@gmail.com>
Date:   Fri Jan 9 12:47:23 2015 +0100

    Merge pull request #441 from prometheus/vendor-dependencies
    
    Vendor external dependencies with godep.

commit cc1f2b6cade7aa2b5a84cd88a24175af51910983
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jan 9 12:33:58 2015 +0100

    Fix environment variables for godep invocation.

commit f1c257845f58f2ffc7775b4b83a04cd6a67a8665
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Thu Jan 8 20:58:47 2015 +0100

    Vendor external dependencies with godep.

commit a6bc42bc617b714a45cc77e48a867bb3291826c2
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jan 9 11:04:20 2015 +0100

    Minor formatting/spelling fixups.

commit cca2e58f207cbcb7bbe774c3ecbbdadda71d5e0f
Merge: 325788f 0851945
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 9 10:56:02 2015 +0100

    Merge pull request #442 from prometheus/beorn7/fix-crash-recovery
    
    Fix ALL the crash-recovery related problems.

commit 8ce89f00867c1b309bc320da822006df1383f527
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Dec 25 16:27:35 2014 +0100

    WIP: Upgrade to Bootstrap 3.

commit 0851945054da4575c4a15443c34b601d681d2867
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Jan 8 20:15:58 2015 +0100

    Add a heuristics to checkpoint early if there are many "dirty" series..

commit 325788f2efbb30eead121831c8b7967f156c8876
Merge: 7aae5dd bb1e493
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 8 17:55:55 2015 +0100

    Merge pull request #440 from prometheus/report-rule-failures
    
    Report rule eval failures, remove extraction.Result type

commit bb1e49383e07c8623c39edf545c8f45f92ab0279
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jan 8 16:57:25 2015 +0100

    Log rule evalation errors.

commit d6b9e976553c2d589b0af3f7070fdaa3224ceffa
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Dec 31 14:01:19 2014 +0100

    Remove extraction.Result type, simplify code.

commit 9a4ca68a610592e33b6b0231aea5b7579d76b7c5
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Dec 31 13:16:08 2014 +0100

    Add metrics for rule evaluation failures.
    
    Fixes https://github.com/prometheus/prometheus/issues/417

commit 622e8350cd2cede2c650d8c474d24cdd533e7389
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Jan 8 16:10:31 2015 +0100

    Fix a bug handling freshly unarchived series.
    
    Usually, if you unarchive a series, it is to add something to it,
    which will create a new head chunk. However, if a series in
    unarchived, and before anything is added to it, it is handled by the
    maintenance loop, it will be archived again. In that case, we have to
    load the chunkDescs to know the lastTime of the series to be
    archived. Usually, this case will happen only rarely (as a race, has
    never happened so far, possibly because the locking around unarchiving
    and the subsequent sample append is smart enough). However, during
    crash recovery, we sometimes treat series as "freshly unarchived"
    without directly appending a sample. We might add more cases of that
    type later, so better deal with archiving properly and load chunkDescs
    if required.

commit 7aae5dd8737d7b880d8dd3f7cb3b2450b3b20a9d
Merge: 917acb6 eb932d1
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Jan 7 19:18:40 2015 +0100

    Merge pull request #439 from prometheus/beorn7/remove-deadlock
    
    Remove a deadlock during shutdown.

commit eb932d152425e56ad3ceaa16fd8fa68ed1530ccc
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jan 7 19:02:38 2015 +0100

    Remove a deadlock during shutdown.

commit 917acb6bafdb5f2cc6b63751e23371afcd1ebe00
Merge: ba0bc6a e56786b
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 2 13:22:04 2015 +0100

    Merge pull request #429 from brian-brazil/scrape-time
    
    Have scrape time as a pseudovariable, not a prometheus variable.

commit ba0bc6adce9a7c8799f5b5c67a87aceca00702c0
Merge: 6cd29ee a7eb9f6
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 2 13:18:56 2015 +0100

    Merge pull request #431 from brian-brazil/contrib
    
    Update contributing guide to remove gerrit.

commit a7eb9f6fb09cce693500cab90741e286b6c8ed40
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Dec 26 13:21:36 2014 +0000

    Update contributing guide to remove gerrit.
    
    The contributors list is outdated, update. Looks like we're sorting by first name.

commit 6cd29eec486ab45a7974b5fa228aa3829d4b9273
Merge: 48d6ba2 ffa2e73
Author: juliusv <julius@soundcloud.com>
Date:   Mon Dec 29 01:53:38 2014 +0100

    Merge pull request #434 from brian-brazil/graphlink
    
    Fix regression from 5e8d57bec1a21c39b55f20c67425c065405f8153

commit e56786b2218f39893f0471bbcb444c4249e6c781
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Dec 26 12:37:30 2014 +0000

    Have scrape time as a pseudovariable, not a prometheus variable.
    
    This ensures it has the right timestamp, and is easier to work with.
    
    Switch sd variable away from 'outcome', using total/failed instead.

commit ffa2e73803001d54c0a8251283abea464c20b871
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Dec 26 16:40:06 2014 +0000

    Fix regression from 5e8d57bec1a21c39b55f20c67425c065405f8153
    
    0 is a false value, so shortcutting no longer works.
    Update other places in the code that assumed graph was the default.

commit 48d6ba250542a4119e8f46fdc9032b3f2d212815
Merge: 0b10977 fd43daf
Author: juliusv <julius@soundcloud.com>
Date:   Sat Dec 27 01:21:56 2014 +0100

    Merge pull request #433 from brian-brazil/upgrade-rickshaw
    
    Upgrade rickshaw to v1.5.1

commit 0b10977d71b919473baa6993687e6e3f3b73a3ea
Merge: cc27fb8 89c43dd
Author: juliusv <julius@soundcloud.com>
Date:   Sat Dec 27 01:05:53 2014 +0100

    Merge pull request #430 from brian-brazil/sort-status
    
    Sort targets on the status page.

commit fd43daf82ed9a6926e98a9fef51f2bd954763960
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Dec 26 14:44:06 2014 +0000

    Upgrade rickshaw to v1.5.1
    
    This includes better handling for missing data points in stacked graphs.

commit 89c43dd0d7e3202284780147f8de26db42634402
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Dec 26 13:14:19 2014 +0000

    Sort targets on the status page.
    
    Change-Id: I6b59c97ab50093c50b608e29be2304475bc5d9f6

commit cc27fb8aab364df801883c807fdae9fdb807e6bc
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Dec 25 01:28:35 2014 +0100

    Rename remaining all-caps constants in AST layer.
    
    Change-Id: Ibe97e30981969056ffcdb89e63c1468ea1ffa140

commit 895523ad14f65a1667f07e691b167d27d0321403
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Dec 25 01:13:59 2014 +0100

    Include necessary Makefile.INCLUDE from rules/Makefile.
    
    Change-Id: I077d018dbe4093cd40ddf38d66a996df222bf5e4

commit 2ade9d40cf3eea3279c6a268a34dc9ca365a1bf0
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Dec 25 00:45:30 2014 +0100

    Clarify why we need int constants for expression types.
    
    Change-Id: I053fc5d32c118dbdb204dc8193337f981aff796e

commit 47551b8eee77e8c614f516421f56d7433b965956
Author: juliusv <julius@soundcloud.com>
Date:   Tue Dec 23 14:26:21 2014 +0100

    Use latest architecture diagram in README.md

commit 62b69b005d2046c3c77a29aeead73c188d42dbde
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Dec 23 14:04:58 2014 +0100

    Update architecture diagram and include source file.
    
    Change-Id: I2a793a5d1941dc0e945a9cfe25df5f5a79d2b10a

commit 401decc847369f84c61eff887f78ca4fa7065e9e
Merge: fd4a7b8 43b105d
Author: juliusv <julius@soundcloud.com>
Date:   Thu Dec 18 17:59:54 2014 +0100

    Merge pull request #428 from brian-brazil/sample-consoles
    
    Console templating library, including graphs.

commit 43b105d32d86e5d4cce8e73a07c7f66a12f34cf1
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Nov 20 18:41:25 2014 +0000

    Console templating library, including graphs.
    
    This provides the basic js, css and console template
    templates required to build dashboards.
    Included as an example are consoles for the node_exporter.
    
    Change-Id: I4cfeea5e9691a9413f74ae98ca32a908df8e4a59

commit fd4a7b885b68b049861509df928eb82d93c92ab2
Merge: 3560ece ff95a52
Author: juliusv <julius@soundcloud.com>
Date:   Thu Dec 18 13:27:42 2014 +0100

    Merge pull request #427 from prometheus/retrieval-rename-address-url
    
    Rename Address to URL

commit ff95a52b0f7f0692b43fa12f8884cc36e6aa6024
Author: Johannes 'fish' Ziemke <fish@freigeist.org>
Date:   Wed Dec 17 19:40:59 2014 +0100

    Rename Address to URL
    
    The "Address" is actually a URL which may contain username and
    password. Calling this Address is misleading so we rename it.
    
    Change-Id: I441c7ab9dfa2ceedc67cde7a47e6843a65f60511

commit 3560ece5fbf52621698cf28039e550415015c1eb
Merge: c4bcfec bf757ed
Author: Björn "Beorn" Rabenstein <bjoern@rabenste.in>
Date:   Wed Dec 17 19:25:38 2014 +0100

    Merge pull request #426 from prometheus/u-c-l/bump-version
    
    It's time for 0.9.0rc2.

commit bf757edbc47b22f9b170f64efa10ef41c80f9b9c
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Dec 17 18:43:42 2014 +0100

    It's time for 0.9.0rc2.

commit c4bcfeccc5bc5a8eca6bc6fa7de436224fa16390
Merge: d72d49f ff24070
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Dec 17 18:37:00 2014 +0100

    Merge pull request #425 from prometheus/fix/series-file-name
    
    Fix embarrassing bug in crash recovery.

commit ff24070a0387946687775daefdcc71d49d549c59
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Dec 17 17:18:04 2014 +0100

    Fix embarrassing bug in crash recovery.
    
    (And yes, we always knew we need tests for that. I have added a TODO now.)
    
    Change-Id: I9cf52bbf98e263e0b79404bda4c442beba9696a8

commit d72d49f1b3f0a4f0547d325cd96774303a72ded4
Merge: e2fddd6 00a2a93
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Dec 16 16:24:27 2014 +0100

    Merge pull request #420 from prometheus/metric-cow
    
    Introduce copy-on-write for metrics in AST.

commit e2fddd62e991a91d2c4e993f7ac886d9d6fc5ca9
Merge: f2052c9 09c58ce
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Dec 15 14:30:12 2014 +0100

    Merge pull request #424 from tsenart/go1.4
    
    Upgrade to Go 1.4

commit 09c58ce481a63cf58666bdc3b7e0545e9351a830
Author: Tomás Senart <tsenart@gmail.com>
Date:   Mon Dec 15 13:47:14 2014 +0100

    Upgrade to Go 1.4
    
    This change set upgrades Prometheus to use Go 1.4
    The other modifications were intended to compare benchmarks between the
    old and new versions using `golang.org/x/tools/cmd/benchcmp`.
    
    ```
    benchmark                                old ns/op      new ns/op     delta
    BenchmarkTargetManager-8                 38866          19355         -50.20%
    BenchmarkTargetPool-8                    114763         58989         -48.60%
    BenchmarkFingerprintLockerParallel-8     747            752           +0.67%
    BenchmarkFingerprintLockerSerial-8       39.0           39.1          +0.26%
    BenchmarkAppend-8                        2020           2553          +26.39%
    BenchmarkFuzz-8                          1185584705     506752314     -57.26%
    BenchmarkLabelPairs-8                    753            903           +19.92%
    
    benchmark                                old allocs     new allocs     delta
    BenchmarkTargetManager-8                 41             46             +12.20%
    BenchmarkTargetPool-8                    682            460            -32.55%
    BenchmarkFingerprintLockerParallel-8     0              0              +0.00%
    BenchmarkFingerprintLockerSerial-8       0              0              +0.00%
    BenchmarkAppend-8                        11             15             +36.36%
    BenchmarkFuzz-8                          2269055        1061400        -53.22%
    BenchmarkLabelPairs-8                    12             12             +0.00%
    
    benchmark                                old bytes      new bytes     delta
    BenchmarkTargetManager-8                 8755           7160          -18.22%
    BenchmarkTargetPool-8                    82621          41342         -49.96%
    BenchmarkFingerprintLockerParallel-8     0              0             +0.00%
    BenchmarkFingerprintLockerSerial-8       0              0             +0.00%
    BenchmarkAppend-8                        289            293           +1.38%
    BenchmarkFuzz-8                          2307248006     586094916     -74.60%
    BenchmarkLabelPairs-8                    316            304           -3.80%
    ```

commit 00a2a93a0539927dbc5b12e6899f3584e93cb15e
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Dec 12 20:01:32 2014 +0100

    Add regression tests for metrics mutations in AST.
    
    It turned out in the end, that only drop_common_metrics() produced any
    erroneous output in the old system. The second expression in the test
    ("sum(testmetric) keeping_extra") already worked in the old code, but
    why not keep it in...
    
    The way to test ranged evaluations is a bit clumsy so far, so I want to
    build a nicer test framework in the end, where all the test cases can be
    specified as text files which specify desired inputs, outputs, query
    step widths, etc.
    
    Change-Id: I821859789e69b8232bededf670a1b76e9e8c8ca4

commit c9618d11e898236fb8a1d53aab495aa1c942ab1c
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Dec 8 16:55:49 2014 +0100

    Introduce copy-on-write for metrics in AST.
    
    This depends on changes in:
    
    https://github.com/prometheus/client_golang/tree/cow-metrics.
    
    Change-Id: I80b94833a60ddf954c7cd92fd2cfbebd8dd46142

commit f2052c9c0de55b3f217de4679762524b42880b04
Merge: cf781ef afd864e
Author: juliusv <julius@soundcloud.com>
Date:   Fri Dec 12 20:34:28 2014 +0100

    Merge pull request #423 from prometheus/u-c-l/adjust-to-new-goleveldb
    
    Adjust to the new version of goleveldb.

commit afd864e7f4ed51e0bfd17c75bd3508c7e28caeaf
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Dec 10 18:04:29 2014 +0100

    Adjust to the new version of goleveldb.
    
    (And yes, we do want vendoring for that... This is just the quick fix.)
    
    Change-Id: I9d347a64d96de6b3390a0e35c8d466f14bb83e4e

commit cf781eff3700fc030dd955bdd9b7a467e173324f
Merge: b903507 39efe63
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Wed Dec 10 17:48:05 2014 +0100

    Merge pull request #421 from prometheus/u-c-l/code-cleanup
    
    Apply a giant code cleanup.

commit 39efe6358bbad0ef4f1830caaeeb1fa6bdb9193b
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Dec 10 17:46:56 2014 +0100

    Fix typos and import order.
    
    This doesn't make the import order consistend everywhere, just where
    it was touched by the previous commit.
    
    Change-Id: I82fc75f8691da9901c7ceb808e6f6fe8e5d62c0e

commit b1e49561427992dd28b4795cfd38002483b4f9ff
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Dec 10 16:16:49 2014 +0100

    Apply a giant code cleanup.
    
    Essentially:
    
    - Remove unused code.
    
    - Make it 'go vet' clean. The only remaining warnings are in generated code.
    
    - Make it 'golint' clean. The only remaining warnings are in gerenated code.
    
    - Smoothed out same minor things.
    
    Change-Id: I3fe5c1fbead27b0e7a9c247fee2f5a45bc2d42c6

commit b90350737180876c6318c57cc260b62f8f0c94cb
Merge: 08d4dcf 9016108
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Tue Dec 9 14:46:32 2014 +0100

    Merge pull request #418 from prometheus/u-c-l/fix-language
    
    Use less offensive language WRT Travis.

commit 901610835be149305889dec30cd2656e1c824e6e
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Dec 9 14:25:37 2014 +0100

    Use less offensive language WRT Travise.
    
    Change-Id: I6cfc8a1663940283f047cfb36241ac33433ffbd4

commit 08d4dcf223b1453990d0418fa31d66ef23451a00
Merge: 8e0d7db 41dbff7
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Mon Dec 8 17:44:46 2014 +0100

    Merge pull request #416 from prometheus/bjoern/deal-with-complicated-todos
    
    Remove the remaining races, new and old.

commit 41dbff70586faa38ee7d96aa21bc5996ff919807
Merge: 89bb376 8e0d7db
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Dec 8 17:44:18 2014 +0100

    Merge branch 'master' into bjoern/deal-with-complicated-todos
    
    Conflicts:
    	README.md
    
    Change-Id: Ia9cf8c3498ec6238669f52b4114f3db54dd0bd07

commit 8e0d7dbfd80bb961d0cf6b2ac1ab3840d099494b
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 02:06:53 2014 +0100

    Update architecture diagram link in README.md.

commit 9c43ed7b6d67211337a9f538c71ccc1b63f2e520
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Dec 7 01:57:13 2014 +0100

    Update architecture diagram.
    
    Include links to components and include the pushgateway.
    
    Change-Id: I8edb246fac3ba6b2f97ef0d810e0d3bf163be5f7

commit 0939e21c93a8c764a5c64612004d242e349bd897
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 01:36:12 2014 +0100

    Add quotes around ARGUMENTS in README.md.

commit d769e39ea3e8e437624b4dde71070829fba03329
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 01:34:56 2014 +0100

    Fix protoc link display.

commit 05616dfa86086a7e7ce64a828133befacbaacfe1
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 01:29:56 2014 +0100

    Use sentence-style casing in headline

commit 3df9566664890c028aa5c455398a4ed55fd88ff6
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 01:29:13 2014 +0100

    Reformat architecture overview section.

commit f1fcac724d608c701924a822ffb844d875a528fb
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 01:28:07 2014 +0100

    Use rawgit.com to get correct SVG headers

commit c3922330e9bda6d78aa2f8aa20976aee2d94468f
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 01:23:01 2014 +0100

    Include architecture diagram in README.md.

commit 6717f6b2f41b8525ab045e93339051a9a223bc18
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Dec 7 01:21:14 2014 +0100

    Add architecture overview diagram.
    
    Change-Id: I860a748be534b2b9b0b60a9dd2e4436b78cc3907

commit 5b942982b7e92dc175adbdc544a5870680961a46
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 00:09:09 2014 +0100

    Fix another README.md typo.

commit cc83fdc9c332ea1b2b97bd1583b6f0ee2277e80d
Author: juliusv <julius@soundcloud.com>
Date:   Sun Dec 7 00:05:10 2014 +0100

    Make README.md introduction less esoteric.

commit a0457829ee62aaf9ca8dee2c6df198ba1dc9a622
Author: juliusv <julius@soundcloud.com>
Date:   Sat Dec 6 23:52:19 2014 +0100

    Some more README.md updates.

commit c1b0237d4bb1f475727a07478944de2c87784012
Author: juliusv <julius@soundcloud.com>
Date:   Sat Dec 6 23:46:33 2014 +0100

    Fix typo in README.md

commit f71c21545496a35db0c9664188790487feb8fcb5
Merge: c0e5ac3 88019e8
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Sat Dec 6 13:26:32 2014 +0100

    Merge pull request #415 from peterbourgon/fix-dockerfile
    
    Fix Dockerfile for new repo layout

commit 89bb376bceb74d164c27f17b42e258f1b12a12e8
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Dec 5 19:40:41 2014 +0100

    Reduce lock-protected area during scrape.
    
    Change-Id: Iaa7faa7c916b1890b568d05bd8bfff6299b6767d

commit 88019e852aac19891b7a122e882b6511b576402d
Author: Peter Bourgon <peter@bourgon.org>
Date:   Thu Dec 4 20:47:17 2014 +0100

    Use ENTRYPOINT and CMD

commit fee88a7a77447cab47607bf10cb4e9517c667663
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Dec 3 18:07:23 2014 +0100

    Remove the remaining races, new and old.
    
    Also, resolve a few other TODOs.
    
    Change-Id: Icb39b5a5e8ca22ebcb48771cd8951c5d9e112691

commit ec4182c8c75e1cd27ba1e655330e61bfed86f368
Author: Peter Bourgon <peter@bourgon.org>
Date:   Wed Dec 3 15:02:37 2014 +0100

    Remove newline at end of Dockerfile

commit dde42091444165691bb28449c09afff18ae2c1a0
Author: Peter Bourgon <peter@bourgon.org>
Date:   Wed Dec 3 14:53:35 2014 +0100

    Fix Dockerfile for new repo layout

commit c0e5ac35f008389cc7b3276046eaf42c55d4bca4
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Nov 28 16:16:29 2014 +0100

    Remove spurious quotes in Makefile.INCLUDE.
    
    Change-Id: Ic75f00e73dbfdeaa8419f5b22789fe24c84ec606

commit 7c3bb145e16f794145ce4a1064b76c20b9a5a13a
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Nov 28 16:11:49 2014 +0100

    Bump VERSION to 0.9.0rc1.
    
    Change-Id: Ie1a02d026290e9ecee83990b7baa2cd730df6869

commit ee9b32cd1327c3cc8002fefcb4622d5cb4ff9f44
Merge: ea86f7e 66c80b5
Author: Björn Rabenstein <bjoern@rabenste.in>
Date:   Fri Nov 28 12:53:20 2014 +0100

    Merge pull request #413 from prometheus/cleanup/do-some-todos
    
    Cleanup/do some todos

commit 66c80b5ebdfb055299a1d8dd0936a0fb3703b887
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Nov 28 12:50:19 2014 +0100

    Fix typo.
    
    Change-Id: I72608c7841c00145458807d3c3ee29db7b5ac2bc

commit 674624f1c85a227b567bcf72f199c02fe6cb45ce
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Nov 27 20:46:45 2014 +0100

    Completed more TODOs.
    
    - Documented checkpoint file format.
    - High-level description of series sanitation.
    - Replace fp.LoadFromString panic with an error.
      (Change in client_golang already submitted.)
    - Introduced checks for series file size where appropriate.
    - Removed two Law of Demeter violations.
    
    Change-Id: I555d97a2c8f4769820c2fc8bf5d6f4e160222abc

commit 7d11019aa25d324e470c0cbaf69b2933fb5c18dd
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Nov 27 18:25:03 2014 +0100

    Squash a few trivial TODOs.
    
    - Delete unneeded file view_adapter.go.
    - Assessed that we still need the fingerprints in nodes
      (to create iterators).
    - Turned numMemChunkDescs into a metric.
    
    Change-Id: I29be963c795a075ec00c095f76bf26405535609d

commit 49683c0c206e63e0a476a6577fcea7b2a0a1bd38
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Nov 27 18:04:48 2014 +0100

    Avoid test flags in normal binary.
    
    Change-Id: If1fba813a73bf93ea5918dcda326e3ffa81a797d

commit ea86f7e8f8b3a98a9034d3ac676b07b068d1f583
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Nov 25 17:39:02 2014 +0100

    Fix weird things after merge.
    
    And I swear I'll never use 'rebase' to 'clean something up' ever agin,
    even if Julius tells me to do so...
    
    Change-Id: Ifeabab20445279bf693c95f062da769b60fe195f

commit 3a17aeabfda98bac415cbc9dc5f87382bf7f8622
Merge: 00fd10e 9bc0505
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Nov 25 17:36:17 2014 +0100

    Merge branch 'beorn/storage-ng-with-commit-history-cleaned-up'
    
    Conflicts:
    	Makefile
    	Makefile.INCLUDE
    	VERSION
    	main.go
    	notification/notification.go
    	retrieval/target.go
    	retrieval/target_test.go
    	retrieval/targetmanager.go
    	retrieval/targetmanager_test.go
    	retrieval/targetpool.go
    	retrieval/targetpool_test.go
    	rules/ast/functions.go
    	rules/rules_test.go
    	storage/metric/interface.go
    	storage/metric/tiered/curator.go
    	storage/metric/tiered/end_to_end_test.go
    	storage/metric/tiered/leveldb.go
    	storage/metric/tiered/memory.go
    	storage/metric/tiered/memory_test.go
    	storage/metric/tiered/tiered.go
    	storage/remote/queue_manager.go
    	templates/templates.go
    	templates/templates_test.go
    	web/api/query.go
    	web/consoles.go
    	web/web.go
    
    Change-Id: I96e6312b51e877d4434fe96c494e9558fe2e1d16

commit 9bc05052ad66e46ab2c99e476550f4f85c1ad23a
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Nov 25 17:15:56 2014 +0100

    Add line that has mysteriously disappeared after rebase.
    
    Change-Id: I3612eb0b626e66e607b363e9801f187d2ba637a3

commit 1491fb9370e55266b7788e816faef86f2eb08f93
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Nov 20 18:10:43 2014 +0100

    Update GeneratorURL field name in notification tests.
    
    Change-Id: Ic4357999b6ebcf54008869a395e56d12a0ead211

commit af8c6df94d26e7d85a9c614c7e24fa0efab23306
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 30 16:18:05 2014 +0100

    Eliminate modal alerts in graphing UI.
    
    This shows errors in a pane under the expression input instead.
    
    Change-Id: Iec209e1628a3b102cce9f34b2467621772dfb8ff

commit 5e8d57bec1a21c39b55f20c67425c065405f8153
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 30 16:38:25 2014 +0100

    Make tabular view the default (vs. graphing view).
    
    Change-Id: I9f0961f2c474e8cce5e376ce4e20040644f89370

commit 6eecee55b71d7ad0c2bfb5da2e25c34af4bef9ba
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 27 16:59:38 2014 +0100

    Fix acronym caps in GeneratorURL.
    
    Change-Id: Ib18c1f617dcde1039e848059545a6d8831d9bf66

commit 0ae1d8889abd7a8bd2d5336d80bc74b53da94b6f
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Nov 24 20:12:58 2014 +0100

    Fix tests after merge.
    
    Change-Id: Ia90da9a3e48ed780ec38c4a6a1fd9ea34e7f6a58

commit b7bf11230a5ae185758c8d25138c83c564e52380
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 15 19:13:52 2014 +0200

    Add absent() function.
    
    A common problem in Prometheus alerting is to detect when no timeseries
    exist for a given metric name and label combination. Unfortunately,
    Prometheus alert expressions need to be of vector type, and
    "count(nonexistent_metric)" results in an empty vector, yielding no
    output vector elements to base an alert on. The newly introduced
    absent() function solves this issue:
    
      ALERT FooAbsent IF absent(foo{job="myjob"}) [...]
    
    absent() has the following behavior:
    
    - if the vector passed to it has any elements, it returns an empty
      vector.
    
    - if the vector passed to it has no elements, it returns a 1-element
      vector with the value 1.
    
    In the second case, absent() tries to be smart about deriving labels of
    the 1-element output vector from the input vector:
    
      absent(nonexistent{job="myjob"})                   => {job="myjob"}
      absent(nonexistent{job="myjob",instance=~".*"})    => {job="myjob"}
      absent(sum(nonexistent{job="myjob"}))              => {}
    
    That is, if the passed vector is a literal vector selector, it takes all
    "=" label matchers as the basis for the output labels, but ignores all
    non-equals or regex matchers. Also, if the passed vector results from a
    non-selector expression, no labels can be derived.
    
    Change-Id: I948505a1488d50265ab5692a3286bd7c8c70cd78

commit 3d47f94149b0c974c1631cc291016e545940282a
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 15 17:03:08 2014 +0200

    Drop metric names after transformations.
    
    After many transformations, it doesn't make sense to keep the metric
    names, since the result of the transformation is no longer that metric.
    This drops the metric name after such transformations and makes the web
    UI deal well with missing metric names.
    
    This depends on the current branch on the following things:
    
    - prometheus/client_golang needs to be at
      https://github.com/prometheus/client_golang/commit/e237cf15c6967a6184e423a08154d9c6eecb330c
      in branch "julius/int-fingerprints" (to be merged with new storage)
    
    - prometheus/promdash needs to be at
      https://github.com/prometheus/promdash/commit/dd7691c9c28c36767ae9559db8eab6d6715dffa8
    
    Change-Id: Ib3c8cad8d647d9854e8c653c424b8c235ccc231d

commit 53c0a437541c839d85ef578d412928203bd192ba
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Nov 21 13:27:28 2014 +0100

    Update README.md.
    
    Change-Id: Ife51ed266333ff8bc228260187ea4bcf377bde31

commit 14bda4180ccdd763d2207c4eb7efb91d205f7f46
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Nov 20 21:03:51 2014 +0100

    Changes after pair code review.
    
    Change-Id: Ib72d40f8e9027818cfbbd32a7a7201eebda07455

commit a2feed343ad76614cdf9392623bd543e7c7044b2
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Nov 19 19:25:21 2014 +0100

    Convert another occurrence from chan bool to chan struct{}.
    
    Change-Id: I11ba127a934ee3aec0fcd139ad32a7751cff77a0

commit 006b5517e2943a44754823f5fbcef0c645593ac9
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Nov 17 19:20:39 2014 +0100

    Simplify makefiles.
    
    This removes the dependancy on C leveldb and snappy.
    It also takes care of fewer dependencies as they would
    anyway not work on any non-Debian, non-Brew system.
    
    Change-Id: Ia70dce1ba8a816a003587927e0b3a3f8ad2fd28c

commit 9ea808cd8b45873fe85988a1a9619716c7bbe889
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Nov 14 18:52:39 2014 +0100

    Remove debug log line.
    
    Change-Id: Icdd2351b89f2d37ac2b615f9cf872e054c694ad1

commit bb42cc2e2dcabbdd7360aa64ba36bfaeb71f494f
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Nov 13 20:50:25 2014 +0100

    Evict based on memory pressure. Evict recently used chunks last.
    
    Change-Id: Ie6168f0cdb3917bdc63b6fe15585dd70c1e42afe

commit e23ee0f7cc2615d73a5989e83c1a7bc78150b810
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Nov 13 17:11:39 2014 +0100

    Fix race in test.
    
    Change-Id: I53e1a4c5a6b5f846acd76043166b6cb7bf7d5dc7

commit d73e851b142316221273519742df907799b9103f
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Nov 13 16:55:15 2014 +0100

    Tweak timing in the maintenance loop.
    
    Change-Id: I9801c4f9a22c3b3dc1ce1af81fdd9e992a4f4dd7

commit 2672aa8ece5d50eec83b3a493cfe5b03c6b7a163
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Nov 12 17:12:57 2014 +0100

    Instrument series maintenance.
    
    Change-Id: Ie4269d07ad4d23d44230c95a523088b472718e54

commit 371445f4dabae10685d9b4aad778873386457750
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Nov 12 14:00:34 2014 +0100

    Fix typo in comment.
    
    Change-Id: Ib3ee493bb29e7e9967214627e543baedb897ab67

commit 74c143c4c9e0751dc84490054adbcf91b5104289
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Nov 12 00:38:28 2014 +0100

    Improve scraper shutdown time.
    
    - Stop target pools in parallel.
    - Stop individual scrapers in goroutines, too.
    - Timing tweaks.
    
    Change-Id: I9dff1ee18616694f14b04408eaf1625d0f989696

commit 92156ee89dd9d43352170bb8ffdabd75523e0c08
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Nov 11 16:41:20 2014 +0100

    Drain the newBaseLabels channel upon shutdown.
    
    This should help cut down shutdown times.
    
    Change-Id: I6e70a598a9e49aa6eeeb2034105b1bc6e9014324

commit 3f61d304ce5c6cfde78553980630afbba5a1f99d
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Nov 10 22:26:07 2014 +0100

    Reorganize maintenance loop.
    
    Change-Id: Iac10f988ba3e93ffb188f49c30f92e0b6adce5a3

commit a5f56639b843d7b7631bf6385a69735a9bca86a7
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Nov 10 19:42:55 2014 +0100

    Instrument unwritten samples queue.
    
    Change-Id: Id77387314d340a5118490cf08e7bbc37c7366b25

commit c087ee35f700d36811681a4eea57f7da7cd38484
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Nov 10 18:33:31 2014 +0100

    Remove archiveMtx.
    
    Change-Id: Ie8019f860bbda68621f74380c90a4e57930d3d7a

commit 7af42eda65fad4ca5b6aecc8ec080245e84fea4d
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Nov 10 18:22:08 2014 +0100

    Optimize purging.
    
    Now only purge if there is something to purge.
    Also, set savedFirstTime and archived time range appropriately.
    (Which is needed for the optimization.)
    
    Change-Id: Idcd33319a84def3ce0318d886f10c6800369e7f9

commit 33b959b898f509f957fedbe3a60228b124a7efbb
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Sat Nov 8 01:01:34 2014 +0100

    Persist savedFirstTime in checkpoint.
    
    Change-Id: Ibdfdea16fad0608ec104fbccc749e824a171f227

commit 904acd43dad4b65d89119c856d2c0adafb2bc307
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Nov 5 20:02:45 2014 +0100

    Add crash recovery.
    
    Fix the behavior if preload for non-existent series is requested.
    
    Instead of returning an error (which triggers a panic further up),
    simply count those incidents. They can happen regularly, we just want
    to know if they happen too frequently because that would mean the
    indexing is behind or broken.
    
    Change-Id: I4b2d1b93c4146eeea897d188063cb9574a270f8b

commit 7a9efc9c59b7e2d7f13c3f0851b5977b5fc079c2
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Nov 5 14:53:49 2014 +0100

    Fix typo in test.
    
    Change-Id: I3c2fd76bc5f50446c58f8ef693d9c6595197feaa

commit 4efc60174b7d4ba32f7e92767ab387b76cf29231
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Nov 4 16:27:14 2014 +0100

    Tweak and verify a few parameters.
    
    Remove TODOs accordingly.
    
    Change-Id: Ic062e13b6ae89a9135d3f14011114fe1cca1cef8

commit 5f8e9617efed3c1b5a711e07e971b1df2b418bfa
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 28 19:01:41 2014 +0100

    Add more tests.
    
    Add an end-to-end fuzz and race test.
    
    Fix a race exposed by the above.
    
    Change-Id: Ifaa39a90cefbde8d4c29bda197cc92592ded21bb

commit d215e013b78255152598475938302e42444614f6
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Oct 27 20:40:48 2014 +0100

    Fix the weird chunkDesc shuffling bug.
    
    The root cause was that after chunkDesc eviction, the offset between
    memory representation of chunk layout (via chunkDescs in memory) was
    shiftet against chunks as layed out on disk. Keeping the offset up to
    date is by no means trivial, so this commit is pretty involved.
    
    Also, found a race that for some reason didn't bite us so far:
    Persisting chunks was completel unlocked, so if chunks were purged on
    disk at the same time, disaster would strike. However, locking the
    persisting of chunk revealed interesting dead locks. Basically, never
    queue under the fp lock.
    
    Change-Id: I1ea9e4e71024cabbc1f9601b28e74db0c5c55db8

commit a617269b12aa6fb3bec890a9f447ae94f9908f2d
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Oct 27 15:55:44 2014 +0100

    Avoid unnecessary cloning of the head chunk.
    
    Change-Id: I5da774515d5493166a197b5814d0a720628cfaff

commit f1de5b0c4e0683c86e2ac71b3272b1fddbbae3c9
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Oct 24 20:27:27 2014 +0200

    Run checkpointing of in-memory metrics and head chunks periodically.
    
    Checkpointing interval is now a command line flag.
    
    Along the way, several things were refactored.
    - Restructure the way the storage is started and stopped..
    - Number of series in checkpoint is now a uint64, not a varint.
      (Breaks old checkpoints, needs wipe!)
    - More consistent naming and order of methods.
    
    Change-Id: I883d9170c9a608ee716bb0ab3d0ded8ca03760d9

commit 74c9b34a5e98f50f7789f5baa91b2ac1d21e9023
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Oct 23 15:18:32 2014 +0200

    Improve storage instrumentation even more.
    
    Add gauge for chunks and chunkdescs in memory (backed by a global
    variable to be used later not only for instrumentation but also for
    memory management).
    
    Refactored instrumentation code once more (instrumentation.go is back :).
    
    Change-Id: Ife39947e22a48cac4982db7369c231947f446e17

commit c3fcea45e3c01fb69ae17d6ccb7dde80f4f0629a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 23 11:47:15 2014 +0200

    Support finer time resolutions than 1 second.
    
    Change-Id: I4c5f1d6d2361e841999b23283d1961b1bd0c2859

commit 0712d738d13cfe41175785dd66b102fcac0ba798
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 22 11:03:11 2014 +0200

    Allow alternative "by"-clause position in grammar.
    
    In addition to the existing by-clause syntax:
    
      sum(<expression>) by (<labels>) [keeping_extra]
    
    ...this allows the following new syntax:
    
      sum by (<labels>) [keeping_extra] (<expression>)
    
    Both orderings may be used in a single expression. It is up to the users
    to establish guidelines around their usage.
    
    Change-Id: Iba10c9cc5fb6ac62edfcf246d281473e82467992

commit f114bbd4e70a6b0dbfd6bff4cc3c4561e03cf912
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Mon Oct 20 13:51:39 2014 +0100

    Make query_range more robust.
    
    Gracefully handle decimal values, by truncating them.
    
    Limit amount of steps, to avoid accidentally pulling too much data.
    This limit returns up to ~500kB per timeseries, and allows
    for 60s granularity for a week and 1h granularity for a year.
    
    Change-Id: Ie549fc24deb2eecbc6c5d1b6088a548a6b02e849

commit 75e37db55be8dccc53439b973730dda967b51501
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Oct 15 15:38:09 2014 +0100

    Don't alert() when a query is aborted,
    such as when you change the range.
    
    Change-Id: I574504f97446ac5f3dda737fe054ae83f17dbbc2

commit 0e48c18bbfac7f98945712e084c89833d2673d1b
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Oct 14 17:21:39 2014 +0200

    Allow omitting the metric name in queries.
    
    This allows the following expression syntaxes for selecting timeseries:
    
      foo                    (already valid before)
      foo{}                  (already valid before)
      {job="prometheus"}     (new, select all timeseries for job "prometheus")
    
    Omitting both the metric name *and* any label matchers ("" or "{}") will
    still yield a syntax error.
    
    To get all timeseries, you could do:
    
        {__name__=~".*"}
           or, without relying on knowledge about __metric__:
        {job=~".*"}
    
    Change-Id: Ifee000b9ac0184ef6ced18411069c7f2699a2dda

commit 443dd3380523d15a4cb299b4ffce1711f9029f5e
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Oct 22 19:21:23 2014 +0200

    Improve instrumentation in storage.
    
    Also, fix some other minor bugs.
    
    Change-Id: If72f1c058b0f47d3e378fdf80228d7e9a8db06c7

commit 351e66c5d258316e78c3478b682c46d7a387d5a7
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 22 15:26:58 2014 +0200

    Remove obsolete "coding" directory.
    
    Change-Id: I9e71098fd526336b4af7f7eab6d2a43504079658

commit 1936a40e759d1639606bcd78ce37a418fe5f7292
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 21 17:59:31 2014 +0200

    Minor loging improvement.
    
    Change-Id: I7875d1a58ef9c5ff149f18e36f65959a4712fea2

commit 192bf52c41f15eccd6914fd157b8ab7db97f3c23
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 21 17:53:53 2014 +0200

    Evict chunkDescs, too.
    
    Change-Id: I8b70f22fbf1dfcbc49f9ec391985144649e6ce9c

commit 95f392fb2cff377a6db5ebaf03fd5548b66fa7ca
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Oct 17 13:55:54 2014 +0200

    Prevent an indexing death spiral.
    
    Change-Id: I86b20cd0830d02f87b2f020767257e2d3fb2033c

commit 40354eaa29b3dbf77c6c89df0a371279a19e8cf8
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Oct 15 17:07:12 2014 +0200

    Reduce directory depth by one.
    
    Change-Id: I7f89df61135ff19169ed97633a662685d414c448

commit 096fa0f8b2163216938f3164af931f4eab801988
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Oct 15 15:53:05 2014 +0200

    Squash a number of TODOs.
    
    - Staleness delta is no a proper function parameter and not replicated
      from package ast.
    
    - Named type 'chunks' replaced by explicit '[]chunk' to avoid confusion.
    
    - For the same reason, replaced 'chunkDescs' by '[]*chunkDescs'.
    
    - Verified that math.Modf is not a speed enhancement over conversion
      (actually 5x slower).
    
    - Renamed firstTimeField, lastTimeField into chunkFirstTime and
      chunkLastTime.
    
    - Verified unpin() is sufficiently goroutine-safe.
    
    - Decided not to update archivedFingerprintToTimeRange upon series
      truncation and added a rationale why.
    
    Change-Id: I863b8d785e5ad9f71eb63e229845eacf1bed8534

commit 427c8d53a56c75b87aaa6631cf87f9013a6f1d37
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 14 18:23:32 2014 +0200

    Fix handling of empty chunkDescs while preloading chunks.
    
    Change-Id: I73ce89fe0ef90c6eda78218e5be2cbfa0207c364

commit ecee5d82811cc9793d5f3c0ee5b928be98dc767c
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 14 17:44:01 2014 +0200

    Fix head chunk persisting and a chunkDesc race condition.
    
    - Head chunk persisting only happens in evictOlderThan, so do it
      there.  (With the previous code, it would never happen.)
    
    - Raw accesses to chunkDesc.chunk are now done via isEvicted (with
      locking).
    
    Change-Id: I48b07b56dfea4899b50df159b4ea566954396fcd

commit 9c3ecc21345b4f85fad12cda717510d2e519c960
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 14 14:59:13 2014 +0200

    Remove unused flags.
    
    Change-Id: Ie1bcbb0743d65e92072628811706d49753023205

commit 6b37e47f9e3f98c066ac96a010a66d90f8584b1b
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 14 14:26:31 2014 +0200

    Remove unused metrics.
    
    Change-Id: Icf03ba4ce92a5e38daf12930f9661daba79c83bb

commit 2b4ff620aaa63996c472c4148c682ee8f53f5d1b
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 14 13:52:39 2014 +0200

    Return a nop iterator for series that have been purged completely.
    
    Change-Id: I6e92cac4472486feefdecba8593c17867e8c710d

commit 6e3a366f9125da324e1dad34083ebb80413e28bb
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Oct 13 19:52:27 2014 +0200

    Only archive a time series when none of its chunks is pinned.
    
    Change-Id: I7e4b67c34b417b8980173bc5dc3b213bd7d698e5

commit bfa64248b7b1659afbd92cac749cdf8cd5581aff
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 13 18:55:46 2014 +0200

    Deal with missing series in preloading.
    
    Change-Id: Ibf3a57b329f40a3d5e0b98464a2f45d2f1bd07bf

commit ca42a22e209b0f608fb957ed65fcdaacd7865b32
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Oct 10 19:16:07 2014 +0200

    Add safety panic to seriesMap.put.
    
    Change-Id: I4d4d2e45cc0f908a33eb1ae6e3ee6796adfcbd1e

commit 83b4fa868daef97f953bcabf5c3de55f9bb6739c
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Oct 10 15:34:09 2014 +0200

    Fix GetBoundaryValues.
    
    Change-Id: I8f8bbdb88e9b24e4c37ff869126ed9343f261ce2

commit 4fc8ad6677bb1b46eddcf9f04848680f3233aa90
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Oct 10 15:24:38 2014 +0200

    Fix retrieval unit tests.
    
    Change-Id: I299b71406b59539230e5182ccc37bc8a83af60b3

commit b3ed9aa7a2aef209b3c81c36d54b575d67e4e34c
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Oct 10 14:19:02 2014 +0200

    Clean up start-up and shut-down.
    
    Change-Id: Idff4bbb0a15a9f879bfbb3da5b1025179cab5e2c

commit 4447708c9fab2fff32fd9c900849f3b9de93341e
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Oct 9 15:59:47 2014 +0200

    Fix a race in target.go.
    
    Also, fix problems in shutdown.
    Starting serving and shutdown still has to be cleaned up properly.
    It's a mess.
    
    Change-Id: I51061db12064e434066446e6fceac32741c4f84c

commit fd6600850ac661337db44a43be71f748845aeb33
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Oct 9 13:03:54 2014 +0200

    Fix race in chunkDesc.
    
    Change-Id: Id7bae115d75886e10d44184a690a76777b1531fe

commit 1c53c09558fe3bcc5e80815d3740960b190b0e62
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Oct 9 12:49:32 2014 +0200

    Treat empty chunkDescs properly in preloadChunksForRange.
    
    Change-Id: Ida1bd3fe1f9fb0ea2d5dbb9704be926f0824f873

commit 934d09f738a08c3a5ec44fe310975e36d9097559
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Oct 9 12:30:34 2014 +0200

    Fix race during shutdown.
    
    Change-Id: I2f8bf48d92a14f1e5ecde27c1b138734d7653394

commit 38fc24d0ede64b54fd93df6bd2789dfca798aa41
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Oct 8 16:22:54 2014 +0200

    Fix targetpool_test.go and other tests.
    
    Change-Id: I91a4dd1d39e01f174e1aaae653ce1ed7aecaa624

commit fd34e4061dbf601230317b500b4e54548383b130
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Oct 2 15:44:47 2014 +0100

    Add back consoles link.
    
    Goes in index.html in consoles or else user data, if present.
    
    Change-Id: I5303d30aa24ca0c20d2e0f49121e04a260b9c4f4

commit e389e636845d521027b5f86a166c531c463c9c68
Author: Andres Suarez <zertosh@gmail.com>
Date:   Tue Sep 16 12:20:31 2014 -0400

    Focus expression after selection from dropdown
    
    Change-Id: Id7f67e558e3611ab4c7188cc428c342d8d3e67db

commit 86a447fc0e5dc66940c53e1a21d7f490c6884b4c
Author: Andres Suarez <zertosh@gmail.com>
Date:   Tue Sep 16 12:13:11 2014 -0400

    Allow selecting metric from Insert Metric
    
    Change-Id: I99e0539cab2749a8aeabc0a13015889ff45834f7

commit 7f5d3c2c29786bf526768763ace30e36b6ad1122
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 8 13:49:42 2014 +0200

    Fix and improve the fp locker.
    
    Benchmark:
    $ go test -bench 'Fingerprint' -test.run 'Fingerprint' -test.cpu=1,2,4
    
    OLD
    BenchmarkFingerprintLockerParallel        500000              3618 ns/op
    BenchmarkFingerprintLockerParallel-2      100000             12257 ns/op
    BenchmarkFingerprintLockerParallel-4      500000             10164 ns/op
    BenchmarkFingerprintLockerSerial        10000000               283 ns/op
    BenchmarkFingerprintLockerSerial-2      10000000               284 ns/op
    BenchmarkFingerprintLockerSerial-4      10000000               288 ns/op
    
    NEW
    BenchmarkFingerprintLockerParallel       1000000              1018 ns/op
    BenchmarkFingerprintLockerParallel-2     1000000              1164 ns/op
    BenchmarkFingerprintLockerParallel-4     2000000               910 ns/op
    BenchmarkFingerprintLockerSerial        50000000                56.0 ns/op
    BenchmarkFingerprintLockerSerial-2      50000000                47.9 ns/op
    BenchmarkFingerprintLockerSerial-4      50000000                54.5 ns/op
    
    Change-Id: I3c65a43822840e7e64c3c3cfe759e1de51272581

commit 7ad55ef83cb0e84d3d799c72017791825f0f3427
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 7 20:09:56 2014 +0200

    Actually close the iterator channels.
    
    Change-Id: I6f6a2aef5ff55c6b2d21ad91d02ae6b0ecba4ae8

commit 8fba3302bcb87c3a6290f7e3777b07d5977ea9e9
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Oct 7 19:11:24 2014 +0200

    Bold changes to concurrency.
    
    (WIP. Probably doesn't work yet.)
    
    Change-Id: Id1537dfcca53831a1d428078a5863ece7bdf4875

commit fcdf5a8ee7d1dcfbce518186e76de1d0861d7ed6
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Oct 6 16:32:08 2014 +0200

    Fix bugs in chunk evict code.
    
    Also, simplify code by re-looking up metric in metric map.
    
    Change-Id: Ib2092f9184374e5a543e87d3a9f4a74fda64b193

commit 7e6a03fbf9f6f5dcf98884fd98d2b1f8d4398692
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Oct 6 15:58:12 2014 +0200

    Fix a few concurrency issues before starting to use the new fp locker.
    
    Change-Id: I8615e8816e79ef0882e123163ee590c739b79d12

commit db92620163930a4ef85c39c199ca77a002647140
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 6 00:00:40 2014 +0200

    Instrument eviction and purge durations.
    
    Change-Id: Ia5b2319363ad2644674c9b7a94162a89bcc296fb

commit e0ee7ec7abcb20c75a8f2558d02113c9cafb7439
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 2 17:53:37 2014 +0200

    Add fingerprintLocker for locking individual fingerprints.
    
    Change-Id: Id41ba555715229edf7d6543f56736b82f6eff1ef

commit df1b2a24226f7cbec6eaee8ce3c17b67c994f2b9
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 24 17:18:48 2014 +0200

    Fix indexing latency instrumentation.
    
    Change-Id: I532c170121cd2996d1a378adbb1fd551cd5a4e38

commit 01dd618a20316bba59fd3032c2398fde70ca3856
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Oct 2 16:06:57 2014 +0200

    Fix a locking bug.
    
    Change-Id: I183780785991d0b4165ce9186f53eb8201fb3ed5

commit 358f97791d8c012249881ba8b8f6a911f7a2c7e6
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 24 16:52:00 2014 +0200

    Minor cleanups.
    
    Change-Id: Ia8685d8439a421fe2143d9ec7120d5bb5ab88d78

commit a746fbb8bc2a86947b782ab95cec235a55f4c121
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 24 16:51:18 2014 +0200

    Instrument indexing: queue length, batch sizes and latencies.
    
    Change-Id: I60bcbd24b160e47d418a485d8cffa39344a257c6

commit aea32b0b4bd2daace4b2908c19520d29f58cfec6
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Sep 24 16:55:45 2014 +0200

    Avoid redundant fingerprint calculation.
    
    Change-Id: Ief8a165dcfa5030226953346ec9dfe4a7787df1f

commit e9ff29c547df0096b6d50313f27ee788af6c1845
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Sep 24 16:32:07 2014 +0200

    Comment/code cleanup.
    
    Change-Id: I38736e3d0fec79759a2bafa35aecf914480ff810

commit 0031a448e2cc8b1dfb16faf0228cbcb99d2d2a51
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Sep 24 14:41:38 2014 +0200

    Add WaitForIndexing.
    
    Change-Id: I5a5c975c4246632f937413322c855bbe63d00802

commit c7aad110fbae5c6269943aeb137f70d0e8e76e1c
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Sep 23 19:21:10 2014 +0200

    Add an indexing queue and batch the ops.
    
    Some other improvements on the way, in particular codec -> codable
    renaming and addition of LookupSet methods.
    
    Change-Id: I978f8f3f84ca8e4d39a9d9f152ae0ad274bbf4e2

commit 71206dbc06bccab8d78b0ef1b48cacdc518a5621
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Sep 19 18:18:44 2014 +0200

    More code cleanups.
    
    Add license text everywhere.
    And others....
    
    Change-Id: I11ccde267a2ef7eb366c4788ba7aeae14ba7545c

commit f0d5d4bda3868313bdb7fbc6704307e1c68c75d6
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Sep 18 17:14:37 2014 +0200

    Fix bug around index purging.
    
    Change-Id: I8cea00e03f72bbeead2cbd2d26b34d986059ced0

commit 630b5a087a14784797dce8bba1402d613a36ad86
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Sep 18 17:14:14 2014 +0200

    Also consider on-disk fingerprints during purge.
    
    This reintroduces LevelDB iterators so that we can iterate through all
    the on-disk fingerprints.
    
    Change-Id: I007ee4638d038d2a4461bbda27f30fcaad411474

commit f5f9f3514a12bb9332ae85187377827d518370a8
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Sep 16 15:47:24 2014 +0200

    Major code cleanup.
    
    - Make it go-vet and golint clean.
    - Add comments, TODOs, etc.
    
    Change-Id: If1392d96f3d5b4cdde597b10c8dff1769fcfabe2

commit 3592dc23598e3290f62477cd4af433b20d0e11cd
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Sep 15 19:24:26 2014 +0200

    Implement series eviction.
    
    Change-Id: I7a503e0ba78aae3761d032851b06f2807122b085

commit bbf49200ab05c9aad3a4a6066de253fc6cc550dc
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Sun Sep 14 15:33:56 2014 +0200

    Implement methods in persistence.go.
    
    Change-Id: I804cdd0b30420e171825fd86fe1281eca0d5e638

commit 5a128a04a94d7a0d564d7348092671751e65215e
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Sep 10 18:41:52 2014 +0200

    Major reorganization of the storage.
    
    Most important, the heads file will now persist all the chunk descs,
    too. Implicitly, it will serve as the persisted form of the
    fp-to-series map.
    
    Change-Id: Ic867e78f2714d54c3b5733939cc5aef43f7bd08d

commit e7cb9ddb9fecd601f625e1f5f7b25ecd98df62c5
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Sep 9 17:16:59 2014 +0200

    Use a sync.pool for the staging buffer in codec.go.
    
    Change-Id: I1aae6847f77b5a7c75582b07c199b1943cf90552

commit 4770cf76a41127f854626579d68d223b5c08fe3d
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Sep 9 15:13:07 2014 +0200

    Make index package more self-contained.
    
    Moved interna from diskPersistence into the indexer.
    TotalIndexer now called diskIndexer.
    
    Change-Id: I6c8c62cb171f12bbd8a5474773af7786d71ba388

commit 89f10e8eb2d829fd6ddda7bc2a79f366ebbe0bfa
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Sep 9 14:36:26 2014 +0200

    Move to using the standard library interfaces for encoding/decoding.
    
    BinaryMarshaler instead of encodable.
    BinaryUnmarshaler instead of decodable.
    
    Left 'codable' in place for lack of a better word.
    
    Change-Id: I8a104be7d6db916e8dbc47ff95e6ff73b845ac22

commit af77d5ef0bad5248904675e7d689449ff74705bb
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Sep 4 16:59:13 2014 +0200

    Added a few missing implementations in index.go.
    
    Also, added closing of persistence and mem storage.
    
    Change-Id: Iacf0d22c3520dd2584d9546984c1f8a5ed6cd54e

commit 70e48376501f0f6cad550a60cf5caba2acbc4d74
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Sep 4 15:41:13 2014 +0200

    Cut v0.8.0.
    
    Change-Id: Ie8d49793e78f10bdeb7ebe19cc2dc729ff7ef590

commit e0a6cb281e8abd4b13fb8386ef15f808f41c1599
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Sep 3 16:46:29 2014 +0200

    Fix the accept header.
    
    A '/' is a separator and has to be in a quoted string.
    
    Change-Id: If7a3a847f84f8f709074d05dc98b5b21e954030c

commit cca7ebe906bacc379ea1c3f0a4eae383de15aea5
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 2 15:27:46 2014 +0200

    Some more cleanups / obsolete code removals.
    
    Change-Id: I584144ceeeedafdb114266d8a6d2513e67b1d010

commit 7e85711df00ebc377d8810962a63ce6980ce1332
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Aug 21 22:06:11 2014 +0200

    Beginnings of a tiered index implementation.
    
    This reintroduces a LevelDB-based metrics index.
    
    Change-Id: I4111540301c52255a07b2f570761707a32f72c05

commit 8dfaa5ecd2161b5b391f33a91f0f2de635779754
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 20 15:27:24 2014 +0200

    Remove use of freelists for chunk bufs.
    
    Change-Id: Ib887fdb61e1d96da0cd32545817b925ba88831c1

commit 7b35e0f0b8bd5c806ddf1734592e52a3f03be0d6
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 20 15:06:29 2014 +0200

    Use constants from math package instead of literals.
    
    Change-Id: I55427ba32c2cbb32ee42ec1e3153160965ab8b3c

commit 15929eece22f8f7586c9674ed390a12dad246051
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 20 15:05:58 2014 +0200

    Unpin any already loaded chunks upon preloading error.
    
    Change-Id: Ib451136e3ef21bce8b814c21b66eaab727ab341b

commit fd01d07589205dd6ef643cbfdad65ab0820bdc89
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 20 15:05:04 2014 +0200

    Check that chunk buffer length fits in 16 bit.
    
    Change-Id: Id086a54aa8a1990c1979e747c1c02e53bed6d447

commit 1ca7f24137d5a46192348fe2d6fbe77db5e9c050
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Aug 19 18:30:55 2014 +0200

    Remove float diff tolerance altogether.
    
    Change-Id: I9ea9683a4665d5800fca75560bb4b8a8b4406d55

commit d742edfe0d72043fed6c999cf6bd991e64b9748c
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Aug 19 18:14:44 2014 +0200

    Fix precision loss.
    
    Large delta values often imply a difference between a large base value
    and the large delta value, potentially resulting in small numbers with
    a huge precision error. Since large delta values need 8 bytes anyway,
    we are not even saving memory.
    
    As a solution, always save the absoluto value rather than a delta once
    8 bytes would be needed for the delta. Timestamps are then saved as 8
    byte integers, while values are always saved as float64 in that case.
    
    Change-Id: I01100d600515e16df58ce508b50982ffd762cc49

commit dc2e463a97acb40f3afc3dd03b37c0a2b2049b0f
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Aug 19 13:03:35 2014 +0200

    Improvements after review.
    
    Change-Id: I484359282d4c7113518bbbb131f4f18383c08fdb

commit 52c9dc43a3f413bec5bb8a823698bf457e04945d
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Aug 14 18:23:49 2014 +0200

    Improve testing.
    
    In particular, create a fuzz test for time series.
    
    Change-Id: I523a17912405a0b6b46bd395c781d201dfe55036

commit 3b25867d61ab49d8ba8045b1c6ce0fe99eecac89
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 13 17:13:28 2014 +0200

    Add chunk persistence tests, fix storage tests.
    
    Change-Id: Id0b8f5382e99efa839cc0f826e92bbda985fe9a9

commit ecdf5ab14f3d0e84c2ab0f2a1cf06e00ebd664ff
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Aug 12 17:46:46 2014 +0200

    Index-persistence switched from gob to a hand-coded solution.
    
    Change-Id: Ib4ec42535bd08df16d34d4774bb638e35c5a1841

commit e7ed39c9a66b7106775f9cf5a0d82b90344239e3
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 6 11:55:53 2014 +0200

    Initial experimental snapshot of next-gen storage.
    
    Change-Id: Ifb8709960dbedd1d9f5efd88cdd359ee9fa9d26d

commit 134bd8fe3485a0dcff1b33f8059a425d87c8ecef
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 25 15:14:25 2014 +0200

    Format changelog properly.
    
    Change-Id: I62c5bf8c5b880272d207da564a3fc45490c5db5e

commit 5edf689133386c94977e9fe9f62892363dc86b98
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jul 29 19:31:11 2014 +0100

    Stagger scrapes to spread out load.
    
    Change-Id: Ib141b271e4adfb817886871f86051c207b05cf35

commit 1aee992800fe96212f75592d8ffa6f526d050c87
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 6 14:13:17 2014 +0200

    Prometheus version 0.7.0.
    
    Change-Id: I73468f72b43654f4bf57627c2f49fe802b18f637

commit c6e9f085a391c87d27c5812a3224aaf659b494fe
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 5 20:56:05 2014 +0200

    Update used Go version to 1.3.
    
    Go downloads moved to a different URL and require following redirects
    (curl's '-L' option) now.
    
    Go 1.3 deliberately randomizes ranges over maps, which uncovered some
    bugs in our tests. These are fixed too.
    
    Change-Id: Id2d9e185d8d2379a9b7b8ad5ba680024565d15f4

commit 85497e3f38a792cdf767bb6b07b06103777a2dde
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 5 19:56:35 2014 +0200

    Add function to drop common labels in a vector.
    
    This fixes https://github.com/prometheus/prometheus/issues/384.
    
    Change-Id: I2973c4baeb8a4618ec3875fb11c6fcf5d111784b

commit 3fdb74e57113a93175baa3b37b6012fee1f947d9
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 5 20:14:04 2014 +0200

    Add more topk() / bottomk() tests.
    
    Test what happens if k > number of input elements.
    
    Change-Id: Ie724b850939e297ebf085f0a5a3522e9cfcc6534

commit c582ae73c2a2a93ce84ca2fe58f0d3d382770246
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 5 18:57:47 2014 +0200

    Implement topk() and bottomk() functions.
    
    To achieve O(log n * k) runtime, this uses a heap to track the current
    bottom-k or top-k elements while iterating over the full set of
    available elements.
    
    It would be possible to reuse more code between topk and bottomk, but I
    decided for some more duplication for the sake of clarity.
    
    This fixes https://github.com/prometheus/prometheus/issues/399
    
    Change-Id: I7487ddaadbe7acb22ca2cf2283ba6e7915f2b336

commit 1909686789a5a5f1cfd7b87807bba819187d5b1f
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jul 23 19:55:33 2014 +0200

    Make metrics exported by the Prometheus server itself more consistent.
    
    - Always spell out the time unit (e.g. milliseconds instead of ms).
    
    - Remove "_total" from the names of metrics that are not counters.
    
    - Make use of the "Namespace" and "Subsystem" fields in the options.
    
    - Removed the "capacity" facet from all metrics about channels/queues.
      These are all fixed via command line flags and will never change
      during the runtime of a process. Also, they should not be part of
      the same metric family. I have added separate metrics for the
      capacity of queues as convenience. (They will never change and are
      only set once.)
    
    - I left "metric_disk_latency_microseconds" unchanged, although that
      metric measures the latency of the storage device, even if it is not
      a spinning disk. "SSD" is read by many as "solid state disk", so
      it's not too far off. (It should be "solid state drive", of course,
      but "metric_drive_latency_microseconds" is probably confusing.)
    
    - Brian suggested to not mix "failure" and "success" outcome in the
      same metric family (distinguished by labels). For now, I left it as
      it is. We are touching some bigger issue here, especially as other
      parts in the Prometheus ecosystem are following the same
      principle. We still need to come to terms here and then change
      things consistently everywhere.
    
    Change-Id: If799458b450d18f78500f05990301c12525197d3

commit 4a2b96f8482008691b61265d330322ee43cc77f4
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jul 29 17:28:48 2014 +0100

    Remove backoff on scrape failure.
    
    Having metrics with variable timestamps inconsistently
    spaced when things fail will make it harder to write correct rules.
    
    Update status page, requires some refactoring to insert a function.
    
    Change-Id: Ie1c586cca53b8f3b318af8c21c418873063738a8

commit 00b9489f1ce64cba083780547b490c8eda9bce52
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 28 18:10:11 2014 +0200

    Fix time() behavior.
    
    time() should return the timestamp for which the query is executed, not
    the actual current time.
    
    Change-Id: I430a45cabad7785cd58f95b1028a71dff4c87710

commit c5984f1818d9421ecd6770ffad1bd8d8b59a0a44
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 28 16:12:58 2014 +0200

    Add abs() and over-time aggregation functions.
    
    This implements aggregation functions over time as request in
    https://github.com/prometheus/prometheus/issues/383.
    
    Change-Id: Ifd69b850de8cfdf6e7a6c0e042056fa4c672410e

commit 1bb7074feca131803350fa2c94356c38d2642273
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Jul 26 23:41:05 2014 +0200

    Fix HTTP connection leak upon non-OK status.
    
    Change-Id: Ie7fbd7dcc089b8306b40631be3e3d736c23c1cd3

commit 144d5bb9fd921c4ac0efa44785e398371f5daf4b
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Jul 25 17:32:17 2014 +0100

    Add 'tmpl', a 'template' for non-string literal names.
    
    Change-Id: I6a03a5c5d20029cf414562efa7745ed6c53b2731

commit f525ca5d9e6a823a5ad2331edb3eb2e3bba2e926
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Jul 25 13:23:47 2014 +0100

    Let consoles get graph links from experssions.
    
    Rename ConsoleLinkFromExpression, as we now have consoles.
    
    Change-Id: I7ed2c9c83863adb390b51121dd9736845f7bcdfc

commit eba205fcac698cc86436ec1ef91dc9d279f1da43
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jul 24 16:57:56 2014 +0100

    Expose path used to get to console to console.
    
    Change-Id: I72386a2d4e53863da302ecc5c7e44d6c310197e0

commit aed1d384a911e0931a587990ee76ec8b6b369d73
Author: Johannes 'fish' Ziemke <fish@freigeist.org>
Date:   Thu Jul 10 14:46:36 2014 +0200

    Build prometheus tools as well
    
    Change-Id: I49d5ca4d6ff715e8a6631caf052de309b91b0b1b

commit eb5d928da7a7151c9a2ba59dbaf6c482c06d2b60
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Jul 4 16:47:48 2014 +0100

    Fix console handler.
    
    This was accidnetally broken in 2128d9d81196f92432c4016bccfeab3f7af3f06a.
    
    Change-Id: I50ea1fdb8ae4d28ae4555410bee97e5037692aa5

commit bacc31d5ccb0afadd57604833cfe7f4fa72b7e89
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jul 2 20:43:15 2014 +0200

    Remove work-around that required copying all bytes of a scrape.
    
    Now that the subtle bug in matttproud/golang_protobuf_extensions is
    fixed, we do not need to copy the bytes of a scrape into a buffer
    first before starting to parse it.
    
    Change-Id: Ib73ecae16173ddd219cda56388a8f853332f8853

commit 74de633a3a8d56b36dd2178885d02c0db827e2e0
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 30 17:23:48 2014 +0200

    Prometheus version 0.6.0.
    
    Change-Id: I50f6b69cca952eedf9a62b9a8f58e0fb633a83ed

commit 80b3d3bf347c246a94ab9227dd17b9fd25c2d50b
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 30 14:39:00 2014 +0200

    Speed up disk flushes by removing unnecessary sort.
    
    The first sort in groupByFingerprint already ensures that all resulting sample
    lists contain only one fingerprint. We also already assume that all
    samples passed into AppendSamples (and thus groupByFingerprint) are
    chronologically sorted within each fingerprint.
    
    The extra chronological sort is thus superfluous. Furthermore, this
    second sort didn't only sort chronologically, but also compared all
    metric fingerprints again (although we already know that we're only
    sorting within samples for the same fingerprint). This caused a huge
    memory and runtime overhead.
    
    In a heavily loaded real Prometheus, this brought down disk flush times
    from ~9 minutes to ~1 minute.
    
    OLD:
    BenchmarkLevelDBAppendRepeatingValues   5  331391808 ns/op  44542953 B/op   597788 allocs/op
    BenchmarkLevelDBAppendsRepeatingValues  5  329893512 ns/op  46968288 B/op  3104373 allocs/op
    
    NEW:
    BenchmarkLevelDBAppendRepeatingValues   5  299298635 ns/op  43329497 B/op   567616 allocs/op
    BenchmarkLevelDBAppendsRepeatingValues 20   92204601 ns/op   1779454 B/op    70975 allocs/op
    
    Change-Id: Ie2d8db3569b0102a18010f9e106e391fda7f7883

commit 21cafe6cd7a349ffd437d0b0baa2dcd15bf49c99
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 30 13:19:07 2014 +0200

    Only evict memory series after they are on disk.
    
    This fixes the problem where samples become temporarily unavailable for
    queries while they are being flushed to disk. Although the entire
    flushing code could use some major refactoring, I'm explicitly trying to
    do the minimal change to fix the problem since there's a whole new
    storage implementation in the pipeline.
    
    Change-Id: I0f5393a30b88654c73567456aeaea62f8b3756d9

commit 8956faeccb3f6a154c90aef6217a4eac7eb70c8f
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jun 18 19:43:15 2014 +0200

    Migrate to new client_golang.
    
    This change will only be submitted when the new client_golang has been
    moved to the new version.
    
    Change-Id: Ifceb59333072a08286a8ac910709a8ba2e3a1581

commit 814e479723454096f4ca080cc3a5f79bdff9b627
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Jun 16 17:04:08 2014 +0200

    Treat non-200 HTTP response as error.
    
    Change-Id: I2a9f3b47012b3c4839be53aa44c66d16dd41a24a

commit e27447da5c19352f0aa8596ebf255dc8dbde2bcb
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Jun 11 11:54:03 2014 +0100

    Remove the broken "User Dashboard" link.
    
    Due to the lack of a </a>, this makes the entire header render badly.
    Accordingly it's safe to assume noone is using it, so remove it.
    With the new console template support, we'll need to something a bit
    more nuanced later.
    
    Change-Id: I3424bed6aea18cbd4c63ad48f98808098dadc3ad

commit 2f76f434a5081f3a495d8723dfb39bbf0a1eb83d
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Jun 11 11:32:19 2014 +0100

    Add humanizeDuration function.
    
    This attempts to reasonably handle things from weekly cronjobs,
    to rpcs taking ns to things that are usually ms but jump to over a second.
    
    For consistency, stop putting spaces before prefixes.
    
    Change-Id: I6407879187b25680b323cd70254e205315b5fc3c

commit 960ede66dcbcb38e1cce9d51f5965e00838704bf
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jun 10 15:30:06 2014 +0100

    Use html/template for console templates and add template libary support.
    
    Add a function to bypass the new auto-escaping.
    Add a function to workaround go's templates only allowing passing in one argument.
    
    Change-Id: Id7aa3f95e7c227692dc22108388b1d9b1e2eec99

commit 0f5874ff97f4c1d0a62db68668449fab3986ce61
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jun 10 11:03:48 2014 +0100

    Make Prometheus in header link to status page.
    
    This is consistent with alertmanager, and more intiutive for users.
    
    The graphs page just has graphs, so remove mention of consoles.
    
    Change-Id: I87780a4ade33697a6095423e1a7de47d341d2838

commit cd3592aebc82a27f8e564df1950ed5bcf2b35ff5
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jun 5 18:44:19 2014 +0100

    Add title and match functions.
    
    Change-Id: Ifd376c2935e22d378e7afa06122642847a237d78

commit 1828b1f55c5ca812f70bc28fcb2e17feef67884f
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jun 5 15:25:37 2014 +0100

    Only log every query when debugging.
    
    Change-Id: I4f988d81cda6f6deb0ed7f497de4aa75409b158f

commit 9b74324d9ea2919df70ea217d13b25187afaaa52
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jun 5 14:07:54 2014 +0100

    Add functions for regex replacement, sorting and humanizing.
    
    Change-Id: I471c7a8087cd5432b51afce811b591b11583a0c3

commit 00fd10e24f4757078fcde24645da751efc17b63e
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Nov 20 18:10:43 2014 +0100

    Update GeneratorURL field name in notification tests.
    
    Change-Id: Ic4357999b6ebcf54008869a395e56d12a0ead211

commit 459f551259c72f2a7cf7a8aa15169dba7e4b9c38
Merge: 0da8b2a 921ebbf
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 30 17:00:57 2014 +0100

    Merge "Eliminate modal alerts in graphing UI."

commit 0da8b2add1832c5c84dad08b5cf3efa6f240f85c
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 30 16:38:25 2014 +0100

    Make tabular view the default (vs. graphing view).
    
    Change-Id: I9f0961f2c474e8cce5e376ce4e20040644f89370

commit 921ebbf7442b944dca7336b0caaa62e1b239ddcf
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 30 16:18:05 2014 +0100

    Eliminate modal alerts in graphing UI.
    
    This shows errors in a pane under the expression input instead.
    
    Change-Id: Iec209e1628a3b102cce9f34b2467621772dfb8ff

commit 2c4cab07b17e763b06404660a0da50795f5d606a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Oct 27 16:59:38 2014 +0100

    Fix acronym caps in GeneratorURL.
    
    Change-Id: Ib18c1f617dcde1039e848059545a6d8831d9bf66

commit f1aac54104b5be2bf31fce05f24c257884fa7f18
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 22 11:03:11 2014 +0200

    Allow alternative "by"-clause position in grammar.
    
    In addition to the existing by-clause syntax:
    
      sum(<expression>) by (<labels>) [keeping_extra]
    
    ...this allows the following new syntax:
    
      sum by (<labels>) [keeping_extra] (<expression>)
    
    Both orderings may be used in a single expression. It is up to the users
    to establish guidelines around their usage.
    
    Change-Id: Iba10c9cc5fb6ac62edfcf246d281473e82467992

commit 2aa8c8669ea7ecedb4f9ff09a49178c89217d51b
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Mon Oct 20 13:51:39 2014 +0100

    Make query_range more robust.
    
    Gracefully handle decimal values, by truncating them.
    
    Limit amount of steps, to avoid accidentally pulling too much data.
    This limit returns up to ~500kB per timeseries, and allows
    for 60s granularity for a week and 1h granularity for a year.
    
    Change-Id: Ie549fc24deb2eecbc6c5d1b6088a548a6b02e849

commit 50a995c8dea6ef7d1d994fb02055caf3ae241230
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Oct 15 15:38:09 2014 +0100

    Don't alert() when a query is aborted,
    such as when you change the range.
    
    Change-Id: I574504f97446ac5f3dda737fe054ae83f17dbbc2

commit 080b952647540056231bcf92b7aebc71f1bf1235
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Oct 14 17:21:39 2014 +0200

    Allow omitting the metric name in queries.
    
    This allows the following expression syntaxes for selecting timeseries:
    
      foo                    (already valid before)
      foo{}                  (already valid before)
      {job="prometheus"}     (new, select all timeseries for job "prometheus")
    
    Omitting both the metric name *and* any label matchers ("" or "{}") will
    still yield a syntax error.
    
    To get all timeseries, you could do:
    
        {__name__=~".*"}
           or, without relying on knowledge about __metric__:
        {job=~".*"}
    
    Change-Id: Ifee000b9ac0184ef6ced18411069c7f2699a2dda

commit 35fb5378bc16aa9630ff0ef11e6bd74467916249
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Oct 2 15:44:47 2014 +0100

    Add back consoles link.
    
    Goes in index.html in consoles or else user data, if present.
    
    Change-Id: I5303d30aa24ca0c20d2e0f49121e04a260b9c4f4

commit dba246e97a844ba36fb1d6a8082def1d30997c88
Author: Andres Suarez <zertosh@gmail.com>
Date:   Tue Sep 16 12:20:31 2014 -0400

    Focus expression after selection from dropdown
    
    Change-Id: Id7f67e558e3611ab4c7188cc428c342d8d3e67db

commit 76527bae8b29ba4dbe46fae9a1385f34c6d449bb
Author: Andres Suarez <zertosh@gmail.com>
Date:   Tue Sep 16 12:13:11 2014 -0400

    Allow selecting metric from Insert Metric
    
    Change-Id: I99e0539cab2749a8aeabc0a13015889ff45834f7

commit de337e640417a170021fc5972b3d0ee1af7f2ae0
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Sep 4 15:41:13 2014 +0200

    Cut v0.8.0.
    
    Change-Id: Ie8d49793e78f10bdeb7ebe19cc2dc729ff7ef590

commit 943a939c2995595b39b2e19906c46e4cb0f37cca
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Sep 3 16:46:29 2014 +0200

    Fix the accept header.
    
    A '/' is a separator and has to be in a quoted string.
    
    Change-Id: If7a3a847f84f8f709074d05dc98b5b21e954030c

commit f739980dfef906e749d79e2a4f3ae37419b6bb28
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 25 15:14:25 2014 +0200

    Format changelog properly.
    
    Change-Id: I62c5bf8c5b880272d207da564a3fc45490c5db5e

commit e995cda75c92130ba9d6b84023ff393ae340c626
Merge: 0ca5be1 3b3ec60
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 20 18:13:19 2014 +0200

    Merge "Stagger scrapes to spread out load."

commit 3b3ec604c37c5d136bc16df141d90dd2710c6ce7
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jul 29 19:31:11 2014 +0100

    Stagger scrapes to spread out load.
    
    Change-Id: Ib141b271e4adfb817886871f86051c207b05cf35

commit 0ca5be127f29af92002981b87adcad04c670b041
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 6 14:13:17 2014 +0200

    Prometheus version 0.7.0.
    
    Change-Id: I73468f72b43654f4bf57627c2f49fe802b18f637

commit bfb64321de3eed50bc4654956017a56ff4bb1034
Merge: b65c5dd ef3b512
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 6 13:10:09 2014 +0200

    Merge "Update used Go version to 1.3."

commit ef3b512dcf252418003e408d4e2de196c8f1d394
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 5 20:56:05 2014 +0200

    Update used Go version to 1.3.
    
    Go downloads moved to a different URL and require following redirects
    (curl's '-L' option) now.
    
    Go 1.3 deliberately randomizes ranges over maps, which uncovered some
    bugs in our tests. These are fixed too.
    
    Change-Id: Id2d9e185d8d2379a9b7b8ad5ba680024565d15f4

commit b65c5dd7528c0b51b837986463bc8aadf1d62f19
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 5 19:56:35 2014 +0200

    Add function to drop common labels in a vector.
    
    This fixes https://github.com/prometheus/prometheus/issues/384.
    
    Change-Id: I2973c4baeb8a4618ec3875fb11c6fcf5d111784b

commit f7cd18abdff888239e1fe321e41e05f3452715ef
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 5 20:14:04 2014 +0200

    Add more topk() / bottomk() tests.
    
    Test what happens if k > number of input elements.
    
    Change-Id: Ie724b850939e297ebf085f0a5a3522e9cfcc6534

commit 200d02effe7c69eba338509da709de81a94c54e1
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 5 18:57:47 2014 +0200

    Implement topk() and bottomk() functions.
    
    To achieve O(log n * k) runtime, this uses a heap to track the current
    bottom-k or top-k elements while iterating over the full set of
    available elements.
    
    It would be possible to reuse more code between topk and bottomk, but I
    decided for some more duplication for the sake of clarity.
    
    This fixes https://github.com/prometheus/prometheus/issues/399
    
    Change-Id: I7487ddaadbe7acb22ca2cf2283ba6e7915f2b336

commit 24ece38f7c00d8b7e59c43e2b1ea35df27a6edde
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jul 23 19:55:33 2014 +0200

    Make metrics exported by the Prometheus server itself more consistent.
    
    - Always spell out the time unit (e.g. milliseconds instead of ms).
    
    - Remove "_total" from the names of metrics that are not counters.
    
    - Make use of the "Namespace" and "Subsystem" fields in the options.
    
    - Removed the "capacity" facet from all metrics about channels/queues.
      These are all fixed via command line flags and will never change
      during the runtime of a process. Also, they should not be part of
      the same metric family. I have added separate metrics for the
      capacity of queues as convenience. (They will never change and are
      only set once.)
    
    - I left "metric_disk_latency_microseconds" unchanged, although that
      metric measures the latency of the storage device, even if it is not
      a spinning disk. "SSD" is read by many as "solid state disk", so
      it's not too far off. (It should be "solid state drive", of course,
      but "metric_drive_latency_microseconds" is probably confusing.)
    
    - Brian suggested to not mix "failure" and "success" outcome in the
      same metric family (distinguished by labels). For now, I left it as
      it is. We are touching some bigger issue here, especially as other
      parts in the Prometheus ecosystem are following the same
      principle. We still need to come to terms here and then change
      things consistently everywhere.
    
    Change-Id: If799458b450d18f78500f05990301c12525197d3

commit ffa4a2935e6caad5155264908df750af94ac4008
Merge: 54eb21b 3835b75
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jul 29 22:34:05 2014 +0200

    Merge "Remove backoff on scrape failure."

commit 3835b7507d0b0e16f6cf4afaea3dc5ad9929130c
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jul 29 17:28:48 2014 +0100

    Remove backoff on scrape failure.
    
    Having metrics with variable timestamps inconsistently
    spaced when things fail will make it harder to write correct rules.
    
    Update status page, requires some refactoring to insert a function.
    
    Change-Id: Ie1c586cca53b8f3b318af8c21c418873063738a8

commit 54eb21b22abb325b91177c53bfd13621e5ab39e0
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 28 18:10:11 2014 +0200

    Fix time() behavior.
    
    time() should return the timestamp for which the query is executed, not
    the actual current time.
    
    Change-Id: I430a45cabad7785cd58f95b1028a71dff4c87710

commit 527831ec6e5156ea82c758a8747ce0d8bd3bd4e5
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 28 16:12:58 2014 +0200

    Add abs() and over-time aggregation functions.
    
    This implements aggregation functions over time as request in
    https://github.com/prometheus/prometheus/issues/383.
    
    Change-Id: Ifd69b850de8cfdf6e7a6c0e042056fa4c672410e

commit ed3291fd8b4be967c85a180f07b31b84a483acda
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Jul 26 23:41:05 2014 +0200

    Fix HTTP connection leak upon non-OK status.
    
    Change-Id: Ie7fbd7dcc089b8306b40631be3e3d736c23c1cd3

commit 7ad2cfdfbcf4acd74acba686f8edffbe2e5110bf
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Jul 25 17:32:17 2014 +0100

    Add 'tmpl', a 'template' for non-string literal names.
    
    Change-Id: I6a03a5c5d20029cf414562efa7745ed6c53b2731

commit 8be993b8f830d394a73b3460ed8fbe64f21029e1
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Jul 25 13:23:47 2014 +0100

    Let consoles get graph links from experssions.
    
    Rename ConsoleLinkFromExpression, as we now have consoles.
    
    Change-Id: I7ed2c9c83863adb390b51121dd9736845f7bcdfc

commit de71467758213b8ef9cb1de567bd286d8caa3e28
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jul 24 16:57:56 2014 +0100

    Expose path used to get to console to console.
    
    Change-Id: I72386a2d4e53863da302ecc5c7e44d6c310197e0

commit 034f6bb2be8c047e1685e14c5d9e5a722ed3d392
Author: Johannes 'fish' Ziemke <fish@freigeist.org>
Date:   Thu Jul 10 14:46:36 2014 +0200

    Build prometheus tools as well
    
    Change-Id: I49d5ca4d6ff715e8a6631caf052de309b91b0b1b

commit 443fd93536feed7630d03931c62d0a12c5ca1f50
Merge: dfb9c2a 61659ea
Author: Björn Rabenstein <bjoern@soundcloud.com>
Date:   Fri Jul 4 18:02:33 2014 +0200

    Merge "Fix console handler."

commit 61659ea733ef2a5fa6e2e623b489fde72033d5a7
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Fri Jul 4 16:47:48 2014 +0100

    Fix console handler.
    
    This was accidnetally broken in 2128d9d81196f92432c4016bccfeab3f7af3f06a.
    
    Change-Id: I50ea1fdb8ae4d28ae4555410bee97e5037692aa5

commit dfb9c2a072d5c1003e78c4921988c21bc76ab07a
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jul 2 20:43:15 2014 +0200

    Remove work-around that required copying all bytes of a scrape.
    
    Now that the subtle bug in matttproud/golang_protobuf_extensions is
    fixed, we do not need to copy the bytes of a scrape into a buffer
    first before starting to parse it.
    
    Change-Id: Ib73ecae16173ddd219cda56388a8f853332f8853

commit 6b325bfbde509abb3fe98081c8e0874d5e9d7d23
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 30 17:23:48 2014 +0200

    Prometheus version 0.6.0.
    
    Change-Id: I50f6b69cca952eedf9a62b9a8f58e0fb633a83ed

commit 6579dc3e40d3953c5fb6535774562723db78cd9a
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 30 14:39:00 2014 +0200

    Speed up disk flushes by removing unnecessary sort.
    
    The first sort in groupByFingerprint already ensures that all resulting sample
    lists contain only one fingerprint. We also already assume that all
    samples passed into AppendSamples (and thus groupByFingerprint) are
    chronologically sorted within each fingerprint.
    
    The extra chronological sort is thus superfluous. Furthermore, this
    second sort didn't only sort chronologically, but also compared all
    metric fingerprints again (although we already know that we're only
    sorting within samples for the same fingerprint). This caused a huge
    memory and runtime overhead.
    
    In a heavily loaded real Prometheus, this brought down disk flush times
    from ~9 minutes to ~1 minute.
    
    OLD:
    BenchmarkLevelDBAppendRepeatingValues   5  331391808 ns/op  44542953 B/op   597788 allocs/op
    BenchmarkLevelDBAppendsRepeatingValues  5  329893512 ns/op  46968288 B/op  3104373 allocs/op
    
    NEW:
    BenchmarkLevelDBAppendRepeatingValues   5  299298635 ns/op  43329497 B/op   567616 allocs/op
    BenchmarkLevelDBAppendsRepeatingValues 20   92204601 ns/op   1779454 B/op    70975 allocs/op
    
    Change-Id: Ie2d8db3569b0102a18010f9e106e391fda7f7883

commit 9410f15a732ec4899e9876db32591c1690eb4a60
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 30 13:19:07 2014 +0200

    Only evict memory series after they are on disk.
    
    This fixes the problem where samples become temporarily unavailable for
    queries while they are being flushed to disk. Although the entire
    flushing code could use some major refactoring, I'm explicitly trying to
    do the minimal change to fix the problem since there's a whole new
    storage implementation in the pipeline.
    
    Change-Id: I0f5393a30b88654c73567456aeaea62f8b3756d9

commit 2128d9d81196f92432c4016bccfeab3f7af3f06a
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed Jun 18 19:43:15 2014 +0200

    Migrate to new client_golang.
    
    This change will only be submitted when the new client_golang has been
    moved to the new version.
    
    Change-Id: Ifceb59333072a08286a8ac910709a8ba2e3a1581

commit 8da3429e453c7c09cbe8a5adb59c4f9a6b71d943
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Jun 16 17:04:08 2014 +0200

    Treat non-200 HTTP response as error.
    
    Change-Id: I2a9f3b47012b3c4839be53aa44c66d16dd41a24a

commit 9c81f2e82a673381e1a4db3485b328dd1dcef5d2
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Jun 11 11:54:03 2014 +0100

    Remove the broken "User Dashboard" link.
    
    Due to the lack of a </a>, this makes the entire header render badly.
    Accordingly it's safe to assume noone is using it, so remove it.
    With the new console template support, we'll need to something a bit
    more nuanced later.
    
    Change-Id: I3424bed6aea18cbd4c63ad48f98808098dadc3ad

commit fce3873b0288229370a583c4b9b08daddfeb38dc
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed Jun 11 11:32:19 2014 +0100

    Add humanizeDuration function.
    
    This attempts to reasonably handle things from weekly cronjobs,
    to rpcs taking ns to things that are usually ms but jump to over a second.
    
    For consistency, stop putting spaces before prefixes.
    
    Change-Id: I6407879187b25680b323cd70254e205315b5fc3c

commit 859c3b071d070402fa02667268cdd2551c8e2c1b
Merge: 5e6ab62 29cf4d6
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 10 17:47:35 2014 +0200

    Merge "Use html/template for console templates and add template libary support."

commit 29cf4d6ad92337d940d049d528a595ccf2ba31b8
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jun 10 15:30:06 2014 +0100

    Use html/template for console templates and add template libary support.
    
    Add a function to bypass the new auto-escaping.
    Add a function to workaround go's templates only allowing passing in one argument.
    
    Change-Id: Id7aa3f95e7c227692dc22108388b1d9b1e2eec99

commit 5e6ab627dfdd5d29629d5b5553ddf3237302c591
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Tue Jun 10 11:03:48 2014 +0100

    Make Prometheus in header link to status page.
    
    This is consistent with alertmanager, and more intiutive for users.
    
    The graphs page just has graphs, so remove mention of consoles.
    
    Change-Id: I87780a4ade33697a6095423e1a7de47d341d2838

commit 6003cdbae04d82bd55bbd8c6481ea5200ac9aa6d
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jun 5 18:44:19 2014 +0100

    Add title and match functions.
    
    Change-Id: Ifd376c2935e22d378e7afa06122642847a237d78

commit af8a1b9d780f72cf3d600422e9e934ea13258d88
Merge: be7ee7f db2e5a2
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 5 17:43:52 2014 +0200

    Merge "Only log every query when debugging."

commit db2e5a2509aeac92c1ecb33d8a9947ea96b15a25
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jun 5 15:25:37 2014 +0100

    Only log every query when debugging.
    
    Change-Id: I4f988d81cda6f6deb0ed7f497de4aa75409b158f

commit be7ee7f46d43147588df379ccf0fc6c6ff51c7de
Merge: d085de5 f33b10b
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 5 17:39:43 2014 +0200

    Merge "Add functions for regex replacement, sorting and humanizing."

commit f33b10b6898267d87b24a3c5a08a6aa50cbf620d
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Thu Jun 5 14:07:54 2014 +0100

    Add functions for regex replacement, sorting and humanizing.
    
    Change-Id: I471c7a8087cd5432b51afce811b591b11583a0c3

commit d085de5a69893c23b90fd87a15fb62147da7923e
Author: Johannes 'fish' Ziemke <fish@freigeist.org>
Date:   Fri May 9 01:47:36 2014 +0200

    Add vim-common for xxd required by embed-static.sh
    
    Change-Id: Ie1c108dd49d0bbbbcdcd90719a192718ec46d2e4

commit e041c0cd463028825559da33bc9fd85ce084b30d
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Wed May 28 18:44:54 2014 +0100

    Add console and alert templates with access to all data.
    
    Move rulemanager to it's own package to break cicrular dependency.
    Make NewTestTieredStorage available to tests, remove duplication.
    
    Change-Id: I33b321245a44aa727bfc3614a7c9ae5005b34e03

commit 16ca35c07e0788cff6d5708f11cadf0a0d1031cd
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 28 16:05:14 2014 +0200

    Prometheus version 0.5.0.
    
    Change-Id: Ibf4d07c2878a9c22d6ade639b776dcfe3b533b34

commit ca6a4fccef0ef3854b9309cfccbc54baed773d97
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Wed May 21 19:27:24 2014 +0200

    Weed out our homegrown test.Tester.
    
    The Go stdlib has testing.TB now, which fulfills the exact same
    purpose.
    
    Change-Id: I0db9c73400e208ca376b932a02b7e3402234b87c

commit 23255f14995ba06de664dbb110cf974557c3507b
Author: Brian Brazil <brian.brazil@boxever.com>
Date:   Mon May 12 15:21:42 2014 +0100

    Fix negative Next Retrieval on status page.
    
    Change-Id: Ifa754034660a251fee71f166dbf057697ec4e872

commit da28f8dd13886c988e145162207085768e934dce
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue May 6 12:23:03 2014 +0200

    Link to relevant style guidelines.
    
    Change-Id: Iac9777a62a11cb8e5c13efe5229a85e82c5039cb

commit 4df5c7ab18cf5e2ba697bcec69ac0efb4657a74e
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun May 4 01:03:18 2014 -0400

    Optimize label matcher memory and runtime behavior.
    
    This optimizes the runtime and memory allocation behavior for label matchers
    other than type "Equal". Instead of creating a new set for every union of
    fingerprints, this simply adds new fingerprints to the existing set to achieve
    the same effect.
    
    The current behavior made a production Prometheus unresponsive when running a
    NotEqual match against the "instance" label (a label with high value
    cardinality).
    
    BEFORE:
    BenchmarkGetFingerprintsForNotEqualMatcher        10   170430297 ns/op  39229944 B/op    40709 allocs/op
    
    AFTER:
    BenchmarkGetFingerprintsForNotEqualMatcher      5000      706260 ns/op    217717 B/op     1116 allocs/op
    
    Change-Id: Ifd78e81e7dfbf5d7249e50ad1903a5d9c42c347a

commit 64811caaec29e415587485246aaf0c4b5c3dcf0c
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Apr 22 18:44:52 2014 +0200

    Make Prometheus announce its new super-power: text format!
    
    Change-Id: Ia2ddfb28999c145e4d46c395381a9bf89d43148c

commit b3a78d2202e2b80c73f0d11bcf202ad5c606d818
Merge: de9a88b 6297a40
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Apr 22 15:57:41 2014 +0200

    Merge "Do not indent API JSON responses."

commit de9a88b964e0baad49f2eee9185e68c86403664c
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Apr 22 14:09:25 2014 +0200

    Ensure temporal order in streams.
    
    BenchmarkAppendSample.* before this change:
    
    BenchmarkAppendSample1   1000000              1142 ns/op
    --- BENCH: BenchmarkAppendSample1
            memory_test.go:81: 1 cycles with 9992.000000 bytes per cycle, totalling 9992
            memory_test.go:81: 100 cycles with 250.399994 bytes per cycle, totalling 25040
            memory_test.go:81: 10000 cycles with 239.428802 bytes per cycle, totalling 2394288
            memory_test.go:81: 1000000 cycles with 255.504684 bytes per cycle, totalling 255504688
    BenchmarkAppendSample10   500000              3823 ns/op
    --- BENCH: BenchmarkAppendSample10
            memory_test.go:81: 1 cycles with 15536.000000 bytes per cycle, totalling 15536
            memory_test.go:81: 100 cycles with 662.239990 bytes per cycle, totalling 66224
            memory_test.go:81: 10000 cycles with 601.937622 bytes per cycle, totalling 6019376
            memory_test.go:81: 500000 cycles with 598.582764 bytes per cycle, totalling 299291408
    BenchmarkAppendSample100           50000             41111 ns/op
    --- BENCH: BenchmarkAppendSample100
            memory_test.go:81: 1 cycles with 79824.000000 bytes per cycle, totalling 79824
            memory_test.go:81: 100 cycles with 4924.479980 bytes per cycle, totalling 492448
            memory_test.go:81: 10000 cycles with 4278.019043 bytes per cycle, totalling 42780192
            memory_test.go:81: 50000 cycles with 4275.242676 bytes per cycle, totalling 213762144
    BenchmarkAppendSample1000           5000            533933 ns/op
    --- BENCH: BenchmarkAppendSample1000
            memory_test.go:81: 1 cycles with 840224.000000 bytes per cycle, totalling 840224
            memory_test.go:81: 100 cycles with 62789.281250 bytes per cycle, totalling 6278928
            memory_test.go:81: 5000 cycles with 55208.601562 bytes per cycle, totalling 276043008
    ok      github.com/prometheus/prometheus/storage/metric/tiered  27.828s
    
    BenchmarkAppendSample.* after this change:
    
    BenchmarkAppendSample1   1000000              1109 ns/op
    --- BENCH: BenchmarkAppendSample1
            memory_test.go:131: 1 cycles with 9992.000000 bytes per cycle, totalling 9992
            memory_test.go:131: 100 cycles with 250.399994 bytes per cycle, totalling 25040
            memory_test.go:131: 10000 cycles with 239.220795 bytes per cycle, totalling 2392208
            memory_test.go:131: 1000000 cycles with 255.492630 bytes per cycle, totalling 255492624
    BenchmarkAppendSample10   500000              3663 ns/op
    --- BENCH: BenchmarkAppendSample10
            memory_test.go:131: 1 cycles with 15536.000000 bytes per cycle, totalling 15536
            memory_test.go:131: 100 cycles with 662.239990 bytes per cycle, totalling 66224
            memory_test.go:131: 10000 cycles with 601.889587 bytes per cycle, totalling 6018896
            memory_test.go:131: 500000 cycles with 598.550903 bytes per cycle, totalling 299275472
    BenchmarkAppendSample100           50000             40694 ns/op
    --- BENCH: BenchmarkAppendSample100
            memory_test.go:131: 1 cycles with 78976.000000 bytes per cycle, totalling 78976
            memory_test.go:131: 100 cycles with 4928.319824 bytes per cycle, totalling 492832
            memory_test.go:131: 10000 cycles with 4277.961426 bytes per cycle, totalling 42779616
            memory_test.go:131: 50000 cycles with 4275.054199 bytes per cycle, totalling 213752720
    BenchmarkAppendSample1000           5000            530744 ns/op
    --- BENCH: BenchmarkAppendSample1000
            memory_test.go:131: 1 cycles with 842192.000000 bytes per cycle, totalling 842192
            memory_test.go:131: 100 cycles with 62765.441406 bytes per cycle, totalling 6276544
            memory_test.go:131: 5000 cycles with 55209.812500 bytes per cycle, totalling 276049056
    ok      github.com/prometheus/prometheus/storage/metric/tiered  27.468s
    
    Change-Id: Idaa339cd83539b5e4391614541a2c3a04002d66d

commit 6297a405f2887a0814b7377cc1ba5615d83f1786
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 22 15:16:37 2014 +0200

    Do not indent API JSON responses.
    
    In one example response, this reduced the uncompressed size by 25% and
    the gzipped size by 11%.
    
    Change-Id: Ie80d44253124b9f8601b8ef9fc978e92dacff523

commit b3901827eed8793a95603c81db2c6cf7b05ceaa4
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 17 15:28:22 2014 +0200

    Fix persistence references in tools subdir.
    
    These had escaped me because the tools aren't rebuilt if there are
    changes outside of the respective tool itself.
    
    Change-Id: I3e69631babdd95b18e698eb79098dfa59f60f597

commit d2421a6916cc6e44973504dec9e56f82c3af051e
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 17 14:04:51 2014 +0200

    Prometheus version 0.4.0.
    
    Change-Id: I752044a69f86aacc5a7e6da62a6f4a187cf67d27

commit 1b29975865a6545e2416c2134164ad9a7e8bcead
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 17 12:28:50 2014 +0200

    Fix RWLock memory storage deadlock.
    
    This fixes https://github.com/prometheus/prometheus/issues/390
    
    The cause for the deadlock was a lock semantic in Go that wasn't
    obvious to me when introducing this bug:
    
    http://golang.org/pkg/sync/#RWMutex.Lock
    
    Key phrase: "To ensure that the lock eventually becomes available, a
    blocked Lock call excludes new readers from acquiring the lock."
    
    In the memory series storage, we have one function
    (GetFingerprintsForLabelMatchers) acquiring an RLock(), which calls
    another function also acquiring the same RLock()
    (GetLabelValuesForLabelName). That normally doesn't deadlock, unless a
    Lock() call from another goroutine happens right in between the two
    RLock() calls, blocking both the Lock() and the second RLock() call from
    ever completing.
    
      GoRoutine 1          GoRoutine 2
      ======================================
      RLock()
      ...                  Lock() [DEADLOCK]
      RLock() [DEADLOCK]   Unlock()
      RUnlock()
      RUnlock()
    
    Testing deadlocks is tricky, but the regression test I added does
    reliably detect the deadlock in the original code on my machine within a
    normal concurrent reader/writer run duration of 250ms.
    
    Change-Id: Ib34c2bb8df1a80af44550cc2bf5007055cdef413

commit 01f652cb4c27c8d4a22b3508965e8a53470dbc75
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 11 09:27:05 2014 +0200

    Separate storage implementation from interfaces.
    
    This was initially motivated by wanting to distribute the rule checker
    tool under `tools/rule_checker`. However, this was not possible without
    also distributing the LevelDB dynamic libraries because the tool
    transitively depended on Levigo:
    
    rule checker -> query layer -> tiered storage layer -> leveldb
    
    This change separates external storage interfaces from the
    implementation (tiered storage, leveldb storage, memory storage) by
    putting them into separate packages:
    
    - storage/metric: public, implementation-agnostic interfaces
    - storage/metric/tiered: tiered storage implementation, including memory
                             and LevelDB storage.
    
    I initially also considered splitting up the implementation into
    separate packages for tiered storage, memory storage, and LevelDB
    storage, but these are currently so intertwined that it would be another
    major project in itself.
    
    The query layers and most other parts of Prometheus now have notion of
    the storage implementation anymore and just use whatever implementation
    they get passed in via interfaces.
    
    The rule_checker is now a static binary :)
    
    Change-Id: I793bbf631a8648ca31790e7e772ecf9c2b92f7a0

commit 3e969a8ca286d1e880d1323780bc4d799fb543b6
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 15 20:49:09 2014 +0200

    Parameterize the buffer for marshal/unmarshal.
    
    We are not reusing buffers yet.  This could introduce problems,
    so the behavior is disabled for now.
    
    Cursory benchmark data:
    - Marshal for 10,000 samples: -30% overhead.
    - Unmarshal for 10,000 samples: -15% overhead.
    
    Change-Id: Ib006bdc656af45dca2b92de08a8f905d8d728cac

commit 2064f32662adcf8cb10f12fe41488225f70390cd
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 15 01:02:15 2014 +0200

    Clean up quitting behavior and add quit trigger.
    
    The closing of Prometheus now using a sync.Once wrapper to prevent
    any accidental multiple invocations of it, which could trigger
    corruption or a race condition.  The shutdown process is made more
    verbose through logging.
    
    A not-enabled by default web handler has been provided to trigger a
    remote shutdown if requested for debugging purposes.
    
    Change-Id: If4fee75196bbff1fb1e4a4ef7e1cfa53fef88f2e

commit 58ef638e72da1e7ec09e18bcbb2b15b0a0806c93
Merge: 6ec7239 8136789
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 15 21:26:31 2014 +0200

    Merge "Use idiomatic one-to-many one-time signal pattern."

commit 6ec72393c4be87e89e1d8af0501cfb7e48a1090d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 15 11:51:31 2014 +0200

    Correct size of unmarshalling destination buffer.
    
    The format header size is not deducted from the size of the byte
    stream when calculating the output buffer size for samples.  I have
    yet to notice problems directly as a result of this, but it is good
    to fix.
    
    Change-Id: Icb07a0718366c04ddac975d738a6305687773af0

commit 81367893fdfa731265e521dbc3645f97e4ca0539
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 14 23:34:17 2014 +0200

    Use idiomatic one-to-many one-time signal pattern.
    
    The idiomatic pattern for signalling a one-time message to multiple
    consumers from a single producer is as follows:
    
    ```
      c := make(chan struct{})
      w := new(sync.WaitGroup)  // Boilerplate to ensure synchronization.
    
      for i := 0; i < 1000; i++ {
        w.Add(1)
        go func() {
          defer w.Done()
    
          for {
            select {
            case _, ok := <- c:
              if !ok {
                return
              }
            default:
              // Do something here.
            }
          }
        }()
      }
    
      close(c)  // Signal the one-to-many single-use message.
      w.Wait()
    
    ```
    
    Change-Id: I755f73ba4c70a923afd342a4dea63365bdf2144b

commit 1d01435d4d2da9c22bc6f66677df85b6488838da
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 14 22:51:58 2014 +0200

    Make curation semaphore behavior idiomatic.
    
    Idiomatic semaphore usage in Go, unless it is wrapping a concrete type,
    should use anonymous empty structs (``struct{}``).  This has several
    features that are worthwhile:
    
      1. It conveys that the object in the channel is likely used for
         resource limiting / semaphore use.  This is by idiom.
    
      2. Due to magic under the hood, empty structs have a width of zero,
         meaning they consume little space.  It is presumed that slices,
         channels, and other values of them can be represented specially
         with alternative optimizations.  Dmitry Vyukov has done
         investigations into improvements that can be made to the channel
         design and Go and concludes that there are already nice short
         circuiting behaviors at work with this type.
    
    This is the first change of several that apply this type of change to
    suitable places.
    
    In this one change, we fix a bug in the previous revision, whereby a
    semaphore can be acquired for curation and never released back for
    subsequent work: http://goo.gl/70Y2qK.  Compare that versus the
    compaction definition above.
    
    On top of that, the use of the semaphore in the mode better supports
    system shutdown idioms through the closing of channels.
    
    Change-Id: Idb4fca310f26b73c9ec690bbdd4136180d14c32d

commit e9eda76192210265a902aea744c59671275943ad
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 14 21:15:13 2014 +0200

    Fix Mac OS X build since we upgraded to go1.2.
    
    Since go1.2, the release engineers have keyed their release
    artifacts to the major release family of Mac OS X.
    
    Change-Id: Ia4bf0c86af9884748e21be14ab6e09f01a830e19

commit 95bc920f5f0b171cc93032afda7c753f38553768
Merge: 26bbca4 d411a7d
Author: Björn Rabenstein <bjoern@soundcloud.com>
Date:   Tue Apr 8 17:17:42 2014 +0200

    Merge "Allow reversing vector and scalar arguments in binops."

commit d411a7d81044a62205c4058f50a4db5e3f054679
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 8 16:14:35 2014 +0200

    Allow reversing vector and scalar arguments in binops.
    
    This allows putting a scalar as the first argument of a binary operator
    in which the second argument is a vector:
    
      <scalar> <binop> <vector>
    
    For example,
    
      1 / http_requests_total
    
    ...will output a vector in which every sample value is 1 divided by the
    respective input vector element.
    
    This even works for filter binary operators now:
    
      1 == http_requests_total
    
    Returns a vector with all values set to 1 for every element in
    http_requests_total whose initial value was 1.
    
    Note: For filter binary operators, the resulting values are always taken
    from the left-hand-side of the operation, no matter whether the scalar
    or the vector argument is the left-hand-side. That is,
    
      1 != http_requests_total
    
    ...will set all result vector sample values to 1, although these are
    exactly the sample elements that were != 1 in the input vector.
    
    If you want to just filter elements without changing their sample
    values, you still need to do:
    
      http_requests_total != 1
    
    The new filter form is a bit exotic, and so probably won't be used
    often. But it was easier to implement it than disallow it completely or
    change its behavior.
    
    Change-Id: Idd083f2bd3a1219ba1560cf4ace42f5b82e797a5

commit 26bbca427081c9681d6fe2824a5d1262dff31ba1
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Apr 5 01:49:46 2014 +0200

    Prometheus version 0.3.0.
    
    Change-Id: Iebfbbf033140ff82ac051d22c885916763768f8c

commit c7c0b33d0bc8b13ce3fff185b1bac367fe263062
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 28 11:58:47 2014 +0100

    Add regex-matching support for labels.
    
    There are four label-matching ops for selecting timeseries now:
    
    - Equal: =
    - NotEqual: !=
    - RegexMatch: =~
    - RegexNoMatch: !~
    
    Instead of looking up labels by a simple clientmodel.LabelSet (basically
    an equals op for every key/value pair in the set), timeseries
    fingerprint selection is now done via a list of metric.LabelMatchers.
    
    Change-Id: I510a83f761198e80946146770ebb64e4abc3bb96

commit ae30453214fd0c3ae28b34a54aaf9ce16d924c83
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 24 12:08:28 2014 +0100

    Add label names -> label values index.
    
    Change-Id: Ie39b4044558afc4d1aa937de7dcf8df61f821fb4

commit 71d2ff406d60aca449a76cd4c1b53ff45125e92d
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 26 10:59:29 2014 +0100

    Prometheus version 0.2.1.
    
    Change-Id: I288f88390d3eee45bf684647337e7bfff11def6a

commit 7a577b86b7dcbeffab92144f79f9715505dcbbb7
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 25 19:07:27 2014 +0100

    Fix interval op special case.
    
    In the case that a getValuesAtIntervalOp's ExtractSamples() is called
    with a current time after the last chunk time, we return without
    extracting any further values beyond the last one in the chunk
    (correct), but also without advancing the op's time (incorrect). This
    leads to an infinite loop in renderView(), since the op is called
    repeatedly without ever being advanced and consumed.
    
    This adds handling for this special case. When detecting this case, we
    immediately set the op to be consumed, since we would always get a value
    after the current time passed in if there was one.
    
    Change-Id: Id99149e07b5188d655331382b8b6a461b677005c

commit 257b720e8798ad16fa22f77a1e9fdd30087c4600
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Mar 25 12:22:18 2014 +0100

    Fix typo.
    
    Change-Id: I6e7edcb48ace7fe4d6de4ff16519da5bb326b6ce

commit caf47b2fbcf776421557748643e6ef1f1fb66111
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Mar 21 12:49:24 2014 +0100

    New encoding for OpenTSDB tag values (and metric names).
    
    Change-Id: I0f4393f638c6e2bb2b2ce14e58e38b49ce456da8

commit 0a65b691cc7e1bdd5a182b63e1b057f6812ce91e
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Mar 21 13:11:01 2014 +0100

    Disallow ":" in identifiers, but still allow it in metric names.
    
    Change-Id: Iace925ab1b71a360bd63357e87f68e727f7afbcb

commit 0e7596b65351e672ac3ffd4d75a52c2118210ece
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 18 17:21:53 2014 +0100

    Prometheus version 0.2.0.
    
    Change-Id: I4ecc8b909fc90378d855ea3620e1f6f75cc53b6d

commit 9d5c3677459a058ae0a4c2d0920a33f85b910248
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 18 16:22:50 2014 +0100

    Fix incorrect interval op advancement.
    
    This fixes a bug where an interval op might advance too far past the end
    of the currently extracted chunk, effectively skipping over relevant
    (to-be-extracted) values in the subsequent chunk. The result: missing
    samples at chunk boundaries in the resulting view.
    
    Change-Id: Iebf5d086293a277d330039c69f78e1eaf084b3c8

commit cc04238a85b4b09e7693178056daf37fa7c3ede8
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 14 12:51:33 2014 +0100

    Switch to new "__name__" metric name label.
    
    This also fixes the compaction test, which before worked only because
    the input sample sorting was accidentally equal to the resulting on-disk
    sample sorting.
    
    Change-Id: I2a21c4b46ba562424b27058fc02eba84fa6a6006

commit c3b282bd14df140e07bd129ea338880cd194b6dd
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Mon Mar 10 15:04:42 2014 +0100

    Add regression tests for 'loop until op is consumed' bug.
    
    - Most of this is the actual regression test in tiered_test.go.
    
    - Working on that regression tests uncovered problems in
      tiered_test.go that are fixed in this commit.
    
    - The 'op.consumed = false' line added to freelist.go was actually not
      fixing a bug. Instead, there was no bug at all. So this commit
      removes that line again, but adds a regression test to make sure
      that the assumed bug is indeed not there (cf. freelist_test.go).
    
    - Removed more code duplication in operation.go (following the same
      approach as before, i.e. embedding op type A into op type B if
      everything in A is the same as in B with the exception of String()
      and ExtractSample()). (This change make struct literals for ops more
      clunky, but that only affects tests. No code change whatsoever was
      necessary in the actual code after this refactoring.)
    
    - Fix another op leak in tiered.go.
    
    Change-Id: Ia165c52e33290ad4f6aba9c83d92318d4f583517

commit b470fb06722dae631fc8c7c854d9b5bdba16f348
Merge: b7ba349 86fc13a
Author: Björn Rabenstein <bjoern@soundcloud.com>
Date:   Tue Mar 11 18:44:04 2014 +0100

    Merge "Convert metric.Values to slice of values."

commit b7ba349ca840154192940e95e54296ac37beb9ee
Merge: a7d0973 44390d8
Author: Björn Rabenstein <bjoern@soundcloud.com>
Date:   Tue Mar 11 18:34:21 2014 +0100

    Merge "Introduce semantic versioning."

commit 86fc13a52e96e038d07963bc7defeb7f03fb706e
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 10 17:55:17 2014 +0100

    Convert metric.Values to slice of values.
    
    The initial impetus for this was that it made unmarshalling sample
    values much faster.
    
    Other relevant benchmark changes in ns/op:
    
    Benchmark                                 old        new   speedup
    ==================================================================
    BenchmarkMarshal                       179170     127996     1.4x
    BenchmarkUnmarshal                     404984     132186     3.1x
    
    BenchmarkMemoryGetValueAtTime           57801      50050     1.2x
    BenchmarkMemoryGetBoundaryValues        64496      53194     1.2x
    BenchmarkMemoryGetRangeValues           66585      54065     1.2x
    
    BenchmarkStreamAdd                       45.0       75.3     0.6x
    BenchmarkAppendSample1                   1157       1587     0.7x
    BenchmarkAppendSample10                  4090       4284     0.95x
    BenchmarkAppendSample100                45660      44066     1.0x
    BenchmarkAppendSample1000              579084     582380     1.0x
    BenchmarkMemoryAppendRepeatingValues 22796594   22005502     1.0x
    
    Overall, this gives us good speedups in the areas where they matter
    most: decoding values from disk and accessing the memory storage (which
    is also used for views).
    
    Some of the smaller append examples take minimally longer, but the cost
    seems to get amortized over larger appends, so I'm not worried about
    these. Also, we're currently not bottlenecked on the write path and have
    plenty of other optimizations available in that area if it becomes
    necessary.
    
    Memory allocations during appends don't change measurably at all.
    
    Change-Id: I7dc7394edea09506976765551f35b138518db9e8

commit 44390d831d650b2e76886f363b70f5ee8b90c88e
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 11 15:21:10 2014 +0100

    Introduce semantic versioning.
    
    This introduces semantic versioning (http://semver.org/) in Prometheus:
    
    - A new VERSION file contains the semantic version string.
    
    - The "tarball" target now includes versioning and build information in
      the tarball name, like: "prometheus-0.1.0.linux-amd64.tar.gz".
    
    - A new "release" target allows scp-ing the versioned tarball to a
      remote machine (file server).
    
    - A new "tag" target allows git-tagging the current revision with the
      version specified in VERSION.
    
    Change-Id: I1f19f38b9b317bfa9eb513754750df5a9c602d94

commit a7d0973fe356df9f29f804b08e227dca1a6eaa32
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 11 14:07:48 2014 +0100

    Add version field to LevelDB sample format.
    
    This doesn't add complex discriminator logic yet, but adds a single
    version byte to the beginning of each samples chunk. If we ever need to
    change the disk format again, this will make it easy to do so without
    having to wipe the entire database.
    
    Change-Id: I60c39274256f790bc2da83167a1effaa174588fe

commit cb9fa1ba935f560a429244b8a7fc92465dfc3543
Merge: 84df022 1eee448
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 11 13:19:46 2014 +0100

    Merge "Store samples in custom binary encoding."

commit 84df0220250161e2d74ccb0440754c5ed18c146d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Mar 9 23:17:17 2014 +0100

    Cleanup server address handling, support IPv6.
    
    This fixes https://github.com/prometheus/prometheus/issues/377, as
    IPv6 server addresses are now handled correctly.
    
    Change-Id: Iebde7cfdadb0a52041472517e6fdcff4303a25ab

commit 1eee448bc1829201cfc521939009e376f9b60d69
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 26 23:47:25 2014 +0100

    Store samples in custom binary encoding.
    
    This has been shown to provide immense decoding speed benefits.
    
    See also:
    
    https://groups.google.com/forum/#!topic/prometheus-developers/FeGl_qzGrYs
    
    Change-Id: I7d45b4650e44ddecaa91dad9d7fdb3cd0b9f15fe

commit c2a2a20f366c9a8bad02725064cd4ecf73fd19c9
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 7 17:10:28 2014 +0100

    Remove obsolete scanjobs timer.
    
    Change-Id: Ifb29b4d93c9c1c6cacb8b098d5237866925c9fac

commit dd4892dcad81f558b3b6f05924e7641f37cb5127
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 7 14:33:13 2014 +0100

    Ensure no ops are leaked in renderView().
    
    Change-Id: I6970a9098be305fcd010d46443b040d864d9740a

commit 5745ce0a60c968fbb887581b04f3142dc9cc06e1
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 7 00:54:28 2014 +0100

    Fixups for single-op-per-fingerprint view rendering.
    
    Change-Id: Ie496d4529b65a3819c6042f43d7cf99e0e1ac60b

commit 8b43497002070686b53781f483d44b57cc37aa5f
Merge: 0bb33b6 d6827b6
Author: Björn Rabenstein <bjoern@soundcloud.com>
Date:   Thu Mar 6 11:53:10 2014 +0100

    Merge "Fix memory series indexing bug."

commit 0bb33b652588ff896a7e154234bea45b73b965bd
Merge: 9ea9189 c6013ff
Author: Björn Rabenstein <bjoern@soundcloud.com>
Date:   Thu Mar 6 11:40:09 2014 +0100

    Merge "Remove unused labelname -> fingerprints index."

commit d6827b689818bcc99586a310afa8b4096e18ee84
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 5 23:35:49 2014 +0100

    Fix memory series indexing bug.
    
    This fixes https://github.com/prometheus/prometheus/issues/381.
    
    For any stale series we dropped from memory, this bug caused us to also drop
    any other series from the labelpair->fingerprints memory index if they had any
    label/value-pairs in common with the intentionally dropped series.
    
    To fix this issue more easily, I converted the labelpair->fingerprints index
    map values to a utility.Set of clientmodel.Fingerprints. This makes handling
    this index much easier in general.
    
    Change-Id: If5e81e202e8c542261bbd9797aa1257376c5c074

commit c6013ff3098bf8ac505de38a5ba79033dcf986d6
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 5 22:55:26 2014 +0100

    Remove unused labelname -> fingerprints index.
    
    Change-Id: Ie4ccea3a230532e670030ca64ede9435b1b3e506

commit 9ea9189dd17af9fde8774f90dfbd9acb6a8ecd1e
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Feb 27 20:09:00 2014 +0100

    Remove the multi-op-per-fingerprint capability.
    
    Currently, rendering a view is capable of handling multiple ops for
    the same fingerprint efficiently. However, this capability requires a
    lot of complexity in the code, which we are not using at all because
    the way we assemble a viewRequest will never have more than one
    operation per fingerprint.
    
    This commit weeds out the said capability, along with all the code
    needed for it. It is still possible to have more than one operation
    for the same fingerprint, it will just be handled in a less efficient
    way (as proven by the unit tests).
    
    As a result, scanjob.go could be removed entirely.
    
    This commit also contains a few related refactorings and removals of
    dead code in operation.go, view,go, and freelist.go. Also, the
    docstrings received some love.
    
    Change-Id: I032b976e0880151c3f3fdb3234fb65e484f0e2e5

commit 817d9b0e97540ef23eab749a83ef1fcd8f4799e9
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 26 23:46:49 2014 +0100

    "go fmt" fixup.
    
    Change-Id: I262bb462281bc2610819c822fc7a0768c6ce3d8d

commit e8d963d6303d47a4c76168d146c66e9cf8619745
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 26 23:45:33 2014 +0100

    Remove some dead code.
    
    Change-Id: Ie148b506eb6037a0f44d976a2b53e4bf7e64e212

commit 7f078efe5ebb15b3de0e740b7bc4ada8baca81ea
Merge: 24a0ccd e11e8c7
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Feb 27 18:21:02 2014 +0100

    Merge "Unify LevelDB.*Options."

commit 24a0ccdd547e5b33532b01b8079c3ac943bd170b
Merge: c35db9f 6bc083f
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 27 18:04:05 2014 +0100

    Merge "Major code cleanup in storage."

commit e11e8c7a23c60827e6df6427fe26c129e1683997
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Feb 27 14:34:46 2014 +0100

    Unify LevelDB.*Options.
    
    We have seven different types all called like LevelDB.*Options.  One
    of them is the plain LevelDBOptions. All others are just wrapping that
    type without adding anything except clunkier handling.
    
    If there ever was a plan to add more specific options to the various
    LevelDB.*Options types, history has proven that nothing like that is
    going to happen anytime soon.
    
    To keep the code a bit shorter and more focused on the real (quite
    significant) complexities we have to deal with here, this commit
    reduces all uses of LevelDBOptions to the actual LevelDBOptions type.
    
    1576 fewer characters to read...
    
    Change-Id: I3d7a2b7ffed78b337aa37f812c53c058329ecaa6

commit 6bc083f38b0a2d06435d65693d1356d9503cbd37
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Fri Feb 14 19:36:27 2014 +0100

    Major code cleanup in storage.
    
    - Mostly docstring fixed/additions.
      (Please review these carefully, since most of them were missing, I
      had to guess them from an outsider's perspective. (Which on the
      other hand proves how desperately required many of these docstrings
      are.))
    
    - Removed all uses of new(...) to meet our own style guide (draft).
    
    - Fixed all other 'go vet' and 'golint' issues (except those that are
      not fixable (i.e. caused by bugs in or by design of 'go vet' and
      'golint')).
    
    - Some trivial refactorings, like reorder functions, minor renames, ...
    
    - Some slightly less trivial refactoring, mostly to reduce code
      duplication by embedding types instead of writing many explicit
      forwarders.
    
    - Cleaned up the interface structure a bit. (Most significant probably
      the removal of the View-like methods from MetricPersistenc. Now they
      are only in View and not duplicated anymore.)
    
    - Removed dead code. (Probably not all of it, but it's a first
      step...)
    
    - Fixed a leftover in storage/metric/end_to_end_test.go (that made
      some parts of the code never execute (incidentally, those parts
      were broken (and I fixed them, too))).
    
    Change-Id: Ibcac069940d118a88f783314f5b4595dce6641d5

commit c35db9f080e534bc1be69e7cf28acbdcf8a79f5b
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 27 11:54:08 2014 +0100

    Add Java implementation links to metric model docs.
    
    Change-Id: If2a36aa305a0806ffdf490f78e85afb71da8c202

commit 688f4f43c3c97719e3f209ad471c7df939fd199a
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Feb 25 15:27:27 2014 +0100

    Minor metric type documentation fixups.
    
    Change-Id: Ib01ab728e9f0a6b15c23f1cde84161efe9f89e33

commit 91aebda74df256ef5ac4c27cd0714abceb677b1c
Merge: bc6ee66 9dd3f95
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Feb 25 15:24:17 2014 +0100

    Merge "Interim commit of metric model."

commit bc6ee6611eb380ebaa23c8658a9b967d4a43a2c2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Feb 22 22:43:11 2014 +0100

    Rename persistence_adapter.go -> view_adapter.go
    
    Change-Id: Ib45081393b734531d2f85a02f46e87930aab3273

commit 3f226c97242a9858f66e4c12c084db267957afd7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Feb 22 22:29:32 2014 +0100

    Rename {Scalar,Vector}Literal to {Scalar,Vector}Selector.
    
    Change-Id: Ie92301f47f5f49f30b3a62c365e377108982b080

commit a8d4a7ce484a1df456c3ef495517c995423fff56
Merge: 92ea823 2279fcb
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 19 17:28:26 2014 +0100

    Merge "Compact everything to the same sample group size."

commit 2279fcbac40eae3a5b418a1d69beb5435aac73a1
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 19 16:03:30 2014 +0100

    Compact everything to the same sample group size.
    
    Change-Id: Ibb4f3a5d76173d64de916ef1eb41ab5d7900c97b

commit 92ea823e0cb64ac359a37cfd3953e36a42a90ad3
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 19 15:59:21 2014 +0100

    Fix alertmanager API path.
    
    Change-Id: Iea6059decb121c7e75c1828406c4e0b3f2fc1c5d

commit 682cf6fc51f2ce8ca38d7039ebf0133e34e46886
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Feb 13 19:10:56 2014 +0100

    Simplify QueryAnalizer.Visit().
    
    Change-Id: I628582a1903b7273e78921e22a475f1dae5ebaae

commit fd63500ed3550a5f7fd252ee4317a259fbe6ec38
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Feb 13 18:48:56 2014 +0100

    Make rules/ast golint clean.
    
    Mostly, that means adding compliant doc strings to exported items.
    
    Also, remove 'go vet' warnings where possible. (Some are unfortunately
    not to avoid, arguably bugs in 'go vet'.)
    
    Change-Id: I2827b6dd317492864c1383c3de1ea9eac5a219bb

commit 5e8026779f76fed761fc4a555a92de040177a280
Author: Johannes 'fish' Ziemke <fish@freigeist.org>
Date:   Thu Feb 6 17:29:37 2014 +0100

    Make Dockerfile build prometheus in container
    
    This way the binary will be built in a clear environment and prometheus
    can be added to the docker index.
    
    Change-Id: I417fb90adf2503c990a96f4bad370b09b102e0b9

commit 59febe771a397c71f259fef52d0d821c343b3e45
Merge: 67ccf7b c4adfc4
Author: Björn Rabenstein <bjoern@soundcloud.com>
Date:   Thu Feb 13 15:29:16 2014 +0100

    Merge "Minor code cleanups."

commit c4adfc4f25d9b914bc815d44252bfc992805421a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 13 15:24:43 2014 +0100

    Minor code cleanups.
    
    Change-Id: Ib3729cf38b107b7f2186ccf410a745e0472e3630

commit 67ccf7b8e7b31077b19cd82778b260e224266626
Merge: 8cadae6 1f90abd
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 13 12:46:35 2014 +0100

    Merge "Add -O3 to all C/C++ compiles."

commit 1f90abdc1fb8cd253bd038d9af525838a74727ca
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Thu Feb 13 12:37:43 2014 +0100

    Add -O3 to all C/C++ compiles.
    
    So far, we are compiling C/C++ code without any optimization.
    
    In non-representative, but practically relevant tests, the -O3
    improved the total query time for a demanding graph by ~20%.
    
    Change-Id: I5e8123650e53a4933ed4fbe63d0b1ca67217b865

commit 8cadae6102ad9a75d4b12cccdbed12d592d21c5f
Merge: 94666e2 718ad22
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Feb 3 23:22:30 2014 +0100

    Merge "Fix LevelDB closing order."

commit 94666e20b707e92495bf265ae16f20b9e8656860
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Feb 3 12:27:01 2014 +0100

    Minor test error reporting cleanup.
    
    Change-Id: Ie11c16b4e60de7c179c6d2a86e063f4432e2000f

commit fd2158e7464231accdc4690db823d2c7b512a016
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Feb 2 16:45:53 2014 +0100

    Store copy of metric during fingerprint caching
    
    Problem description:
    ====================
    If a rule evaluation referencing a metric/timeseries M happens at a time
    when M doesn't have a memory timeseries yet, looking up the fingerprint
    for M (via TieredStorage.GetMetricForFingerprint()) will create a new
    Metric object for M which gets both: a) attached to a new empty memory
    timeseries (so we don't have to ask disk for the Metric's fingerprint
    next time), and b) returned to the rule evaluation layer. However, the
    rule evaluation layer replaces the name label (and possibly other
    labels) of the metric with the name of the recorded rule.  Since both
    the rule evaluator and the memory storage share a reference to the same
    Metric object, the original memory timeseries will now also be
    incorrectly renamed.
    
    Fix:
    ====
    Instead of storing a reference to a shared metric object, take a copy of
    the object when creating an empty memory timeseries for caching
    purposes.
    
    Change-Id: I9f2172696c16c10b377e6708553a46ef29390f1e

commit 7e9ecaac3a59e371fed3283baebca7ae89a6542e
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jan 30 13:07:26 2014 +0100

    Add count_scalar() function.
    
    Change-Id: I63f09dd0479d0a6b016f5f857dd39dcbda56c7f9

commit 718ad2224b4b60b1a11d3a6f2ca6cc2fbae13f37
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jan 28 15:16:06 2014 +0100

    Fix LevelDB closing order.
    
    The storage itself should be closed before any of the objects passed into it
    are closed (otherwise closing the storage can randomly freeze). Defers are
    executed in reverse order, so closing the storage should be the last of the
    defer statements.
    
    Change-Id: Id920318b876f5b94767ed48c81221b3456770620

commit 18d9d00100a4e098b05eecfbfacc9d6a7fafe7b1
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jan 24 16:13:36 2014 +0100

    Upgrade to Go 1.2.
    
    Change-Id: If8451257487edc4b76f4248f6e6b47c073dea183

commit b382e8b7bdf8dcc664587ee9dc5e37454e04baa0
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jan 24 16:09:41 2014 +0100

    Remove overly verbose DNS-SD logging line.
    
    Change-Id: Ie4534437ab88b9a6b99f5cb6c2f32c9588c1fff6

commit 0378c2ca1fe31adc909e7a1879888f3e6d369d83
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jan 24 16:05:30 2014 +0100

    Nonexistent labels in BY-clauses shouldn't propagate to result.
    
    This fixes bug 2. of https://github.com/prometheus/prometheus/issues/374
    
    Change-Id: Ia4a13153616bafce5bf10597966b071434422d09

commit c342ad33a0303311ce67575dbbe755d6904f70aa
Author: Bjoern Rabenstein <bjoern@soundcloud.com>
Date:   Tue Jan 21 16:49:51 2014 +0100

    Fix OperatorError.
    
    This used to work with Go 1.1, but only because of a compiler bug.
    The bug is fixed in Go 1.2, so we have to fix our code now.
    
    Change-Id: I5a9f3a15878afd750e848be33e90b05f3aa055e1

commit d5ef0c64dc1befc88ee4ec0560aa7d5cefd5fc8d
Merge: 7b013e6 61d26e8
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jan 8 17:45:08 2014 +0100

    Merge "Add optional sample replication to OpenTSDB."

commit 61d26e84450fede401dc4dfb9abb51156279e390
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Dec 9 17:03:49 2013 +0100

    Add optional sample replication to OpenTSDB.
    
    Prometheus needs long-term storage. Since we don't have enough resources
    to build our own timeseries storage from scratch ontop of Riak,
    Cassandra or a similar distributed datastore at the moment, we're
    planning on using OpenTSDB as long-term storage for Prometheus. It's
    data model is roughly compatible with that of Prometheus, with some
    caveats.
    
    As a first step, this adds write-only replication from Prometheus to
    OpenTSDB, with the following things worth noting:
    
    1)
    I tried to keep the integration lightweight, meaning that anything
    related to OpenTSDB is isolated to its own package and only main knows
    about it (essentially it tees all samples to both the existing storage
    and TSDB). It's not touching the existing TieredStorage at all to avoid
    more complexity in that area. This might change in the future,
    especially if we decide to implement a read path for OpenTSDB through
    Prometheus as well.
    
    2)
    Backpressure while sending to OpenTSDB is handled by simply dropping
    samples on the floor when the in-memory queue of samples destined for
    OpenTSDB runs full.  Prometheus also only attempts to send samples once,
    rather than implementing a complex retry algorithm. Thus, replication to
    OpenTSDB is best-effort for now.  If needed, this may be extended in the
    future.
    
    3)
    Samples are sent in batches of limited size to OpenTSDB. The optimal
    batch size, timeout parameters, etc. may need to be adjusted in the
    future.
    
    4)
    OpenTSDB has different rules for legal characters in tag (label) values.
    While Prometheus allows any characters in label values, OpenTSDB limits
    them to a to z, A to Z, 0 to 9, -, _, . and /. Currently any illegal
    characters in Prometheus label values are simply replaced by an
    underscore. Especially when integrating OpenTSDB with the read path in
    Prometheus, we'll need to reconsider this: either we'll need to
    introduce the same limitations for Prometheus labels or escape/encode
    illegal characters in OpenTSDB in such a way that they are fully
    decodable again when reading through Prometheus, so that corresponding
    timeseries in both systems match in their labelsets.
    
    Change-Id: I8394c9c55dbac3946a0fa497f566d5e6e2d600b5

commit 7b013e64914a9b50c43796b742ee065bb82bc046
Merge: f44f398 aada5de
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Dec 18 16:56:30 2013 +0100

    Merge "Replace some uses of obsolete `/metrics.json` with `/metrics` (haven't touched test files yet)."

commit f44f398ea78ebc7eec1ab16ac8436aa5c1819ee2
Merge: 97d8423 48a6326
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Dec 16 14:52:50 2013 +0100

    Merge "Added DNS-SD lookup counter for successful/unsuccessful lookups"

commit 48a6326d25c99d317bd9571d9afda0f3c1e5bff1
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Fri Dec 13 20:50:48 2013 -0500

    Added DNS-SD lookup counter for successful/unsuccessful lookups
    
    Change-Id: I0a71e994a989cecace280b5134a31ebc2ace7591

commit 97d84239df5f8ca189847ff24288e691248eced7
Merge: 0c58e38 6dc36d0
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Dec 16 12:54:55 2013 +0100

    Merge "Don't keep extra labels in aggregations by default."

commit 6dc36d0c3efee1d9f468632eb8d451a81c756e8b
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Dec 13 19:20:42 2013 +0100

    Don't keep extra labels in aggregations by default.
    
    MIN/MAX/SUM/AVG/COUNT aggregations will now by default drop all labels that are
    not specifically part of a BY-clause, even if a label value is the same within
    all timeseries of an aggregation group. The old behavior of keeping extra
    labels may still be switched on by adding KEEPING_EXTRA to the end of an
    aggregation statement:
    
      sum(http_requests) by (job, method) keeping_extra
    
    I'm open to better syntax/naming suggestions.
    
    Change-Id: I21d3fe7af9e98552ce3dffa3ce7c0a4ba4c0b4a4

commit 0c58e388f64f086d24994074dd13ee3600fa048b
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Fri Dec 13 17:45:01 2013 -0500

    rename curation metrics to prometheus_curation
    
    Change-Id: I6a0bf277e88ea8eb737670b7e865ae20f2cbfb91

commit 20bfaf80ab70b19146a967052b8304fa2289546e
Merge: 28f59ed 77a79d1
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Dec 13 15:01:02 2013 +0100

    Merge "Display filename when encountering bad rule file."

commit 28f59edf16dcbec2bb28b07682b041dbd3d5410c
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Wed Dec 11 20:21:37 2013 -0500

    Added telemetry for counting stored samples
    
    Change-Id: I0f36f7c2738d070ca2f107fcb315f98e46803af3

commit 3bf3a555b2faef083bf4f72778910c8079920c3b
Merge: fb44580 b75adfe
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Dec 11 22:52:19 2013 +0100

    Merge "add evalDuration histogram and ruleCount counter for rules"

commit b75adfebad4d6e6ec1f87051afb448e70975c02b
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Tue Dec 10 10:54:35 2013 -0500

    add evalDuration histogram and ruleCount counter for rules
    
    Change-Id: I3508fe72526348d96b8158828388c3ac8d7c3fa9

commit 77a79d1fc0a4f1f14672085d5785a2e6c712692a
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Dec 9 17:01:51 2013 +0100

    Display filename when encountering bad rule file.
    
    Change-Id: I4729371be92c5659a6938145c5fde66771d7be22

commit fb445801108defca5c34562a3bc06d63cd906274
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Dec 11 15:30:27 2013 +0100

    Cleanup/fix program termination sequence.
    
    Change-Id: I2bc58a2583fb079c9ef383cfc7a5e0fbe613f1cd

commit 6947ee9bc9f971dfb44443fbe15833b4e2d2e577
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Nov 8 23:43:05 2013 +0700

    Try to create metrics root directory if missing
    
    This change tries to be nice and create the metrics directoy first
    before erroring out.
    
    Change-Id: I72691cdc32469708cd671c6ef1fb7db55fe60430

commit 4300ce3dc8d80137f826958c9c25ba173a3e9f66
Merge: 436f3df 78ebc1a
Author: Tobias Schmidt <tobidt@gmail.com>
Date:   Tue Dec 3 12:13:03 2013 +0100

    Merge "Ensure that job names are unique in parsed configs."

commit 78ebc1a61f1c56746ecf16b5d61424e37e14897c
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Dec 3 11:59:38 2013 +0100

    Ensure that job names are unique in parsed configs.
    
    Change-Id: I6bd89e6401bd924315981db797af21bdf0b81252

commit 436f3df0e86bf9857e85ed622c5f9c125c76a8f1
Merge: 740d448 ee7f81b
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Dec 3 12:08:55 2013 +0100

    Merge "Add note that pbcopy is only available in OSX"

commit ee7f81b6654ceac216a3f0b2a87dd51f064a22e8
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Tue Dec 3 17:55:40 2013 +0700

    Add note that pbcopy is only available in OSX
    
    Change-Id: I4eda3a5a9117b5021fbc6e3625afa01100c39fa6

commit 740d448983c8c7f8592b73e6ede476cc8681b93c
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 28 14:35:02 2013 +0100

    Use custom timestamp type for sample timestamps and related code.
    
    So far we've been using Go's native time.Time for anything related to sample
    timestamps. Since the range of time.Time is much bigger than what we need, this
    has created two problems:
    
    - there could be time.Time values which were out of the range/precision of the
      time type that we persist to disk, therefore causing incorrectly ordered keys.
      One bug caused by this was:
    
      https://github.com/prometheus/prometheus/issues/367
    
      It would be good to use a timestamp type that's more closely aligned with
      what the underlying storage supports.
    
    - sizeof(time.Time) is 192, while Prometheus should be ok with a single 64-bit
      Unix timestamp (possibly even a 32-bit one). Since we store samples in large
      numbers, this seriously affects memory usage. Furthermore, copying/working
      with the data will be faster if it's smaller.
    
    *MEMORY USAGE RESULTS*
    Initial memory usage comparisons for a running Prometheus with 1 timeseries and
    100,000 samples show roughly a 13% decrease in total (VIRT) memory usage. In my
    tests, this advantage for some reason decreased a bit the more samples the
    timeseries had (to 5-7% for millions of samples). This I can't fully explain,
    but perhaps garbage collection issues were involved.
    
    *WHEN TO USE THE NEW TIMESTAMP TYPE*
    The new clientmodel.Timestamp type should be used whenever time
    calculations are either directly or indirectly related to sample
    timestamps.
    
    For example:
    - the timestamp of a sample itself
    - all kinds of watermarks
    - anything that may become or is compared to a sample timestamp (like the timestamp
      passed into Target.Scrape()).
    
    When to still use time.Time:
    - for measuring durations/times not related to sample timestamps, like duration
      telemetry exporting, timers that indicate how frequently to execute some
      action, etc.
    
    *NOTE ON OPERATOR OPTIMIZATION TESTS*
    We don't use operator optimization code anymore, but it still lives in
    the code as dead code. It still has tests, but I couldn't get all of them to
    pass with the new timestamp format. I commented out the failing cases for now,
    but we should probably remove the dead code soon. I just didn't want to do that
    in the same change as this.
    
    Change-Id: I821787414b0debe85c9fffaeb57abd453727af0f

commit 6b7de31a3cee7457b8f2bdfa197b438c248d8d09
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Dec 2 13:36:47 2013 +0100

    Upgrade to LevelDB 1.14.0 to fix LevelDB bugs.
    
    This tentatively fixes https://github.com/prometheus/prometheus/issues/368 due
    to an upstream bugfix in snapshotted LevelDB iterator handling, which got fixed
    in LevelDB 1.14.0:
    
    https://code.google.com/p/leveldb/issues/detail?id=200
    
    Change-Id: Ib0cc67b7d3dc33913a1c16736eff32ef702c63bf

commit db015de65b7dd8800f3e3d868f2e6aa0722ca53c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Oct 30 17:06:17 2013 +0100

    Comment and "go fmt" fixups in compaction tests.
    
    Change-Id: Iaa0eda6a22a5caa0590bae87ff579f9ace21e80a

commit 8c08a5031fa835c8fdd5e7fd926df33704fcea27
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Oct 29 16:34:00 2013 +0100

    Add search domain support to SRV lookups
    
    This adds search domain support by trying to resolve a name by
    appending each search domain configured in /etc/resolv.conf until
    the query succeeds (NOERROR) and has at least one answer.
    
    Change-Id: Ibdc5138c5d8cc049e11fab90c3d5243d5a06852c

commit 39417f93eeb3b71050f6edeca9867dfef7c1860e
Merge: fceef41 eba01d1
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 28 10:29:33 2013 +0100

    Merge "Remove usage of gorest."

commit fceef4137ce126ad0e4d0feb878d45e2c5d0c20c
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 28 08:03:58 2013 +0100

    Fix /metrics endpoint in sample config.
    
    Change-Id: I2daca6a31f536b87aa8e49a2190787ad9d803595

commit 51408bdfe8c4572ef158bbdb83c80a9ea791173f
Merge: 2162e57 eb461a7
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 24 13:58:14 2013 +0200

    Merge changes I3ffeb091,Idffefea4
    
    * changes:
      Add chunk sanity checking to dumper tool.
      Add compaction regression tests.

commit 2162e5778404c96dd37285ac54582ec7647c15c4
Merge: 5e18255 b5f6e3c
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 24 13:57:48 2013 +0200

    Merge "Fix watermarker default time / LevelDB key ordering bug."

commit 5e182559204d580a56bffdd844fa5b96e33b75f8
Merge: 6f6f560 a1a97ed
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 24 13:57:31 2013 +0200

    Merge "Fix chunk corruption compaction bug."

commit 6f6f56021a5049a94b485df0d47376eefea83d6d
Merge: b70d5ca 1e357cf
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 24 13:03:10 2013 +0200

    Merge changes I53a24c06,Ibe1def5c,Ife68c9c6,Ia3284a90
    
    * changes:
      fix link to CONTRIBUTING.md in README.md
      moved CONTRIBUTING.md to top of repo; link to CONTRIBUTING.md in README.md
      change double quotes to backticks for md awesomeness
      add contributing.md

commit b70d5ca14382f8c479a7211b871dc7c39cf301ff
Merge: 98007b8 2d2c434
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 24 12:45:55 2013 +0200

    Merge changes I76203973,I38646c2b
    
    * changes:
      More updates for first time users.
      Update example config file from json to new protobuf format.

commit 98007b828965c0d1ac5f4c893cbfb3f5a5e89b8b
Merge: 72b861b 9a48010
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Oct 24 12:42:25 2013 +0200

    Merge "Add a check for metrics directory existence."

commit 1e357cf859846d55e1203087620d2a38397ba6f4
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Wed Oct 23 16:26:39 2013 -0400

    fix link to CONTRIBUTING.md in README.md
    
    Change-Id: I53a24c061d0610a9c4b3c515c7d5ba7c04ae9f54

commit 28b055554f67c49dfc97adc713ce8039a11e8613
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Wed Oct 23 16:21:35 2013 -0400

    moved CONTRIBUTING.md to top of repo; link to CONTRIBUTING.md in README.md
    
    Change-Id: Ibe1def5c0c5e1e7f6eb0da344badc53d18f2ecb3

commit dd2b5e0e1c3c6d9bab667319cab82b6c19995d01
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Wed Oct 23 10:16:25 2013 -0400

    change double quotes to backticks for md awesomeness
    
    Change-Id: Ife68c9c67d36ffec24927176ab519f7cb08976a8

commit af5114d81e4d090fd6edae9b7e7e3d57cf9fa9e3
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Wed Oct 23 10:11:43 2013 -0400

    add contributing.md
    
    Change-Id: Ia3284a90dfbbaaf655facd885a8ef13858bdb2c9

commit eba01d11192d8336b1552402afd7e79d7fddd467
Author: Conor Hennessy <conor@soundcloud.com>
Date:   Tue Oct 22 20:31:52 2013 +0200

    Remove usage of gorest.
    
    Due to on going issues, we've decided to remove gorest. It started with gorest
    not being thread-safe (it does introspection to create a new handler which is
    an easy process to mess up with multiple threads of execution):
        https://code.google.com/p/gorest/issues/detail?id=15
    While the issue has been marked fixed, it looks like the patch has introduced
    more problems than the original issue and simply doesn't work properly.
    I'm not sure the behaviour was thought through properly. If a new instance is
    needed every request then a handler-factory is needed or the library needs to
    set expectations about how the new objects should interact with their
    constructor state.
    While it was tempting to try out another routing library, I think for now
    it's better to use dumb vanilla Go routing. At least until we decide which
    URL format we intend to standardize on.
    
    Change-Id: Ica3da135d05f8ab8fc206f51eeca4f684f8efa0e

commit 72b861bebbbdf85d1e44eea89b88b1f885f522d7
Author: Stuart Nelson <stuartnelson3@gmail.com>
Date:   Tue Oct 22 23:25:08 2013 -0400

    remove duplicate users word from README
    
    Change-Id: I3a9c84f16731c76f957155e58d05beda26505924

commit eb461a707df5a625cf0988d6fb2f1f11eb6234a9
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 23 01:06:49 2013 +0200

    Add chunk sanity checking to dumper tool.
    
    Also, move codecs/filters to common location so they can be used in subsequent
    test.
    
    Change-Id: I3ffeb09188b8f4552e42683cbc9279645f45b32e

commit 6ea22f2bf909796e69a77f2ae6ff97e52540ab99
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 23 00:28:38 2013 +0200

    Add compaction regression tests.
    
    This adds regression tests that catch the two error cases reported in
    
      https://github.com/prometheus/prometheus/issues/367
    
    It also adds a commented-out test case for the crash in
    
      https://github.com/prometheus/prometheus/issues/368
    
    but there's no fix for the latter crash yet.
    
    Change-Id: Idffefea4ed7cc281caae660bcad2e3c13ec3bd17

commit aada5ded85087554a878bce020791cf5bfadcbc2
Author: Conor Hennessy <conor@soundcloud.com>
Date:   Tue Oct 15 12:36:25 2013 +0200

    Replace some uses of obsolete `/metrics.json` with `/metrics`
    (haven't touched test files yet).
    
    Change-Id: I48c7c0cf27a39d596627a06cbb4f5913fb3da13c

commit 2d2c434d48ef48d9eec3fed5b7fb8a5dcca267de
Author: Conor Hennessy <conor@soundcloud.com>
Date:   Tue Oct 15 12:08:29 2013 +0200

    More updates for first time users.
    
        - Modified sample conf so it is useable by default, also added some
          comments from the 'hello world' configuration.
        - Updated README so there's a clear two step start for newbies.
        - Added extra vim swap files to gitignore.
    
    Change-Id: I76203973db4a7b332014662fcfb2ce5e7d137bd8

commit 986adfa5572a5d1398a3cbd66192182f589b3eaf
Author: Conor Hennessy <conor@soundcloud.com>
Date:   Thu Oct 10 20:53:19 2013 +0200

    Update example config file from json to new protobuf format.
    
    Change-Id: I38646c2be53b6993abe464d9cdd9b211678de496

commit 9a48010cec697e7cf47e9a1b101d98def515230a
Author: Conor Hennessy <conor@soundcloud.com>
Date:   Thu Oct 10 20:54:06 2013 +0200

    Add a check for metrics directory existence.
    
    Previously on startup the program would just quit without stating
    explicitly why.
    
    Change-Id: I833b85eb74d2dd27cdc3f0f2e65d7bb1c42caa39

commit b5f6e3c90c5893dfb035ffd8d0befc03a2e3358a
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 21 14:32:21 2013 +0200

    Fix watermarker default time / LevelDB key ordering bug.
    
    This fixes part 2) of https://github.com/prometheus/prometheus/issues/367
    (uninitialized time.Time mapping to a higher LevelDB key than "normal"
    timestamps).
    
    Change-Id: Ib079974110a7b7c4757948f81fc47d3d29ae43c9

commit a1a97ed064dbdbae1ebdc42527e4bb455cb9c2e3
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Oct 21 14:30:22 2013 +0200

    Fix chunk corruption compaction bug.
    
    This fixes part 1) of https://github.com/prometheus/prometheus/issues/367 (the
    storing of samples with the wrong fingerprint into a compacted chunk, thus
    corrupting it).
    
    Change-Id: I4c36d0d2e508e37a0aba90b8ca2ecc78ee03e3f1

commit a50ee8df30c6cdcd44ea26d3d4d0bbc57a7ca15d
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 16 15:59:47 2013 +0200

    Always set CORS headers at beginning of API handler.
    
    Change-Id: Icde9a74260c4bb919f09c3e10c6dd5f372ccdaec

commit c7daedc8401e904422a24c5da032b9b090c70fa2
Merge: 2d26db7 be8024e
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Oct 16 15:49:54 2013 +0200

    Merge "Add scalar() function."

commit 2d26db7e37bb6279cdacbbd4a28e21efaa9c7b9b
Author: Conor Hennessy <conor@soundcloud.com>
Date:   Thu Oct 10 20:53:39 2013 +0200

    Trivial regeneration of config proto (wasn't regenerated with new comments).
    
    Change-Id: Iaa97c8b96b40b7f13884e85a39d5a229c2d33f37

commit be8024e18c010495efebc62c0252f2577d4d4111
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 17 14:59:31 2013 +0200

    Add scalar() function.
    
    Change-Id: I1d1183e926a18fc98c9e94bbb9a808a3fb313102

commit 3ee34fa29b49a655c32febfe1b9ca7f25475338e
Merge: d91a40c 274934b
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Sep 11 10:21:25 2013 +0200

    Merge "Revert "Revert "Merge pull request #317 from prometheus/fix/miekg-dns-for-srv"""

commit 274934bcd3ccb244244887ddedf69a6e2f3de779
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Sep 10 17:48:05 2013 +0200

    Revert "Revert "Merge pull request #317 from prometheus/fix/miekg-dns-for-srv""
    
    This reverts commit 88099328d1a899b649141ba8c77933fac91eabbb.
    
    Change-Id: I7bf74de5fda458e2e6f9eea2eacd0e256f95bdee

commit d91a40c3cfd47479baf4fb03eb1f953e674afe04
Merge: 189b3a2 86fcbe5
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Sep 5 11:11:35 2013 +0200

    Merge "Retain DTO on each cycle."

commit 86fcbe5bde9b0897c5e0e66dbea1e7a5115bdc3c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Sep 5 10:14:34 2013 +0200

    Retain DTO on each cycle.
    
    Change-Id: Ifc6f68f98eacb01097771d0dbf043c98bba1d518

commit 189b3a2eeeb7f64dbbad946820045e273ba2048e
Merge: 434675e df2f9e4
Author: Matt Proud <matt.proud@gmail.com>
Date:   Wed Sep 4 18:39:07 2013 +0200

    Merge "Fix arguments for format string."

commit df2f9e47b824b831e2e9898455e84cfdc2d0715b
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Sep 4 18:38:29 2013 +0200

    Fix arguments for format string.
    
    Change-Id: Ie0d55a70969c992b1afc6fa96b0e3f2171f0de5a

commit 434675efc332794e998d2aa6d8266338119352ce
Merge: 1875620 33d6f73
Author: Matt Proud <matt.proud@gmail.com>
Date:   Wed Sep 4 18:15:12 2013 +0200

    Merge "Remove unused import."

commit 33d6f73d185405f98fa267716459b604864be1b6
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Sep 4 18:13:06 2013 +0200

    Remove unused import.
    
    Change-Id: Ic2415bd1abb07c43a9df3adc4b13c75fd465c767

commit 1875620e08dea2c754171a1f52ba0c255b43f83f
Merge: d438e1c 4a87c00
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Sep 4 17:31:03 2013 +0200

    Merge "Update low-level i'faces to reflect wireformats."

commit 4a87c002e815568111ff869b3ce558b2fbce36e6
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Aug 29 15:15:22 2013 +0200

    Update low-level i'faces to reflect wireformats.
    
    This commit fixes a critique of the old storage API design, whereby
    the input parameters were always as raw bytes and never Protocol
    Buffer messages that encapsulated the data, meaning every place a
    read or mutation was conducted needed to manually perform said
    translations on its own.  This is taxing.
    
    Change-Id: I4786938d0d207cefb7782bd2bd96a517eead186f

commit d438e1c96cdaf239a557a3c56615d4544701510c
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Sep 4 15:41:24 2013 +0200

    Allow overriding url to fetch go from by env var
    
    If you want to use a different binary package than the officially
    provided, you now can point the env var GOURL to the package you
    want to get instead.
    
    Change-Id: I1cefe2998bc86435cfbd058ba398a7b6c4e7d031

commit 88099328d1a899b649141ba8c77933fac91eabbb
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Aug 30 16:16:49 2013 +0200

    Revert "Merge pull request #317 from prometheus/fix/miekg-dns-for-srv"
    
    This reverts commit e3bc6fc9dce7aeda995fd4a1bc9d3ccb09b46bff, reversing
    changes made to 1cf9e5840a90c358f79cf16d994d120fc14d6615.
    
    Conflicts:
    	retrieval/target_provider.go
    
    Change-Id: Icb6e98fb30419e9e2fe9b686c243702ced372014

commit 7910f6e8632a857cf71469f6f672fb5177541f5e
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Thu Aug 29 09:37:34 2013 +0200

    Prevent total storage locking during memory flush.
    
    While a hack, this change should allow us to serve queries
    expeditiously during a flush operation.
    
    Change-Id: I9a483fd1dd2b0638ab24ace960df08773c4a5079

commit 9dd3f95861e95443d8db9a74748b09a38dabbe53
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 27 14:21:25 2013 +0200

    Interim commit of metric model.
    
    Change-Id: I54c74d796bd175fe056353983043a10c03974185

commit 12d5e6ca5a86834164528202a6fc73723adc8396
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Aug 26 19:12:43 2013 +0200

    Curation should not starve user-interactive ops.
    
    The background curation should be staggered to ensure that disk
    I/O yields to user-interactive operations in a timely manner. The
    lack of routine prioritization necessitates this.
    
    Change-Id: I9b498a74ccd933ffb856e06fedc167430e521d86

commit 93a8d032211b93cc1b2cec33a87011cb46df73d7
Merge: 6d16056 1eb1cea
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Aug 24 19:40:50 2013 +0200

    Merge "Add alert-expression console links to notifications."

commit 6d1605667d6c96e227869b4ad4303067deb53451
Merge: 0d73b8f 2b42fd0
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Aug 23 17:18:27 2013 +0200

    Merge "Snapshot of no more frontier."

commit 2b42fd00687fd0a58fea748de5cd2219ae4eeb86
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Aug 22 17:40:23 2013 +0200

    Snapshot of no more frontier.
    
    Change-Id: Icd52da3f52bfe4529829ea70b4865ed7c9f6c446

commit 0d73b8f87e1376ff9bdaf01c61a1d332a9a68c25
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Aug 23 15:59:51 2013 +0200

    Adjust curation thresholds and intervals.
    
    Curation is an expensive process.  We can perform it less frequently;
    and in the case of compaction processors, we can afford to let them
    group more together.
    
    Change-Id: I421e27958ed7a98dfacaababefad19462772b6a3

commit 1eb1ceac8cb9391e23b1cbc084faea5265029566
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 20 15:42:06 2013 +0200

    Add alert-expression console links to notifications.
    
    The ConsoleLinkForExpression() function now escapes console URLs in such a way
    that works both in emails and in HTML.
    
    Change-Id: I917bae0b526cbbac28ccd2a4ec3c5ac03ee4c647

commit e26d3437fd7d3707b12c4338da2459c67d050b7a
Merge: ab99bd0 7885874
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 19 22:20:37 2013 +0200

    Merge "Make scrape timeouts configurable per job."

commit ab99bd0cbd08eecc193ef1d53ae0c26a9ce223ad
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 19 16:33:19 2013 +0200

    Add tarball Makefile rule.
    
    Change-Id: I0991346493d816d5a7bdbf523b4cff20f7b59eb6

commit 7db518d3a01c022764b066ebdc21129e4c06f7ac
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Aug 7 23:28:11 2013 +0200

    Abstract high watermark cache into standard LRU.
    
    Conflicts:
    	storage/metric/memory.go
    	storage/metric/tiered.go
    	storage/metric/watermark.go
    
    Change-Id: Iab2aedbd8f83dc4ce633421bd4a55990fa026b85

commit 788587426b095f4cd9dfece36ae5fccf93a99330
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Aug 16 18:17:48 2013 +0200

    Make scrape timeouts configurable per job.
    
    Change-Id: I77a7514ad9e7969771f873d63d6353ec50082a62

commit 1e37b23a174246f8b4839c186eaa3311ed0775fb
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Aug 17 13:56:26 2013 +0200

    Extract LRUCache into generic cache type.
    
    Change-Id: I402da4de408a44457daeec7497d2393c5f65ab66

commit d74c2c54d4a1bf80e5ccbf68c669f8e06484ed47
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Aug 9 01:20:10 2013 +0200

    Interfacification of stream.
    
    Move the stream to an interface, for a number of additional changes
    around it are underway.
    
    Conflicts:
    	storage/metric/memory.go
    
    Change-Id: I4a5fc176f4a5274a64ebdb1cad52600954c463c3

commit c262907fec8c418daf4f3c0cd4eba41f02c187f1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Aug 15 11:39:07 2013 +0200

    Kill interface cruft.
    
    These pieces were never used and should be thusly removed.
    
    Change-Id: I8dd151ec4c40b6d3ccffad1bb9b8b75a92e9ee37

commit b23acccea861d976c24ebc3b8e211a60bbc9a60b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Aug 15 11:35:50 2013 +0200

    Kill AppendSample interface definition.
    
    AppendSample will be repcated with AppendSamples, which will take
    advantage of bulks appends.  This is a necessary step for indexing
    pipeline decoupling.
    
    Change-Id: Ia83811a87bcc89973d3b64d64b85a28710253ebc

commit 9c8112a053c7e6ec0d91e1b240a7613b1f22f906
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Aug 15 11:18:01 2013 +0200

    Revert "Add flags to build prometheus statically"
    
    This reverts commit 0e9e3e068d7e164a0069240cf54cbddc53abbe22.
    
    Not only do we know this to produce problematic artifacts, it refuses
    to build on Mac OS X.
    
        TMPDIR=/tmp GOROOT=/Users/mattproud/Development/go/src/github.com/prometheus/prometheus/.build/root/go GOPATH=/Users/mattproud/Development/go/src/github.com/prometheus/prometheus/.build/root/gopath /Users/mattproud/Development/go/src/github.com/prometheus/prometheus/.build/root/go/bin/go build -o prometheus -ldflags " -X main.buildVersion c7052ed -X main.buildBranch refactor/storage/modify-append-signature -X main.buildUser mattproud@Berlin.local -X main.buildDate 20130815-11:15:49 -X main.goVersion 1.1 -X main.leveldbVersion 1.12.0 -X main.protobufVersion 2.5.0 -X main.snappyVersion 1.1.0 -linkmode external -extldflags '-lstdc++ -lpthread -static /Users/mattproud/Development/go/src/github.com/prometheus/prometheus/.build/root/lib/libleveldb.a /Users/mattproud/Development/go/src/github.com/prometheus/prometheus/.build/root/lib/libsnappy.a'" .
        # _/Users/mattproud/Development/go/src/github.com/prometheus/prometheus
        ld: library not found for -lcrt0.o
    
    Change-Id: I4f42161aebfd35a6f09cd7f984b78cc4498774aa

commit c7052ede27b2027b2aa0e7a7108a5a9d2bd7da53
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 14 19:23:28 2013 +0200

    Tarball build rule fixups.
    
    Change-Id: Idc4db7e20cd705901ea9ad39a0f7269bbb5572b7

commit 0e9e3e068d7e164a0069240cf54cbddc53abbe22
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Aug 12 16:18:07 2013 +0200

    Add flags to build prometheus statically
    
    Change-Id: I8fc883247e0657d26aa8ca6f24315fb9217277f3

commit aaaf3367d6efec03852561ba451c4ff2769ddae3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Aug 14 18:52:55 2013 +0200

    Include forgotten imports.
    
    This fixes the build.
    
    Change-Id: Id132f4342adb9ed20116191086f157ca7f7cf515

commit bd7cd61939e0e805a7be06e8d270fbe1df62d570
Merge: a411a6b acf91f3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Aug 14 11:43:11 2013 +0000

    Merge "Build layered indexers."

commit acf91f38bd6c9d2dbe0a48d9f6503f754ca2a4b0
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 13 18:08:02 2013 +0200

    Build layered indexers.
    
    The indexers will be extracted in a short while and wrapped accordingly with
    these types.
    
    Change-Id: I4d1abda4e46117210babad5aa0d42f9ca1f6594f

commit a411a6bdea586376a25c2089fa0244c166388364
Merge: 972e856 305662b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Aug 14 03:42:19 2013 -0700

    Merge pull request #361 from prometheus/handle-sigterm
    
    Handle SIGTERM in addition to SIGINT.

commit 305662bfdd40bc48077f5441b066ed59b60f3ee7
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 14 12:36:55 2013 +0200

    Handle SIGTERM in addition to SIGINT.
    
    Change-Id: I9c91ec7e2b9026b9eb152b98a6986f2bf773eb03

commit 972e856d9b1e375e0a554ae07f801149dcf196f6
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 13 17:19:13 2013 +0200

    Kill the curation state channel.
    
    The use of the channels for curation state were always unidiomatic.
    
    Change-Id: I1cb1d7175ebfb4faf28dff84201066278d6a0d92

commit f8b51c2638d7dd27d33405ec1a9157536b8659e7
Merge: 417e6ff d69b85e
Author: juliusv <julius@soundcloud.com>
Date:   Tue Aug 13 08:11:18 2013 -0700

    Merge pull request #359 from prometheus/feature/add-global-labels
    
    Add global label support via Ingester.

commit d69b85e6c942874006f46373f3e5fb471c5081f5
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 13 16:14:18 2013 +0200

    Add global label support via Ingesters.

commit 417e6ffa0cbac20ae1cfc642d339b28f1bc56018
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 13 13:58:19 2013 +0200

    Rename the queue arguments for another trial.
    
    Again, playing around.
    
    Change-Id: I5413f7723a38ae18792802c5ed91753101adf491
    
    Moving order of arguments by priority.
    
    Testing out patch sets.
    
    Change-Id: I5413f7723a38ae18792802c5ed91753101adf491

commit 014c5ef176e185e9c1e783f092c5ee08752f01f4
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 13 13:52:24 2013 +0200

    Move version to the bottom.
    
    Again, dummy commit.  Just to demonstrate naive drafting with Gerrit.
    
    Change-Id: I43afaf346c61738a17be60eaa22c966545e1eccf

commit 13bfc6c120fcd725bd77e9e185cebc1215e2478d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 13 13:43:37 2013 +0200

    Consolidate queue arguments in main.
    
    This is a no-op commit to demonstrate Gerrit workflow.
    
    Change-Id: I3f09ccd91e4645753517fa31ca97384e7548317f

commit c6bdde5870159c13886ef46fd7461d958e5207dd
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 13 02:26:20 2013 +0200

    Strip notes about GVM.
    
    We no longer use GVM.
    
    Change-Id: Ia9944fb6903becce1c68f19ac22ea9805764ac04

commit 1ceb25b7014929637793fa99c0f3c63d02166729
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 13 00:36:12 2013 +0200

    Publication of LevelDBMetricPersistence Fields.
    
    This will enable us to break down the onerous construction method.
    
    Change-Id: Ia89337ba39d6745af6757180af2485ec8a990a3b

commit 0003027dcede5c5c0568e4138b365f4a6b579a29
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 12 18:22:48 2013 +0200

    Add needed trailing spaces in logs.

commit da420a5b977a2519a256d5428fd496af155d56d5
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 12 18:21:38 2013 +0200

    Add glog options to "make run" to also log to stderr.

commit aa5d251f8d04db541222da85b114648c3d66fbba
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 12 17:18:02 2013 +0200

    Use github.com/golang/glog for all logging.

commit 83fb0a9a2d47ebce975c971223d7361c408b7d13
Merge: c453445 a5141e4
Author: juliusv <julius@soundcloud.com>
Date:   Mon Aug 12 08:17:03 2013 -0700

    Merge pull request #357 from prometheus/refactor/storage/index-pipelines
    
    Depointerize storage conf. and chain ingester.

commit a5141e4d0a7b7a2644d4dc35acfb9cca831c8768
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Aug 10 17:02:28 2013 +0200

    Depointerize storage conf. and chain ingester.
    
    The storage builders need to work with the assumption that they have
    a copy of the underlying configuration data if any mutations are made.

commit c453445390273bafe877f4be9df315dc2ab7adca
Merge: d5f7eee f8b20f3
Author: juliusv <julius@soundcloud.com>
Date:   Mon Aug 12 06:59:20 2013 -0700

    Merge pull request #356 from prometheus/refactor/retrieval-ingester
    
    Make retrieval work with client's new Ingester interface.

commit d5f7eeef1388f3d307e6b690c94b304e7d5582f5
Merge: 1800b2f cc5d4c7
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Aug 12 06:55:49 2013 -0700

    Merge pull request #352 from prometheus/feature/dockerify
    
    Feature/dockerify

commit f8b20f30accd559c3bc14bc8c5a22bceafc0a1c4
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Aug 12 15:15:41 2013 +0200

    Make retrieval work with client's new Ingester interface.

commit 1800b2f39e220159fb7d679c3d1f1b654a07df48
Merge: 483f2be 3b970c5
Author: juliusv <julius@soundcloud.com>
Date:   Mon Aug 12 04:14:26 2013 -0700

    Merge pull request #355 from prometheus/feature/interpolation
    
    Add variable interpolation to notification messages.

commit 3b970c513395bf46e2a8ddcc982986a71483c3b7
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Aug 9 19:32:55 2013 +0200

    Add variable interpolation to notification messages.
    
    This includes required refactorings to enable replacing the http client (for
    testing) and moving the NotificationReq type definitions to the "notifications"
    package, so that this package doesn't need to depend on "rules" anymore and
    that it can instead use a representation of the required data which only
    includes the necessary fields.

commit 483f2be3b3e9e001347465e30685c136c90be8cc
Merge: 974eacf ecf0ee8
Author: juliusv <julius@soundcloud.com>
Date:   Mon Aug 12 03:10:17 2013 -0700

    Merge pull request #354 from prometheus/feature/send-prom-metadata
    
    Transfer alerting rule and Prometheus URL to alertmanager.

commit cc5d4c7edac9b95abac57c8004987bd10d621f91
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Aug 12 11:19:55 2013 +0200

    Run prometheus in foreground.

commit b5cc4c6cc8d8120f1054e73092b3dd9de4b3982d
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Aug 7 18:11:35 2013 +0200

    Fix entrypoint and use base image

commit 1c9ae08e8041ba29161f8b89c229a4a8a9687125
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Aug 5 14:40:24 2013 +0200

    Add Dockerfile

commit 974eacf36f2b313fdc820c328fbf2dc9459b4cbe
Merge: c03712d 820e551
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Aug 11 17:16:05 2013 -0700

    Merge pull request #351 from prometheus/refactor/storage/componentize-index
    
    Replace index writes with wrapped interface.

commit ecf0ee8f398606e1f0e40cf02bb17410f7df4c03
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Aug 9 18:09:44 2013 +0200

    Transfer alerting rule and Prometheus URL to alertmanager.

commit c03712dc58b31e22807af49f765e09f74ff93806
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Aug 7 20:18:20 2013 +0200

    Update config.pb.go (now includes comments from protobuf definition file).

commit 820e5519889378e3c01d8b817d044794fe6e9177
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Aug 7 13:29:10 2013 +0200

    Code Review: Nits.

commit a3bf2efdd5ecfc7a81de1fe19385fefa8e4a325d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Aug 7 12:07:35 2013 +0200

    Replace index writes with wrapped interface.
    
    This commit is the first of several and should not be regarded as the
    desired end state for these cleanups.  What this one does it, however,
    is wrap the query index writing behind an interface type that can be
    injected into the storage stack and have its lifecycle managed
    separately as needed.  It also would mean we can swap out underlying
    implementations to support remote indexing, buffering, no-op indexing
    very easily.
    
    In the future, most of the individual index interface members in the
    tiered storage will go away in favor of agents that can query and
    resolve what they need from the datastore without the user knowing
    how and why they work.

commit cba2f4b261de660c8298b0d7d071f916f11b9f4e
Merge: 881e3fb b9c9092
Author: juliusv <julius@soundcloud.com>
Date:   Tue Aug 6 09:44:35 2013 -0700

    Merge pull request #350 from prometheus/tool/rule-checker
    
    Add simple rule file checker tool.

commit b9c90925dd1f1697e55f61c4fe95e02a179e2f57
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Aug 6 17:55:40 2013 +0200

    Add simple rule file checker tool.
    
    This tool does the simple job of checking a Prometheus rule file for validity
    and printing the parsed rules if the loading succeeds. This came out of
    an immediate need to quickly verify changes to existing rule files.

commit 881e3fb6be828f9e794a75531cac7f9ad8e855a5
Merge: e373d4c 52664f7
Author: juliusv <julius@soundcloud.com>
Date:   Tue Aug 6 05:37:36 2013 -0700

    Merge pull request #349 from prometheus/refactor/storage/componentize
    
    Hot Fix: Use extracted time.

commit 52664f701a415fed2320344f11168d355d1e7bb5
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 6 14:18:02 2013 +0200

    Hot Fix: Use extracted time.

commit e373d4c949a143c9f08cb2dcff5ed1129e520764
Merge: 669cfda 38dac35
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 6 03:49:10 2013 -0700

    Merge pull request #348 from prometheus/refactor/storage/componentize
    
    Replace direct curation table access with wrapper.

commit 38dac35b3e8db2cd45346125ec678525f0ad50ef
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 6 12:38:35 2013 +0200

    Code Review: Short name consistency.

commit a00f18d78bc67d08c8bfc139513109e144155b1f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 6 12:23:06 2013 +0200

    Code Review: Manual re-alignment.

commit cc989c68e1289e8f1b9f6e1f3b385358a6653597
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Aug 6 12:00:31 2013 +0200

    Replace direct curation table access with wrapper.

commit 669cfdaeeeeeb0d1f3db8c1a5f624b8ced4903aa
Merge: 032373a 9baaadf
Author: juliusv <julius@soundcloud.com>
Date:   Mon Aug 5 11:50:47 2013 -0700

    Merge pull request #347 from prometheus/refactor/storage/componentize
    
    Include forgotten interval.

commit 9baaadfc53a88b11f7b60d0d777bb38e28a78892
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Aug 5 18:34:19 2013 +0200

    Include forgotten interval.

commit 032373a2c7f881a0a91bc43c9b97faa7f519f70d
Merge: fcf784c 2cc666b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Aug 5 08:50:50 2013 -0700

    Merge pull request #346 from prometheus/refactor/storage/componentize
    
    Componentize Storage Subsystems

commit 2cc666be9dc602a2002508e6c3e23f81c95667cc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Aug 5 17:37:40 2013 +0200

    Code Review: Revert.

commit 07ac921aecb5fdac36f31934f2df09c460036f6e
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Aug 5 17:31:49 2013 +0200

    Code Review: First pass.

commit d8792cfd8620b40eca3787ecfd36cdb507f07ecb
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Aug 5 09:25:47 2013 +0200

    Extract HighWatermarking.
    
    Clean up the rest.

commit f4669a812c3299e0e1f2cf02542b28f3884a609b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Aug 3 18:46:02 2013 +0200

    Extract index storage into separate types.

commit 772d3d6b1155639475213155451e39e9b456a5bf
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Aug 3 17:25:03 2013 +0200

    Consolidate LevelDB storage construction.
    
    There are too many parameters to constructing a LevelDB storage
    instance for a construction method, so I've opted to take an
    idiomatic approach of embedding them in a struct for easier
    mediation and versioning.

commit fcf784c13c33620e5bb439b21f0e55312a475c1f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Aug 2 09:04:13 2013 +0200

    Fix query error notification in tabular view.
    
    Instead of "Unsupported value type" when type="error", the delivered
    error message should be shown.

commit 4f8a010637c2e2d115a6e4af665d06b3860dd962
Merge: 89797e0 e3415e9
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jul 31 03:48:44 2013 -0700

    Merge pull request #343 from prometheus/notifications/telemetry
    
    Add notifications telemetry.

commit e3415e953fe7fc4eb52775aa5f1adf347010ee5a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 31 00:46:01 2013 +0200

    Add notifications telemetry.

commit 89797e08eb47999e49e144f9114bf7e4f758ef92
Merge: e969562 24f4bb1
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jul 30 15:49:11 2013 -0700

    Merge pull request #342 from prometheus/optional-alertmanager
    
    Drop notifications when no alert manager URL is configured.

commit 24f4bb1f07009b5083b6fe3b4d5a693c0c0c2a55
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jul 30 23:06:38 2013 +0200

    Drop notifications when no alert manager URL is configured.

commit e969562b1384e821e462597c8d25d308f1443792
Merge: 8eb1e8e 35ee2cd
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jul 30 12:16:59 2013 -0700

    Merge pull request #341 from prometheus/feature/notifications
    
    Add alertmanager notification support to Prometheus.

commit 35ee2cd3cba61eda397928c35752f3dee16c2a3c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jul 30 17:18:07 2013 +0200

    Add alertmanager notification support to Prometheus.
    
    Alert definitions now also have mandatory SUMMARY and DESCRIPTION fields
    that get sent along a firing alert to the alert manager.

commit 8eb1e8e67939c0e952b4882b517b82020d9e4dc3
Merge: c32dd27 81f0b85
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jul 25 05:05:48 2013 -0700

    Merge pull request #340 from prometheus/ui/console-null-values
    
    Send [] instead of "null" for empty result vectors, fix retrieval tests

commit 81f0b850131c1f60dc4e6cba05a8eb69f89e4fd9
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jul 25 12:16:32 2013 +0200

    Return [] instead of null for empty result vectors.

commit 331be19af6c71e6da476128cf4f3a22df5708dfd
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jul 25 12:10:16 2013 +0200

    Fix broken retrieval tests.
    
    These have been broken since 06b4a406617fe8399babb55959e7f5e534772ceb

commit c32dd276df07c10a9f2c4d36e70fcd71788293f9
Merge: 212775b 4e94125
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jul 24 10:38:38 2013 -0700

    Merge pull request #339 from prometheus/static-caching
    
    Add caching to static assets when served from blob handler.

commit 4e941255d8ac4bf858c257d27bb4e635c2ef20eb
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jul 24 18:52:57 2013 +0200

    Add caching to static assets when served from blob handler.

commit 212775bfc459feb4305b627984b2a7c3e78322e4
Merge: ce4881d 1b9cbaf
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jul 24 07:14:53 2013 -0700

    Merge pull request #338 from prometheus/ui/bootstrappify-status
    
    Bootstrappify remaining status pages.

commit 1b9cbaf842978d0b262292d6d0c1ba2b1056c447
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 24 12:37:51 2013 +0200

    Bootstrappify remaining status pages.

commit ce4881d6733361483b38535621e7544aad6d361c
Merge: f52baf0 481ee40
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jul 24 06:10:27 2013 -0700

    Merge pull request #337 from prometheus/ui/alert-tables
    
    Prettify/Bootstrapify alert tables.

commit 481ee4096b9b181cafc035c7d4e76f94e1fb4b9c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 24 12:23:35 2013 +0200

    Add no-op silencing links.

commit d9f403ab7d93f097d4cff7abaa7e0cda6faeb009
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 24 03:14:40 2013 +0200

    Prettify/Bootstrapify alert tables.

commit f52baf02ab4c545663fe3fb69b10c44eca198d7a
Merge: 665512f f665534
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jul 24 03:30:12 2013 -0700

    Merge pull request #336 from prometheus/fix/ui-cleanups
    
    JSON-based tabular view and minor UI cleanups

commit f665534b6189254cf5eb9f87e04e89cfed9bdace
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 24 02:21:31 2013 +0200

    Make quote and semicolon usage consistent in graph.js

commit c91c100102a15cb2fae1f9e7ecc801fb990532b9
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 24 02:20:42 2013 +0200

    Fix graph resize bug when no graph exists.

commit 9f07f8677aeeba04b8fc105d17c4e0112dafbf06
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jul 24 02:18:49 2013 +0200

    Generate tabular console view from JSON data.

commit 665512f5c799ce6b967e35a1dbce7f66489e54b0
Merge: 927435d 22ab236
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jul 23 12:03:06 2013 -0700

    Merge pull request #335 from yosabra/feature/interface/prettify
    
    Replacing interface components with Bootstrap.

commit 22ab2366c1f87766ef42e51b178b7ebad3472fda
Author: Sabra Melamed <yosabra@gmail.com>
Date:   Sat Jul 13 19:30:51 2013 +0200

    Replacing interface components with Bootstrap.
    
    This commit includes Bootstrap 2.3.2 and swaps a multitude of graph,
    status, and other components to Bootstrap-based widgets.

commit 927435d68e0e7758730742283f3c888e321e849f
Merge: 4781e2a 5d88e8c
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jul 16 05:52:31 2013 -0700

    Merge pull request #333 from prometheus/round-time
    
    Round time to nearest second in memory storage.

commit 5d88e8cc45e18432b62ca5b1497f6efcd744759f
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jul 16 14:38:11 2013 +0200

    Round time to nearest second in memory storage.
    
    When samples get flushed to disk, they lose sub-second precision anyways. By
    already dropping sub-second precision, data fetched from memory vs. disk will
    behave the same. Later, we should consider also storing a more compact
    representation than time.Time in memory if we're not going to use its full
    precision.

commit 4781e2a578360eda75964bc622bdafe2c81efb5c
Merge: 4d15f8f f7704af
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jul 15 06:24:18 2013 -0700

    Merge pull request #330 from prometheus/feature/interface/tabular-targets
    
    Represent targets in a tabular interface.

commit f7704af4f828c4fea83255bf212939f17ec2b5d7
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jul 15 15:11:41 2013 +0200

    Code Review: Formatting comments.

commit 06b4a406617fe8399babb55959e7f5e534772ceb
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jul 14 18:48:03 2013 +0200

    Represent targets in a tabular interface.
    
    This commit represents a target group's endpoints in a tabular fashion for better differentiation
    of their state in a concise manner.

commit 4d15f8fefe252709375e842209574ff90ea486df
Merge: b85ca7c e20e698
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jul 15 02:38:40 2013 -0700

    Merge pull request #331 from prometheus/fix/retrieval/payload-extraction-buffering
    
    Completely extract response payload for decoding.

commit e20e6980e9167492dc2579dd4001eb999bc92c53
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jul 14 23:03:56 2013 +0200

    Completely extract response payload for decoding.
    
    This commit forces the extraction framework to read the entire response payload
    into a buffer before attempting to decode it, for the underlying Protocol Buffer
    message readers do not block on partial messages.

commit b85ca7c6570c04ad2d71b53f1b25fea72dd510f8
Merge: 8f0a3a0 9a48f57
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jul 12 13:51:57 2013 -0700

    Merge pull request #328 from prometheus/scrape-old-targets-on-sd-fail
    
    Continue scraping old targets on SD fail.

commit 9a48f57b66b8e5a993491986f82a51c244c0c624
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jul 12 22:38:02 2013 +0200

    Continue scraping old targets on SD fail.
    
    When we have trouble resolving the targets for a job via service
    discovery, we shouldn't just stop scraping the targets we currently
    have.

commit 8f0a3a060c4099798f73ecb08992da3c7ec8b7ce
Merge: 2d538bf 64b0ade
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jul 11 11:08:20 2013 -0700

    Merge pull request #327 from prometheus/optimize/faster-lexer
    
    Swap rules lexer for much faster one.

commit 64b0ade171817db2c56654e80bb639a33fc3fbae
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jul 11 18:38:44 2013 +0200

    Swap rules lexer for much faster one.
    
    This swaps github.com/kivikakk/golex for github.com/cznic/golex.
    
    The old lexer would have taken 3.5 years to load a set of 5000 test rules
    (quadratic time complexity for input length), whereas this one takes only 32ms.
    Furthermore, since the new lexer is embedded differently, this gets rid of the
    global parser variables and makes the rule loader fully reentrant without a
    lock.

commit 2d538bf55aea00fe61035af4bd110d755da80a72
Merge: ad656ba f42adc1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jul 1 06:06:11 2013 -0700

    Merge pull request #326 from prometheus/ui/outside-axis
    
    Display Y-axis outside of graph.

commit f42adc1cc0c67bfa59244ef6b00fcd8794c522bc
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jul 1 14:47:43 2013 +0200

    Display Y-axis outside of graph.

commit ad656ba58d581edf2276f68d603a44814f121858
Merge: 4dbc46a a76a797
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jun 28 08:43:21 2013 -0700

    Merge pull request #320 from prometheus/optimize/no-wm-too-old
    
    Always treat series without watermarks as too old.

commit 4dbc46ac823ac438a3e661c649803b4296e38a0f
Merge: 24715f0 1aa8f07
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jun 28 08:23:22 2013 -0700

    Merge pull request #323 from prometheus/ui/compression
    
    Add content compression support to API HTTP responses.

commit 1aa8f071b9375a19f9bb5b4def69d08fdefe5f78
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jun 28 10:19:16 2013 +0200

    Add content compression support to API HTTP responses.

commit 24715f0ee5a36cdac5d91a0dd80ef2d8c72797fa
Merge: 066c679 b8c7fd8
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jun 27 09:52:00 2013 -0700

    Merge pull request #322 from prometheus/refactor/client/new-model
    
    Include Accept header for telemetry request.

commit b8c7fd8c34ccd4c511b2f22d56327a26c225f71e
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 27 18:32:05 2013 +0200

    Include Accept header for telemetry request.
    
    This pull request introduces a HTTP Accept header to indicate a
    preference for Protocol Buffer-encoded messages.

commit 066c679e4a6bd5950d35933cc1dd5f0dfa6a87b9
Merge: 0a69119 eda60cc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 27 09:24:50 2013 -0700

    Merge pull request #321 from soundcrowd-ursula/patch-1
    
    Unordered lists are for unordered items.

commit eda60ccb4f68bf64b2f603bab6f2e8465594ec59
Author: Ursula Kallio <ursula@soundcloud.com>
Date:   Thu Jun 27 17:53:31 2013 +0200

    Unordered lists are for unordered items.

commit a76a797f3f65bf7212b9f1eec1dc66cf61627a7a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 27 17:01:31 2013 +0200

    Always treat series without watermarks as too old.
    
    Current series always get watermarks written out upon append now. This
    drops support for old series without any watermarks by always reporting
    them as too old (stale) during queries.

commit 0a69119f7bd143183f1f179324ad7e7fd2d9c204
Merge: 9726808 d2da211
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jun 26 09:13:17 2013 -0700

    Merge pull request #316 from prometheus/refactor/range-at-interval-op
    
    Implement getValueRangeAtIntervalOp for faster range queries.

commit d2da21121c917229d81dd3f2d490ac326ad6557a
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 7 14:25:01 2013 +0200

    Implement getValueRangeAtIntervalOp for faster range queries.
    
    This also short-circuits optimize() for now, since it is complex to implement
    for the new operator, and ops generated by the query layer already fulfill the
    needed invariants. We should still investigate later whether to completely
    delete operator optimization code or extend it to support
    getValueRangeAtIntervalOp operators.

commit 9726808a0e9da27905c9128ccb65440d9fb875bd
Merge: 1bd8ee1 e7f049c
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jun 26 09:08:16 2013 -0700

    Merge pull request #319 from prometheus/fix/memory-delete-empty
    
    Fix expunging of empty memory series (loop var pointerization bug)

commit e7f049c85b7363faa900a16021239faf110c449c
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 26 18:00:47 2013 +0200

    Fix expunging of empty memory series (loop var pointerization bug)

commit 1bd8ee15f3d71d480cc4686a309967b4e085e203
Merge: e3bc6fc a310afd
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Jun 26 08:53:01 2013 -0700

    Merge pull request #318 from prometheus/fix/build-path
    
    Update "build" -> ".build" in remaining Makefiles.

commit e3bc6fc9dce7aeda995fd4a1bc9d3ccb09b46bff
Merge: 1cf9e58 4bdf1ad
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Jun 26 07:28:51 2013 -0700

    Merge pull request #317 from prometheus/fix/miekg-dns-for-srv
    
    Use github.com/miekg/dns for resolving SRV records

commit a310afd28fe2e95c1b6c23e8d7b4c3b2432f9f03
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 26 16:09:37 2013 +0200

    Update "build" -> ".build" in remaining Makefiles.

commit 4bdf1adb6cec7d1806359f9596b52c121af50412
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Jun 26 12:25:20 2013 +0200

    Use github.com/miekg/dns for resolving SRV records

commit 1cf9e5840a90c358f79cf16d994d120fc14d6615
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 26 11:49:49 2013 +0200

    Fix whitespace in config.proto.

commit 3cae867894b1fb60a45cf80a4e947a63901721b1
Merge: 42198c1 baa5b07
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jun 25 10:00:04 2013 -0700

    Merge pull request #315 from prometheus/refactor/client/new-model
    
    Migrate Prometheus to Use Client-Side Model

commit baa5b07829375e7bae88ec8491fede81be338324
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 25 17:57:35 2013 +0200

    Fix condition for dropping empty memory series.

commit 30b1cf80b5c2dbb9969e6074d4b59ead688632bc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Jun 25 14:02:27 2013 +0200

    WIP - Snapshot of Moving to Client Model.

commit 42198c1f1cce3ec60bf0ecad1832afd6eae750a7
Merge: dad306c ecb9c7b
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jun 25 03:13:58 2013 -0700

    Merge pull request #311 from prometheus/fix/watermarking/on-first-write
    
    Ensure new metrics are watermarked early.

commit dad306cf04139594344733b9073d70ced493b3ab
Merge: 676c0a0 aabf206
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jun 24 04:17:58 2013 -0700

    Merge pull request #314 from prometheus/fix/binary/shell-script
    
    Fix library path determiners.

commit aabf206fb51ebc9117d79bd32ced3cd7a1b8ae59
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jun 24 13:13:58 2013 +0200

    Fix library path determiners.

commit 676c0a0f2079005d250cf23bd4f6a45ce46486c2
Merge: 81c4066 b811ccc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jun 24 03:55:22 2013 -0700

    Merge pull request #313 from prometheus/feature/memory-profile/more-reasonable
    
    Adjust LevelDB Defaults

commit b811ccc161eddb2b7657b5bae3acaa87b596ebda
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jun 24 12:10:14 2013 +0200

    Disable paranoid checks and expose max FDs option.
    
    We shouldn't need paranoid checks now.  We also shouldn't need
    too many FDs being open due to rule evaluator hitting in-memory
    values stream.

commit 4137c75523e4e1ad0b0f1939400bd0e69db6183e
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jun 24 12:09:16 2013 +0200

    Shrink default LRU cache sizes.
    
    Observing Prometheus in production confirms we can lower these values
    safely.

commit 3784b1779f1d9f926b718760b84ef5a951da4758
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jun 24 12:03:05 2013 +0200

    Upgrade LevelDB to 1.12.0.
    
    A number of core fixes have occurred in upstream LevelDB.  Given API
    compatibility, we should upgrade.

commit ecb9c7bb9d26cd0ad085272701733571986503cc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jun 21 21:17:50 2013 +0200

    Code Review: Swap ordering of elements.

commit 5daa0a09ea40425a5e68aa9f9e8f34e26d6b9849
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jun 21 18:34:08 2013 +0200

    Code Review: Swap ordering of watermark getting.
    
    A test for Julius.

commit ee840904d2f09e7d6ca444b170fc0e9fc3658dc3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jun 21 11:32:53 2013 +0200

    Code Review: !Before -> After.

commit 2d5de99fbf757a798f6628e89c074f40ee5596f3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jun 21 10:16:41 2013 +0200

    Regard in-memory series as new.
    
    This commit ensures that series that exist only in-memory and not
    on-disk are not regarded as too old for operation exclusion.

commit 81c406630a968656c31713fa294d5d5f89db7865
Merge: a1a23fb ba8c122
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jun 21 08:55:51 2013 -0700

    Merge pull request #312 from prometheus/fix/sample-append-logging
    
    Log correct sample count when appending to disk.

commit a1a23fbaf838918fb6418ba43a971d76577a8075
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jun 21 09:42:45 2013 +0200

    Ensure new metrics are watermarked early.
    
    With the checking of fingerprint freshness to cull stale metrics
    from queries, we should write watermarks early to aid in more
    accurate responses.

commit ba8c1221475289490beafa49b75361b4aef45438
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 21 12:23:27 2013 +0200

    Log correct sample count when appending to disk.

commit de8757f925ab60a0a93072b628ceadd1a2a859ed
Merge: 2620076 f2b4067
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Jun 19 21:55:52 2013 -0700

    Merge pull request #306 from prometheus/refactor/optimize-ops
    
    Speedup and clean up operation optimization.

commit f2b4067b7b7ccaf2e754fa006148852feaa84ebe
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 19 15:00:00 2013 +0200

    Speedup and clean up operation optimization.

commit 26200766bd19ff9bd63a70546c83bd31a76daaaa
Merge: 55cb835 008bc09
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jun 19 05:21:06 2013 -0700

    Merge pull request #305 from prometheus/feature/cache-fp-metric-lookups
    
    Cache fingerprint->metric lookups and drop empty series from memory on flush

commit 008bc09da882f13251c7a16597a79718f45914a9
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 19 14:19:53 2013 +0200

    Move check for empty memory series to separate method.

commit 16364eda37f6fb8720cea16e795561300507b02a
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 19 11:55:34 2013 +0200

    Drop empty series from memory after flushing.

commit 235623b45de383f6f6f255edd7f6bcfef38c91e5
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 18 19:18:39 2013 +0200

    Fix "make format".

commit 71199e2c93c1ff73c62fe13eeac130cce3a5eba2
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 18 14:08:58 2013 +0200

    Cache disk fingerprint->metric lookups in memory.

commit 55cb83586744a0cf84b8de1024cca7415692e243
Merge: f4af4cb 8ee7947
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jun 14 05:19:05 2013 -0700

    Merge pull request #303 from prometheus/fix/drop-metricname
    
    Ensure metric name is dropped correctly from alert labels in UI.

commit 8ee7947b1ef5ce984c9fd2672ca18e53fe086f22
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 14 13:03:19 2013 +0200

    Ensure metric name is dropped correctly from alert labels in UI.

commit f4af4cb741620fc1fe3ecef6374b7a468cf8a1bf
Merge: b838f45 0226d1a
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jun 13 13:38:45 2013 -0700

    Merge pull request #301 from prometheus/feature/alerts-dashboard
    
    Implement alerts dashboard and expression console links.

commit 0226d1ac7a9b624ac140543d47cf5295b0c90437
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 13 16:10:05 2013 +0200

    Implement alerts dashboard and expression console links.

commit b838f456166c98755742c9488b9eed2b6ebd54b9
Merge: 8702ec0 22a40c2
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Jun 13 08:42:02 2013 -0700

    Merge pull request #300 from prometheus/feature/bazooka-build
    
    Make prometheus build on bazooka repo manager

commit 8702ec06734133b84af2be44c000e84fb42a67a1
Merge: 2a9957e 91cf1e9
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jun 13 07:38:01 2013 -0700

    Merge pull request #299 from prometheus/fix/sd-refresh-condition
    
    Fix DNS-SD target refresh condition.

commit 22a40c298d5a89515ad8f43ff5297c13505ed46f
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Jun 13 16:24:21 2013 +0200

    Make prometheus build on bazooka repo manager
    
    - Build build/package on build target
    - And include .pkgignore

commit 91cf1e9a26329dbb62b382979c47b431a16c0171
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 13 16:10:39 2013 +0200

    Fix DNS-SD target refresh condition.

commit 2a9957ea0791da401d632ec8f83c57a473fe94f2
Merge: 005d658 f895acb
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 13 06:50:46 2013 -0700

    Merge pull request #298 from prometheus/refactor/build/cleanups
    
    Trailing build system cleanups.

commit f895acb9efd119bd97954e806629bf8c192f0d05
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 13 15:17:03 2013 +0200

    Trailing build system cleanups.
    
    The .gitignore files had problems, and the build steps could be
    simplified.

commit 005d65868a329e014edd857d07a30700a1ae7263
Merge: 697d313 5624932
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Jun 13 05:41:29 2013 -0700

    Merge pull request #294 from prometheus/remove-gvm
    
    Remove gvm

commit 56249320e31346f1e743b065f04a94c427bac535
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Jun 12 18:45:39 2013 +0200

    Remove gvm on travis.

commit 4524a5fe370c06d0374c62d844ac6eb06cc1b164
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Jun 11 17:45:26 2013 +0200

    Remove gvm and install go by hand.

commit 697d3139d09d7513bc491f093003acd44cb69178
Merge: 848b5f7 d9b4f98
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jun 12 09:13:12 2013 -0700

    Merge pull request #297 from prometheus/feature/dns-sd
    
    Integrate DNS-SD support for discovering job targets. Pairing with Matt/Julius.

commit d9b4f98b44826c30817f793a9111f7aca710ced5
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 11 22:59:27 2013 +0200

    Integrate DNS-SD support for discovering job targets.

commit 848b5f7ccc39dcadb449f10d4fe7a008c7571118
Merge: a88a71c 7ee93bc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Jun 12 08:56:59 2013 -0700

    Merge pull request #295 from prometheus/feature/package/script
    
    Include runner script for packaging.

commit 7ee93bc0e38b782d1eb7153bb4448ae33d81d961
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Jun 12 17:46:43 2013 +0200

    Include runner script for packaging.

commit 1fe3d3b06bffb60068449ca350e93484f1a16ca4
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 11 17:54:58 2013 +0200

    Remove obsolete argument from target handling code.

commit a88a71c6db5d043c6fb60da95bc340d8453126cb
Merge: 1c2ccef ba29d07
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jun 11 02:54:11 2013 -0700

    Merge pull request #293 from prometheus/web/show-rules
    
    Improve rule/expression printing and show rules in Status dashboard

commit ba29d0790125bdb405fab5c52749ca8cd94a08cd
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 11 11:00:55 2013 +0200

    Show loaded rules in Status dashboard.

commit fc97e688c65bd6fe2205f1273bfbf0087f2c6fd8
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Jun 11 11:01:36 2013 +0200

    Improve printing of rules and expressions.

commit 1c2ccef9a261c040ba7650f4ae9468c681f2aca1
Merge: 25bd356 a73f061
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jun 9 01:09:29 2013 -0700

    Merge pull request #291 from prometheus/refactor/storage/leveldb-simplifications
    
    Persist solely Protocol Buffers.

commit a73f061d3c6169a08e0736cd0749f0bf9f9cb16f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Jun 8 10:27:44 2013 +0200

    Persist solely Protocol Buffers.
    
    An design question was open for me in the beginning was whether to
    serialize other types to disk, but Protocol Buffers quickly won out,
    which allows us to drop support for other types.  This is a good
    start to cleaning up a lot of cruft in the storage stack and
    can let us eventually decouple the various moving parts into
    separate subsystems for easier reasoning.
    
    This commit is not strictly required, but it is a start to making
    the rest a lot more enjoyable to interact with.

commit 25bd356aacf519c6de165375d60b2692730aabbb
Merge: 95400cb 74cb676
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jun 7 07:00:46 2013 -0700

    Merge pull request #289 from prometheus/feature/rule-strings
    
    Implement Stringer interface for rules and all their children.

commit 74cb676537983ec4ffe69563b17239943fe364df
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 6 15:12:37 2013 +0200

    Implement Stringer interface for rules and all their children.

commit 95400cb785cc440cb5c9f5e7d462b284fd204425
Merge: 615972d 5582818
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jun 7 06:52:48 2013 -0700

    Merge pull request #290 from prometheus/fix/go-vet
    
    Minor "go tool vet" cleanups

commit 558281890bfe8dcc8317c2046d3b20d494630331
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Jun 7 15:34:41 2013 +0200

    Minor "go tool vet" cleanups

commit 615972dd01810002bd9fda9b923e5be746bc69d2
Merge: b12ddbb 86f63b0
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jun 7 05:46:15 2013 -0700

    Merge pull request #288 from prometheus/fix/curator/fallthrough-compaction-ordering
    
    Fix fallthrough compaction value ordering.

commit 86f63b078bd3ff21c0cecf9d0efac206f513f1a1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jun 7 14:41:00 2013 +0200

                                                                                                                                           Fix fallthrough compaction value ordering.
    
    We discovered a regression whereby data chunks could be appended out
    of order if the fallthrough case was hit.

commit b12ddbbc753406a46320f6d6d1357f0754b63335
Merge: 757ab93 f7a2436
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Jun 7 03:22:40 2013 -0700

    Merge pull request #271 from prometheus/feature/static-user-assets
    
    Support user-provided static asset directory

commit f7a2436665eec3409ee8a2f3f9a758ef190ae0df
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Jun 7 11:17:17 2013 +0200

    Include link to user dashboard when provided

commit 1d794896ac63c55d1eaf61b9b581cc9c2c5ac46b
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu May 23 15:47:00 2013 +0200

    Support user-provided static asset directory
    
    [fix #159]

commit 757ab938db737bac76bcf922f90d2b8feb84a7e0
Merge: 6b2be50 7b9ee95
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 22:21:25 2013 -0700

    Merge pull request #286 from prometheus/optimize/avoid-stale-series
    
    Use LRU cache to avoid querying stale timeseries

commit 7b9ee950307e7f2e9d9590f8ec2161e70a0970c4
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 6 18:16:28 2013 +0200

    Minor LevelDB watermark handling cleanups.

commit 84741b227db8ab54a1f2f3a3361d336f4cb57220
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 6 18:16:22 2013 +0200

    Use LRU cache to avoid querying stale series.

commit f98853d7b7a6038099f434e94db611ab6734141f
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Jun 6 18:14:47 2013 +0200

    Fix type error in watermark list handling.

commit 6b2be5024e48a9cdc79b0cea8ef2ed6819bfa1a7
Merge: 0d46f6b ef1d5fd
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 09:16:53 2013 -0700

    Merge pull request #279 from prometheus/refactor/storage-semaphore
    
    Cleanups in tiered storage and apply semaphores.

commit ef1d5fd8a24d184e90822bc64388cbfc8d7e2d02
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Jun 5 10:40:39 2013 +0200

    Introduce semaphores for tiered storage.
    
    This commit wraps the tiered storage access componnets in semaphores,
    since we can handle several concurrent memory reads.

commit 0d46f6b42ad8827070c8a4cb74f9bcb17e4b2ee1
Merge: abb5353 8190455
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Thu Jun 6 03:41:18 2013 -0700

    Merge pull request #285 from prometheus/fix/storage/states
    
    Add storage state guards and transition callbacks.

commit 819045541e6d8a35409eb74490de783234de6f2d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 12:40:06 2013 +0200

    Code Review: Make double-drain a panic.

commit e217a9fb41b52d6919b7d9ae8b4354b9a7bfa66c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 12:08:20 2013 +0200

    Race Work: Make memory arena locks more coarse.
    
    We can optimize these as needed later.

commit beaaf386e7e6b76684326886687dea38428ac85b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 10:32:00 2013 +0200

    Add storage state guards and transition callbacks.
    
    To ensure that we access tiered storage in the proper way, we have
    guards now.

commit abb5353adef19744677ec9ea7b94373f51bfe68c
Merge: 52a1e50 cbe2f3a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 02:33:45 2013 -0700

    Merge pull request #283 from prometheus/feature/storage/consult-watermark
    
    Include LRU cache for fingerprint watermarks.

commit 52a1e50ddad84bd9f3c1dab94d6e7cbecea2f01e
Merge: 115437a 2c3df44
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 02:33:27 2013 -0700

    Merge pull request #284 from prometheus/refactor/storage/notify-when-available
    
    Ensure database access waits until it is started.

commit 2c3df44af6021910962756ccb17f11c638a59a44
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 10:42:21 2013 +0200

    Ensure database access waits until it is started.
    
    This commit introduces a channel message to ensure serving
    state has been reached with the storage stack before anything attempts
    to use it.

commit cbe2f3a7b1a100e48171d045d0980d7f1a9a98af
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jun 6 10:09:16 2013 +0200

    Include LRU cache for fingerprint watermarks.

commit 115437ad1f89c729582a754f7edfdc42a86797b4
Merge: c594d18 51689d9
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jun 5 09:41:51 2013 -0700

    Merge pull request #278 from prometheus/debug/query-timings
    
    Add debug timers to instant and range queries.

commit 51689d965dbe3936bbc89def1e7a095286cbfda3
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Jun 3 17:07:03 2013 +0200

    Add debug timers to instant and range queries.
    
    This adds timers around several query-relevant code blocks. For now, the
    query timer stats are only logged for queries initiated through the UI.
    In other cases (rule evaluations), the stats are simply thrown away.
    
    My hope is that this helps us understand where queries spend time,
    especially in cases where they sometimes hang for unusual amounts of
    time.

commit c594d18f54f7216037840ac5d86ea47613ede97e
Merge: d169e1d d4db3cf
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Jun 5 07:35:16 2013 -0700

    Merge pull request #282 from prometheus/fix/race/targetpool
    
    Fix race conditions in TargetPool.

commit d4db3cf00b5de8f4c495b3505d1e454f1103671e
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Jun 5 16:29:05 2013 +0200

    Code Review: Last replacement wins.

commit 9cde48754b472e5857da6b9fa5ac750ac6315df1
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Jun 5 14:44:20 2013 +0200

    Fix race conditions in TargetPool.
    
    The race condition detector found a few anomalies whereby a
    TargetPool could be read during a mutation.  This has been fixed.

commit d169e1d282a2c84606a2b78aa1f23b540af69c89
Merge: 95adf19 2ee6e32
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Jun 5 05:10:35 2013 -0700

    Merge pull request #281 from prometheus/feature/build/race-condition-binary
    
    Include race condition runner.

commit 2ee6e32847efae5c0e13bc673bd9342284a420d9
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Jun 5 14:05:42 2013 +0200

    Include race condition runner.

commit 95adf1958b9a2af67c2906c32a61752335b2e197
Merge: 9215580 adb8781
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jun 5 05:01:19 2013 -0700

    Merge pull request #280 from prometheus/cleanup/rules-concurrency
    
    Put RuleManager concurrency in hands of caller, fix races.

commit adb87816f47d22196eb176092c671dbc1f1ea2da
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Jun 5 13:56:56 2013 +0200

    Put RuleManager concurrency in hands of caller, fix races.

commit 921558048889727f7c408942259c8af62a9ea708
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Jun 5 13:56:15 2013 +0200

    Include race condition binary target.
    
    The race condition binary target is special in that it needs to
    explicitly link against the dependent libraries and recompile the CGO
    bindings.  Because of this, we have a new build target that produces
    these binaries.

commit 6c36beb76481d3ed3777d2fd591b286fcadfdfd9
Merge: 97736a0 8339a18
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jun 4 04:25:16 2013 -0700

    Merge pull request #269 from prometheus/feature/view-tracing
    
    Conditionalize disk initializations.

commit 8339a189cbdea4403f10a8e4eeb3c417601dc62c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Jun 4 13:16:59 2013 +0200

    Code Review: Fix seriesPresent scope.
    
    The seriesPresent scope should be constrained to the scope of a
    scanJob, since this is keyed to given series.

commit fe41ce0b197979b2dfc0ab2cf589591fdec20756
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed May 22 19:06:06 2013 +0200

    Conditionalize disk initializations.
    
    This commit conditionalizes the creation of the diskFrontier and
    seriesFrontier along with the iterator such that they are provisioned
    once something is actually required from disk.

commit 97736a030ac9a26434f2548bfea7e20ab29225ed
Merge: d828b9c dcfd09c
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jun 3 01:46:17 2013 -0700

    Merge pull request #277 from prometheus/feature/exporter-prefix
    
    Prepend "exporter_" to labels that already exist in exported metrics.

commit dcfd09c8010b70bd65a231357d7e991f1004a220
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Jun 2 22:37:20 2013 +0200

    Prepend "exporter_" to labels that already exist in exported metrics.
    
    If the metrics exported by a process already contain any of a target's
    base labels (such as "job" or "instance", but also any manually assigned
    target-group label), don't overwrite that label, but instead add a new
    label consisting of the original label name prepended with "exporter_".
    This is to accomodate intermediate exporter jobs, which might indicate
    e.g. the jobs and instances for which they are exporting data.

commit d828b9c835f458b90039784b291dd93de10f3db8
Merge: a8468a2 138334f
Author: juliusv <julius@soundcloud.com>
Date:   Wed May 29 02:26:20 2013 -0700

    Merge pull request #276 from prometheus/fix/delta-noncounter-resets
    
    Fix handling of negative deltas for non-counter values.

commit 138334fb31f6bc183836a17f7015bb994bfc8f62
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 28 17:36:53 2013 +0200

    Fix handling of negative deltas for non-counter values.

commit a8468a2e5eda80d17179c8a9fe245d02809bc3c1
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 28 16:14:30 2013 +0200

    Fix reversed disk flush cutoff behavior.

commit eb1f9569093884f46fb1612c360ef0953e129e1d
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 28 14:36:03 2013 +0200

    Revert "Revert "Ensure that all extracted samples are added to view.""
    
    This reverts commit 4b30fb86b41729e0a3c2b289534fb007abf57b33.

commit 03addcd1a7a3102d743fb298cc9ef58a3ff3f2f3
Merge: 20d49ea 66d4620
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 28 05:35:31 2013 -0700

    Merge pull request #273 from prometheus/fix/delta-handling
    
    Fix handling of empty ranges in delta

commit 66d4620061312dc361cb9f05a81d0a6e7ced9b17
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon May 27 11:10:40 2013 +0200

    Don't assume delta has at least one sample per vector element.

commit 21c3be0814faedcf4c9c55993e71f4dae09bfc99
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 28 12:46:53 2013 +0200

    Skip any empty range/boundary elements, not only nil ones.

commit 20d49ea169dbf3d75a268ca03c0d5597580bdcdd
Merge: c10780c 0d2d6e9
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Fri May 24 02:02:28 2013 -0700

    Merge pull request #272 from prometheus/feature/status/uptime
    
    Include uptime in the status console.

commit 0d2d6e9a2768b331daef448701a2442a9c56727d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri May 24 10:44:34 2013 +0200

    Include uptime in the status console.
    
    In order to help corroborate whether a Prometheus instance has
    flapped until meta-monitoring is in-place, we ought to provide the
    instance's start time in the console to aid in diagnostics.

commit c10780c966d9669c7edeb055d9c5528fdb438756
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu May 23 21:29:27 2013 +0200

    Introduce telemetry for rule evaluator durations.
    
    This commit adds telemetry for the Prometheus expression rule
    evaluator, which will enable meta-Prometheus monitoring of customers
    to ensure that no instance is falling behind in answering routine
    queries.
    
    A few other sundry simplifications are introduced, too.

commit 8507c58bf2119a528b1c7a840d2c2a320c020241
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu May 23 16:54:21 2013 +0200

    Fix filename in Makefile.

commit fe5c70fc61f6a3cdba4c6ba79ae757cc2aaf76d8
Merge: 9553971 4b30fb8
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Thu May 23 06:27:27 2013 -0700

    Merge pull request #270 from prometheus/fix/expression/index-error
    
    Revert "Ensure that all extracted samples are added to view."

commit 4b30fb86b41729e0a3c2b289534fb007abf57b33
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Thu May 23 13:36:22 2013 +0200

    Revert "Ensure that all extracted samples are added to view."
    
    This reverts commit 008314b5a8c099f7e2d191da85c53d2a235db518. By
    running an automated git bisection described in
    https://gist.github.com/matttproud-soundcloud/22a371a8d2cba382ea64
    this commit was found.

commit 955397123956d5b7ad09bc5d72ee8619d62a6f3d
Merge: cc07b9c 750f862
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed May 22 10:23:54 2013 -0700

    Merge pull request #267 from prometheus/fix/delta-boundaries
    
    Use GetBoundaryValues() for non-counter deltas.

commit 750f862d9a501a00629992b9504e49fc29971bca
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun May 12 02:03:16 2013 +0200

    Use GetBoundaryValues() for non-counter deltas.

commit cc07b9ce740be9ce82168fbf8a8d6ecc10f5b9c0
Merge: 556be84 f2b48b8
Author: juliusv <julius@soundcloud.com>
Date:   Wed May 22 09:24:46 2013 -0700

    Merge pull request #268 from prometheus/fix/value-extraction
    
    Interval value extraction fixes and optimizations.

commit f2b48b8c4ae253cef5f53ffa7673af6232bafcf5
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 22 00:53:25 2013 +0200

    Make getValuesAtIntervalOp consume all chunk data in one pass.
    
    This is mainly a small performance improvement, since we skip past the last
    extracted time immediately if it was also the last sample in the chunk, instead
    of trying to extract non-existent values before the chunk end again and again
    and only gradually approaching the end of the chunk.

commit 83d60bed89ce831d720b9a28646858372eae7ac4
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue May 21 23:20:43 2013 +0200

    extractValuesAroundTime() code simplification.

commit 008314b5a8c099f7e2d191da85c53d2a235db518
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue May 21 23:19:39 2013 +0200

    Ensure that all extracted samples are added to view.
    
    The current behavior only adds those samples to the view that are extracted by
    the last pass of the last processed op and throws other ones away. This is a
    bug. We need to append all samples that are extracted by each op pass.
    
    This also makes view.appendSamples() take an array of samples.

commit 556be84c73433bcc0e1c1814aa374f3af8ec20b5
Merge: d8259cd 93da3f6
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed May 22 09:10:52 2013 -0700

    Merge pull request #265 from prometheus/feature/memory-arena-simplification
    
    Move In-Memory Arena Away from Skiplist

commit 93da3f684a1c6519103689cd52316fa2612d3aea
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed May 22 17:52:49 2013 +0200

    Instruct ``make binary`` to build binary file.

commit b586801830fa8537f035b570ec71911115bbe326
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed May 22 17:31:49 2013 +0200

    Code Review: Fix to-disk queue infinite growth.
    
    We discovered a bug while manually testing this branch on a live
    instance, whereby the to-disk queue was never actually dumped to
    disk.

commit 285a8b701b14b897897d2ebc7ee2359313a98dd1
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed May 22 14:23:35 2013 +0200

    Code Review: Extend lock.

commit 2526ab8c81b31bd29e7914be3f073635b7a48047
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed May 22 14:16:13 2013 +0200

    Code Review: Extend lock scope for appending.

commit f994482d152694c181cefe585be77c4bb5f5a5bd
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed May 22 14:13:05 2013 +0200

    Code Review: Avenues for future improvemnet noted.

commit 298a90c1430c1b8cf69be4d0a1e0818e6df687e8
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed May 22 13:42:44 2013 +0200

    Code Review: Initial arena size name.

commit c07abf85219141c7b98a8f870740e2994b397236
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 21 18:12:02 2013 +0200

    Initial move away from skiplist.

commit d8259cd10db78aea4a97fa58c577c0adb939898f
Merge: 39a3e69 6d68626
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed May 22 07:18:53 2013 -0700

    Merge pull request #266 from prometheus/tool/dumper
    
    Simple LevelDB sample dumper tool.

commit 6d68626125751c590267756250c077bdf3fbc0c6
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue May 21 23:23:02 2013 +0200

    Simple LevelDB sample dumper tool.
    
    This very simple tool dumps all samples in a LevelDB metrics storage
    together with their chunk information. This is very crude for now - I
    just whipped it up because I needed to debug something. We should add
    printf-style formatting support for it in the future to indicate what
    information to output for each sample in the database. We could also
    support inspecting the index databases.

commit 39a3e69779cb26060753be1cdb7d4c654f03379b
Merge: 1958063 8586c75
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Tue May 21 07:59:52 2013 -0700

    Merge pull request #263 from prometheus/ui/negative-graph-values
    
    Support negative graph values.

commit 8586c7520c3ac262effa96cafa2cf256ca70756d
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 21 16:54:33 2013 +0200

    Support negative graph values.
    
    Currently graph Y-Axes were hardcoded to start at 0. Choose the Y-scale
    automatically based on the graph data instead.

commit 1958063cc7d9d9cce87e47af047c29322def87d3
Merge: 053f429 74a66fd
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 21 07:17:51 2013 -0700

    Merge pull request #262 from prometheus/feature/storage/fix-grouping
    
    Spawn grouping of fingerprints with free semaphore.

commit 74a66fd93893007736559a6ea5da187e8a2cca12
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Tue May 21 16:11:35 2013 +0200

    Spawn grouping of fingerprints with free semaphore.
    
    The previous implementation spawned N goroutines to group samples
    together and would not start work until the semaphore unblocked.
    While this didn't leak, it polluted the scheduling space.  Thusly,
    the routine only starts after a semaphore has been acquired.

commit 053f4296d01b80158195c172f13f37cb78b9ed28
Merge: 32c3510 081191a
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Tue May 21 06:40:39 2013 -0700

    Merge pull request #260 from prometheus/feature/show-scrape-errors
    
    Remember and display last scrape errors in web UI.

commit 081191afb84c62f6509ae81b8f9be90b26147af1
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 21 15:31:27 2013 +0200

    Remember and display last scrape errors in web UI.

commit 32c3510e664578ee9533b9c9d1134217c201c7b7
Merge: da0257b 5b105c7
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Tue May 21 05:44:33 2013 -0700

    Merge pull request #259 from prometheus/optimize/fingerprinting-time
    
    Optimize fingerprinting time and repointerize fingerprint usage

commit 5b105c77fc923c732b76ee5b86c806c653e2af9b
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri May 17 12:58:15 2013 +0200

    Repointerize fingerprints.

commit 259a0ea46704465a86216247b5cbe2bd8c506f6a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu May 16 17:16:39 2013 +0200

    Optimize fingerprint comparison time.

commit da0257bb0ec192d8d0f95906bf20e332526eb70e
Merge: 360477f ec5b5ba
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 21 00:50:36 2013 -0700

    Merge pull request #258 from prometheus/feature/fingerprint-indexing
    
    Benchmark memory arena; simplify map generation.

commit ec5b5bae287131e3498950c642dc5d0917045068
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon May 20 20:31:58 2013 +0200

    Fuck you, Travis.

commit e5ac91222b4bc55121fc7b54564460f05c64136f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon May 20 19:10:26 2013 +0200

    Benchmark memory arena; simplify map generation.
    
    The one-off keys have been replaced with ``model.LabelPair``, which is
    indexable.  The performance impact is negligible, but it represents
    a cognitive simplification.

commit 360477f66c31750e1d275f5d2a0e7f7e1a96db44
Merge: e5d077e e1f20de
Author: juliusv <julius@soundcloud.com>
Date:   Thu May 16 07:36:40 2013 -0700

    Merge pull request #257 from prometheus/feature/better-memory-behaviors
    
    Pointerize memorySeriesArena.

commit e1f20de2e95d085c31c70432aa8233acf189b970
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Thu May 16 17:02:07 2013 +0300

    Pointerize memorySeriesArena.

commit e5d077e1462eec0c84fb315f7837257461f08550
Merge: e54edb1 8f4c7ec
Author: juliusv <julius@soundcloud.com>
Date:   Thu May 16 07:01:27 2013 -0700

    Merge pull request #254 from prometheus/feature/refactor/serialization
    
    Several Refactorings: Simplified Encoder / Reduction of Naked Return Values

commit 8f4c7ece926e875b7f5e00dc19a8dd6f034537cd
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Thu May 16 08:38:31 2013 +0300

    Destroy naked returns in half of corpus.
    
    The use of naked return values is frowned upon.  This is the first
    of two bulk updates to remove them.

commit 4e0c932a4f4b5f6f0782a4fa2ac3b5c6a4792724
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Thu May 16 00:54:18 2013 +0300

    Simplify Encoder's encoding signature.
    
    The reality is that if we ever try to encode a Protocol Buffer and it
    fails, it's likely that such an error is ultimately not a runtime error
    and should be fixed forthwith.  Thusly, we should rename
    ``Encoder.Encode`` to ``Encoder.MustEncode`` and drop the error return
    value.

commit e54edb16a5354a9eb26aa12d9566d0d8ef7b73ab
Merge: 516101f b063338
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 14 09:00:56 2013 -0700

    Merge pull request #252 from prometheus/feature/larger-in-memory-arena
    
    Expand the in-memory arena size.

commit b063338ae68ed15b187febdf2f8bcef65cf0a34a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 17:50:52 2013 +0200

    Expand the in-memory arena size.
    
    We need to exercise this code path sooner versus later.  This will
    be a cheap way of doing so.

commit 516101f015a2a96e2812b8b35ce0ddca2aac2a66
Merge: 9ff00b6 63d9988
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 14 08:45:59 2013 -0700

    Merge pull request #250 from prometheus/refactor/drop-unused-storage-setting
    
    Drop unused writeMemoryInterval

commit 9ff00b651d74ae3d2d08cb21efdb42f17d2c0cb0
Merge: aa96c7d 83c60ad
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 14 08:12:45 2013 -0700

    Merge pull request #251 from prometheus/fix/memory-metric-mutability
    
    Fix GetMetricForFingerprint() metric mutability.

commit 63d9988b9c8618fe3b806b9f41c7634e3826d9f9
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Tue May 14 16:17:49 2013 +0200

    Drop unused writeMemoryInterval

commit aa96c7d1418ccfb444f148169b654366cedc152f
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Tue May 14 16:55:18 2013 +0200

    Fix rules_test.go
    
    This is smelly, but for now we copy a helper method from the metric
    tests into rules.

commit 83c60ad43ac6355fa0963d062989beed0858b5f8
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 14 16:25:06 2013 +0200

    Fix GetMetricForFingerprint() metric mutability.
    
    Some users of GetMetricForFingerprint() end up modifying the returned metric
    labelset. Since the memory storage's implementation of
    GetMetricForFingerprint() returned a pointer to the metric (and maps are
    reference types anyways), the external mutation propagated back into the memory
    storage.
    
    The fix is to make a copy of the metric before returning it.

commit dab017e8cf3e848e9d3e8bbdd11bcb73feddba5c
Merge: 98e512d 428d91c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 07:33:03 2013 -0700

    Merge pull request #249 from prometheus/fix/test-flag-pollution
    
    Rename test helper files to helpers_test.go

commit 428d91c86ff2d37ed0abd2524d1b9d648b814734
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Tue May 14 16:20:34 2013 +0200

    Rename test helper files to helpers_test.go
    
    This ensures that these files are properly included only in testing.

commit 98e512d755e288a8dbfa29ee67ddc74baec9d0ca
Merge: 23a8565 71a3172
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 14 05:55:22 2013 -0700

    Merge pull request #246 from prometheus/fix/interval-value-extraction
    
    Fix and optimize getValuesAtIntervalOp data extraction.

commit 23a85654c740c5f93692bc65997cb413f12c3318
Merge: 9a8fb58 1a95406
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 05:54:32 2013 -0700

    Merge pull request #247 from prometheus/feature/database-statistics-exposition
    
    Include forgotten databases.html.

commit 1a95406b81ca76d66f774a6d386fd07efd66fd32
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 14:50:02 2013 +0200

    Include forgotten databases.html.

commit 9a8fb58fa67b167883908b8bd028284e6e75cd9e
Merge: 2ea2e89 8956ebe
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 05:37:18 2013 -0700

    Merge pull request #245 from prometheus/feature/runtime/go1.1
    
    ¡ DONOTMERGE — Update to go1.1. !

commit 71a3172abba28bafbc5d5ae5f00eb91533dcd981
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon May 13 18:14:14 2013 +0200

    Fix and optimize getValuesAtIntervalOp data extraction.
    
    - only the data extracted in the last loop iteration of ExtractSamples() was
      emitted as output
    - if e.g. op interval < sample interval, there were situations where the same
      sample was added multiple times to the output

commit 8956ebe0c6e12c4e29ec0a4a0f46281efe4e54d7
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 12:59:23 2013 +0200

    Include "Travis Helper".

commit 244a4a9cdb6f6f9f5b84ca3e6a4508462cee63c6
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 12:39:08 2013 +0200

    Update to go1.1.
    
    This commit updates the documentation, Makefiles, formatting, and
    code semantics to support the 1.1. runtime, which includes ...
    
    1. ``make advice``,
    
    2. ``make format``, and
    
    3. ``go fix`` on various targets.

commit 2ea2e89c972c909b9cbf292b1f57f5b105de1884
Merge: 92ad65f b224251
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 03:31:15 2013 -0700

    Merge pull request #244 from prometheus/feature/database-statistics-exposition
    
    Simplify compaction and expose database sizes.

commit b22425198171b6d9f38177eed7f3c11d4f815d3d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 14 11:21:27 2013 +0200

    Simplify compaction and expose database sizes.
    
    This commit simplifies the way that compactions across a database's
    keyspace occur due to reading the LevelDB internals. Secondarily it
    introduces the database size estimation mechanisms.
    
    Include database health and help interfaces.
    
    Add database statistics; remove status goroutines.
    
    This commit kills the use of Go routines to expose status throughout
    the web components of Prometheus. It also dumps raw LevelDB status
    on a separate /databases endpoint.

commit 92ad65ff135eada9a40a9e13e9608a7bc79b1a67
Merge: dad20c1 ce1ee44
Author: juliusv <julius@soundcloud.com>
Date:   Mon May 13 10:11:57 2013 -0700

    Merge pull request #232 from prometheus/optimize/granular-storage-locking
    
    Synchronous memory appends and more fine-grained storage locks.

commit dad20c15e7d1156fd226d7dddc6442c4194ca348
Merge: 5b183f6 1f7f89b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon May 13 04:19:28 2013 -0700

    Merge pull request #243 from prometheus/feature/size-exposition
    
    Simplify compaction and expose database sizes.

commit 1f7f89b4e3ce89abf923a126aee87e7042aefae9
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat May 11 01:02:57 2013 +0200

    Simplify compaction and expose database sizes.
    
    This commit simplifies the way that compactions across a database's
    keyspace occur due to reading the LevelDB internals.  Secondarily it
    introduces the database size estimation mechanisms.

commit 5b183f6434cecfda722de3df6e3390597cca6aa0
Merge: 2a047fe d538b03
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon May 13 02:05:44 2013 -0700

    Merge pull request #242 from prometheus/feature/storage/long-tail-deletion
    
    Include long-tail data deletion mechanism.

commit d538b0382fe417c7d0e3fd5a3fba557ad459fb38
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon May 13 10:53:24 2013 +0200

    Include long-tail data deletion mechanism.
    
    This commit introduces the long-tail deletion mechanism, which will
    automatically cull old sample values.  It is an acceptable
    hold-over until we get a resampling pipeline implemented.
    
    Kill legacy OS X documentation, too.

commit ce1ee444f12ed008900f453634ff2f5f45f5ebfa
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 8 15:30:27 2013 +0200

    Synchronous memory appends and more fine-grained storage locks.
    
    This does two things:
    
    1) Make TieredStorage.AppendSamples() write directly to memory instead of
       buffering to a channel first. This is needed in cases where a rule might
       immediately need the data generated by a previous rule.
    
    2) Replace the single storage mutex by two new ones:
       - memoryMutex - needs to be locked at any time that two concurrent
                       goroutines could be accessing (via read or write) the
                       TieredStorage memoryArena.
       - memoryDeleteMutex - used to prevent any deletion of samples from
                             memoryArena as long as renderView is running and
                             assembling data from it.
       The LevelDB disk storage does not need to be protected by a mutex when
       rendering a view since renderView works off a LevelDB snapshot.
    
    The rationale against adding memoryMutex directly to the memory storage: taking
    a mutex does come with a small inherent time cost, and taking it is only
    required in few places. In fact, no locking is required for the memory storage
    instance which is part of a view (and not the TieredStorage).

commit 2a047fe416f33446913adc1371900b6fd117aabf
Merge: 76521c3 fa6a1f9
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri May 10 08:09:04 2013 -0700

    Merge pull request #236 from prometheus/feature/tools/compactor
    
    Expose interfaces for pruner and make pruner tool.

commit fa6a1f97d020ea13afeb79e03c59cf4853873b5d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri May 10 16:41:02 2013 +0200

    Expose interfaces for pruner and make pruner tool.
    
    In order to run database cleanups and diagnostics, we should have
    a means for pruning a database---even if LevelDB does this for us.

commit 76521c3ff08e32cbad2bed496978be24995f43f4
Merge: 8d062eb 161c8fb
Author: juliusv <julius@soundcloud.com>
Date:   Fri May 10 03:26:13 2013 -0700

    Merge pull request #234 from prometheus/feature/storage/long-tail-deletion
    
    Include deletion processor for long-tail values.

commit 161c8fbf9bd491cc321ad51f9d0670165c72464a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed May 8 20:39:59 2013 +0200

    Include deletion processor for long-tail values.
    
    This commit extracts the model.Values truncation behavior into the actual
    tiered storage, which uses it and behaves in a peculiar way—notably the
    retention of previous elements if the chunk were to ever go empty.  This is
    done to enable interpolation between sparse sample values in the evaluation
    cycle.  Nothing necessarily new here—just an extraction.
    
    Now, the model.Values TruncateBefore functionality would do what a user
    would expect without any surprises, which is required for the
    DeletionProcessor, which may decide to split a large chunk in two if it
    determines that the chunk contains the cut-off time.

commit 8d062ebb2745748db8923bea643aa8868ba6385c
Merge: 0dc15d2 38d839d
Author: juliusv <julius@soundcloud.com>
Date:   Thu May 9 12:29:42 2013 -0700

    Merge pull request #219 from prometheus/refactor/version-protocol-buffer
    
    Include generated Protocol Buffers artifacts.

commit 0dc15d28cb507c40c6b3bcb262b03c7c55e23395
Merge: 1c9b5b6 0877680
Author: juliusv <julius@soundcloud.com>
Date:   Thu May 9 12:26:31 2013 -0700

    Merge pull request #233 from prometheus/feature/count-by
    
    Implement a COUNT ... BY aggregation operator.

commit 38d839d81051f86ec4daaa3551c891592558d8ad
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed May 8 21:15:47 2013 +0200

    Include generated Protocol Buffers artifacts.
    
    This commit reduces the general compile time dependencies to omit
    the Protocol Buffer compiler and the Go Protocol Buffer generator
    tool.  The build steps to furnish them still remain, but they can
    optionally be called if data.proto or config.proto are under work.

commit 0877680761b87f60158efd6dffb30965674c0b13
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed May 8 16:35:16 2013 +0200

    Implement a COUNT ... BY aggregation operator.
    
    This also removes the now obsolete scalar count() function and corrects the
    expressions test naming (broken in
    https://github.com/prometheus/prometheus/commit/2202cd71c9eb0477e218a7b854db1f35fa5427b9#L6R59)
    so that the expression tests will actually run.

commit 1c9b5b6b8d11cfdd822ee1dafa321806dc7e9777
Merge: 7f548a4 a07b89d
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Tue May 7 09:20:16 2013 -0700

    Merge pull request #221 from prometheus/fix/race-conditions
    
    Fix/document race conditions

commit a07b89d41176fcfec18d78fc1fce7cd4fc5bbc05
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon May 6 10:54:27 2013 +0200

    Document go-1.1 race detector with prometheus

commit cdde766f39f204f05564275be10f275bb8c833f4
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon May 6 10:39:13 2013 +0200

    Embed mutex on web status handler

commit 77401676540b6858a07e3684f5902599420b7610
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon May 6 09:59:47 2013 +0200

    Add comments about potential race conditions

commit 9183302b1fcf89d1032b3b2c06c4a3295c78d718
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon May 6 09:56:32 2013 +0200

    Web handler returns 404 for favicon requests

commit b886a14cfc46052081a2d119e8dad488167595de
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon May 6 09:53:53 2013 +0200

    Remove race conditions from UncertaintyGroup

commit 7f548a4297cfbe162aac42d7df9a309ea2a84beb
Merge: 6551356 7f0d816
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 7 08:50:01 2013 -0700

    Merge pull request #228 from prometheus/feature/storage/compaction
    
    Schedule the background compactors to run.

commit 7f0d8165748004638f0e909ce7d46fb3bdb4eb58
Author: Matt Proud <matt@soundcloud.com>
Date:   Tue May 7 17:14:04 2013 +0200

    Schedule the background compactors to run.
    
    This commit introduces three background compactors, which compact
    sparse samples together.
    
    1. Older than five minutes is grouped together into chunks of 50 every 30
       minutes.
    
    2. Older than 60 minutes is grouped together into chunks of 250 every 50
       minutes.
    
    3. Older than one day is grouped together into chunks of 5000 every 70
       minutes.

commit 6551356af477b32bd8966d1df50b0d2d9042a5f0
Merge: 984fd7c af79201
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 7 06:55:05 2013 -0700

    Merge pull request #227 from prometheus/fix/build-errors
    
    Fix build errors and add default build step to "make".

commit af7920126cafb7c3fcd0b047f874404a1bccabab
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 7 15:48:33 2013 +0200

    Fix build errors and add default build step to "make".

commit 984fd7c184ea2ef83ea483fea4150794becb4731
Merge: f1a634f caab131
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 7 06:21:33 2013 -0700

    Merge pull request #226 from prometheus/refactor/repointerize-tiered-storage
    
    Repointerize TieredStorage method receiver types.

commit caab131adab250a9a7d35658d6814c426314f643
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 7 15:12:33 2013 +0200

    Repointerize TieredStorage method receiver types.

commit f1a634f5805719ce0887a20e48cb54076e95fa13
Merge: 89de116 56324d8
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 7 04:27:41 2013 -0700

    Merge pull request #224 from prometheus/refactor/non-global-storage
    
    Make AST query storage non-global.

commit 89de116ea9127fc1d017d5957646e93c4499d77d
Merge: 76dad43 05afa97
Author: juliusv <julius@soundcloud.com>
Date:   Tue May 7 04:27:27 2013 -0700

    Merge pull request #225 from prometheus/refactor/fmt-cleanups
    
    Slice expression simplifications.

commit 05afa970d21240f56807e975184b90d1d4f1e2e8
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 7 13:22:29 2013 +0200

    Slice expression simplifications.

commit 56324d8ce2f6519ef45b89168d38df85b12324d4
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue May 7 13:15:10 2013 +0200

    Make AST query storage non-global.

commit 76dad4307db3af5de6745b18985e1bb4c4d96aba
Merge: 4872ec7 f897164
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 7 03:35:01 2013 -0700

    Merge pull request #223 from prometheus/feature/refactor/storage-exposition
    
    Expose TieredStorage.DiskStorage.

commit f897164bcfe463926f7479c18c8c17abd0eb1cbe
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue May 7 10:18:19 2013 +0200

    Expose TieredStorage.DiskStorage.

commit 4872ec7577c9cc991cd9e2f79d7892be80422030
Merge: cfc3b10 3b9b1c6
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon May 6 02:15:41 2013 -0700

    Merge pull request #218 from prometheus/refactor/directory-structure
    
    Make Web Serving Stack's Dependencies Concrete

commit 3b9b1c6ab48ecf33b6d4001b9daa38c97709dcee
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun May 5 19:32:04 2013 +0200

    Define dependencies for web. stack concretely.
    
    This commit destroys the use of AppState, which makes passing
    concrete state along to various serving components onerous.

commit cfc3b1053d885e71aeb8c08c69d7ac710f1c5a65
Merge: ad74232 f3cf8ea
Author: juliusv <julius@soundcloud.com>
Date:   Fri May 3 07:00:09 2013 -0700

    Merge pull request #212 from prometheus/ui/smaller-navigation-links
    
    Restyle navigation a bit, align content elements with it

commit ad74232f4979497e00ef8977f9c37fc9bd49caa1
Merge: 2935476 ce45787
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri May 3 06:58:56 2013 -0700

    Merge pull request #215 from prometheus/refactor/storage/publicization
    
    Storage interface to TieredStorage.

commit 293547681864a29f0f7a7019b1bb590596618f21
Merge: 59e5dde 04e661c
Author: juliusv <julius@soundcloud.com>
Date:   Fri May 3 06:56:45 2013 -0700

    Merge pull request #211 from prometheus/feature/reorder-hud-elements
    
    Move build info to the top of the status HUD.

commit 04e661c28ff977a127f360bd613d045c065f356c
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu May 2 14:20:19 2013 +0200

    Move build info to the top of the status HUD.

commit ce45787dbf0cbfb41bc16429467c0df4672bf11b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu May 2 18:27:12 2013 +0200

    Storage interface to TieredStorage.
    
    This commit drops the Storage interface and just replaces it with a
    publicized TieredStorage type.  Storage had been anticipated to be
    used as a wrapper for testability but just was not used due to
    practicality.  Merely overengineered.  My bad.  Anyway, we will
    eventually instantiate the TieredStorage dependencies in main.go and
    pass them in for more intelligent lifecycle management.
    
    These changes will pave the way for managing the curators without
    Law of Demeter violations.

commit f3cf8eae7eb32c7f3c4d0d3122e6ece63f1a695e
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu May 2 14:34:20 2013 +0200

    Restyle navigation a bit, align content elements with it.

commit 59e5ddeed3bc74df161337255cf3ff079cedc962
Merge: c5e507c 5eb9840
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri May 3 03:31:18 2013 -0700

    Merge pull request #213 from prometheus/fix/goroutine-leak-in-append-samples
    
    Fix goroutine leak in leveldb.AppendSamples

commit 5eb9840ed79f73fc34b5653560af271d6c7733fd
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri May 3 12:13:05 2013 +0200

    Fix goroutine leak in leveldb.AppendSamples
    
    The error channels in AppendSamples need to be buffered, since in the
    presence of errors their values may not be consumed.

commit c5e507cd9c448486f1658452550ccdf6482e2744
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu May 2 16:55:47 2013 +0200

    Never submit empty queries.

commit 5a07e8a7c64962fa03896e15a090b95bc74fd9d3
Merge: 2b9ba56 a3f1d81
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu May 2 04:30:37 2013 -0700

    Merge pull request #210 from prometheus/refactor/storage/publicization
    
    Publicize a few storage components for curation.

commit a3f1d81e2425a17a66127801f21ad3a8f049cf83
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu May 2 12:49:13 2013 +0200

    Publicize a few storage components for curation.
    
    This commit introduces the publicization of Stop and other
    components, which the compaction curator shall take advantage
    of.

commit 2b9ba56d61ea937c02c768547e5fc8df75cd0f2f
Merge: 4298bab ba289ef
Author: juliusv <julius@soundcloud.com>
Date:   Thu May 2 04:05:53 2013 -0700

    Merge pull request #208 from prometheus/feature/toggle-console
    
    Add the console to the main/graph ui.

commit 4298bab2b053a9934182134c6b5f37eb05c215fe
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu May 2 12:37:24 2013 +0200

    Publicize Curator and Processors.
    
    This commit publicizes the curation and processor frameworks for
    purposes of making them available in the main processor loop.

commit ba289ef7cdf6933aa5b8abdf369c879b42d1b8a2
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Apr 26 16:50:59 2013 +0200

    Add the console to the main/graph ui.

commit 30f0239f96d10039e51143d33e433d6312fcd39e
Merge: c0cd565 9cea5d9
Author: juliusv <julius@soundcloud.com>
Date:   Wed May 1 05:57:45 2013 -0700

    Merge pull request #209 from prometheus/refactor/protobuf-config
    
    Convert the Prometheus configuration to protocol buffers.

commit 9cea5d9df80f65b9e985887218e597227d93d25c
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 30 20:20:14 2013 +0200

    Convert the Prometheus configuration to protocol buffers.

commit c0cd565430c6c26d5f29af07f6b5d4f76e059a94
Merge: b02debd 368a792
Author: juliusv <julius@soundcloud.com>
Date:   Tue Apr 30 05:46:39 2013 -0700

    Merge pull request #207 from prometheus/julius-array-channels
    
    Adjust memory queue size after change to send arrays over channel.

commit 368a792dd256473fba7fa0d5b65dcee326434367
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 30 13:22:33 2013 +0200

    Adjust memory queue size after change to send arrays over channel.

commit b02debd69c17ebe6f792ca41328200f3585fddf6
Merge: 97e7e79 d8110fc
Author: juliusv <julius@soundcloud.com>
Date:   Mon Apr 29 09:05:05 2013 -0700

    Merge pull request #205 from prometheus/julius-channel-arrays
    
    Send sample arrays instead of single samples over channels.

commit d8110fcd9c8303ad43d6d78b389b14480a084b83
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 29 16:55:18 2013 +0200

    Send sample arrays instead of single samples over channels.

commit 97e7e79a6d78ba33adc40865ae43f8224f239fa5
Merge: aaf15fe 3362bf3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 29 05:20:41 2013 -0700

    Merge pull request #198 from prometheus/feature/curator/scheduler
    
    Include curator status in web heads-up-display.

commit aaf15fe625b58697dc7db94e6f169e68d170b8c5
Merge: 85c9759 dcf2e82
Author: juliusv <julius@soundcloud.com>
Date:   Mon Apr 29 05:16:54 2013 -0700

    Merge pull request #204 from prometheus/julius-dotgraph-templates
    
    Cleanup and idiomaticize rule/expression dot graph output.

commit dcf2e82752d32b315c5463a0e91fe55c0482c3d6
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 26 16:02:52 2013 +0200

    Cleanup and idiomaticize rule/expression dot graph output.

commit 3362bf36e2c9278589dfef024ea40ad2c768a87a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 28 19:01:56 2013 +0200

    Include curator status in web heads-up-display.

commit 85c9759b1269694784633b339ac45270595d337b
Merge: b8bc91d 6fac20c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 29 02:59:03 2013 -0700

    Merge pull request #203 from prometheus/fix/tests/oom
    
    Harden the tests against OOMs.

commit 6fac20c8afe241f0aa6565f148d15a0b5b1b7c40
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 29 11:17:56 2013 +0200

    Harden the tests against OOMs.
    
    This commit employs explicit memory freeing for the in-memory storage
    arenas.  Secondarily, we take advantage of smaller channel buffer sizes
    in the test.

commit b8bc91d6c0c2eef1747b0632fcf79a68e64b9703
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon Apr 29 10:36:08 2013 +0200

    Target test uses correct telemetry headers

commit c98fc8a4955d15af3b5ba6697b5e972004e66c0a
Merge: b04cd28 3929582
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon Apr 29 01:30:54 2013 -0700

    Merge pull request #196 from prometheus/fix/timeout-target-scrapes
    
    Target uses HTTP transport with deadlines

commit b04cd28862b83f2e48b8c42f668692ce0ff77554
Merge: d8c0b58 90ee67a
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon Apr 29 01:30:37 2013 -0700

    Merge pull request #192 from prometheus/feature/negotiate-telemetry-schema-through-mime-type
    
    Use Content-Type data for telemetry versioning

commit d8c0b582b158f266b19a2342e5827de5d8ad806b
Merge: 66bc371 fb197ec
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 29 01:24:48 2013 -0700

    Merge pull request #201 from prometheus/fix/tests/travis-configuration
    
    Update forgotten exposition client links in Make.

commit fb197ece453560b8561199399ab70dd086babdc3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 29 10:01:43 2013 +0200

    Update forgotten exposition client links in Make.
    
    The links in the Makefile, which Travis uses, were out-of-date in
    terms of fetching the Go client library.

commit 66bc3711eae9d526caa0d62492162f20273c6258
Merge: d46cd08 5619743
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 29 01:01:33 2013 -0700

    Merge pull request #197 from prometheus/feature/storage/curation-table
    
    Add curation remark table and refactor error mgmt.

commit 392958289220eb66e747d471f1c2e2ba556bf936
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 26 17:26:52 2013 +0200

    Target uses HTTP transport with deadlines
    
    Instead of externally handling timeouts when scraping a target, we set
    timeouts on the HTTP connection. This ensures that we don't leak
    goroutines on timeouts.
    
    [fixes #181]

commit d46cd089b5fb58222da16331d4d03e128981a214
Merge: 958c6bb a48ab34
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 28 22:50:30 2013 -0700

    Merge pull request #199 from prometheus/refactor/telemetry/api-refresh
    
    Refresh Prometheus client API usage.

commit 958c6bb0ecdcb40d4d712138d320b413f2fc0ce1
Merge: 26dbd07 3fa260f
Author: juliusv <julius@soundcloud.com>
Date:   Sun Apr 28 12:04:42 2013 -0700

    Merge pull request #200 from prometheus/feature/storage/compaction
    
    Followup Items from Julius

commit 3fa260f1805ccdffeb85d9d905f0a40e43165ec5
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 28 20:26:44 2013 +0200

    Complete sentence.

commit e527941b6ae47683379ec049d5f4786eed08f49f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 28 20:09:30 2013 +0200

    Use tagged struct fields.

commit a48ab34dd019b52ba3c5808d3f46063227a6ba89
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 28 19:40:30 2013 +0200

    Refresh Prometheus client API usage.
    
    The client API has been updated per https://github.com/prometheus/client_golang/pull/9.

commit 561974308db5f019e1ac3f613e37c74ed05865b2
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 28 14:47:43 2013 +0200

    Add curation remark table and refactor error mgmt.
    
    The curator requires the existence of a curator remark table, which
    stores the progress for a given curation policy.  The tests for the
    curator create an ad hoc table, but core Prometheus presently lacks
    said table, which this commit adds.
    
    Secondarily, the error handling for the LevelDB lifecycle functions
    in the metric persistence have been wrapped into an UncertaintyGroup,
    which mirrors some of the functions of sync.WaitGroup but adds error
    capturing capability to the mix.

commit 26dbd0776e7b7b190c2d19f1c1ab86f4c11b1f57
Merge: 169a7dc b3e34c6
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 28 03:21:26 2013 -0700

    Merge pull request #169 from prometheus/feature/storage/compaction
    
    Curator and Compaction Processor

commit b3e34c66585f148b69fcfad4cc0213bfe580f6ae
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Apr 5 18:03:45 2013 +0200

    Implement batch database sample curator.
    
    This commit introduces to Prometheus a batch database sample curator,
    which corroborates the high watermarks for sample series against the
    curation watermark table to see whether a curator of a given type
    needs to be run.
    
    The curator is an abstract executor, which runs various curation
    strategies across the database.  It remarks the progress for each
    type of curation processor that runs for a given sample series.
    
    A curation procesor is responsible for effectuating the underlying
    batch changes that are request.  In this commit, we introduce the
    CompactionProcessor, which takes several bits of runtime metadata and
    combine sparse sample entries in the database together to form larger
    groups.  For instance, for a given series it would be possible to
    have the curator effectuate the following grouping:
    
    - Samples Older than Two Weeks: Grouped into Bunches of 10000
    - Samples Older than One Week: Grouped into Bunches of 1000
    - Samples Older than One Day: Grouped into Bunches of 100
    - Samples Older than One Hour: Grouped into Bunches of 10
    
    The benefits hereof of such a compaction are 1. a smaller search
    space in the database keyspace, 2. better employment of compression
    for repetious values, and 3. reduced seek times.

commit 90ee67a038996e82ad515e1cfd759ba4b99efcd4
Merge: 7c3e04c cf3e6ae
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 26 05:56:48 2013 -0700

    Merge pull request #195 from prometheus/refactor/processor002
    
    Refactor processor for 0.0.2 schema

commit 169a7dc26c0131bf88c9a811ec82412baca683bb
Merge: 348b527 2fd9b81
Author: juliusv <julius@soundcloud.com>
Date:   Fri Apr 26 05:45:34 2013 -0700

    Merge pull request #189 from prometheus/feature/build-info-and-startup-friendliness
    
    Build info and startup friendliness

commit 348b527f89c5d0cbfeec538e575692a5bdd943a7
Merge: 584b93f 2202cd7
Author: juliusv <julius@soundcloud.com>
Date:   Fri Apr 26 05:40:36 2013 -0700

    Merge pull request #194 from prometheus/julius-alert-tracking
    
    Track alerts over time and write out alert timeseries.

commit 2202cd71c9eb0477e218a7b854db1f35fa5427b9
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 24 11:51:40 2013 +0200

    Track alerts over time and write out alert timeseries.

commit cf3e6ae084c13e6ce73c881a783815e1b26ec6f2
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 26 14:27:42 2013 +0200

    Add LabelSet helper to fix go 1.0.3 build

commit 584b93f92cc2f120940df6d5cdfb03311de692ad
Merge: d46f2fd d4ff85d
Author: juliusv <julius@soundcloud.com>
Date:   Fri Apr 26 03:50:36 2013 -0700

    Merge pull request #182 from prometheus/julius-fix-up
    
    Add instance label to health (up) timeseries.

commit dfd5c9ce288f70b8b6e83425361ee1750a4c800d
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 26 11:52:26 2013 +0200

    Refactor processor for 0.0.2 schema
    
    Primary changes:
    
    * Strictly typed unmarshalling of metric values
    * Schema types are contained by the processor (no "type entity002")
    
    Minor changes:
    
    * Added ProcessorFunc type for expressing processors as simple
      functions.
    * Added non-destructive `Merge` method to `model.LabelSet`

commit 7c3e04c5469f3ccca96c85ee4a3455d0bc5d235d
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 17:36:47 2013 +0200

    Add version 0.0.2 processor

commit 2fd9b8180d49cc444de3d7d0467747c09dbc33d1
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 16:14:58 2013 +0200

    Add license header to build_info.go

commit 76731c80c62b656c72010f4b3aa6f550e4e54ae1
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 16:05:37 2013 +0200

    Use Content-Type data for telemetry versioning
    
    ProcessorForRequestHeader now looks first for a header like
    `Content-Type: application/json; schema="prometheus/telemetry";
    version="0.0.1"` before falling back to checking
    `X-Prometheus-API-Version`.

commit 378e494433dbc5a45188a80181dd78fe700c78ba
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 15:07:35 2013 +0200

    Date format for build info doesn't include spaces
    
    go 1.0.3 doesn't support spaces in -X linker options.

commit d46f2fd549b92506637d23e633d17e5c29c96f42
Merge: 19fc094 1ad41d4
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Apr 25 05:12:09 2013 -0700

    Merge pull request #187 from prometheus/fix/goroutine-leak
    
    Have goroutine exit on signal via defer block.

commit 1ad41d4c00c6f6699640cf2fedf9ebce233842b5
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Apr 25 13:29:28 2013 +0200

    Call closer.Close() earlier.

commit 22da76e8ab4dc9752f0e4d3871f54fa9cdee5595
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Apr 25 13:04:45 2013 +0200

    Close of reportTicker to exit goroutine.

commit 9dde9302a8a258bacace35b7edeba7b28a5824fb
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 13:19:35 2013 +0200

    Explicitly include domain info in build hostname

commit c152aa514fdb8781bfbedfd00e6e38c2e0276ae2
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 13:14:50 2013 +0200

    Always print version information when starting up

commit 19fc0943620ac20613b4de8ed54c6459729e704e
Merge: daab293 169ed9d
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 03:59:04 2013 -0700

    Merge pull request #191 from prometheus/update-gitignore-files
    
    Ignore web/static/generated and build/root/share

commit daab2932100d985dbd6c47a366ae8285578ccdab
Merge: 3c8873c 4faf167
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 03:50:40 2013 -0700

    Merge pull request #190 from prometheus/fix/web-makefile-build-failure
    
    Move `-f` option to `cp` to command start

commit 169ed9d297fbd1baa0c29d825ae3328d51c7056f
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 12:33:27 2013 +0200

    Ignore web/static/generated and build/root/share

commit 4faf16787df0a4d83553ced1118ffe3d05933d9d
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 12:25:01 2013 +0200

    Move `-f` option to `cp` to command start
    
    `cp file -f file` fails on OS X.

commit 3c8873ce1faeaff1be7e84c54faa6a606d0043a2
Merge: 3ff916d 961ff26
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Apr 25 03:21:46 2013 -0700

    Merge pull request #188 from prometheus/fix/tests/platform-compatibility
    
    Fix positional flags for ``cp`` on Darwin.

commit 961ff268749832f2b3bedd97438dd27325fe0a87
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Thu Apr 25 12:16:51 2013 +0200

    Fix positional flags for ``cp`` on Darwin.
    
    Unfortunately ``cp`` on Darwin regards some flags as positional and
    requires them to be in a specific place.  The new Protocol Buffer
    descriptor bundling fails on Mac OS.

commit 5043c6fce7cfe76590c10452ff88094d61d21fd5
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Apr 25 12:12:50 2013 +0200

    Have goroutine exit on signal via defer block.

commit 45243ac2da10c138ad9ca5e22c3f4fb5d47f6d46
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 12:11:21 2013 +0200

    Print flags on status page.

commit 862054e88bf1760b73c95de1b0402d59d950e79e
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 11:59:39 2013 +0200

    web.StartServing prints listening address

commit a2a4f94aae1d610c185ca56f079dbfc005ed9461
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 11:57:08 2013 +0200

    StatusHandler renders build info

commit 033533c4c542cb7317602481293b3f72cb89d63d
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 25 11:47:48 2013 +0200

    Capture build information and print with -version

commit d4ff85db5a0e0371baa82f9f98ebee1d392fb58b
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 24 21:50:49 2013 +0200

    Add instance label to health (up) timeseries.

commit 3ff916d20976b7863c7ba49d720aeb391a1ea035
Merge: af7ddc3 1f96d4c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 24 10:54:43 2013 -0700

    Merge pull request #179 from prometheus/feature/protocol-buffer-descriptor-inclusion
    
    Include generated Protocol Buffer descriptor.

commit 1f96d4c822eed62dd1561908c3650101846cbcc2
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Apr 24 18:51:07 2013 +0200

    Move protobuf descriptor and add content-type.
    
    - move to static/generated
    - set content-type based on extension '.description'

commit 9e02c2393a4db958b19e4261860880e3f7e40e9b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 24 16:59:40 2013 +0200

    Include generated Protocol Buffer descriptor.
    
    The Protocol Buffer compiler supports generating a machine-readable
    descriptor file encoded as a provided Protocol Buffer message type,
    which can be used to decode messages that have been encoded with it
    after-the-fact.  The generated descriptor also bundles in dependent
    message types.
    
    We can use this to perform forensics on old Prometheus clients, if
    necessary.

commit af7ddc36e2a013fc49238b42dbc0bf100b658934
Merge: a3f04ed 9b8c671
Author: juliusv <julius@soundcloud.com>
Date:   Wed Apr 24 05:19:54 2013 -0700

    Merge pull request #176 from prometheus/optimization/view-materialization/slice-chunking
    
    Truncate irrelevant chunk values.

commit 9b8c671ec9ff6c81d0dadc33a8b1412c24baef62
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 24 12:42:58 2013 +0200

    Fixes/cleanups to renderView() samples truncation.

commit a3f04ed2728c8914865ab62b99c6ed609fe38104
Merge: 5f773cc e86f4d9
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 24 03:33:36 2013 -0700

    Merge pull request #177 from prometheus/refactor/time/everything-in-utc
    
    Convert time readers to represent time in UTC.

commit e86f4d9dfd12775e57f8015d05600717611d0539
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 24 12:05:52 2013 +0200

    Convert time readers to represent time in UTC.
    
    Go's time.Time represents time as UTC in its fundamental data type.
    That said, when using ``time.Unix(...)``, it sets the zone for the
    time representation to the local.  Unfortunately with diagnosis and
    our tests, it is a PITA to jump between various zones, even though
    the serialized version remains the same.
    
    To keep things easy, all places where times are generated or read
    are converted into UTC.  These conversions are cheap, for
    ``Time.In`` merely changes a pointer reference in the struct,
    nothing more.  This enables me to diagnose test failures with fixture
    data very easily.

commit 05504d3642c06c567d77acc483f8fa8adecb7776
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 24 11:02:51 2013 +0200

    WIP - Truncate irrelevant chunk values.
    
    This does not work with the view tests.

commit 5f773cc33290a5131f07653f5c7b3bad8563bcc8
Merge: 2627bfd a326021
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 23 10:03:54 2013 -0700

    Merge pull request #175 from prometheus/refactor/tests/affix-timezone
    
    Convert the TestInstant value into UTC.

commit a32602140ee50ae1de3f939d7e5a37b35440c307
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Tue Apr 23 18:58:39 2013 +0200

    Convert the TestInstant value into UTC.
    
    For the forthcoming Curator, we don't record timezone information in
    the samples, nor do we in the curation remarks.  All times are
    recorded UTC.  That said, for the test environment to better match
    production, the special instant should be in UTC.

commit 2627bfd8ef7308a4a03a6b6b9b1fb06ecdaff2b8
Merge: 955708e c0601ab
Author: juliusv <julius@soundcloud.com>
Date:   Tue Apr 23 06:00:12 2013 -0700

    Merge pull request #174 from prometheus/julius-alerting
    
    Implement initial no-op alert parsing and rule parsing tests.

commit c0601abf46e765ba4ad09853d3cc186fbb892e82
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Apr 23 00:26:59 2013 +0200

    Implement initial no-op alert parsing and rule parsing tests.

commit 955708e8dbc8fec56d4fa6e82daac0d72f57b68d
Merge: 8a17ee8 712bf5e
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Apr 22 05:10:17 2013 -0700

    Merge pull request #158 from prometheus/feature/auto-refresh
    
    Add per graph auto-refresh option to web UI.

commit 8a17ee843d11c1040e5386e4d1f33478e9076818
Merge: d65353f b1a8e51
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 22 04:38:15 2013 -0700

    Merge pull request #170 from prometheus/refactor/readability/business-logic-types
    
    Extract dto.SampleValueSeries into model.Values.

commit d65353fc1bd58993122ed40358bc7278ba5b1763
Merge: e4e6e9a a2623ef
Author: juliusv <julius@soundcloud.com>
Date:   Mon Apr 22 04:33:09 2013 -0700

    Merge pull request #171 from prometheus/julius-fix-debug
    
    Register pprof /debug endpoints with custom HTTP mux.

commit b1a8e51b07a437de07f5e93a8975ac9896ab9a9a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 22 13:30:16 2013 +0200

    Extract dto.SampleValueSeries into model.Values.

commit a2623efcdf51ce00acbff5a18e61bab4989913b5
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 22 13:11:21 2013 +0200

    Register pprof /debug endpoints with custom HTTP mux.

commit 712bf5e2f9166f3968948cfaef559e6dacd39152
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Apr 17 16:49:21 2013 +0200

    Add per graph auto-refresh option to web UI.
    
    This adds a drop-down menu to select/disable a auto-refresh interval.

commit e4e6e9a6f5d845bd72ff79dfa3d2eda457836ad1
Merge: cbcaef0 422003d
Author: juliusv <julius@soundcloud.com>
Date:   Sun Apr 21 12:09:02 2013 -0700

    Merge pull request #167 from prometheus/refactor/tests/trailing-types
    
    Convert trailing float64s.

commit 422003da8e274e4314bafef0483b84ecfe55017d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 20:52:21 2013 +0200

    Convert trailing float64s.

commit cbcaef00182f1d688b5f847734c9c9de98733859
Merge: 6ed97fb db4ffbb
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 11:41:37 2013 -0700

    Merge pull request #166 from prometheus/refactor/readability/business-logic-types
    
    Wrap dto.SampleKey with business logic type.

commit db4ffbb2628410444d609741be08161b618ba044
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 19:16:15 2013 +0200

    Wrap dto.SampleKey with business logic type.
    
    The curator work can be done easier if dto.SampleKey is no longer
    directly accessed but rather has a higher level type around it that
    captures a certain modicum of business logic.  This doesn't look
    terribly interesting today, but it will get more so.

commit 6ed97fbe8a7e17eec508a4f811c832a6a79dc639
Merge: bb12929 b2d0c4f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 11:38:13 2013 -0700

    Merge pull request #165 from prometheus/fix/testing/stochastic
    
    Stochastic test support plural SampleValueSeries.

commit bb12929cf4f1140791adcb4354ef3de90c43de13
Merge: 370da70 f9e99bd
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 11:38:01 2013 -0700

    Merge pull request #164 from prometheus/extensibility/futureproof/values
    
    Refresh SampleValue to 64-bit floating point.

commit f9e99bd08a190633ecc4c4e76f3a503ced96954a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 18:15:56 2013 +0200

    Refresh SampleValue to 64-bit floating point.
    
    We always knew that this needed to be fixed.

commit 092c7bd88ed277da26122d8883fe28fe99a65e1a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 19:18:40 2013 +0200

    Stochastic test support plural SampleValueSeries.
    
    After SampleValue was refactored into SampleValueSeries, which
    involves plural values under a common super key, the stochastic
    test was never refreshed to reflect this reality.  We had other
    tests that validated the functionality, but this one was
    insufficently forward-ported.

commit 370da7047056de1476059d4056166eefed0d40e7
Merge: 3fbf904 3965eea
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 11:28:03 2013 -0700

    Merge pull request #163 from prometheus/futureproof/dependencies/refresh
    
    Upgrade Snappy, Protocol Buffers, and LevelDB.

commit b2d0c4fce7a09f71e2f9766df74314ff22436a98
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 21 19:18:40 2013 +0200

    Stochastic test support plural SampleValueSeries.
    
    After SampleValue was refactored into SampleValueSeries, which
    involves plural values under a common super key, the stochastic
    test was never refreshed to reflect this reality.  We had other
    tests that validated the functionality, but this one was
    insufficently forward-ported.

commit 3965eea43a734a4880525476111e6ce20d0d87e1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Apr 20 22:51:17 2013 +0200

    Upgrade Snappy, Protocol Buffers, and LevelDB.
    
    This is pending validation of fitness.

commit 3fbf9045d561ae4d79b1b8faa34d6a0048c155cd
Merge: 6a5d2f6 ae31641
Author: juliusv <julius@soundcloud.com>
Date:   Fri Apr 19 08:26:17 2013 -0700

    Merge pull request #162 from prometheus/julius-fix-printf
    
    Add missing argument to Printf call.

commit ae316415fe7c6ff3d8a71023cc06af014968577b
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 19 16:29:58 2013 +0200

    Add missing argument to Printf call.

commit 6a5d2f68fc343a9bad740c2ef1a8ed6e156df22d
Merge: 30c7acf 99dcbe0
Author: juliusv <julius@soundcloud.com>
Date:   Fri Apr 19 07:12:11 2013 -0700

    Merge pull request #161 from prometheus/julius-integrate-storage
    
    Integrate memory and disk layers in view rendering.

commit 99dcbe0f94e55d64f97a6ad99e5aba4fa37ba251
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Apr 19 01:00:57 2013 +0200

    Integrate memory and disk layers in view rendering.

commit 30c7acfaa44cf7f0d4335fc01479a2001f039a4e
Merge: 7f0165a 63625bd
Author: juliusv <julius@soundcloud.com>
Date:   Thu Apr 18 15:18:30 2013 -0700

    Merge pull request #160 from prometheus/julius-refactor-persistence
    
    Make view use memory persistence, remove obsolete code.

commit 63625bd24436ca41bdf6dd8d4be99f1ca468b8fd
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 18 16:10:52 2013 +0200

    Make view use memory persistence, remove obsolete code.
    
    This makes the memory persistence the backing store for views and
    adjusts the MetricPersistence interface accordingly. It also removes
    unused Get* method implementations from the LevelDB persistence so they
    don't need to be adapted to the new interface. In the future, we should
    rethink these interfaces.
    
    All staleness and interpolation handling is now removed from the storage
    layer and will be handled only by the query layer in the future.

commit 7f0165aabbbaa639822ffef19b983d41d7b3daac
Merge: 7c544c9 1eb586d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 17 06:12:12 2013 -0700

    Merge pull request #156 from prometheus/julius-fix-rule-eval
    
    Fix rule evaluation closure.

commit 1eb586db7d0e9ac0d3f32d56bee35d57c722cff6
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 17 14:42:15 2013 +0200

    Fix rule evaluation closure.

commit 7c544c91c607780f7ec3c358bbe8b4c4f1ea42c4
Merge: ed5807a 8c9e963
Author: juliusv <julius@soundcloud.com>
Date:   Wed Apr 17 05:48:26 2013 -0700

    Merge pull request #151 from prometheus/julius-synth-vars
    
    Record scrape health timeseries per target.

commit ed5807a0e623e2ea321ba889360bc9a3d034906f
Merge: 5d65b93 a397c4a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 17 05:43:40 2013 -0700

    Merge pull request #154 from prometheus/refactor/build/leveldb-transparency
    
    Include insights into LevelDB build behaviors.

commit a397c4aaf84a8e637d50d6f2e152a84847d91eac
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 17 11:43:35 2013 +0200

    Include insights into LevelDB build behaviors.
    
    Fix wget typo, too.

commit 5d65b9392abb92ac65f942f1223262b9c27e32db
Merge: fdea26e 32c0a93
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 17 00:49:14 2013 -0700

    Merge pull request #152 from prometheus/refactor/build/consolidated-build
    
    New build system only.

commit 32c0a939b0cdab9dd3399f455047392ec2739533
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Apr 14 06:59:55 2013 +0200

    New self-sustaining, hermetic build system.
    
    This should help us produce self-contained artifacts for users as
    well as lower the hurdles for first-time contributors.

commit 8c9e9632a8e19bfdabb41aa2ba6d2e289471543e
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 16 17:22:10 2013 +0200

    Record scrape health timeseries per target.

commit fdea26e3597b8e59549861fac2c6af32d5159806
Merge: a13bc44 5f5ea03
Author: juliusv <julius@soundcloud.com>
Date:   Tue Apr 16 08:24:51 2013 -0700

    Merge pull request #150 from prometheus/julius-mf
    
    Run "make format".

commit 5f5ea031058fbb5dd98df2d8b139c602432cdc4b
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 16 17:23:59 2013 +0200

    Run "make format".

commit a13bc4494ddbfbef10fee24602389492ee255304
Merge: 888b64c d468271
Author: juliusv <julius@soundcloud.com>
Date:   Tue Apr 16 08:19:03 2013 -0700

    Merge pull request #149 from prometheus/fix/telemetry/queue-reporting
    
    Fix append queue telemetry and parameterize sizes.

commit d468271e2fb7c941e9494b2b445e1cecdeab412c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 16 17:13:29 2013 +0200

    Fix append queue telemetry and parameterize sizes.
    
    The original append queue telemetry never worked, because it was
    updated only upon the exit of the select statement, which would
    usually liberate the queues of contents.  This has been fixed to
    be reported arbitrarily.
    
    The queue sizes are now parameterizable via flags.

commit 888b64c781cd010a10c7c1883df148ee520b1195
Merge: 62f33f1 1cff4f3
Author: juliusv <julius@soundcloud.com>
Date:   Mon Apr 15 06:49:40 2013 -0700

    Merge pull request #145 from prometheus/julius-fix-per-second-rate
    
    Fix rate() per-second adjustment.

commit 1cff4f3d912d86e5f17cadd2405754b0f5849c05
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 15 14:39:05 2013 +0200

    Fix rate() per-second adjustment.
    
    This got broken during the depointerization of the Vector type.

commit 62f33f1fc2e483b003d863ac7440ec4232846cf4
Merge: 167504e d53b8cf
Author: juliusv <julius@soundcloud.com>
Date:   Mon Apr 15 05:38:48 2013 -0700

    Merge pull request #138 from prometheus/julius-fix-aliasing
    
    Correct delta()/rate() intervals and temporal aliasing.

commit 167504efd640dec43b266b6a65b4c33c69f49516
Merge: 7267b76 000f6a2
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 15 05:13:35 2013 -0700

    Merge pull request #142 from prometheus/julius-lowercase-by
    
    Allow lower-case BY operator.

commit 7267b76d93efc381b02244bb8cbd7bb37fc2268f
Merge: 6b9de76 95b081f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 15 04:35:49 2013 -0700

    Merge pull request #143 from prometheus/julius-fix-drain
    
    Stop serving tiered storage after draining it.

commit 95b081f9bc24caa37c9355a501b4c6bdc5d76e36
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 15 12:45:45 2013 +0200

    Stop serving tiered storage after draining it.

commit d53b8cf9561007d9e91c8291684c81d0a12a9c1c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Apr 13 02:45:58 2013 +0200

    Correct delta()/rate() intervals and temporal aliasing.

commit 000f6a2e23d29a20a0214dc99aa394876a778b30
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 15 11:56:23 2013 +0200

    Allow lower-case BY operator.

commit 6b9de768eee85275d0c1b03c36ce071f01292ec2
Merge: f21b5ad a0d311c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 15 02:51:57 2013 -0700

    Merge pull request #141 from prometheus/julius-constantize-job-label
    
    Constantize job name label.

commit a0d311c9e68d35f84351908bdc72358f04bbbe6b
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Apr 15 11:47:54 2013 +0200

    Constantize job name label.

commit f21b5ad12bd96623c8d6b2b7d212ec4a4624bfe1
Merge: e6f67c3 72bd585
Author: juliusv <julius@soundcloud.com>
Date:   Mon Apr 15 02:32:45 2013 -0700

    Merge pull request #133 from bernerdschaefer/graph-display-tweaks
    
    Graph display tweaks

commit 72bd5854850d0a53ad6074408a7c022087083f98
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Mon Apr 15 10:04:09 2013 +0200

    Revert style change to legend items

commit e6f67c3a3e7fa2e670744a7f4d908ffab1670f98
Merge: f817106 a1ba230
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Apr 13 06:57:07 2013 -0700

    Merge pull request #139 from prometheus/julius-reduce-sample-jitter
    
    Fix scrape timestamps to reduce sample time jitter.

commit a1ba23038e9393fb049740b78b81e513d082c7cb
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Apr 13 03:45:37 2013 +0200

    Fix scrape timestamps to reduce sample time jitter.
    
    We're currently timestamping samples with the time at the end of a scrape
    iteration. It makes more sense to use a timestamp from the beginning of the
    scrape for two reasons:
    
    a) this time is more relevant to the scraped values than the time at the
       end of the HTTP-GET + JSON decoding work.
    b) it reduces sample timestamp jitter if we measure at the beginning, and
       not at the completion of a scrape.

commit f817106d6a111740fb45274303893b1019b56b3c
Merge: f89d4c2 8af0bbb
Author: juliusv <julius@soundcloud.com>
Date:   Fri Apr 12 07:28:27 2013 -0700

    Merge pull request #134 from prometheus/fix/set-job-label-from-targets-api
    
    Set job label for targets registered through the API

commit f89d4c2cacb98a56f239bf673c2d673e4d8d4d93
Merge: 63ac59d 14407a0
Author: juliusv <julius@soundcloud.com>
Date:   Fri Apr 12 07:27:30 2013 -0700

    Merge pull request #128 from prometheus/feature/convert-host-relative-links
    
    Convert addresses pointing to localhost in status.

commit 14407a076a02d80ee66acd3d566e650804231e28
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Apr 10 14:26:07 2013 +0200

    Convert addresses pointing to localhost in status.
    
    Until now, targets pointing to localhost in the status view are linked to localhost, so you can't follow those links by clicking on them.
    This change converts the links to point to the hostname of the prometheus server.
    
    Before:
    <a href="http://localhost:9090/metrics.json">http://localhost:9090/metrics.json</a>
    
    After:
    <a href="http://hostname-of-prometheus-server:9090/metrics.json">http://localhost:9090/metrics.json</a>

commit 8af0bbb3a0a5fbbb217dbc91d77e61b48faed9d4
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 12 14:50:44 2013 +0200

    Set job label for targets registered through the API
    
    This is set when jobs are statically registered (see
    retrieval/targetmanager.go#L92), and should be set here, too.

commit 442a6d2b1134a1b08be094d56e178c2ce516b265
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 12 13:43:53 2013 +0200

    Use $ instead of jQuery

commit 953334a4f797eed78379f7c58a8c58f1d8639056
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 12 13:41:53 2013 +0200

    Reformat and add semicolons to graph.js

commit 63ac59d2d36ef2a50016457692d900071a13fc44
Merge: 926d03d 5e94479
Author: juliusv <julius@soundcloud.com>
Date:   Fri Apr 12 03:07:30 2013 -0700

    Merge pull request #131 from bernerdschaefer/cross-origin-metrics
    
    Set CORS Headers on API requests

commit 43dc377bee2ea547b595d8c3f6f87beb4f2d620d
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 12 11:59:49 2013 +0200

    Flip x_label when it would render off-page

commit 461e02d2b8cc227200c5b35ea0fa741263ffa2e0
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 12 10:39:37 2013 +0200

    Flip hover detail to prevent going off the screen

commit 8c9597cb3996c9c7a77f5484fdb3859677b8b492
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Fri Apr 12 10:39:15 2013 +0200

    Render legend in a similar style to labels

commit a7ec43189a897e7713a20991868944dddbc41044
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 11 18:21:00 2013 +0200

    Hovering over legend items highlights series in graph

commit 564633ecbcd8e532d6b156bb9c2ab5921f5bed80
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 11 18:17:33 2013 +0200

    Render graph labels vertically
    
    This helps to make the timeseries with many labels fit on the screen.

commit 926d03d2bdaf447a951d4af07a76e60f1a0e70b1
Merge: 2d70e75 1bc83e1
Author: juliusv <julius@soundcloud.com>
Date:   Thu Apr 11 09:31:24 2013 -0700

    Merge pull request #124 from prometheus/julius-lowercase-ops
    
    Also allow lower-cased aggregation ops.

commit 1bc83e1b65eb38e55f0159a860bb7991694e9696
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 9 14:00:25 2013 +0200

    Also allow lower-cased aggregation ops.

commit 2d70e75c52be1218b6fc0b9c98761a508eb8b428
Merge: f9c2911 fd554e8
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Apr 11 09:25:02 2013 -0700

    Merge pull request #132 from prometheus/julius-leveldb-sorting
    
    Make LevelDB sample keys fixed-length to ensure correct sort-order.

commit fd554e8b894dcf3461e1c2e2ef77c67d45c716dc
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Apr 11 18:17:44 2013 +0200

    Make LevelDB sample keys fixed-length to ensure correct sort-order.

commit f9c291120f067ebfe7e76730cc95439b552e96dd
Merge: 2310f54 c4d0969
Author: juliusv <julius@soundcloud.com>
Date:   Thu Apr 11 06:38:33 2013 -0700

    Merge pull request #123 from prometheus/julius-propagate-rule-errors
    
    Propagate more errors during rule evaluation.

commit 5e9447996b7ef27badb47af04e6e7a83f4e5cbed
Author: Bernerd Schaefer <bj.schaefer@gmail.com>
Date:   Thu Apr 11 14:51:42 2013 +0200

    Set CORS Headers on API requests
    
    By setting Access-Control headers, the Prometheus metrics API can be
    accessed by cross-origin javascript applications (e.g., an external
    dashboard pulling Prometheus metrics).

commit 2310f549dd9482adbef7c417286f3b8862939b58
Merge: dd4f326 9a81b98
Author: juliusv <julius@soundcloud.com>
Date:   Wed Apr 10 16:37:20 2013 -0700

    Merge pull request #130 from prometheus/julius-threadsafe-parser
    
    Make expression parser goroutine-safe.

commit 9a81b9838f7a386e38111ea4d2354481241562b9
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 10 19:08:14 2013 +0200

    Make expression parser goroutine-safe.
    
    See https://github.com/prometheus/prometheus/issues/127

commit dd4f326680f641719db2e770d09e1c6343f99cde
Merge: 8fba639 6cb3c51
Author: juliusv <julius@soundcloud.com>
Date:   Wed Apr 10 09:47:00 2013 -0700

    Merge pull request #126 from prometheus/julius-sort-functions
    
    Add sort() and sort_desc() expression language functions.

commit 6cb3c51d247ab2e6a513ef3b72bd6b27c650783a
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Apr 10 10:44:13 2013 +0200

    Add sort() and sort_desc() expression language functions.

commit 8fba639706b141d714d5737cf106c5b04257579c
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Apr 10 13:09:32 2013 +0200

    Fix path to expression browser js.

commit adeabca2300f2c8f807cdbdf9ce1ba81bdcade19
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Apr 9 15:23:37 2013 +0200

    Minor UI fixes.
    
    - Fix path to spinner
    - Fix color for unvisited links
    - Include necessary jqueryui images

commit 08e37f48ddc59bb4a0012c64049e90f6348ab2d6
Merge: 6146116 8417d3e
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Apr 9 05:11:30 2013 -0700

    Merge pull request #122 from prometheus/feature/make-self-contained
    
    Feature/make self contained

commit c4d0969c00c9c0cae6c6cb689a48a3b2f8764799
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 9 13:47:20 2013 +0200

    Propagate more errors during rule evaluation.

commit 8417d3e8d12582824b1098959c7b74d5a6a7fba5
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Apr 9 13:31:56 2013 +0200

    Add MANIFEST listing 3rd party libs and versions.

commit e43d7d57714479a9f84b00dc85265fcbd4528ceb
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Apr 9 12:15:05 2013 +0200

    Make Prometheus self-contained.
    
    This includes all external resources instead of hotlinking them.

commit 17f622bd6e5f152a59177ba59656253e35e613de
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Apr 9 12:12:24 2013 +0200

    Take Path fragment from URL instead of whole URL.
    
    This also makes better error handling in case a asset couldn't be found in the files map.

commit bf197baaf9f59d3650d428f7a369c2f75862815f
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Apr 9 12:11:19 2013 +0200

    Depend on all static and template files.

commit 6146116e2fb901ee70453dbe90e285ead7aa4214
Merge: e254c0b a55602d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 9 03:08:29 2013 -0700

    Merge pull request #115 from prometheus/fix/storage/nil-behaviors
    
    Validate diskFrontier domain for series candidate.

commit a55602df4a8c25559798dbcb1870bfa444e13d66
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Apr 1 13:22:38 2013 +0200

    Validate diskFrontier domain for series candidate.
    
    It is the case with the benchmark tool that we thought that we
    generated multiple series and saved them to the disk as such, when
    in reality, we overwrote the fields of the outgoing metrics via
    Go map reference behavior.  This was accidental.  In the course of
    diagnosing this, a few errors were found:
    
    1. ``newSeriesFrontier`` should check to see if the candidate fingerprint is within the given domain of the ``diskFrontier``.  If not, as the contract in the docstring stipulates, a ``nil`` ``seriesFrontier`` should be emitted.
    
    2. In the interests of aiding debugging, the raw LevelDB ``levigoIterator`` type now includes a helpful forensics ``String()`` method.
    
    This work produced additional cleanups:
    
    1. ``Close() error`` with the storage stack is technically incorrect, since nowhere in the bowels of it does an error actually occur.  The interface has been simplified to remove this for now.

commit e254c0bc33f59a96654ce230d6b3e5cdb04ce1c0
Merge: ca2a31c ebe05d1
Author: juliusv <julius@soundcloud.com>
Date:   Tue Apr 9 02:44:13 2013 -0700

    Merge pull request #121 from prometheus/julius-fix-fingerprint-comparison
    
    Fix fingerprint construction and comparison bugs

commit ebe05d1b83a56ee5854fa68502fe91ab45f76eab
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 9 02:35:55 2013 +0200

    Fix logic bug in fingerprint Less() comparison.
    
    Seems like just using String() is the easiest way of doing this.

commit 0230dbf30504411a59f76908180f4a28a19b6487
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Apr 9 02:33:17 2013 +0200

    Fix off-by-one bug in NewFingerprintFromMetric().

commit ca2a31c48b9da82dea830a1016377b64138173b6
Merge: d79c932 c108a99
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Apr 5 05:17:06 2013 -0700

    Merge pull request #118 from prometheus/feature/navigation
    
    Add navigation bar to web ui

commit c108a9978d4ffa070547be0efd5ab91dd572ad21
Merge: 0f775a4 d79c932
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Apr 5 14:16:33 2013 +0200

    Merge branch 'master' of github.com:prometheus/prometheus into feature/navigation
    
    Conflicts:
    	web/web.go

commit d79c932a8eb3dad0e0e18e473d3706fad3f400c4
Merge: 461da0b c3e3460
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Apr 5 04:55:59 2013 -0700

    Merge pull request #120 from prometheus/feature/storage/compaction
    
    Spin up curator run in the tests.

commit c3e3460ca6e23ef8f9041150591c51b883fcbacd
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Apr 5 13:07:13 2013 +0200

    Spin up curator run in the tests.
    
    After this commit, we'll need to add validations that it does the
    desired work, which we presently know that it doesn't.  Given the
    changes I made with a plethora of renamings, I want to commit this
    now before it gets even larger.

commit 0f775a417829931780a78477629b8c2488301f12
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Apr 5 13:41:52 2013 +0200

    Use Sprintf instead of string concatenation.

commit 1c091a97231ad2029345f7777c21454b97341078
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Apr 5 13:24:50 2013 +0200

    Use client_golang.exp for automatic telemetry.

commit 3aead8468c1204b94ee2b4859a72393cfbaecc71
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Apr 4 19:19:58 2013 +0200

    Fix typo.

commit 84d17b4d9760daf9e7729d40923ed2bb68421c69
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Apr 4 19:08:20 2013 +0200

    Replace YieldExporter() with Handler()

commit 1cb4c819e184cd4f780e9be2f2bd8471cf067889
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Apr 4 19:02:29 2013 +0200

    Remove cruft.

commit 1a3fb459e05b6faa6f72216a1f11133e424df7d7
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Apr 2 19:14:02 2013 +0200

    Add navigation menu to all pages + change routes.
    
    To achieve that, this PR
    - converts static/index.html ("console") and graph to templates
    - moved the handlebars template to separated file to avoid escaping issues
    
    Route changes:
    /status -> /
    /static -> /console
    /static/graph.html -> /graph

commit 461da0b3a85bb8c8926f64382652bda5d2a3f408
Merge: 25fa3af d0ad6cb
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 3 04:41:52 2013 -0700

    Merge pull request #117 from prometheus/feature/storage/compaction
    
    Spin up storage layers for made fixtures.

commit d0ad6cbeaabfbdc28cdc504f9a276d3a5d628453
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Apr 3 12:09:05 2013 +0200

    Spin up storage layers for made fixtures.

commit 25fa3af0e4cbeec292cdcc9fc88d2cb15902f893
Merge: 2116c7f 7764682
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 2 06:58:23 2013 -0700

    Merge pull request #116 from prometheus/refactor/dependencies/update-client-api
    
    Update to use new default handler.

commit 7764682c7cf3affc85bb3e8c372720336518735a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Apr 2 15:20:30 2013 +0200

    Update to use new default handler.

commit 2116c7ff8c02e7b72054c992b6d2139f58d586f9
Merge: a4b5281 e31591e
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 28 10:39:40 2013 -0700

    Merge pull request #112 from prometheus/julius-allow-oneletter-metrics
    
    Allow single-letter identifiers (metric and label names).

commit e31591e6fe62a7a95f479b015c0b13c1ae4d98d9
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 28 18:14:41 2013 +0100

    Allow single-letter identifiers (metric and label names).

commit a4b528118d538a0f2b8e4512ed3e2c5e7d92d90b
Merge: 8622df5 8b91bff
Author: juliusv <julius@soundcloud.com>
Date:   Thu Mar 28 10:37:30 2013 -0700

    Merge pull request #113 from prometheus/julius-travis-verbose-tests
    
    Make Travis test runs verbose.

commit 8b91bffa1da0db2e463dc0136f49fd1c3c25908e
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 28 18:17:50 2013 +0100

    Make Travis test runs verbose.

commit 8622df50ae755a71cc2e0b6a43f6877370d7aac7
Merge: b912f75 ec41345
Author: juliusv <julius@soundcloud.com>
Date:   Thu Mar 28 10:07:34 2013 -0700

    Merge pull request #111 from prometheus/julius-depointerize
    
    Depointerize Matrix/Vector types as well as time.Time arguments.

commit ec413459fa17d602735d648f158af8aa97b6251a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 28 17:05:06 2013 +0100

    Depointerize Matrix/Vector types as well as time.Time arguments.

commit b912f75d11405596e66b8e273b2ed8ee43840aae
Merge: 9d46b94 676845a
Author: juliusv <julius@soundcloud.com>
Date:   Thu Mar 28 09:25:22 2013 -0700

    Merge pull request #110 from prometheus/julius-query-interpolation
    
    Implement sample interpolation in query layer.

commit 676845afafbbca285502a2fb7d42313e07029742
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 28 16:41:51 2013 +0100

    Implement sample interpolation in query layer.

commit 9d46b941ea17cd6add2cbc25a5ce4833f3f7de5f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 28 15:54:40 2013 +0100

    Include Travis status.
    
    I am going to regret this.

commit c59f3fc5387483acccdb851edf3358c7a62c343a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 28 12:16:31 2013 +0100

    Fix formatting in tiered_test.go.

commit 0f48af8032f4952bd8db901caeafe6610f78eccf
Merge: 39826d7 a9640c0
Author: juliusv <julius@soundcloud.com>
Date:   Thu Mar 28 02:52:22 2013 -0700

    Merge pull request #109 from prometheus/documentation/community/mailinglists
    
    Update community documentation.

commit a9640c0203c153987ef8a84fea8023d48b972113
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 28 10:38:26 2013 +0100

    Update community documentation.
    
    Include mailing list notes and additional contributors.
    
    Include generated documentation.
    
    Correct title case.

commit 39826d73352a2316396868ccbda612ead2948b36
Merge: cef0dcb 2668700
Author: juliusv <julius@soundcloud.com>
Date:   Wed Mar 27 10:54:17 2013 -0700

    Merge pull request #107 from prometheus/julius-fix-get-fingerprints
    
    Fix bug in GetFingerprintsForLabelSet().

commit 2668700e549e7e607a0d66a88987919b7214e0aa
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 27 18:50:30 2013 +0100

    Fix bug in GetFingerprintsForLabelSet().

commit fed467ede02948ae8b834b4dad20dbf31de1da40
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Mar 27 18:44:47 2013 +0100

    Moved graph and console to use templates as well.

commit cef0dcb07960687a091d7e9c85def38c59e3dc15
Merge: c53a72a 8e15a42
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Mar 27 10:30:58 2013 -0700

    Merge pull request #105 from prometheus/feature/storage/compaction
    
    Test Data for Curator

commit c53a72a8944d8b6134eed87b17a8e2677c846c88
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Mar 26 12:33:48 2013 +0100

    Test data for the curator.

commit 8e15a4282f315ec4cf8c565ed4eaba675b64c8a2
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Mar 26 12:33:48 2013 +0100

    Test data for the curator.

commit 542bb6748e322333cdefcd6ea9b797a77c495137
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 27 14:06:30 2013 +0100

    Eliminate need to get fingerprints during query execution time.

commit f27adac8485c280cad7d2b4b8c943f709460da0d
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Mar 27 17:40:01 2013 +0100

    Split status template into two templates.
    
    This is now using a base template (_base.html) for the 'layout' of the web UI.
    Within that base template, the actual content templates get rendered.

commit 7034c3981fd2fdfb5997a8e170b70140e4312a84
Merge: 3ab0669 b836066
Author: juliusv <julius@soundcloud.com>
Date:   Wed Mar 27 07:38:17 2013 -0700

    Merge pull request #104 from prometheus/julius-eliminate-query-fingerprinting
    
    Eliminate need to get fingerprints during query execution time.

commit 3ab06694547bab07816b37104b2766a941c21f77
Merge: a4f0578 6dcaa28
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Mar 27 07:14:14 2013 -0700

    Merge pull request #103 from prometheus/tests/leveldb/storage-building
    
    Include LevelDB fixture generators for curator.

commit 6dcaa2880693b228ceaa44b245ba64f160d0e86a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Mar 27 12:52:08 2013 +0100

    Include LevelDB fixture generators for curator.
    
    This will help reduce common boilerplate for our test process
    with respect to LevelDB-related things.

commit b836066c71938646df84e17b3596adc12d06facd
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 27 14:06:30 2013 +0100

    Eliminate need to get fingerprints during query execution time.

commit a4f0578a7e5f2051a8df7fc55f0ea4830f31aa40
Merge: c4e971d 55ca65a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Mar 27 03:41:40 2013 -0700

    Merge pull request #102 from prometheus/julius-tiered-error-handling
    
    More userfriendly output when we fail to create the tiered storage.

commit 55ca65aa6effef1d0bcc5756639c0699dfc382ef
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 27 11:25:05 2013 +0100

    More userfriendly output when we fail to create the tiered storage.

commit c4e971d7d9e41330e931b3455071c28143487c23
Merge: 40cc435 b86b0ea
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Mar 26 10:46:28 2013 -0700

    Merge pull request #101 from prometheus/refactor/test/directory-extraction
    
    Create temporary directory handler.

commit 40cc435febf6cdf327f21150a8248f6fddfbd903
Merge: 00009e4 8cf2af3
Author: juliusv <julius@soundcloud.com>
Date:   Tue Mar 26 10:31:19 2013 -0700

    Merge pull request #100 from prometheus/julius-view-abortion
    
    Abort view job processing on timeout.

commit b86b0ea41ab212d28a4660e50deca31c792a8034
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Mar 26 18:02:58 2013 +0100

    Create temporary directory handler.

commit 8cf2af39236dddaa1d58fbe5dbcc2714a5e01c49
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 26 17:15:04 2013 +0100

    Abort view job processing on timeout.

commit 00009e4ad1259d6aa34ff93202eacfb8d705900f
Merge: 567a998 2b8f0b2
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Mar 26 08:33:23 2013 -0700

    Merge pull request #99 from prometheus/julius-constantize-name
    
    Constantize metric name label name.

commit 2b8f0b2cc745f1e14198d69ca3a051a3ceea564a
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 26 15:32:48 2013 +0100

    Constantize metric name label name.

commit 567a998e635ea03dce68424aca42a9714e6ee638
Merge: 6bb5ffd e096896
Author: juliusv <julius@soundcloud.com>
Date:   Tue Mar 26 07:34:59 2013 -0700

    Merge pull request #98 from prometheus/julius-integrate-tiered-layers
    
    Implement tiered data integration for simple (non-value) Get* methods

commit e09689693223a8d27dba247f5fc9cf5daa1ac9ff
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 26 14:46:02 2013 +0100

    PR comment fixups.

commit dd67ab115be9879b96ffb4890284cdca93075045
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 26 11:45:56 2013 +0100

    Change GetAllMetricNames() to GetAllValuesForLabel().

commit 42bdf921d1725ea8a362b1223b3d183c11947693
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 25 13:04:47 2013 +0100

    Fetch integrated memory/disk data for simple Get* functions.

commit 11bb94a7e58cbbcd72a899974b6c1a81c3bc63fd
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 25 13:01:29 2013 +0100

    Implement GetAllMetricNames() for memory storage.

commit 6bb5ffdb5e6b48a6d790917630e3dec82ff5fb91
Merge: 991dc68 b0d1864
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Mar 26 06:46:50 2013 -0700

    Merge pull request #97 from prometheus/feature/graph-ui-improvements
    
    Improve graph UI.

commit b0d1864146be6544f9eae1328f1878df07eaf3cd
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Mar 26 14:07:56 2013 +0100

    Move css for graphs to graph.css and fix minor/fomatting issues.

commit 0a87618733d74bca5be8c9f2958422221fc33eea
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Mar 25 16:15:54 2013 +0100

    Add autocompletion for metrics.

commit ecb8331df151f477038066c87eda84b440ae9c96
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Mar 25 16:15:29 2013 +0100

    Update jQuery to 1.9.1.

commit 07c76747f0e06c1ae8c74e02389a0f988a908878
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Mar 25 16:06:36 2013 +0100

    Clean up of graph UI's form.
    
    - Removed unnecessary spaces and labels.
    - Aligned elements for cleaner look.

commit 24b3a6d2cc991a7e7fbab5123c9d02de27db5d0d
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Mar 25 16:01:52 2013 +0100

    Improve inserting of metrics in graph UI.
    
    - Metric will inserted at cursor position.
    - Selected text will get replaced.
    - Press <tab> to jump to metrics and <return> to jump back.

commit 3626b71c2229eec5e0d9fa3c97ba1aa78b8de92e
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 19:12:04 2013 +0100

    Improve graph UI.
    
    - resize graphs on browser resize
    - move status field to upper right corner to save some space
    - align the legend width to the graph's width

commit 991dc68d78374b72f94871f38dc1902e6da29349
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 26 11:56:10 2013 +0100

    Rename misnamed oldestSampleTimestamp variable.

commit a3a6434ea96b06effefdaf1a18a489ca5ed1f6c1
Merge: c3dd68d 3e97a36
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 25 11:44:03 2013 -0700

    Merge pull request #93 from prometheus/feature/storage/compaction
    
    Include nascent curator scaffolding.

commit 3e97a3630d15e24a5edcb83906b07f9511d7d10e
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 18:29:33 2013 +0100

    Include nascent curator scaffolding.
    
    The curator doesn't do anything yet; rather, this is the type
    definition including the anciliary testing scaffold.
    
    Improve Makefile and Git developer experience.
    
    The top-level Makefile was a bit overloaded in terms of generation of
    assets and their management.  This has been offloaded into separate
    Makefiles.
    
    The Git developer experience sucked due to lack of .gitignore
    policies.
    
    Also: Fix faulty skiplist naming from old merge.

commit c3dd68dee304f0476b5dbe380a774b49f320392c
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 25 18:25:08 2013 +0100

    Fix goskiplist Makefile.TRAVIS target name.

commit 0980aeac52b49717411adb86500b00522998d79b
Merge: 5d4a090 b2e4c88
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 25 04:58:36 2013 -0700

    Merge pull request #96 from prometheus/refactor/persistence/iterator-interface
    
    Serious Cleaning of LevelDB Iterator Code

commit b2e4c88b800facb0ce800749fcf3635d4fa3aed5
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 25 10:24:59 2013 +0100

    Wrap LevelDB iterator operations behind interface.
    
    The LevelDB storage types return an interface type now that wraps
    around the underlying iterator.  This both enhances testability but
    improves upon, in my opinion, the interface design for the LevelDB
    iterator.
    
    Secondarily, the resource reaping behaviors for the LevelDB iterators
    have been improved by dropping the externalized io.Closer object.
    
    Finally, the iterator provisioning methods provide the option for
    indicating whether one wants a snapshotted iterator or not.

commit 5d4a0909875f20524c460ddf69ed6ecf6c9b8bde
Merge: 3880a86 b290c82
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 25 12:15:42 2013 +0100

    Merge branch 'master' of github.com:/prometheus/prometheus

commit 3880a86c9cf931ee016e6f082f2a04b6ab4c0e4b
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 25 12:14:48 2013 +0100

    In case of empty query results, return an empty matrix.

commit b290c821d1ff658887fb62cd0bd78e017f156bf8
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Mar 25 12:09:39 2013 +0100

    Renamed "localAssets" cmd flag to "useLocalAssets".

commit 43a7ccd5bed58e926aac2611fef420cc2b19084f
Merge: 7044871 f2a30cf
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 25 03:00:27 2013 -0700

    Merge pull request #94 from prometheus/refactor/persistence/interface-cleanups
    
    Remove Cruft from Storage Interfaces

commit f2a30cf20c3ef7d2d5b6874ff5f6287e3a429c34
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Mar 24 06:40:45 2013 +0100

    Several important cleanups and deprecations.
    
    EachFunc is deprecated.
    
    Remove deprecated ``Pair`` and ``GetAll``.
    
    These were originally used for forensic and the old gorest impl.
    Nothing today in the user-facing path nor the tests uses them,
    especially since the advent of the ForEach protocol in the
    interface.

commit 70448711ec025b58c1f71f6ac95e5c38cfd0c604
Merge: 9bb6820 8f6b55b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Mar 24 00:19:46 2013 -0700

    Merge pull request #95 from prometheus/feature/persistence/batching
    
    Several interface cleanups.

commit 8f6b55be711f3a96d61d6c56cb8e72d9060c306b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Mar 24 07:00:17 2013 +0100

    Several interface cleanups.
    
     - Kill Close in Persistent and document interface.
     - Extract batching behavior into interface.
     - Kill IteratorManager, which was used for unknown reasons.

commit 9bb682040276d4301a7530889bf3025e58b06903
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Fri Mar 22 12:03:31 2013 +0100

    Use filename based type if DetectContentType fails.
    
    DetectContentType returns text/plain for our stylesheets and javascripts. That causes chrome to ignore those files.

commit a33d2726bce182ed62a5ee21a3d53a50d12a71f1
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Mar 22 11:50:02 2013 +0100

    Mark range op as consumed if it receives no data points in range.

commit 8e4c5b0ceacbbc396d62dfc65333c6362467c355
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 21 18:06:15 2013 +0100

    Use AST query analyzer and views with tiered storage.

commit 3c9d6cb66c5d81eb237df461ffb5142ef52599db
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 21 17:59:42 2013 +0100

    Add several needed persistence proxy methods to tiered storage.

commit 081d250929a27ab5d89b32e14313707ff2c27e4a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 21 17:57:57 2013 +0100

    Fix view's GetRangeValues() reverse iteration behavior.

commit 0be0aa59c2d9624ab91cbd7f454c7543678467a5
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 21 17:53:57 2013 +0100

    Wait until storage is drained before closing the underlying leveldb.

commit becc278eb6df97dd547b2ed0e19ad1822f891584
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 21 17:52:16 2013 +0100

    Fix two bugs in range op time advancement.

commit c11737c5fca2a2c101bc4dc06140b150e8bc0ea6
Merge: 91c5e29 1b0ca37
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 10:13:27 2013 -0700

    Merge pull request #84 from prometheus/refactor/storage/batching
    
    WIP — DO NOT MERGE

commit 1b0ca377af2c9c7ac903660921218b4e7b147b97
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 18:11:34 2013 +0100

    Reformat.

commit ceb66119570e874ffb1e2be07771bdc75b182da9
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 17:09:17 2013 +0100

    Fix regression in subsequent range op. compactions.
    
    We have an anomaly whereby subsequent range operations fail to be
    compacted into one single range operation.  This fixes such
    behavior.

commit 669abdfefe322e05e01d8fe0742d2243e0d8b8c6
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 12:23:26 2013 +0100

    ``make format`` invocation.

commit bdb067b47fc06ae40fa02ef8e3c5a980c5830110
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 19 14:34:19 2013 +0100

    Implement remaining View Get* methods.

commit 1f423647339edbab4d9d44e9c7f35337e7026083
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 19 14:25:38 2013 +0100

    Fix typo in comment.

commit bf78d427be55cf40b109a343632c6b2a39e25db7
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 19 14:25:07 2013 +0100

    Fix compile error in metric helper function.

commit 4e73c4c20419deaae1546b293b8516b00a89bc6a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 18 19:04:25 2013 -0700

    Include interval test.

commit 758a3f0764268c7b996baf3da418bb6cf6b4c232
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 18 13:01:22 2013 -0700

    Add documentation and cull junk.

commit bd8bb0edfddc1b59c988677b45f03f1f90b7c936
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 18 12:41:51 2013 -0700

    One additional reduction.

commit 73b463e814db41fd3f9a9c2aac7be8a86a6e9522
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 18 12:26:45 2013 -0700

    Additional simplifications.

commit fd47ac570f8feed4be2a10bf6195903aeb47ac6f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 18 11:50:27 2013 -0700

    Implied simplifications.

commit 51a0f21cf838a3231c9fcc4a8157ff9e508499e4
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Mar 17 15:47:23 2013 -0700

    Interim documentation

commit b470f925b7fd4e2e3963d0d23207aa6fa0c1d3e7
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Mar 16 13:42:45 2013 -0700

    Extract rewriting of interval queries.

commit eb721fd220245bc1f08de336d7eba819088777e3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Mar 16 11:50:57 2013 -0700

    Include note about greediest range.

commit 2f814d0e6dcf25c67a8f7e7b74a743ad6762f7f3
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 18 17:12:51 2013 +0100

    AST persistence adapter simplifications after storage changes.

commit e50de005f9bb8359e35079d63be9449d9986dcc4
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 18 17:11:23 2013 +0100

    Populate metric in SampleSet returned from GetRangeValues()

commit 6001d22f87b879dc31a5253a2ee27e599c305005
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 18 16:46:52 2013 +0100

    Change Get* methods to receive fingerprints instead of metrics.

commit 20c5ca1d722a544813799cad7a10affadb0db5c9
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 18 02:18:35 2013 -0700

    Lower-case web API method arguments.

commit 95f8885c8ad71feddb859fd1deef6b3e5c55802a
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 16 01:41:43 2013 -0700

    Adopt new ops sorting interface in view rendering.

commit 4d79dc3602afa6aaa54d540abf3bdded82735b80
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 16 01:30:31 2013 -0700

    Replace renderView() by cleaner and more correct reimplementation.

commit e0dbc8c5612a4994fc10d16632641e2650a245e8
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 16 01:29:21 2013 -0700

    Fix edge cases in data extraction for point and interval ops.

commit a4361e41162ee67d3fe19ad03d21e0534d9a0fa0
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 16 01:28:22 2013 -0700

    Rename extractSampleValue -> extractSampleValues.

commit 4e7db57e76a98060d4a06e8f9d1c50639db5e9d3
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 16 01:26:56 2013 -0700

    Fix iterator behavior in view.GetSampleAtTime()

commit bb9c5ed7aaa92319978f318bad66be5568bea003
Author: Julius Volz <julius@soundcloud.com>
Date:   Sat Mar 16 01:19:21 2013 -0700

    Fix nil pointer exception in frontier building.

commit 896e1724632fe3ec891b221357b7412d0a9e19c1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Mar 15 14:52:54 2013 -0700

    Extract time group optimizations.

commit 5a7181477838833e5e5d510276582e29449053d1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Mar 15 14:41:04 2013 -0700

    Additional greediness.

commit b00ca7e42277d40a8eeae14948bf110731648848
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Mar 15 14:36:04 2013 -0700

    Refactor some greediness computations.

commit 978acd4e96d09a1d95fb49e04a23f2d224ea5c35
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Mar 15 13:05:51 2013 -0700

    Simplify time group optimizations.
    
    The old code performed well according to the benchmarks, but the
    new code shaves 1/6th of the time off the original and with less
    code.

commit d7b534e62421bc576d42e7cfe568c86511c73613
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Mar 15 11:16:13 2013 -0700

    Update documentation.

commit 1f7ed52b465a5ac656d10a821790a33623999bab
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 19:24:28 2013 -0700

    Start writing high watermarks.

commit a224dda9f0407d7dff729ecd8db9da200338feac
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Mar 14 18:29:42 2013 -0700

    Fix diskFrontier.ContainsFingerprint() return value.

commit 47ce7ad302c42fb1c68feac94e596c4941435469
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 18:09:19 2013 -0700

    Extract appending from goroutine.

commit 187cd4cdbc03240c78fb127fa80b78c2079e434a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 17:38:34 2013 -0700

    Extract indexing of Fingerprint to Metrics.

commit 532589f728d11662f479e3775f6acf15c48b40c5
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 17:19:45 2013 -0700

    Extract Label Pair to Fingerprint indexing.

commit 5959cd9e53be055a78606a6c325d802247a98943
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 17:05:38 2013 -0700

    Include Julius' feedback.

commit 84acfed061c30f7558446d136892b9ed48a82d7b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 16:55:50 2013 -0700

    Extract finding unindexed metrics.

commit 67300af137f9e995a8c6c531ac61b0071c5aa67a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 15:42:28 2013 -0700

    Extract indexing to separate routine.

commit 582354f6de1c4c3526ae4cc603f26a23b5fac3f0
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 14:51:29 2013 -0700

    Fix remaining ``make advice`` issues.

commit a70ee43ad3ec465c34c9ec9e1d5adba5e4c07b5f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 14:47:17 2013 -0700

    Niladic ``ToString()`` to idiomatic ``String()``.

commit 44d6ad9eee19a12e74c91a88d124dba2bab731fe
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 14:31:19 2013 -0700

    Do not run ``govet`` with ``-v``.
    
    This is per https://code.google.com/p/go/issues/detail?id=2507.

commit 615e6d13d751d139d66986ff3e2d809a75ef1716
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 14 14:27:51 2013 -0700

    Run ``make format``.

commit caeb759ed7b4da2946443e2479d2f0fee2acc788
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 13 23:22:59 2013 -0700

    Add tests for and fix getValuesAlongRangeOp value extraction.

commit 69a24427b7006064d0b680038221089cfef11b4f
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 13 16:28:48 2013 -0700

    Minor tiered storage fixups.

commit 3621148e7fc7fe7aa1c5abba22e10a7e42062cc3
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 13 16:28:12 2013 -0700

    Comment out panicking test until proper support is implemented.

commit e2fb497ebae1f3b27bfd6d8abce1b247b5fd03c9
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 13 16:27:14 2013 -0700

    Add operator value extraction tests.

commit 12a8863582339a592b961354e8be6d483f4fcc34
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 13 14:05:58 2013 -0700

    Add data extraction methods to operator types.

commit 1d5df867d16d42ef63cc9d6db538b78416cd6428
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Mar 13 14:05:18 2013 -0700

    Set test time to fixed value.

commit 2f06b8bea63d38c0877aa2f76b6044dcb5d880c9
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 12 10:27:27 2013 -0700

    Fix tiered storage test to trigger iterator rewinding case.

commit 894ecfe161f394bad294168b359bf59b49d3c5a1
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 12 10:26:53 2013 -0700

    Small cleanups and comments in tiered storage.

commit f238b23b042294f20b546f1bf6da70d005b4ffec
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 12 10:25:52 2013 -0700

    Set -leveldbFlushOnMutate to false by default.

commit 8939e0723a9477efaf6b83604f34d73bf7f9511b
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Mar 12 10:20:16 2013 -0700

    Make LevelDB chunk size a flag.

commit ce4f560e4826c94254bbdfd51b59e9d286cafeee
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 11 14:59:28 2013 -0700

    Encapsulate fingerprint frontier checks in renderView().

commit 1a1cba1bb2f5177cefb815e5544c2b938d8568df
Author: Julius Volz <julius@soundcloud.com>
Date:   Mon Mar 11 14:21:25 2013 -0700

    Address outstanding PR comments.

commit 62b5d7ce209303d5fd52e97beaf68a98c29b7a46
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 7 11:01:32 2013 -0800

    Oops.

commit 1e0d740f2a380d8d729a32efef24ffe9d613c643
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Mar 6 19:04:51 2013 -0800

    Conditionalize LevelDB index retrievals.
    
    The LevelDB index retrievals could be repeated in a given operation
    batch if multiple queued mutations affect the same (Label Name) singles
    and (Label Name, Label Value) doubles.  This is wasteful and
    inefficient, as a single retrieval suffices.  Thusly this commit
    retrieves the canonical index mappings if the said mapping has not
    been looked up in a given batch.

commit 34a921e16d5d2269483d563f803b84c042f0a629
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Mar 6 18:16:20 2013 -0800

    Checkpoint.

commit 8cc5cdde0b46b7aca749524adfc602e275f404c3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Mar 6 17:16:39 2013 -0800

    checkpoint.

commit d5380897c333c98d6426e60d649bec7b061988bc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Mar 4 11:43:07 2013 -0800

    Cleanups and adds performance regression.

commit f39b9c3c8e1efca8efb9a6b0f00ae863b51ec7c8
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Mar 1 09:51:36 2013 -0800

    Checkpoint.

commit 41068c2e841734058bc197397daae23226ca0747
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Feb 8 18:03:26 2013 +0100

    Checkpoint.

commit 91c5e29f1fbaed3b8cb3748c7362ec7f66af62a2
Merge: bd7ec4d 6213c0f
Author: juliusv <julius@soundcloud.com>
Date:   Thu Mar 21 09:56:09 2013 -0700

    Merge pull request #91 from prometheus/feature/datetimepicker
    
    Add a date/time picker to graph UI

commit 6213c0f1ee25ebc79adaedc42cd9f8288920750c
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 17:54:03 2013 +0100

    Add missing semicolons.

commit 72bd75185703a7cbb8b826b5cfebccaca7788502
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 17:47:40 2013 +0100

    Increase/decrease end date by 1/2 range.

commit c0b5ba6512c1bf777870ffdac5b06c559f77221c
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 17:44:21 2013 +0100

    Prevent unnecessary reload.

commit f170720f61b61a863118591f26d9d86b21ebb56e
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 17:36:04 2013 +0100

    Use hidden input for end.
    
    Instead of appending to url manually.

commit 8e55ff0a8d46073f05ec792289f26abfdc8ac4f8
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 17:06:37 2013 +0100

    Save and restore end date in/from url.

commit 1f484b03c78fb519c1b6da3c05a2c482e42f5455
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 15:56:41 2013 +0100

    Renamed date_s to dateString.
    
    To be more explicit.

commit a5e18b02296f060e2ea11cea73edb7ba085742b3
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 15:55:48 2013 +0100

    Rename localAssets to useLocalAssets.

commit f9b4df42840a041daf30aa84601f9bdb91bf7678
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 14:26:13 2013 +0100

    Add a date/time picker to graph UI.
    
    - It's using https://github.com/mugifly/jquery-simple-datetimepicker
    - If input is empty, it returns the most recent data

commit bf5d312a7433f782b534210bb210ecbf28e93a81
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Thu Mar 21 13:55:59 2013 +0100

    Add flag to read assets from local files.

commit bd7ec4d5e113aceeb9acab81b8742d956505a8e2
Merge: 33c855e 05a9c3c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 04:19:29 2013 -0700

    Merge pull request #90 from prometheus/feature/scraping/named-target-state
    
    Improve the Representations of /status

commit 05a9c3cd0b1a53e1e9a5beede7bdd37680249815
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 12:07:13 2013 +0100

    Improve the base label representation in /status.
    
    The base label representation under /status needs improvement to
    enhance readability; namely, add sorting and make the label
    representation concise.

commit 33c855e9bdbd030fd32c79e72a071900f95d1112
Merge: 1f80b17 8358e5e
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 03:55:57 2013 -0700

    Merge pull request #88 from prometheus/feature/scraping/named-target-state
    
    Update embedding script to support BSD find.

commit 5a9417f80ac1904544329b9738866ecae2121743
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 11:52:42 2013 +0100

    Include humanized target state strings.
    
    In the current /status implementation, we cannot divine what the
    target's state is but rather get an integer constant for it.  This
    commit, stringifies the constants.

commit 8358e5ee44f878160c883e3d4a4d4f24d9a18034
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Mar 21 11:50:13 2013 +0100

    Update embedding script to support BSD find.
    
    Mac OS X (shudder) needs to have a slightly modified find execution
    pattern.

commit 1f80b17cb7d1d9bf3aa03edb089da54411f6347c
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Mar 20 15:15:11 2013 +0100

    Remove temporary debugging.

commit e458e18dc5ad21179a71c44a7a9e6c3cc911589f
Merge: 2192b52 a985a72
Author: juliusv <julius@soundcloud.com>
Date:   Wed Mar 20 05:33:31 2013 -0700

    Merge pull request #87 from prometheus/feature/build-in-static-assets
    
    Ship assets in compiled binary.

commit a985a723a1ac44a1ac20df573b8e674a61d8d143
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Mar 20 12:31:42 2013 +0100

    Remove echo -e because it's not available on Travis.
    
    Instead, files.go gets piped through gofmt.

commit aed8270a9797eca017d0b367b42f709f45134de1
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Wed Mar 20 11:54:45 2013 +0100

    Enable debugging (set -x) on embed-static.sh.

commit 920c59e12d3cf685d2bf5f071dcf6ffef4712a7e
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Mar 19 18:01:21 2013 +0100

    Added vim-common to travis build environment.
    
    vim-common includes `xxd` which we use to hexdump files for package blob.

commit 2434bac219f91afc5ca4747c5267d7316ce152b2
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Mar 19 16:28:55 2013 +0100

    Detect mime type on runtime instead of hardcoding.

commit a5d31cb2395309d730c9f7911d4b7783adf07a95
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Mar 19 16:11:55 2013 +0100

    Use constants for blob bucket keys.

commit 59f8ba912147997c8e6738433691f2add32e583f
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Mar 19 15:51:05 2013 +0100

    Replace popd/pushd because travis' /bin/sh doesn't support it.

commit fc16580b4ce3354a30b290b714a07f1ebd678ef6
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Mar 18 17:48:50 2013 +0100

    Ship assets in compiled binary.
    
    - utility/embed-static.sh, get called in Makefile to create go map from files
    - web/blob/blob.go implements http Handle for serving the files from the map
    - web/status.go uses blog.GetFile() to get the template file
    
    The assets are gzipped and decompressed on demand.

commit 2192b52064837ce7db73fce0f43e5cb952d8b79f
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Mar 19 17:39:47 2013 +0100

    Fix path to goskiplist.

commit 8246f68e252add2217ec6737fbf1af1a827f80a2
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Tue Mar 19 17:17:51 2013 +0100

    Add skiplist build dependency to Makefile.TRAVIS.

commit ca57b43e8ce63365210f6f14c7f407908d56af53
Merge: d834d44 f1fc7d7
Author: juliusv <julius@soundcloud.com>
Date:   Mon Mar 4 10:00:29 2013 -0800

    Merge pull request #86 from prometheus/julius-sd
    
    Allow replacing job targets via HTTP API.

commit d834d4418700f4aa9d357d35df49d0189bea37b7
Author: Johannes 'fish' Ziemke <github@freigeist.org>
Date:   Mon Mar 4 12:47:00 2013 +0100

    Update README.md

commit f1fc7d717a18a08a8f1e1c50c732282231292471
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Feb 22 21:07:35 2013 +0100

    Allow replacing job targets via HTTP API.
    
    This roughly comprises the following changes:
    
    - index target pools by job instead of scrape interval
    - make targets within a pool exchangable while preserving existing
      health state for targets
    - allow exchanging targets via HTTP API (PUT)
    - show target lists in /status (experimental, for own debug use)

commit fc39a92a0610236edba5139074de3135943a5f21
Merge: 9262e70 047eb21
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Feb 25 10:30:55 2013 -0800

    Merge pull request #85 from prometheus/julius-fix-healthstate
    
    Fix target health state update.

commit 047eb219e4b97f53dd0c608b8753776074060391
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Feb 25 02:52:52 2013 +0100

    Fix target health state update.
    
    Right now, futureState is only used to give hints to the health scheduler, but
    nowhere is this future state persisted into the target's state field, so we
    don't actually track a target's state over time.

commit 9262e70a56a8c10c5d5d343352afff8a1a94a2a2
Merge: a4e2ccf 5d55785
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Feb 21 11:21:03 2013 -0800

    Merge pull request #82 from prometheus/julius-fix-targets
    
    Fix target pool deadlock and health checking bugs

commit 5d557859368573446216e37ce1610e92f0f2783c
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 21 19:48:54 2013 +0100

    Fix broken target scrape error propagation.

commit 3537edee9ff59ea0c41e13b5d9d49148d07b0b12
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 21 19:48:29 2013 +0100

    Fix targetpool iteration deadlock.

commit a4e2ccf68077e5da7c533a378a7a321c4c6e5560
Merge: 536e074 13ae29b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Feb 18 08:04:42 2013 -0800

    Merge pull request #79 from prometheus/feature/storage/rethinking
    
    Initial In-Memory Metric Store

commit 13ae29b30447e33442d6b58216310ea188e4d969
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Feb 8 18:03:26 2013 +0100

    Initial in-memory arena implementation.
    
    It is unbounded, and nothing uses it except for a gating flag in main.

commit 536e07432d025e14a6a9be621a7814084aadc787
Merge: db5868f 39411b5
Author: juliusv <julius@soundcloud.com>
Date:   Sat Feb 16 16:04:17 2013 -0800

    Merge pull request #80 from prometheus/julius-add-missing-fixtures
    
    Add missing config test fixtures.

commit 39411b516d3e941fd115fe38dc05b88d16dcb223
Author: Julius Volz <julius@soundcloud.com>
Date:   Sun Feb 17 01:01:50 2013 +0100

    Add missing config test fixtures.

commit db5868f1b324a0b32b2d1a7f6dc4027e9770e598
Merge: ae01bce a908e39
Author: juliusv <julius@soundcloud.com>
Date:   Thu Feb 14 10:04:30 2013 -0800

    Merge pull request #70 from prometheus/julius-hud
    
    Cleanups and beginnings of a /status endpoint

commit a908e397bcbf6c112fcb4d6b92b18f52c1f79b2d
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 14 18:21:21 2013 +0100

    Integrate cleanups for comments in PR70.

commit d137362257f691bf79d8dbe1b1cd4b0e9bf40554
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 14 01:04:07 2013 +0100

    Config tests and config cleanups+fixes.

commit 23374788d34956beee9e93191517c3c327867a57
Author: Julius Volz <julius@soundcloud.com>
Date:   Tue Feb 12 13:15:40 2013 +0100

    Beginnings of a Prometheus status page.

commit c3d31febd6074e6d5b173b0fc823e5e5f247464d
Author: Julius Volz <julius@soundcloud.com>
Date:   Wed Feb 13 17:41:35 2013 +0100

    Move durationToString to common place and cleanup error handling.

commit ae01bce5f10a5149623ac1d736253642376a9329
Merge: ddb82a6 efbe0e8
Author: juliusv <julius@soundcloud.com>
Date:   Thu Feb 14 08:45:12 2013 -0800

    Merge pull request #76 from prometheus/refactor/storage/simplifications
    
    Interface simplification.

commit efbe0e8a12bbd66aa581c8e133a1dafb473b4376
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Feb 14 08:43:02 2013 -0800

    Interface simplification.
    
    GetMetricForFingerprint(model.Fingerprint) (*Metric, error) ->
    GetMetricForFingerprint(model.Fingerprint) (Metric, error)

commit ddb82a6e5d4440a939a5de57d67598a5f8267cc6
Merge: cbad5da f1245e8
Author: juliusv <julius@soundcloud.com>
Date:   Thu Feb 14 08:29:09 2013 -0800

    Merge pull request #75 from prometheus/refactor/storage/simplifications
    
    Interface simplifications.

commit f1245e8dda198276c7ea7fa040f79133b5327dfc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Feb 14 08:19:41 2013 -0800

    Interface simplifications.
    
    GetFingerprintsForLabelName ([]*Fingerprint, error) ->
    GetFingerprintsForLabelName ([]Fingerprint, error)

commit e8a733b52598c53877bed2afae9868cbeb29f4ce
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Feb 14 08:07:59 2013 -0800

    Interface simplifications.
    
    GetFingerprintsForLabelSet ([]*Fingerprint, error) ->
    GetFingerprintsForLabelSet ([]Fingerprint, error)

commit cbad5da29b9eec9e4b06b770743c9e2de8d06a70
Merge: 1f351d8 f03091b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Feb 14 08:04:43 2013 -0800

    Merge pull request #74 from prometheus/refactor/storage/simplifications
    
    GetFingerprintsForLabelName simplifications.

commit f03091b139e2b1c37b1cf2271f3e5cef58f6c973
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 21:11:23 2013 -0800

    Interface simplifications: GetRangeValues
    
    From pointers to copies.

commit 14788cf4f30f29db77e7353b030597757fb97d57
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 21:07:42 2013 -0800

    Interface simplifications.
    
    GetBoundaryValues() from pointers to values.

commit 56f069b3ec928f020b3c47566d401f6eb9637c99
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 21:05:01 2013 -0800

    Interface simplifications: GetValueAtTime().
    
    Pointer arguments to copies.

commit 1e2d6c7418662b888599bf2f713552a2d8d67f16
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 17:44:35 2013 -0800

    GetFingerprintsForLabelName simplifications.
    
    ``MetricPersistence.GetFingerprintsForLabelName(l *model.LabelName)``
    ->
    ``MetricPersistence.GetFingerprintsForLabelName(l model.LabelName)``

commit 1f351d86c3c6e7ea523486826fd8673cbfa76a78
Merge: 2140850 900bb98
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 17:29:38 2013 -0800

    Merge pull request #73 from prometheus/refactor/storage/simplifications
    
    Simplifications of GetFingerprintsForLabelSet.

commit 900bb988c15bbc10de1a1d1104694fedf4a9830e
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 17:13:41 2013 -0800

    Simplifications of GetFingerprintsForLabelSet.
    
    ``MetricPersistence.GetFingerprintsForLabelSet(s *model.LabelSet)`` ->
    ``MetricPersistence.GetFingerprintsForLabelSet(s model.LabelSet)``.

commit 214085065849d9cfae3e933bbcbbd523a841f0d6
Merge: 79fc056 4fbcea7
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 17:04:03 2013 -0800

    Merge pull request #72 from prometheus/refactor/storage/simplifications
    
    MetricPersistence.AppendSample signature changes.

commit 4fbcea73f5e82bafef126ec063402defb1a4cf69
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 13:46:28 2013 -0800

    MetricPersistence.AppendSample signature changes.
    
    ``MetricPersistence.AppendSample(*model.Sample)`` -> ``MetricPersistence.AppendSample(model.Sample)``.

commit 79fc0560902b820870905666d7bb5f5e9ee4626e
Merge: 7b2ee03 d1e7f5b
Author: juliusv <julius@soundcloud.com>
Date:   Wed Feb 13 10:31:51 2013 -0800

    Merge pull request #71 from prometheus/refactor/new-registry-api
    
    The Prometheus Go client has a new handler API.

commit d1e7f5bc4bf69c18b7d2230a709bf7ba3be5b8e2
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Feb 13 09:46:41 2013 -0800

    The Prometheus Go client has a new handler API.

commit 7b2ee03e9032f85236b4a4bb15750840006a0d18
Author: juliusv <julius@soundcloud.com>
Date:   Fri Feb 8 22:56:58 2013 +0100

    Fix link to MacOSX instructions (again)

commit 75bd373223114fdc4684700a655fe9b02a7f0fcd
Merge: 9bc9dae 4502b49
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Feb 8 07:01:14 2013 -0800

    Merge pull request #67 from prometheus/feature/storage/rethinking
    
    Swap the Fingerprint Generator

commit 4502b4952429d72ca9841acfa1a2b743ca4124ef
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Feb 8 14:13:30 2013 +0100

    Swap out fingerprinting infrastructure.
    
    All old database entries should be deleted.  :-(

commit 9bc9dae124a66de5f871d06fd0f2493f1563f8a9
Merge: 766a8e1 2859227
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Feb 8 06:43:51 2013 -0800

    Merge pull request #66 from prometheus/julius-hud
    
    Move web-related code/resources to a subdirectory.

commit 2859227fdbdefb96917028e75b25edaa65e6060c
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Feb 8 15:38:50 2013 +0100

    Make HTTP listen address a flag.

commit 0cbd03ccf962347cf86059686fa2ffa3578cb662
Author: Julius Volz <julius@soundcloud.com>
Date:   Fri Feb 8 14:49:55 2013 +0100

    Move web-related code/resources to a subdirectory.

commit 766a8e19d60409abd0ba7ab371b0bf5d47657c63
Merge: 79ca8f0 1c74eed
Author: juliusv <julius@soundcloud.com>
Date:   Fri Feb 8 04:23:35 2013 -0800

    Merge pull request #65 from prometheus/feature/storage/rethinking
    
    Create initial Metric fingerprinter.

commit 1c74eedf76cefc0e74b6fe3f380d360c896d44bf
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Feb 8 13:05:35 2013 +0100

    Create initial Metric fingerprinter.
    
    The old system relies off of super-careful notion that the serialized
    form of a Protocol Buffer should be used for fingerprint formulation.
    Of course this is both wrong and inefficient.  This commit breaks
    ground for swapping to a pure attribute-oriented digest.

commit 79ca8f070801f483b42fec3631eb0e36571b2dae
Merge: 6d7c043 06ace49
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Feb 7 07:56:48 2013 -0800

    Merge pull request #64 from prometheus/julius-cleanup-imports
    
    Remove/replace last references to github.com/matttproud/...

commit 06ace4941d122c5e6ac4de11a2148173ecab9666
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 7 14:32:18 2013 +0100

    Remove/replace last references to github.com/matttproud/...

commit 6d7c043b33db7f18cb47a3053ff0b2ea3062c143
Merge: d8c4f2c 16d9dcd
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Feb 7 02:55:30 2013 -0800

    Merge pull request #63 from prometheus/julius-copyright-notices
    
    Add copyright notices to all remaining files.

commit 16d9dcd6a8ef2f35876af0c33b6c8a981b167285
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 7 11:49:04 2013 +0100

    Add copyright notices to all remaining files.

commit d8c4f2c3c9ef9070a32182378f33f18691b4c690
Merge: abc09cf d67e4b9
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Feb 7 02:42:30 2013 -0800

    Merge pull request #62 from prometheus/julius-cleanups
    
    Address outstanding comments from PR/47 and other cleanups.

commit d67e4b9131941a2514b76f70380a906585cdc91a
Author: Julius Volz <julius@soundcloud.com>
Date:   Thu Feb 7 11:38:01 2013 +0100

    Address outstanding comments from PR/47 and other cleanups.

commit abc09cf81493d824a0b5d21693155015719c5eb9
Merge: 1d412fb 8194702
Author: juliusv <julius@soundcloud.com>
Date:   Thu Feb 7 02:03:23 2013 -0800

    Merge pull request #61 from prometheus/feature/bulk-iteration-metric-names
    
    Bulk iteration interface and UI metrics selector

commit 8194702bb3082abfee2f26320a0db3f4b7331c19
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 6 17:08:05 2013 +0100

    Allow selecting available metrics through UI.

commit 2659304380c3954d07664f58f4177d9130f29ec7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 6 17:06:39 2013 +0100

    Add interface for getting all metrics from a MetricsPersistence.

commit e23ac0adbd161796d370d0395f90e4d9b92592b5
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 6 17:05:23 2013 +0100

    Implement bulk iteration/operation storage interface.

commit 1d412fbd66d20bd8f57d828b274764a66650a287
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 6 00:46:10 2013 +0100

    Adjust graph sizes depending on window size.

commit acb45c98f8eb7d895ca2957a15be23dfeee2398b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 6 00:21:27 2013 +0100

    Style expression browser a bit.

commit c8761f3468e55634bb657ab673905bd7e4cced9a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Feb 6 00:08:31 2013 +0100

    Correct order of deadline and interval arguments.

commit b20fb74798183779b1baf65a966d1598d3fa5311
Merge: f6c449e a795325
Author: juliusv <julius@soundcloud.com>
Date:   Tue Feb 5 09:06:11 2013 -0800

    Merge pull request #60 from prometheus/feature/pprof-insight
    
    Incorporate pprof HTTP debugging handler.

commit a7953251ed87a2494d7c86933a880902a0fe71e0
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Feb 5 17:17:33 2013 +0100

    Incorporate pprof HTTP debugging handler.
    
    This registers the pprof debugging handler via the static side-
    effects documented in http://golang.org/pkg/net/http/pprof/.

commit f6c449e78227a09c958054d9e3384eaa473f21f7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Feb 4 14:06:58 2013 +0100

    Always clear legend before updating graph.

commit 53eab86a4f8bb5a9369a0c39045cc7eb0cc21ae2
Merge: af487c8 4cd1535
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Feb 1 04:54:43 2013 -0800

    Merge pull request #51 from prometheus/refactor/testability/update-to-time-provider
    
    Swap ``time.Now`` with testable ``Time.Now``.

commit af487c85e3a3c0bd855b45f17d0858c2d4811863
Merge: 74b18db ec3e98b
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Feb 1 04:54:32 2013 -0800

    Merge pull request #59 from prometheus/feature/snappy
    
    Include Snappy in Runtime.

commit ec3e98b3654d79f3447d763b84069618cb373751
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Feb 1 13:35:07 2013 +0100

    Include Snappy in Runtime.
    
    Snappy should have been explicitly included in the runtime, for I
    erroneously thought that LevelDB bundled this into its runtime as-is.
    It turns out that this assumption is wrong, and I thought we had
    Snappy compression support all-along.

commit 74b18dbfbdedb10391ebb3e90f8c3b863931210b
Merge: bd07950 6d485dc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jan 31 06:31:25 2013 -0800

    Merge pull request #58 from prometheus/julius-add-handlebars-license
    
    Add license to handlebars.js file.

commit 6d485dc1cc8184c4f25f1c25576c7ea88ef80a91
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jan 31 14:41:07 2013 +0100

    Add license to handlebars.js file.

commit bd0795032ac1b300eabb036d34d4a338c24424fe
Merge: f47dfc4 7ceac65
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Jan 31 04:12:09 2013 -0800

    Merge pull request #57 from prometheus/julius-graphing-improvements
    
    Display Page with Default Graph if None Specified; Host Handlebars

commit 7ceac65be8cf782be1912287df2cb517bd1d9604
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jan 30 18:07:34 2013 +0100

    Load handlebars.js from local copy.

commit 893eebe77cc5f44200a311b6f43872d9149290e4
Author: Julius Volz <julius.volz@gmail.com>
Date:   Wed Jan 30 17:57:21 2013 +0100

    Add one graph to page even when no graphs specified in URL.

commit f47dfc458cc596418a629a76576b08b9f6d81e9c
Merge: d181f33 e01b6cd
Author: juliusv <julius@soundcloud.com>
Date:   Wed Jan 30 06:05:08 2013 -0800

    Merge pull request #55 from prometheus/feature/telemetry/retrieval-durations
    
    Duration statistics for each target pool.

commit e01b6cdb448971c5bd03899abff15ee0e9755663
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jan 28 16:36:28 2013 +0100

    Duration statistics for each target pool.
    
    We have an open question of how long does it take for each target
    pool to have the state retrieved from all participating elements.
    This commit starts by providing insight into this.

commit d181f33eaaedf8de4771102dc16f67ec2c9fe603
Merge: ec29088 76a6905
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jan 28 03:58:20 2013 -0800

    Merge pull request #53 from prometheus/fix/travis/antique-paths
    
    Swap matttproud for prometheus in paths.

commit 76a690580ab046aab1f29a283a9f7ffaafc39974
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jan 28 01:29:39 2013 +0100

    Swap matttproud for prometheus in paths.

commit ec290884d712befbdd7a540fef74fa589b019573
Merge: 567e294 79ba248
Author: juliusv <julius@soundcloud.com>
Date:   Sun Jan 27 11:45:06 2013 -0800

    Merge pull request #52 from prometheus/feature/leveldb/pluggable-defaults
    
    Make LevelDB operating modes invocation-time conf.

commit 79ba248bbe6878a63a331059f771770221ce1ec2
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 20:28:37 2013 +0100

    Make LevelDB operating modes invocation-time conf.
    
    Presently our use of LevelDB and its operating modes are hardcoded
    into the storage stack.  This pull request decouples this and
    re-exposes this through flags.  We can now perform benchmarking
    and remedial tuning.

commit 4cd153555e4a62e75b2b67e11474fd290d7ed511
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 19:59:20 2013 +0100

    Swap ``time.Now`` with testable ``Time.Now``.

commit 567e2948d3a5b2c4abe91b6980131d05a1388177
Merge: 56d0ecf 2c1c059
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 19:37:14 2013 +0100

    Merge branch 'master' of github.com:prometheus/prometheus

commit 56d0ecf410c312687c74efa968619055ce6cb40a
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 19:36:07 2013 +0100

    Update documentation facts.

commit 2c1c0593f43b978aea0cb63075fb99532003f687
Merge: 5d1c794 ea54751
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 10:00:20 2013 -0800

    Merge pull request #49 from prometheus/fix/relocation/import-paths
    
    Update import paths to new location.

commit ea547514314b515da4de297fd3c90143ec376681
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 18:49:45 2013 +0100

    Update import paths to new location.
    
    This repository moved from matttproud/prometheus to
    prometheus/prometheus, and all import paths need to be updated.

commit 5d1c794b30c98d58a71dd874a5631dd7844ecc69
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 17:55:08 2013 +0100

    Move documentation examples to dedicated location.

commit 15cc7744cda0eae7837808f555844812e7b9352b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 17:53:20 2013 +0100

    Add advice target to makefile.

commit ed0db275d8b9dedf858f65034bedc7a77e4ffc88
Merge: c049ae3 f2ded51
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 27 08:50:47 2013 -0800

    Merge pull request #48 from matttproud/feature/versioned-processors
    
    Replacing the Previous …

commit f2ded515b7a244289f68279150fb97ec374c859d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Jan 22 18:37:01 2013 +0100

    Support versioned telemetry providers.
    
    client_golang was updated to support full label-oriented telemetry,
    which introduced interface incompatibilities with the previous
    version of Prometheus.  To alleviate this, a general fetching and
    processing dispatching system has been created, which discriminates
    and processes according to the version of input.

commit c049ae39afda4bea93d6756bb174eca7697830e9
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 25 12:21:44 2013 +0100

    Cleanups to rules/persistence adapter code.

commit 619aa97025d9c31ce56699b426a38208f2f81739
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 25 03:32:46 2013 +0100

    Only close rule file if it could be opened.

commit 5caa2333ab705deffecdd1423f1b7ff6e5d550f9
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 25 03:31:51 2013 +0100

    Add bash-syntax highlighting to code blocks.

commit 22ea3059b0e07a5e04fe5ac1a9fd3a7dc2249d79
Merge: 45aac7b d6ea16a
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 24 18:18:36 2013 -0800

    Merge pull request #45 from grobie/documentation-updates
    
    Documentation updates

commit 45aac7be1c3a5804dec617ba29b5a65dad75401b
Merge: cfc1ba2 6523536
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 24 18:17:24 2013 -0800

    Merge pull request #46 from grobie/fix-config-load
    
    Fix config load

commit d6ea16a5c41a30586c45270a4b959964d67b5c04
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Jan 25 00:33:16 2013 +0100

    Add basic "Getting started" documentation

commit 6523536758f77e690dbab10f9f572d50f80e0690
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Fri Jan 25 00:21:29 2013 +0100

    Fix bug in config.LoadFromFile if file is not present

commit dcf915bde70b4361e2a255b4c5f9fd0d5ffd2518
Author: Tobias Schmidt <ts@soundcloud.com>
Date:   Thu Jan 24 21:56:08 2013 +0100

    Add missing prerequisites to the Readme

commit cfc1ba2244d9c6e0e352728531931c93d6f3a88b
Merge: 33b34d7 040f975
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 24 06:36:55 2013 -0800

    Merge pull request #44 from matttproud/julius-better-graphs
    
    Make graphs linkable, object-oriented, and multiple per page.

commit 040f9751f209955d7dd37cc8edf6f2c4f9cabdd7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jan 24 13:55:32 2013 +0100

    Make graphs linkable, object-oriented, and multiple per page.

commit 33b34d71a47a3dd70f7bcd1c3a3ecb60eff53517
Merge: 127c61a 88d1537
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Jan 23 08:44:16 2013 -0800

    Merge pull request #43 from matttproud/refactor/telemetry/refresh
    
    Upgrade Prometheus to new API.

commit 88d15373c5fb22e8b52ea68961ebd309b4fdf2b1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Jan 23 17:18:45 2013 +0100

    Upgrade Prometheus to new API.

commit 127c61a55fc29c2eacfa401fec00350702cc59db
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jan 22 19:32:56 2013 +0100

    Add command-line arguments for config file and storage path.

commit a85204a0a43a57ba45bb09b096c6b227c1232d5f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jan 22 01:51:26 2013 +0100

    Add support for matrix duration strings without quotes.

commit 1760d927c8f45ce02b1068eacbc419501f5cb525
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jan 22 01:50:16 2013 +0100

    Add error propagation to web UI via special JSON error type.

commit 49c87348b5723d220cf6e52eab5dc7f74a542cb2
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jan 22 01:49:00 2013 +0100

    Implement per-second rate behavior for rate().

commit 93670aa129bcb76b7f859f5a23509e3e921d4391
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 18 01:54:26 2013 +0100

    Return API errors in JSON format.

commit a20bf35997156a4395a130403f1dfa35f3e85d8d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 18 00:07:00 2013 +0100

    Fix whitespace with "make format".

commit 86e5edc7fe9e5c9c3dbe235cfb667f29f67a609b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jan 17 23:47:38 2013 +0100

    Add CSS styles for graphing frontend.

commit cbffb187488db25bb9bc4fe5e77f3c715a90c55d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jan 17 23:46:43 2013 +0100

    General graphing improvements and frontend whitespace cleanups.

commit c21450a08982ca3a6e92cde02acbad8e43cb718d
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jan 17 23:45:57 2013 +0100

    Use correct label name for metric name in rule.

commit 6929c10acf769f448eb155e5610e7acf3b67a20e
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jan 17 23:45:18 2013 +0100

    Add case-statement for OR, which still needs to be implemented.

commit a555ded2b362ddad4186b4e409011d122a503c6a
Author: Julius Volz <julius.volz@gmail.com>
Date:   Thu Jan 17 23:44:54 2013 +0100

    Add "w" (weeks) as a valid timeunit.

commit 2c8595f96efede6b2567db131d57e5fcc42cbc74
Author: Julius Volz <julius.volz@gmail.com>
Date:   Tue Jan 15 11:30:55 2013 +0100

    First graphing support.

commit ebabaa46f4d6c02b9547a56b68ec584f9766a67f
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sun Jan 13 19:56:48 2013 +0100

    Serialize matrices correctly.

commit 39b2e72eb04109c4ffd659b1d32c5273f2957b39
Merge: c026612 80cdb01
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 21 16:55:17 2013 -0800

    Merge pull request #37 from matttproud/julius-base-labels
    
    Add support for configured job base labels.

commit c0266128f4b0ad8e43e7d3cf5013c18ebe87f589
Merge: 09d543d 6f937ee
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 17 16:49:12 2013 -0800

    Merge pull request #38 from matttproud/julius-metric-docstrings
    
    Add preliminary metric docstrings and empty base labels.

commit 6f937ee032a0b7eab120dfaea60dd45cbf96711c
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 18 01:16:22 2013 +0100

    Add preliminary metric docstrings and empty base labels.

commit 80cdb0121d5a8435b0c52ee44a107c5c77f752e1
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 18 01:05:14 2013 +0100

    Add support for configured job base labels.

commit 09d543de97097d9ea4c5967fdc3ada2d4f84188f
Merge: a7ed7ca 190e4e3
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jan 15 08:27:52 2013 -0800

    Merge pull request #35 from matttproud/fix/targetpool-and-manager-queueing
    
    ``TargetManager`` and ``TargetPool`` as pointers.

commit 190e4e3fa34f0b66233d3f9cd964fff4dc72a410
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Jan 15 17:06:17 2013 +0100

    ``TargetManager`` and ``TargetPool`` ass pointers.

commit a7ed7cae916703f9c4fe467053343299638da495
Merge: f1a4f26 9752f1e
Author: juliusv <julius@soundcloud.com>
Date:   Tue Jan 15 07:22:15 2013 -0800

    Merge pull request #32 from matttproud/refactor/wrap-target-as-interface
    
    Refactor Target into Interface to Enhance Testability

commit 9752f1e61d030879a5914631b191a11eb693abae
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 13 10:46:55 2013 +0100

    Refactor Target as interface for testability.
    
    Future tests around the ``TargetPool`` and ``TargetManager`` and
    friends will be a lot easier when the concrete behaviors of
    ``Target`` can be extracted out.  Plus, each ``Target``, I suspect,
    will have its own resolution and query strategy.

commit 9af0faaefbacc2cca277cf40292056852684be99
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Jan 12 21:58:52 2013 +0100

    Get ``TargetPool`` test working again.

commit d772c6c2b54fb0b5643a0c07c6354eb5e533479b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Jan 12 21:22:59 2013 +0100

    Refactor target scheduling to separate facility.
    
    ``Target`` will be refactored down the road to support various
    nuanced endpoint types.  Thusly incorporating the scheduling
    behavior within it will be problematic.  To that end, the scheduling
    behavior has been moved into a separate assistance type to improve
    conciseness and testability.
    
    ``make format`` was also run.

commit f1a4f26d3b168a2d9c9254e5d0572e2cac63e4f9
Merge: af5b376 d9b1652
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 13 11:10:41 2013 -0800

    Merge pull request #30 from matttproud/fix/get-metrics-for-labelset-semantics
    
    ``GetFingerprintsForLabelSet`` uses intersection.

commit d9b165220e57f011ab95a054b02a74995f4d93f3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 13 11:15:01 2013 +0100

    ``GetFingerprintsForLabelSet`` uses intersection.
    
    This implementation needs to be cleaned up considerably, but it
    should hopefully provide some breathing room.  Ultimately this will
    be extracted out of the storage layer---specifically the LevelDB
    hierarchy---to interface with a generic set of abstractions for a
    storage system, but this will be where it remains for now.

commit af5b376459085e9ffbf49a1939dde5e955210536
Merge: cb6eb30 efe61c1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 13 01:45:51 2013 -0800

    Merge pull request #28 from matttproud/fix/validate/retrieval-queue-behavior
    
    Refactor target scheduling to separate facility.

commit efe61c18fa2863748bc5b2e8e5419dd8d8928847
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Jan 12 21:22:59 2013 +0100

    Refactor target scheduling to separate facility.
    
    ``Target`` will be refactored down the road to support various
    nuanced endpoint types.  Thusly incorporating the scheduling
    behavior within it will be problematic.  To that end, the scheduling
    behavior has been moved into a separate assistance type to improve
    conciseness and testability.
    
    ``make format`` was also run.

commit cb6eb301825c5578f40ad0de991deca35e62c441
Author: Julius Volz <julius.volz@gmail.com>
Date:   Sat Jan 12 02:35:40 2013 +0100

    Fix state cleanup bug between rule/config parser runs.
    
    This fixes a bug that has been annoying me minorly for some time now:
    sometimes, after parse errors, a subsequent parser run would fail.  The reason
    is that yylex() modifies some global variables (yytext, yydata) during its run
    to keep state. To make subsequent parser runs correct, these have to be reset
    before each run.
    
    Also, close files after reading them.

commit ab746d068e6b193ed3db170b79d489f5ab782069
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 03:17:58 2013 +0100

    Set correct Content-Type header based on output format.

commit 84dd62fb9ba4e4e4d2c9591d33475e115b6784ed
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 02:41:04 2013 +0100

    Add GoREST install to Makefile.TRAVIS.

commit f546548097bb66d9a1b95c0eb0aeb2b22e3c4726
Merge: 0616218 17a4a44
Author: juliusv <julius@soundcloud.com>
Date:   Thu Jan 10 17:37:29 2013 -0800

    Merge pull request #27 from matttproud/julius-api
    
    Add REST API, expression browser, and text/JSON output formats.

commit 17a4a442b37e8f8be35056a80f52737baa87d45b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 02:27:03 2013 +0100

    Add REST API, expression browser, and text/JSON output formats.

commit 06162180ad5fec9c940e83541af0aa35df4f524b
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 01:19:27 2013 +0100

    Implement matrix range and boundary fetching from metrics store.

commit 483bd81a4491f8958e0449f63bfb349322f08f78
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 01:17:37 2013 +0100

    Allow grammar to parse both rules and single expressions.

commit c52b959fdaedf45529e13a7848e76ef4ea980f2e
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 01:12:34 2013 +0100

    Fix matrix interval time calculation.

commit fdf9a3aab7d92771fbf18ba513af6d2c570803c4
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 01:09:31 2013 +0100

    Fix node type checks in arithmetic expressions.

commit c4a23585510dd1a20766c36158bee9a23001fdc7
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 01:08:47 2013 +0100

    Set correct interval in MatrixLiteral.Eval().

commit 429b66019c33f36165c51a0b0f4bd6240f5b7955
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 11 01:07:48 2013 +0100

    Exclude metric name in vector arithmetric label matching.

commit c2c8b8ad873a316396ea55257eb0272d97459f09
Merge: 2e865c7 56384bf
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 7 15:40:21 2013 -0800

    Merge pull request #24 from matttproud/julius-config-and-rules
    
    Add initial config and rule language implementation.

commit 56384bf42a3dea8f3dff846dc9df416cf91bb9ec
Author: Julius Volz <julius.volz@gmail.com>
Date:   Mon Jan 7 23:24:26 2013 +0100

    Add initial config and rule language implementation.

commit 2e865c710ebcae7f167bb0cf29e94f9d369d3ca1
Merge: 51bf391 ac438e5
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 7 02:27:04 2013 -0800

    Merge pull request #22 from matttproud/fix/staleness-for-last-value
    
    Fix Stale. Pol. support in GetValueAtTime.

commit 51bf3917df5843c14acd0bf835ee43c440865be0
Merge: f19ca0e aa474d3
Author: juliusv <julius@soundcloud.com>
Date:   Mon Jan 7 02:25:35 2013 -0800

    Merge pull request #23 from matttproud/feature/signal-handling
    
    Improve interruption handling.

commit ac438e51f694ce3858c47b4ab27de2c47cce6206
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Jan 7 11:23:09 2013 +0100

    Debug corner-case seeking anomaly.

commit aa474d362348248970090e22d476d1716723fae1
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 6 23:30:46 2013 +0100

    Improve interruption handling.

commit be9b7942c152ea3f2d7f8a30f934cd199009e205
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Jan 6 18:33:22 2013 +0100

    Fix Stale. Pol. support in GetValueAtTime.

commit f19ca0e8a5f5c5adc1e2c1ca464255f0481d7931
Merge: 8f010c9 52f52a7
Author: juliusv <julius@soundcloud.com>
Date:   Sat Jan 5 12:26:18 2013 -0800

    Merge pull request #20 from matttproud/feature/instrument-internals
    
    Feature/instrument internals

commit 52f52a7ee2405634ab19ff1b95bf8fe79b8e178f
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jan 4 17:55:58 2013 +0100

    Include nascent instrumentation of stack.

commit 8f010c9801ff6076c6408ba7b3d9ba9bf32548c7
Merge: 45a3e0a 2922def
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 4 08:36:36 2013 -0800

    Merge pull request #5 from matttproud/feature/scraping-infrastructure
    
    Full End-to-End Scraping Infrastructure

commit 2922def8d0ea80199f103ee7950ab32b685dc00d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jan 4 14:41:47 2013 +0100

    Use the ``TargetManager`` for targets.

commit 45a3e0a182fdacb50bb7ded7a18673abf456c6a9
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 4 13:03:32 2013 +0100

    Rename Target Frequency -> Interval.

commit 64dcf046b5e5fa00cccd935077ce8cff569f51b5
Merge: 65694be 7a9777b
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 4 03:59:29 2013 -0800

    Merge pull request #2 from matttproud/feature/scraping-infrastructure
    
    Create ``TargetPool`` priority queue.

commit 65694bea90e883f287f5ce00dcd77d3951744013
Merge: af88afa 4f7adbb
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 4 03:32:06 2013 -0800

    Merge pull request #3 from matttproud/fix/reduce-stochastic-test-time
    
    Reduce work level for stochastic tests.

commit 4f7adbbe7d8939ff320b10f749b698f65ff6b420
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jan 4 12:27:57 2013 +0100

    Reduce work level for stochastic tests.
    
    The LevelDB stochastic tests could take a long time.
    
    Original:
    ```
    Matt:prometheus mtp$ make test
    make -C model
    protoc --go_out=generated/ data.proto
    go build ./...
    go test ./...
    warning: building out-of-date packages:
    	github.com/matttproud/golang_instrumentation/maths
    	github.com/matttproud/golang_instrumentation/utility
    	github.com/matttproud/golang_instrumentation/metrics
    	github.com/matttproud/golang_instrumentation
    installing these packages with 'go test -i ./...' will speed future tests.
    
    ?   	github.com/matttproud/prometheus	[no test files]
    ?   	github.com/matttproud/prometheus/coding	[no test files]
    ok  	github.com/matttproud/prometheus/coding/indexable	0.012s
    ?   	github.com/matttproud/prometheus/model	[no test files]
    ?   	github.com/matttproud/prometheus/model/generated	[no test files]
    ?   	github.com/matttproud/prometheus/retrieval	[no test files]
    ?   	github.com/matttproud/prometheus/storage/metric	[no test files]
    ok  	github.com/matttproud/prometheus/storage/metric/leveldb	70.800s
    ?   	github.com/matttproud/prometheus/storage/raw	[no test files]
    ?   	github.com/matttproud/prometheus/storage/raw/index	[no test files]
    ok  	github.com/matttproud/prometheus/storage/raw/index/leveldb	0.012s
    ok  	github.com/matttproud/prometheus/storage/raw/leveldb	0.016s
    ok  	github.com/matttproud/prometheus/utility	0.012s
    ?   	github.com/matttproud/prometheus/utility/test	[no test files]
    ```
    
    to
    
    ```
    Matt:prometheus mtp$ make test
    make -C model
    protoc --go_out=generated/ data.proto
    go build ./...
    go test ./...
    warning: building out-of-date packages:
    	github.com/matttproud/golang_instrumentation/maths
    	github.com/matttproud/golang_instrumentation/utility
    	github.com/matttproud/golang_instrumentation/metrics
    	github.com/matttproud/golang_instrumentation
    installing these packages with 'go test -i ./...' will speed future tests.
    
    ?   	github.com/matttproud/prometheus	[no test files]
    ?   	github.com/matttproud/prometheus/coding	[no test files]
    ok  	github.com/matttproud/prometheus/coding/indexable	0.011s
    ?   	github.com/matttproud/prometheus/model	[no test files]
    ?   	github.com/matttproud/prometheus/model/generated	[no test files]
    ?   	github.com/matttproud/prometheus/retrieval	[no test files]
    ?   	github.com/matttproud/prometheus/storage/metric	[no test files]
    ok  	github.com/matttproud/prometheus/storage/metric/leveldb	2.158s
    ?   	github.com/matttproud/prometheus/storage/raw	[no test files]
    ?   	github.com/matttproud/prometheus/storage/raw/index	[no test files]
    ok  	github.com/matttproud/prometheus/storage/raw/index/leveldb	0.013s
    ok  	github.com/matttproud/prometheus/storage/raw/leveldb	0.013s
    ok  	github.com/matttproud/prometheus/utility	0.013s
    ?   	github.com/matttproud/prometheus/utility/test	[no test files]
    ```

commit 7a9777b4b56394fa57d6d6756df8add39dafd5e8
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Jan 4 12:17:31 2013 +0100

    Create ``TargetPool`` priority queue.
    
    ``TargetPool`` is a pool of targets pending scraping.  For now, it
    uses the ``heap.Interface`` from ``container/heap`` to provide a
    priority queue for the system to scrape from the next target.
    
    It is my supposition that we'll use a model whereby we create a
    ``TargetPool`` for each scrape interval, into which ``Target``
    instances are registered.

commit af88afaf5a3d6fff275dd3f35d8eef643d31a1bf
Author: Julius Volz <julius.volz@gmail.com>
Date:   Fri Jan 4 12:12:18 2013 +0100

    Remove unneeded String() method for SampleValue type.

commit 35706efabd6b055fbd8c2fcf71a504fd1e395291
Merge: 0886592 3ac5d48
Author: juliusv <julius@soundcloud.com>
Date:   Fri Jan 4 03:03:30 2013 -0800

    Merge pull request #1 from matttproud/refactor/major-simplifications-and-test-behaviors-and-sundry
    
    Refactor/major simplifications and test behaviors and sundry

commit 3ac5d48b1a373faa201f3fcd3143e9b436e97d78
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Dec 25 13:50:36 2012 +0100

    Impl' storage i'faces and fix non-idiomatic warts.
    
    This change includes implementation of most major storage layer
    features, albeit some imperfect.  It also includes nascent telemetry
    bindings, too.

commit a14dbd5bd0f8fee10802df7d543bf4be84d14935
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Dec 19 20:34:54 2012 +0100

    Interim commit for Julius.

commit 0886592ebcedac386fec21d6fac28ac02d659ffc
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Dec 12 12:53:34 2012 +0100

    New interface definition after discussion.

commit 59a708f25a2a58ced4be3c3515be3f0a347edfc0
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Dec 12 12:13:27 2012 +0100

    Provide prototype of storage layer interfaces.

commit 6589fc92f823dd388adf3223113798bfa3f5464d
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Tue Dec 11 20:46:16 2012 +0100

    Strip web services, which weren't adding value.

commit 577acf4fe7167bb462b6f8b52091a4aaddcbe784
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Dec 9 16:27:12 2012 +0100

    Exploding the storage infrastructure by contexts.

commit 15a66816517002d89c48cca40205edddbb9e62a7
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Fri Dec 7 11:55:43 2012 +0100

    Various cleanups.
    
    Kill LevelDB watermarks due to redundancy.
    
    General interface documentation has begun.
    
    Creating custom types for the model to prevent errors down the
    road.
    
    Renaming of components for easier comprehension.
    
    Exposition of interface in LevelDB.
    
    Slew of simple refactorings.

commit 4f0f8f9552dc1240f375e4dbd59ebe38c46e28cb
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Dec 1 13:30:23 2012 +0100

    Take into account nuances for Mac OS X.  :-(

commit c936df32912d6615fcad0f56cd8b851e5d52c134
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Dec 1 13:09:07 2012 +0100

    Revert "Revert "Handle overlay filesystem lifecycle.""
    
    This reverts commit 8adbec3f987490a5741d67d6dc9112fb18892685.

commit 8adbec3f987490a5741d67d6dc9112fb18892685
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Dec 1 12:52:45 2012 +0100

    Revert "Handle overlay filesystem lifecycle."
    
    This reverts commit 096b8d62ea5c71a88620e4ed4dc0b053ab3c9c0c.

commit 096b8d62ea5c71a88620e4ed4dc0b053ab3c9c0c
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Dec 1 12:47:12 2012 +0100

    Handle overlay filesystem lifecycle.
    
    It is reasonable to expect that the overlay filesystem will be managed.

commit c0ce859c76bcf2f059557e78bc69caaf6dc0c303
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Nov 29 20:55:30 2012 +0100

    A few re-organizations.

commit 43aeba269965cbb78e648015c84547dae705dce5
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Nov 29 20:42:32 2012 +0100

    Instruct ``gofmt`` to simplify output.

commit 044a5b4e14ca616681e52f7becf28fe831798dd7
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Nov 28 22:58:14 2012 +0100

    Add nascent Travis CI configuration.

commit 9f4bdaab50eaeb09adefe14dd31d4c1c68f5b398
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Nov 28 22:48:28 2012 +0100

    Major LevelDB metric end-to-end test improvements.
    
    Performance is enhanced through better range selection.

commit c1f0d8aefd59ec487dda7eeb827ea4e480f43eba
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Nov 28 20:22:49 2012 +0100

    Levigo -> LevelDB in terminology and references.

commit 2450cb3b1c7cb1e46e7c0c11da8d1fc8ad93d6f3
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Wed Nov 28 20:10:41 2012 +0100

    The clean rule clobbers ``.gitignore``.

commit 6ed67b02e2eb00fe3567f87df6427a127763cff4
Author: Matt T. Proud <matt@soundcloud.com>
Date:   Wed Nov 28 18:52:04 2012 +0100

    Incorporate new interface tests.

commit 44f8802ae76506fd17e0acb0a1261c9ce78a0710
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Nov 26 20:11:34 2012 +0100

    Add Apache License 2.0 boilerplate.

commit 2bbdaa579047ee0b200ab53dcf7110a83bb5f6ce
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Mon Nov 26 19:56:51 2012 +0100

    Initial directory re-arrangement for storage.

commit 8af1458b39d72c0abe7f410967a2463224511021
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Nov 25 16:12:59 2012 +0100

    Include ``.gitignore`` based on upstream.

commit 720442d3d3a70a377206d52806a38e5736d7901b
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Nov 25 16:07:05 2012 +0100

    Use index singleton and relocate encoder package.

commit b9928266b5018e4671eb49aec1c5c5ad7796e2df
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Nov 25 16:06:10 2012 +0100

    Kill the text editor swap file.

commit 11ec53f1b5a466407231fdbc67c0cb177062ac00
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sun Nov 25 16:04:58 2012 +0100

    Automate the documentation server.

commit 6072143505d1e98e969d50347ac7b9f79f5b6f1e
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Nov 24 12:33:34 2012 +0100

    Initial commit of external resources.

commit 734d28b515026ca9f429eba0a7d09954bceb6387
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Sat Nov 24 03:14:12 2012 -0800

    Initial commit
